import{B as Hu,C as Qu,D as Ju,E as Yu,I as Xu,J as Zu,K as el,L as tl,O as nl,a as Uu,b as Bu,c as ha,d as qu,e as rr,f as ju,g as ir,h as sr,i as $u,j as zu,k as De,l as Gu,p as Wu,q as Qt,u as Ku}from"./chunk-SFITRFMU.js";import{a as ne,b as rt,c as la}from"./chunk-7CGTOI24.js";var rl=[{path:"",loadChildren:()=>import("./chunk-JTALL7HW.js").then(r=>r.userRoutes),title:"Cuac Design"},{path:"admin",loadChildren:()=>import("./chunk-7RINTF54.js").then(r=>r.adminRoutes),data:{prerender:!1}},{path:"**",pathMatch:"full",redirectTo:""}];var il=()=>{};var ol=function(r){let e=[],n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},lp=function(r){let e=[],n=0,i=0;for(;n<r.length;){let o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){let u=r[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){let u=r[n++],h=r[n++],y=r[n++],v=((o&7)<<18|(u&63)<<12|(h&63)<<6|y&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{let u=r[n++],h=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},us={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){let u=r[o],h=o+1<r.length,y=h?r[o+1]:0,v=o+2<r.length,w=v?r[o+2]:0,b=u>>2,S=(u&3)<<4|y>>4,A=(y&15)<<2|w>>6,x=w&63;v||(x=64,h||(A=64)),i.push(n[b],n[S],n[A],n[x])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ol(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):lp(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){let u=n[r.charAt(o++)],y=o<r.length?n[r.charAt(o)]:0;++o;let w=o<r.length?n[r.charAt(o)]:64;++o;let S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||y==null||w==null||S==null)throw new fa;let A=u<<2|y>>4;if(i.push(A),w!==64){let x=y<<4&240|w>>2;if(i.push(x),S!==64){let R=w<<6&192|S;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}},fa=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},hp=function(r){let e=ol(r);return us.encodeByteArray(e,!0)},ma=function(r){return hp(r).replace(/\./g,"")},ls=function(r){try{return us.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ga(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var dp=()=>ga().__FIREBASE_DEFAULTS__,fp=()=>{if(typeof process>"u"||typeof process.env>"u")return;let r=process.env.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},pp=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=r&&ls(r[1]);return e&&JSON.parse(e)},al=()=>{try{return il()||dp()||fp()||pp()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}};var _a=()=>{var r;return(r=al())===null||r===void 0?void 0:r.config},cl=r=>{var e;return(e=al())===null||e===void 0?void 0:e[`_${r}`]};var Mn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function hs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ul(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function ll(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hl(){let r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function dl(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ti(){try{return typeof indexedDB=="object"}catch{return!1}}function fl(){return new Promise((r,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}var mp="FirebaseError",Oe=class r extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=mp,Object.setPrototypeOf(this,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,it.prototype.create)}},it=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?gp(u,i):"Error",y=`${this.serviceName}: ${h} (${o}).`;return new Oe(o,y,i)}};function gp(r,e){return r.replace(_p,(n,i)=>{let o=e[i];return o!=null?String(o):`<${i}?>`})}var _p=/\{\$([^}]+)}/g;function or(r,e){if(r===e)return!0;let n=Object.keys(r),i=Object.keys(e);for(let o of n){if(!i.includes(o))return!1;let u=r[o],h=e[o];if(sl(u)&&sl(h)){if(!or(u,h))return!1}else if(u!==h)return!1}for(let o of i)if(!n.includes(o))return!1;return!0}function sl(r){return r!==null&&typeof r=="object"}function ya(r){let e=[];for(let[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pl(r,e){let n=new pa(r,e);return n.subscribe.bind(n)}var pa=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");yp(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=da),o.error===void 0&&(o.error=da),o.complete===void 0&&(o.complete=da);let u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function yp(r,e){if(typeof r!="object"||r===null)return!1;for(let n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function da(){}var qv=14400*1e3;function Fn(r){return r&&r._delegate?r._delegate:r}var we=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Un="[DEFAULT]";var Ia=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new Mn;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),o=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ep(e))try{this.getOrInitializeService({instanceIdentifier:Un})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(n);try{let u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=Un){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Un){return this.instances.has(e)}getOptions(e=Un){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[u,h]of this.instancesDeferred.entries()){let y=this.normalizeInstanceIdentifier(u);i===y&&h.resolve(o)}return o}onInit(e,n){var i;let o=this.normalizeInstanceIdentifier(n),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);let h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ip(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Un){return this.component?this.component.multipleInstances?e:Un:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ip(r){return r===Un?void 0:r}function Ep(r){return r.instantiationMode==="EAGER"}var ds=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ia(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var vp=[],Z=(function(r){return r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT",r})(Z||{}),wp={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Tp=Z.INFO,Ap={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},bp=(r,e,...n)=>{if(e<r.logLevel)return;let i=new Date().toISOString(),o=Ap[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},lt=class{constructor(e){this.name=e,this._logLevel=Tp,this._logHandler=bp,this._userLogHandler=null,vp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var Sp=(r,e)=>e.some(n=>r instanceof n),ml,gl;function Rp(){return ml||(ml=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pp(){return gl||(gl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _l=new WeakMap,va=new WeakMap,yl=new WeakMap,Ea=new WeakMap,Ta=new WeakMap;function Cp(r){let e=new Promise((n,i)=>{let o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(ht(r.result)),o()},h=()=>{i(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&_l.set(n,r)}).catch(()=>{}),Ta.set(e,r),e}function kp(r){if(va.has(r))return;let e=new Promise((n,i)=>{let o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});va.set(r,e)}var wa={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return va.get(r);if(e==="objectStoreNames")return r.objectStoreNames||yl.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ht(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Il(r){wa=r(wa)}function Np(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=r.call(fs(this),e,...n);return yl.set(i,e.sort?e.sort():[e]),ht(i)}:Pp().includes(r)?function(...e){return r.apply(fs(this),e),ht(_l.get(this))}:function(...e){return ht(r.apply(fs(this),e))}}function Dp(r){return typeof r=="function"?Np(r):(r instanceof IDBTransaction&&kp(r),Sp(r,Rp())?new Proxy(r,wa):r)}function ht(r){if(r instanceof IDBRequest)return Cp(r);if(Ea.has(r))return Ea.get(r);let e=Dp(r);return e!==r&&(Ea.set(r,e),Ta.set(e,r)),e}var fs=r=>Ta.get(r);function ps(r,e,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){let h=indexedDB.open(r,e),y=ht(h);return i&&h.addEventListener("upgradeneeded",v=>{i(ht(h.result),v.oldVersion,v.newVersion,ht(h.transaction),v)}),n&&h.addEventListener("blocked",v=>n(v.oldVersion,v.newVersion,v)),y.then(v=>{u&&v.addEventListener("close",()=>u()),o&&v.addEventListener("versionchange",w=>o(w.oldVersion,w.newVersion,w))}).catch(()=>{}),y}var Op=["get","getKey","getAll","getAllKeys","count"],Vp=["put","add","delete","clear"],Aa=new Map;function El(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Aa.get(e))return Aa.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,o=Vp.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Op.includes(n)))return;let u=async function(h,...y){let v=this.transaction(h,o?"readwrite":"readonly"),w=v.store;return i&&(w=w.index(y.shift())),(await Promise.all([w[n](...y),o&&v.done]))[0]};return Aa.set(e,u),u}Il(r=>rt(ne({},r),{get:(e,n,i)=>El(e,n)||r.get(e,n,i),has:(e,n)=>!!El(e,n)||r.has(e,n)}));var Sa=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xp(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function xp(r){let e=r.getComponent();return e?.type==="VERSION"}var Ra="@firebase/app",vl="0.13.2";var xt=new lt("@firebase/app"),Lp="@firebase/app-compat",Mp="@firebase/analytics-compat",Fp="@firebase/analytics",Up="@firebase/app-check-compat",Bp="@firebase/app-check",qp="@firebase/auth",jp="@firebase/auth-compat",$p="@firebase/database",zp="@firebase/data-connect",Gp="@firebase/database-compat",Wp="@firebase/functions",Kp="@firebase/functions-compat",Hp="@firebase/installations",Qp="@firebase/installations-compat",Jp="@firebase/messaging",Yp="@firebase/messaging-compat",Xp="@firebase/performance",Zp="@firebase/performance-compat",em="@firebase/remote-config",tm="@firebase/remote-config-compat",nm="@firebase/storage",rm="@firebase/storage-compat",im="@firebase/firestore",sm="@firebase/ai",om="@firebase/firestore-compat",am="firebase",cm="11.10.0";var Pa="[DEFAULT]",um={[Ra]:"fire-core",[Lp]:"fire-core-compat",[Fp]:"fire-analytics",[Mp]:"fire-analytics-compat",[Bp]:"fire-app-check",[Up]:"fire-app-check-compat",[qp]:"fire-auth",[jp]:"fire-auth-compat",[$p]:"fire-rtdb",[zp]:"fire-data-connect",[Gp]:"fire-rtdb-compat",[Wp]:"fire-fn",[Kp]:"fire-fn-compat",[Hp]:"fire-iid",[Qp]:"fire-iid-compat",[Jp]:"fire-fcm",[Yp]:"fire-fcm-compat",[Xp]:"fire-perf",[Zp]:"fire-perf-compat",[em]:"fire-rc",[tm]:"fire-rc-compat",[nm]:"fire-gcs",[rm]:"fire-gcs-compat",[im]:"fire-fst",[om]:"fire-fst-compat",[sm]:"fire-vertex","fire-js":"fire-js",[am]:"fire-js-all"};var Ai=new Map,lm=new Map,Ca=new Map;function wl(r,e){try{r.container.addComponent(e)}catch(n){xt.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function st(r){let e=r.name;if(Ca.has(e))return xt.debug(`There were multiple attempts to register component ${e}.`),!1;Ca.set(e,r);for(let n of Ai.values())wl(n,r);for(let n of lm.values())wl(n,r);return!0}function Lt(r){return r==null?!1:r.settings!==void 0}var hm={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Jt=new it("app","Firebase",hm);var ka=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new we("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Jt.create("app-deleted",{appName:this._name})}};var ar=cm;function Sl(r,e={}){let n=r;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Pa,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw Jt.create("bad-app-name",{appName:String(o)});if(n||(n=_a()),!n)throw Jt.create("no-options");let u=Ai.get(o);if(u){if(or(n,u.options)&&or(i,u.config))return u;throw Jt.create("duplicate-app",{appName:o})}let h=new ds(o);for(let v of Ca.values())h.addComponent(v);let y=new ka(n,i,h);return Ai.set(o,y),y}function Si(r=Pa){let e=Ai.get(r);if(!e&&r===Pa&&_a())return Sl();if(!e)throw Jt.create("no-app",{appName:r});return e}function ms(){return Array.from(Ai.values())}function oe(r,e,n){var i;let o=(i=um[r])!==null&&i!==void 0?i:r;n&&(o+=`-${n}`);let u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){let y=[`Unable to register library "${o}" with version "${e}":`];u&&y.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&y.push("and"),h&&y.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xt.warn(y.join(" "));return}st(new we(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}var dm="firebase-heartbeat-database",fm=1,bi="firebase-heartbeat-store",ba=null;function Rl(){return ba||(ba=ps(dm,fm,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(bi)}catch(n){console.warn(n)}}}}).catch(r=>{throw Jt.create("idb-open",{originalErrorMessage:r.message})})),ba}async function pm(r){try{let n=(await Rl()).transaction(bi),i=await n.objectStore(bi).get(Pl(r));return await n.done,i}catch(e){if(e instanceof Oe)xt.warn(e.message);else{let n=Jt.create("idb-get",{originalErrorMessage:e?.message});xt.warn(n.message)}}}async function Tl(r,e){try{let i=(await Rl()).transaction(bi,"readwrite");await i.objectStore(bi).put(e,Pl(r)),await i.done}catch(n){if(n instanceof Oe)xt.warn(n.message);else{let i=Jt.create("idb-set",{originalErrorMessage:n?.message});xt.warn(i.message)}}}function Pl(r){return`${r.name}!${r.options.appId}`}var mm=1024,gm=30,Na=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Da(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{let o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Al();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>gm){let h=ym(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xt.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Al(),{heartbeatsToSend:i,unsentEntries:o}=_m(this._heartbeatsCache.heartbeats),u=ma(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return xt.warn(n),""}}};function Al(){return new Date().toISOString().substring(0,10)}function _m(r,e=mm){let n=[],i=r.slice();for(let o of r){let u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),bl(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),bl(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var Da=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ti()?fl().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await pm(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){let o=await this.read();return Tl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){let o=await this.read();return Tl(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}};function bl(r){return ma(JSON.stringify({version:2,heartbeats:r})).length}function ym(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}function Im(r){st(new we("platform-logger",e=>new Sa(e),"PRIVATE")),st(new we("heartbeat",e=>new Na(e),"PRIVATE")),oe(Ra,vl,r),oe(Ra,vl,"esm2017"),oe("fire-js","")}Im("");var Em="firebase",vm="11.10.0";oe(Em,vm,"app");var Yt=new Qu("ANGULARFIRE2_VERSION");function Ri(r,e,n){if(e){if(e.length===1)return e[0];let u=e.filter(h=>h.app===n);if(u.length===1)return u[0]}return n.container.getProvider(r).getImmediate({optional:!0})}var cr=(r,e)=>{let n=e?[e]:ms(),i=[];return n.forEach(o=>{o.container.getProvider(r).instances.forEach(h=>{i.includes(h)||i.push(h)})}),i},Oa=(function(r){return r[r.SILENT=0]="SILENT",r[r.WARN=1]="WARN",r[r.VERBOSE=2]="VERBOSE",r})(Oa||{}),yw=Yu()&&typeof Zone<"u"?Oa.WARN:Oa.SILENT;var gs=class{zone;delegate;constructor(e,n=Bu){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let o=this.zone,u=function(h){o?o.runGuarded(()=>{e.apply(this,[h])}):e.apply(this,[h])};return this.delegate.schedule(u,n,i)}},Bn=(()=>{class r{outsideAngular;insideAngular;constructor(){let n=ju(Qt);this.outsideAngular=n.runOutsideAngular(()=>new gs(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new gs(typeof Zone>"u"?void 0:Zone.current,Uu))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=qu({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Mt=class{constructor(e){return e}},qn=class{constructor(){return ms()}};function Tm(r){return r&&r.length===1?r[0]:new Mt(Si())}var xa=new rr("angularfire2._apps"),Am={provide:Mt,useFactory:Tm,deps:[[new De,xa]]},bm={provide:qn,deps:[[new De,xa]]};function Sm(r){return(e,n)=>{let i=n.get(Gu);oe("angularfire",Yt.full,"core"),oe("angularfire",Yt.full,"app"),oe("angular",Ju.full,i.toString());let o=e.runOutsideAngular(()=>r(n));return new Mt(o)}}function La(r,...e){return ir([Am,bm,{provide:xa,useFactory:Sm(r),multi:!0,deps:[Qt,sr,Bn,...e]}])}var Rm=new Map,Pm={activated:!1,tokenObservers:[]},Cm={initialized:!1,enabled:!1};function ot(r){return Rm.get(r)||Object.assign({},Pm)}function Ol(){return Cm}var km="https://content-firebaseappcheck.googleapis.com/v1";var Nm="exchangeDebugToken",Cl={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Mw=1440*60*1e3;var Ua=class{constructor(e,n,i,o,u){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Mn,this.pending.promise.catch(n=>{}),await Dm(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Mn,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Dm(r){return new Promise(e=>{setTimeout(e,r)})}var Om={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Xt=new it("appCheck","AppCheck",Om);function Vl(r){if(!ot(r).activated)throw Xt.create("use-before-activation",{appName:r.name})}async function xl({url:r,body:e},n){let i={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let S=await o.getHeartbeatsHeader();S&&(i["X-Firebase-Client"]=S)}let u={method:"POST",body:JSON.stringify(e),headers:i},h;try{h=await fetch(r,u)}catch(S){throw Xt.create("fetch-network-error",{originalErrorMessage:S?.message})}if(h.status!==200)throw Xt.create("fetch-status-error",{httpStatus:h.status});let y;try{y=await h.json()}catch(S){throw Xt.create("fetch-parse-error",{originalErrorMessage:S?.message})}let v=y.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw Xt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});let w=Number(v[1])*1e3,b=Date.now();return{token:y.token,expireTimeMillis:b+w,issuedAtTimeMillis:b}}function Ll(r,e){let{projectId:n,appId:i,apiKey:o}=r.options;return{url:`${km}/projects/${n}/apps/${i}:${Nm}?key=${o}`,body:{debug_token:e}}}var Vm="firebase-app-check-database",xm=1,Ba="firebase-app-check-store";var _s=null;function Lm(){return _s||(_s=new Promise((r,e)=>{try{let n=indexedDB.open(Vm,xm);n.onsuccess=i=>{r(i.target.result)},n.onerror=i=>{var o;e(Xt.create("storage-open",{originalErrorMessage:(o=i.target.error)===null||o===void 0?void 0:o.message}))},n.onupgradeneeded=i=>{let o=i.target.result;switch(i.oldVersion){case 0:o.createObjectStore(Ba,{keyPath:"compositeKey"})}}}catch(n){e(Xt.create("storage-open",{originalErrorMessage:n?.message}))}}),_s)}function Mm(r,e){return Fm(Um(r),e)}async function Fm(r,e){let i=(await Lm()).transaction(Ba,"readwrite"),u=i.objectStore(Ba).put({compositeKey:r,value:e});return new Promise((h,y)=>{u.onsuccess=v=>{h()},i.onerror=v=>{var w;y(Xt.create("storage-set",{originalErrorMessage:(w=v.target.error)===null||w===void 0?void 0:w.message}))}})}function Um(r){return`${r.options.appId}-${r.name}`}var Pi=new lt("@firebase/app-check");function Ma(r,e){return Ti()?Mm(r,e).catch(n=>{Pi.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Ml(){return Ol().enabled}async function Fl(){let r=Ol();if(r.enabled&&r.token)return r.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var Bm={error:"UNKNOWN_ERROR"};function qm(r){return us.encodeString(JSON.stringify(r),!1)}async function qa(r,e=!1,n=!1){let i=r.app;Vl(i);let o=ot(i),u=o.token,h;if(u&&!Ci(u)&&(o.token=void 0,u=void 0),!u){let w=await o.cachedTokenPromise;w&&(Ci(w)?u=w:await Ma(i,void 0))}if(!e&&u&&Ci(u))return{token:u.token};let y=!1;if(Ml())try{o.exchangeTokenPromise||(o.exchangeTokenPromise=xl(Ll(i,await Fl()),r.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),y=!0);let w=await o.exchangeTokenPromise;return await Ma(i,w),o.token=w,{token:w.token}}catch(w){return w.code==="appCheck/throttled"||w.code==="appCheck/initial-throttle"?Pi.warn(w.message):n&&Pi.error(w),Fa(w)}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),y=!0),u=await ot(i).exchangeTokenPromise}catch(w){w.code==="appCheck/throttled"||w.code==="appCheck/initial-throttle"?Pi.warn(w.message):n&&Pi.error(w),h=w}let v;return u?h?Ci(u)?v={token:u.token,internalError:h}:v=Fa(h):(v={token:u.token},o.token=u,await Ma(i,u)):v=Fa(h),y&&Gm(i,v),v}async function jm(r){let e=r.app;Vl(e);let{provider:n}=ot(e);if(Ml()){let i=await Fl(),{token:o}=await xl(Ll(e,i),r.heartbeatServiceProvider);return{token:o}}else{let{token:i}=await n.getToken();return{token:i}}}function $m(r,e,n,i){let{app:o}=r,u=ot(o),h={next:n,error:i,type:e};if(u.tokenObservers=[...u.tokenObservers,h],u.token&&Ci(u.token)){let y=u.token;Promise.resolve().then(()=>{n({token:y.token}),kl(r)}).catch(()=>{})}u.cachedTokenPromise.then(()=>kl(r))}function Ul(r,e){let n=ot(r),i=n.tokenObservers.filter(o=>o.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function kl(r){let{app:e}=r,n=ot(e),i=n.tokenRefresher;i||(i=zm(r),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function zm(r){let{app:e}=r;return new Ua(async()=>{let n=ot(e),i;if(n.token?i=await qa(r,!0):i=await qa(r),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{let n=ot(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,o=n.token.expireTimeMillis-300*1e3;return i=Math.min(i,o),Math.max(0,i-Date.now())}else return 0},Cl.RETRIAL_MIN_WAIT,Cl.RETRIAL_MAX_WAIT)}function Gm(r,e){let n=ot(r).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Ci(r){return r.expireTimeMillis-Date.now()>0}function Fa(r){return{token:qm(Bm),error:r}}var ja=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=ot(this.app);for(let n of e)Ul(this.app,n.next);return Promise.resolve()}};function Wm(r,e){return new ja(r,e)}function Km(r){return{getToken:e=>qa(r,e),getLimitedUseToken:()=>jm(r),addTokenListener:e=>$m(r,"INTERNAL",e),removeTokenListener:e=>Ul(r.app,e)}}var Hm="@firebase/app-check",Qm="0.10.1";var Jm="app-check",Nl="app-check-internal";function Ym(){st(new we(Jm,r=>{let e=r.getProvider("app").getImmediate(),n=r.getProvider("heartbeat");return Wm(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,e,n)=>{r.getProvider(Nl).initialize()})),st(new we(Nl,r=>{let e=r.getProvider("app-check").getImmediate();return Km(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),oe(Hm,Qm)}Ym();var Xm="app-check";var ur=class{constructor(){return cr(Xm)}};var Zm=["localhost","0.0.0.0","127.0.0.1"],Qw=typeof window<"u"&&Zm.includes(window.location.hostname);function Kl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Hl=Kl,Ql=new it("auth","Firebase",Kl());var vs=new lt("@firebase/auth");function ng(r,...e){vs.logLevel<=Z.WARN&&vs.warn(`Auth (${ar}): ${r}`,...e)}function Is(r,...e){vs.logLevel<=Z.ERROR&&vs.error(`Auth (${ar}): ${r}`,...e)}function Bl(r,...e){throw ec(r,...e)}function Za(r,...e){return ec(r,...e)}function Jl(r,e,n){let i=Object.assign(Object.assign({},Hl()),{[e]:n});return new it("auth","Firebase",i).create(e,{appName:r.name})}function Es(r){return Jl(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ec(r,...e){if(typeof r!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return Ql.create(r,...e)}function J(r,e,...n){if(!r)throw ec(e,...n)}function ki(r){let e="INTERNAL ASSERTION FAILED: "+r;throw Is(e),new Error(e)}function ws(r,e){r||ki(e)}function rg(){return ql()==="http:"||ql()==="https:"}function ql(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}function ig(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rg()||hl()||"connection"in navigator)?navigator.onLine:!0}function sg(){if(typeof navigator>"u")return null;let r=navigator;return r.languages&&r.languages[0]||r.language||null}var zn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ws(n>e,"Short delay should be less than long delay!"),this.isMobile=ul()||dl()}get(){return ig()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function og(r,e){ws(r.emulator,"Emulator should always be set here");let{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ts=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var ag={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var cg=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ug=new zn(3e4,6e4);function Yl(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Ps(r,e,n,i,o={}){return Xl(r,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});let y=ya(Object.assign({key:r.config.apiKey},h)).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);let w=Object.assign({method:e,headers:v},u);return ll()||(w.referrerPolicy="no-referrer"),r.emulatorConfig&&hs(r.emulatorConfig.host)&&(w.credentials="include"),Ts.fetch()(await Zl(r,r.config.apiHost,n,y),w)})}async function Xl(r,e,n){r._canInitEmulator=!1;let i=Object.assign(Object.assign({},ag),e);try{let o=new Ga(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();let h=await u.json();if("needConfirmation"in h)throw ys(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{let y=u.ok?h.errorMessage:h.error.message,[v,w]=y.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw ys(r,"credential-already-in-use",h);if(v==="EMAIL_EXISTS")throw ys(r,"email-already-in-use",h);if(v==="USER_DISABLED")throw ys(r,"user-disabled",h);let b=i[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw Jl(r,b,w);Bl(r,b)}}catch(o){if(o instanceof Oe)throw o;Bl(r,"network-request-failed",{message:String(o)})}}async function Zl(r,e,n,i){let o=`${e}${n}?${i}`,u=r,h=u.config.emulator?og(r.config,o):`${r.config.apiScheme}://${o}`;return cg.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}var Ga=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Za(this.auth,"network-request-failed")),ug.get())})}};function ys(r,e,n){let i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let o=Za(r,e,i);return o.customData._tokenResponse=n,o}async function lg(r,e){return Ps(r,"POST","/v1/accounts:delete",e)}async function As(r,e){return Ps(r,"POST","/v1/accounts:lookup",e)}function Ni(r){if(r)try{let e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tc(r,e=!1){let n=Fn(r),i=await n.getIdToken(e),o=eh(i);J(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");let u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:i,authTime:Ni($a(o.auth_time)),issuedAtTime:Ni($a(o.iat)),expirationTime:Ni($a(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function $a(r){return Number(r)*1e3}function eh(r){let[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return Is("JWT malformed, contained fewer than 3 sections"),null;try{let o=ls(n);return o?JSON.parse(o):(Is("Failed to decode base64 JWT payload"),null)}catch(o){return Is("Caught error parsing JWT payload as JSON",o?.toString()),null}}function jl(r){let e=eh(r);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Wa(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Oe&&hg(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function hg({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}var Ka=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Oi=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ni(this.lastLoginAt),this.creationTime=Ni(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function bs(r){var e;let n=r.auth,i=await r.getIdToken(),o=await Wa(r,As(n,{idToken:i}));J(o?.users.length,n,"internal-error");let u=o.users[0];r._notifyReloadListener(u);let h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?th(u.providerUserInfo):[],y=dg(r.providerData,h),v=r.isAnonymous,w=!(r.email&&u.passwordHash)&&!y?.length,b=v?w:!1,S={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:y,metadata:new Oi(u.createdAt,u.lastLoginAt),isAnonymous:b};Object.assign(r,S)}async function nc(r){let e=Fn(r);await bs(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dg(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function th(r){return r.map(e=>{var{providerId:n}=e,i=ha(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function fg(r,e){let n=await Xl(r,{},async()=>{let i=ya({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await Zl(r,o,"/v1/token",`key=${u}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";let v={method:"POST",headers:y,body:i};return r.emulatorConfig&&hs(r.emulatorConfig.host)&&(v.credentials="include"),Ts.fetch()(h,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pg(r,e){return Ps(r,"POST","/v2/accounts:revokeToken",Yl(r,e))}var Di=class r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jl(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");let n=jl(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:i,refreshToken:o,expiresIn:u}=await fg(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:o,expirationTime:u}=n,h=new r;return i&&(J(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(J(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(J(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new r,this.toJSON())}_performRefresh(){return ki("not implemented")}};function Zt(r,e){J(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}var jn=class r{constructor(e){var{uid:n,auth:i,stsTokenManager:o}=e,u=ha(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ka(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Oi(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){let n=await Wa(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tc(this,e)}reload(){return nc(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await bs(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lt(this.auth.app))return Promise.reject(Es(this.auth));let e=await this.getIdToken();return await Wa(this,lg(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,o,u,h,y,v,w,b;let S=(i=n.displayName)!==null&&i!==void 0?i:void 0,A=(o=n.email)!==null&&o!==void 0?o:void 0,x=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,R=(h=n.photoURL)!==null&&h!==void 0?h:void 0,V=(y=n.tenantId)!==null&&y!==void 0?y:void 0,N=(v=n._redirectEventId)!==null&&v!==void 0?v:void 0,re=(w=n.createdAt)!==null&&w!==void 0?w:void 0,K=(b=n.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:q,emailVerified:se,isAnonymous:Ne,providerData:te,stsTokenManager:_}=n;J(q&&_,e,"internal-error");let l=Di.fromJSON(this.name,_);J(typeof q=="string",e,"internal-error"),Zt(S,e.name),Zt(A,e.name),J(typeof se=="boolean",e,"internal-error"),J(typeof Ne=="boolean",e,"internal-error"),Zt(x,e.name),Zt(R,e.name),Zt(V,e.name),Zt(N,e.name),Zt(re,e.name),Zt(K,e.name);let f=new r({uid:q,auth:e,email:A,emailVerified:se,displayName:S,isAnonymous:Ne,photoURL:R,phoneNumber:x,tenantId:V,stsTokenManager:l,createdAt:re,lastLoginAt:K});return te&&Array.isArray(te)&&(f.providerData=te.map(p=>Object.assign({},p))),N&&(f._redirectEventId=N),f}static async _fromIdTokenResponse(e,n,i=!1){let o=new Di;o.updateFromServerResponse(n);let u=new r({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await bs(u),u}static async _fromGetAccountInfoResponse(e,n,i){let o=n.users[0];J(o.localId!==void 0,"internal-error");let u=o.providerUserInfo!==void 0?th(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,y=new Di;y.updateFromIdToken(i);let v=new r({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:h}),w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Oi(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(v,w),v}};var $l=new Map;function $n(r){ws(r instanceof Function,"Expected a class definition");let e=$l.get(r);return e?(ws(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,$l.set(r,e),e)}var mg=(()=>{class r{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,i){this.storage[n]=i}async _get(n){let i=this.storage[n];return i===void 0?null:i}async _remove(n){delete this.storage[n]}_addListener(n,i){}_removeListener(n,i){}}return r.type="NONE",r})(),Ha=mg;function za(r,e,n){return`firebase:${r}:${e}:${n}`}var Ss=class r{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:o,name:u}=this.auth;this.fullUserKey=za(this.userKey,o.apiKey,u),this.fullPersistenceKey=za("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await As(this.auth,{idToken:e}).catch(()=>{});return n?jn._fromGetAccountInfoResponse(this.auth,n,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new r($n(Ha),e,i);let o=(await Promise.all(n.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w),u=o[0]||$n(Ha),h=za(i,e.config.apiKey,e.name),y=null;for(let w of n)try{let b=await w._get(h);if(b){let S;if(typeof b=="string"){let A=await As(e,{idToken:b}).catch(()=>{});if(!A)break;S=await jn._fromGetAccountInfoResponse(e,A,b)}else S=jn._fromJSON(e,b);w!==u&&(y=S),u=w;break}}catch{}let v=o.filter(w=>w._shouldAllowMigration);return!u._shouldAllowMigration||!v.length?new r(u,e,i):(u=v[0],y&&await u._set(h,y.toJSON()),await Promise.all(n.map(async w=>{if(w!==u)try{await w._remove(h)}catch{}})),new r(u,e,i))}};function zl(r){let e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ig(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gg(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vg(e))return"Blackberry";if(wg(e))return"Webos";if(_g(e))return"Safari";if((e.includes("chrome/")||yg(e))&&!e.includes("edge/"))return"Chrome";if(Eg(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if(i?.length===2)return i[1]}return"Other"}function gg(r=Ve()){return/firefox\//i.test(r)}function _g(r=Ve()){let e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yg(r=Ve()){return/crios\//i.test(r)}function Ig(r=Ve()){return/iemobile/i.test(r)}function Eg(r=Ve()){return/android/i.test(r)}function vg(r=Ve()){return/blackberry/i.test(r)}function wg(r=Ve()){return/webos/i.test(r)}function nh(r,e=[]){let n;switch(r){case"Browser":n=zl(Ve());break;case"Worker":n=`${zl(Ve())}-${r}`;break;default:n=r}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ar}/${i}`}var Qa=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=u=>new Promise((h,y)=>{try{let v=e(u);h(v)}catch(v){y(v)}});i.onAbort=n,this.queue.push(i);let o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function Tg(r,e={}){return Ps(r,"GET","/v2/passwordPolicy",Yl(r,e))}var Ag=6,Ja=class{constructor(e){var n,i,o,u;let h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=h.minPasswordLength)!==null&&n!==void 0?n:Ag,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,o,u,h,y;let v={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,v),this.validatePasswordCharacterOptions(e,v),v.isValid&&(v.isValid=(n=v.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),v.isValid&&(v.isValid=(i=v.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),v.isValid&&(v.isValid=(o=v.containsLowercaseLetter)!==null&&o!==void 0?o:!0),v.isValid&&(v.isValid=(u=v.containsUppercaseLetter)!==null&&u!==void 0?u:!0),v.isValid&&(v.isValid=(h=v.containsNumericCharacter)!==null&&h!==void 0?h:!0),v.isValid&&(v.isValid=(y=v.containsNonAlphanumericCharacter)!==null&&y!==void 0?y:!0),v}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}};var Ya=class{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rs(this),this.idTokenSubscription=new Rs(this),this.beforeStateQueue=new Qa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ql,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$n(n)),this._initializationPromise=this.queue(async()=>{var i,o,u;if(!this._deleted&&(this.persistenceManager=await Ss.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await As(this,{idToken:e}),i=await jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Lt(this.app)){let h=this.app.settings.authIdToken;return h?new Promise(y=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(y,y))}):this.directlySetCurrentUser(null)}let i=await this.assertedPersistence.getCurrentUser(),o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let h=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,y=o?._redirectEventId,v=await this.tryRedirectSignIn(e);(!h||h===y)&&v?.user&&(o=v.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bs(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sg()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Lt(this.app))return Promise.reject(Es(this));let n=e?Fn(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Lt(this.app)?Promise.reject(Es(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Lt(this.app)?Promise.reject(Es(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($n(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Tg(this),n=new Ja(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new it("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await pg(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){let i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&$n(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ss.create(this,[$n(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};let u=typeof n=="function"?n:n.next.bind(n),h=!1,y=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(y,this,"internal-error"),y.then(()=>{h||u(this.currentUser)}),typeof n=="function"){let v=e.addObserver(n,i,o);return()=>{h=!0,v()}}else{let v=e.addObserver(n);return()=>{h=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);let o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Lt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&ng(`Error while retrieving App Check token: ${n.error}`),n?.token}};function bg(r){return Fn(r)}var Rs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pl(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Sg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Rg(r){Sg=r}function Pg(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function Cg(r,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map($n);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}var cT=Pg("rcb"),uT=new zn(3e4,6e4);var lT=new zn(2e3,1e4);var hT=600*1e3;var dT=new zn(3e4,6e4);var fT=new zn(5e3,15e3);var pT=encodeURIComponent("fac");var Gl="@firebase/auth",Wl="1.10.8";var Xa=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kg(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ng(r){st(new we("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:y}=i.options;J(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});let v={apiKey:h,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nh(r)},w=new Ya(i,o,u,v);return Cg(w,n),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),st(new we("auth-internal",e=>{let n=bg(e.getProvider("auth").getImmediate());return(i=>new Xa(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),oe(Gl,Wl,kg(r)),oe(Gl,Wl,"esm2017")}var Dg=300,mT=cl("authIdTokenMaxAge")||Dg;function Og(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}Rg({loadJS(r){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{let u=Za("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",Og().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ng("Browser");var rh="auth",Vi=class{constructor(e){return e}},xi=class{constructor(){return cr(rh)}};var rc=new rr("angularfire2.auth-instances");function N_(r,e){let n=Ri(rh,r,e);return n&&new Vi(n)}function D_(r){return(e,n)=>{let i=e.runOutsideAngular(()=>r(n));return new Vi(i)}}var O_={provide:xi,deps:[[new De,rc]]},V_={provide:Vi,useFactory:N_,deps:[[new De,rc],Mt]};function ic(r,...e){return oe("angularfire",Yt.full,"auth"),ir([V_,O_,{provide:rc,useFactory:D_(r),multi:!0,deps:[Qt,sr,Bn,qn,[new De,ur],...e]}])}var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sh={};var Cs,oh;(function(){var r;function e(_,l){function f(){}f.prototype=l.prototype,_.D=l.prototype,_.prototype=new f,_.prototype.constructor=_,_.C=function(p,m,I){for(var d=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)d[ue-2]=arguments[ue];return l.prototype[m].apply(p,d)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(_,l,f){f||(f=0);var p=Array(16);if(typeof l=="string")for(var m=0;16>m;++m)p[m]=l.charCodeAt(f++)|l.charCodeAt(f++)<<8|l.charCodeAt(f++)<<16|l.charCodeAt(f++)<<24;else for(m=0;16>m;++m)p[m]=l[f++]|l[f++]<<8|l[f++]<<16|l[f++]<<24;l=_.g[0],f=_.g[1],m=_.g[2];var I=_.g[3],d=l+(I^f&(m^I))+p[0]+3614090360&4294967295;l=f+(d<<7&4294967295|d>>>25),d=I+(m^l&(f^m))+p[1]+3905402710&4294967295,I=l+(d<<12&4294967295|d>>>20),d=m+(f^I&(l^f))+p[2]+606105819&4294967295,m=I+(d<<17&4294967295|d>>>15),d=f+(l^m&(I^l))+p[3]+3250441966&4294967295,f=m+(d<<22&4294967295|d>>>10),d=l+(I^f&(m^I))+p[4]+4118548399&4294967295,l=f+(d<<7&4294967295|d>>>25),d=I+(m^l&(f^m))+p[5]+1200080426&4294967295,I=l+(d<<12&4294967295|d>>>20),d=m+(f^I&(l^f))+p[6]+2821735955&4294967295,m=I+(d<<17&4294967295|d>>>15),d=f+(l^m&(I^l))+p[7]+4249261313&4294967295,f=m+(d<<22&4294967295|d>>>10),d=l+(I^f&(m^I))+p[8]+1770035416&4294967295,l=f+(d<<7&4294967295|d>>>25),d=I+(m^l&(f^m))+p[9]+2336552879&4294967295,I=l+(d<<12&4294967295|d>>>20),d=m+(f^I&(l^f))+p[10]+4294925233&4294967295,m=I+(d<<17&4294967295|d>>>15),d=f+(l^m&(I^l))+p[11]+2304563134&4294967295,f=m+(d<<22&4294967295|d>>>10),d=l+(I^f&(m^I))+p[12]+1804603682&4294967295,l=f+(d<<7&4294967295|d>>>25),d=I+(m^l&(f^m))+p[13]+4254626195&4294967295,I=l+(d<<12&4294967295|d>>>20),d=m+(f^I&(l^f))+p[14]+2792965006&4294967295,m=I+(d<<17&4294967295|d>>>15),d=f+(l^m&(I^l))+p[15]+1236535329&4294967295,f=m+(d<<22&4294967295|d>>>10),d=l+(m^I&(f^m))+p[1]+4129170786&4294967295,l=f+(d<<5&4294967295|d>>>27),d=I+(f^m&(l^f))+p[6]+3225465664&4294967295,I=l+(d<<9&4294967295|d>>>23),d=m+(l^f&(I^l))+p[11]+643717713&4294967295,m=I+(d<<14&4294967295|d>>>18),d=f+(I^l&(m^I))+p[0]+3921069994&4294967295,f=m+(d<<20&4294967295|d>>>12),d=l+(m^I&(f^m))+p[5]+3593408605&4294967295,l=f+(d<<5&4294967295|d>>>27),d=I+(f^m&(l^f))+p[10]+38016083&4294967295,I=l+(d<<9&4294967295|d>>>23),d=m+(l^f&(I^l))+p[15]+3634488961&4294967295,m=I+(d<<14&4294967295|d>>>18),d=f+(I^l&(m^I))+p[4]+3889429448&4294967295,f=m+(d<<20&4294967295|d>>>12),d=l+(m^I&(f^m))+p[9]+568446438&4294967295,l=f+(d<<5&4294967295|d>>>27),d=I+(f^m&(l^f))+p[14]+3275163606&4294967295,I=l+(d<<9&4294967295|d>>>23),d=m+(l^f&(I^l))+p[3]+4107603335&4294967295,m=I+(d<<14&4294967295|d>>>18),d=f+(I^l&(m^I))+p[8]+1163531501&4294967295,f=m+(d<<20&4294967295|d>>>12),d=l+(m^I&(f^m))+p[13]+2850285829&4294967295,l=f+(d<<5&4294967295|d>>>27),d=I+(f^m&(l^f))+p[2]+4243563512&4294967295,I=l+(d<<9&4294967295|d>>>23),d=m+(l^f&(I^l))+p[7]+1735328473&4294967295,m=I+(d<<14&4294967295|d>>>18),d=f+(I^l&(m^I))+p[12]+2368359562&4294967295,f=m+(d<<20&4294967295|d>>>12),d=l+(f^m^I)+p[5]+4294588738&4294967295,l=f+(d<<4&4294967295|d>>>28),d=I+(l^f^m)+p[8]+2272392833&4294967295,I=l+(d<<11&4294967295|d>>>21),d=m+(I^l^f)+p[11]+1839030562&4294967295,m=I+(d<<16&4294967295|d>>>16),d=f+(m^I^l)+p[14]+4259657740&4294967295,f=m+(d<<23&4294967295|d>>>9),d=l+(f^m^I)+p[1]+2763975236&4294967295,l=f+(d<<4&4294967295|d>>>28),d=I+(l^f^m)+p[4]+1272893353&4294967295,I=l+(d<<11&4294967295|d>>>21),d=m+(I^l^f)+p[7]+4139469664&4294967295,m=I+(d<<16&4294967295|d>>>16),d=f+(m^I^l)+p[10]+3200236656&4294967295,f=m+(d<<23&4294967295|d>>>9),d=l+(f^m^I)+p[13]+681279174&4294967295,l=f+(d<<4&4294967295|d>>>28),d=I+(l^f^m)+p[0]+3936430074&4294967295,I=l+(d<<11&4294967295|d>>>21),d=m+(I^l^f)+p[3]+3572445317&4294967295,m=I+(d<<16&4294967295|d>>>16),d=f+(m^I^l)+p[6]+76029189&4294967295,f=m+(d<<23&4294967295|d>>>9),d=l+(f^m^I)+p[9]+3654602809&4294967295,l=f+(d<<4&4294967295|d>>>28),d=I+(l^f^m)+p[12]+3873151461&4294967295,I=l+(d<<11&4294967295|d>>>21),d=m+(I^l^f)+p[15]+530742520&4294967295,m=I+(d<<16&4294967295|d>>>16),d=f+(m^I^l)+p[2]+3299628645&4294967295,f=m+(d<<23&4294967295|d>>>9),d=l+(m^(f|~I))+p[0]+4096336452&4294967295,l=f+(d<<6&4294967295|d>>>26),d=I+(f^(l|~m))+p[7]+1126891415&4294967295,I=l+(d<<10&4294967295|d>>>22),d=m+(l^(I|~f))+p[14]+2878612391&4294967295,m=I+(d<<15&4294967295|d>>>17),d=f+(I^(m|~l))+p[5]+4237533241&4294967295,f=m+(d<<21&4294967295|d>>>11),d=l+(m^(f|~I))+p[12]+1700485571&4294967295,l=f+(d<<6&4294967295|d>>>26),d=I+(f^(l|~m))+p[3]+2399980690&4294967295,I=l+(d<<10&4294967295|d>>>22),d=m+(l^(I|~f))+p[10]+4293915773&4294967295,m=I+(d<<15&4294967295|d>>>17),d=f+(I^(m|~l))+p[1]+2240044497&4294967295,f=m+(d<<21&4294967295|d>>>11),d=l+(m^(f|~I))+p[8]+1873313359&4294967295,l=f+(d<<6&4294967295|d>>>26),d=I+(f^(l|~m))+p[15]+4264355552&4294967295,I=l+(d<<10&4294967295|d>>>22),d=m+(l^(I|~f))+p[6]+2734768916&4294967295,m=I+(d<<15&4294967295|d>>>17),d=f+(I^(m|~l))+p[13]+1309151649&4294967295,f=m+(d<<21&4294967295|d>>>11),d=l+(m^(f|~I))+p[4]+4149444226&4294967295,l=f+(d<<6&4294967295|d>>>26),d=I+(f^(l|~m))+p[11]+3174756917&4294967295,I=l+(d<<10&4294967295|d>>>22),d=m+(l^(I|~f))+p[2]+718787259&4294967295,m=I+(d<<15&4294967295|d>>>17),d=f+(I^(m|~l))+p[9]+3951481745&4294967295,_.g[0]=_.g[0]+l&4294967295,_.g[1]=_.g[1]+(m+(d<<21&4294967295|d>>>11))&4294967295,_.g[2]=_.g[2]+m&4294967295,_.g[3]=_.g[3]+I&4294967295}i.prototype.u=function(_,l){l===void 0&&(l=_.length);for(var f=l-this.blockSize,p=this.B,m=this.h,I=0;I<l;){if(m==0)for(;I<=f;)o(this,_,I),I+=this.blockSize;if(typeof _=="string"){for(;I<l;)if(p[m++]=_.charCodeAt(I++),m==this.blockSize){o(this,p),m=0;break}}else for(;I<l;)if(p[m++]=_[I++],m==this.blockSize){o(this,p),m=0;break}}this.h=m,this.o+=l},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var l=1;l<_.length-8;++l)_[l]=0;var f=8*this.o;for(l=_.length-8;l<_.length;++l)_[l]=f&255,f/=256;for(this.u(_),_=Array(16),l=f=0;4>l;++l)for(var p=0;32>p;p+=8)_[f++]=this.g[l]>>>p&255;return _};function u(_,l){var f=y;return Object.prototype.hasOwnProperty.call(f,_)?f[_]:f[_]=l(_)}function h(_,l){this.h=l;for(var f=[],p=!0,m=_.length-1;0<=m;m--){var I=_[m]|0;p&&I==l||(f[m]=I,p=!1)}this.g=f}var y={};function v(_){return-128<=_&&128>_?u(_,function(l){return new h([l|0],0>l?-1:0)}):new h([_|0],0>_?-1:0)}function w(_){if(isNaN(_)||!isFinite(_))return S;if(0>_)return N(w(-_));for(var l=[],f=1,p=0;_>=f;p++)l[p]=_/f|0,f*=4294967296;return new h(l,0)}function b(_,l){if(_.length==0)throw Error("number format error: empty string");if(l=l||10,2>l||36<l)throw Error("radix out of range: "+l);if(_.charAt(0)=="-")return N(b(_.substring(1),l));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var f=w(Math.pow(l,8)),p=S,m=0;m<_.length;m+=8){var I=Math.min(8,_.length-m),d=parseInt(_.substring(m,m+I),l);8>I?(I=w(Math.pow(l,I)),p=p.j(I).add(w(d))):(p=p.j(f),p=p.add(w(d)))}return p}var S=v(0),A=v(1),x=v(16777216);r=h.prototype,r.m=function(){if(V(this))return-N(this).m();for(var _=0,l=1,f=0;f<this.g.length;f++){var p=this.i(f);_+=(0<=p?p:4294967296+p)*l,l*=4294967296}return _},r.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(R(this))return"0";if(V(this))return"-"+N(this).toString(_);for(var l=w(Math.pow(_,6)),f=this,p="";;){var m=se(f,l).g;f=re(f,m.j(l));var I=((0<f.g.length?f.g[0]:f.h)>>>0).toString(_);if(f=m,R(f))return I+p;for(;6>I.length;)I="0"+I;p=I+p}},r.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function R(_){if(_.h!=0)return!1;for(var l=0;l<_.g.length;l++)if(_.g[l]!=0)return!1;return!0}function V(_){return _.h==-1}r.l=function(_){return _=re(this,_),V(_)?-1:R(_)?0:1};function N(_){for(var l=_.g.length,f=[],p=0;p<l;p++)f[p]=~_.g[p];return new h(f,~_.h).add(A)}r.abs=function(){return V(this)?N(this):this},r.add=function(_){for(var l=Math.max(this.g.length,_.g.length),f=[],p=0,m=0;m<=l;m++){var I=p+(this.i(m)&65535)+(_.i(m)&65535),d=(I>>>16)+(this.i(m)>>>16)+(_.i(m)>>>16);p=d>>>16,I&=65535,d&=65535,f[m]=d<<16|I}return new h(f,f[f.length-1]&-2147483648?-1:0)};function re(_,l){return _.add(N(l))}r.j=function(_){if(R(this)||R(_))return S;if(V(this))return V(_)?N(this).j(N(_)):N(N(this).j(_));if(V(_))return N(this.j(N(_)));if(0>this.l(x)&&0>_.l(x))return w(this.m()*_.m());for(var l=this.g.length+_.g.length,f=[],p=0;p<2*l;p++)f[p]=0;for(p=0;p<this.g.length;p++)for(var m=0;m<_.g.length;m++){var I=this.i(p)>>>16,d=this.i(p)&65535,ue=_.i(m)>>>16,Fe=_.i(m)&65535;f[2*p+2*m]+=d*Fe,K(f,2*p+2*m),f[2*p+2*m+1]+=I*Fe,K(f,2*p+2*m+1),f[2*p+2*m+1]+=d*ue,K(f,2*p+2*m+1),f[2*p+2*m+2]+=I*ue,K(f,2*p+2*m+2)}for(p=0;p<l;p++)f[p]=f[2*p+1]<<16|f[2*p];for(p=l;p<2*l;p++)f[p]=0;return new h(f,0)};function K(_,l){for(;(_[l]&65535)!=_[l];)_[l+1]+=_[l]>>>16,_[l]&=65535,l++}function q(_,l){this.g=_,this.h=l}function se(_,l){if(R(l))throw Error("division by zero");if(R(_))return new q(S,S);if(V(_))return l=se(N(_),l),new q(N(l.g),N(l.h));if(V(l))return l=se(_,N(l)),new q(N(l.g),l.h);if(30<_.g.length){if(V(_)||V(l))throw Error("slowDivide_ only works with positive integers.");for(var f=A,p=l;0>=p.l(_);)f=Ne(f),p=Ne(p);var m=te(f,1),I=te(p,1);for(p=te(p,2),f=te(f,2);!R(p);){var d=I.add(p);0>=d.l(_)&&(m=m.add(f),I=d),p=te(p,1),f=te(f,1)}return l=re(_,m.j(l)),new q(m,l)}for(m=S;0<=_.l(l);){for(f=Math.max(1,Math.floor(_.m()/l.m())),p=Math.ceil(Math.log(f)/Math.LN2),p=48>=p?1:Math.pow(2,p-48),I=w(f),d=I.j(l);V(d)||0<d.l(_);)f-=p,I=w(f),d=I.j(l);R(I)&&(I=A),m=m.add(I),_=re(_,d)}return new q(m,_)}r.A=function(_){return se(this,_).h},r.and=function(_){for(var l=Math.max(this.g.length,_.g.length),f=[],p=0;p<l;p++)f[p]=this.i(p)&_.i(p);return new h(f,this.h&_.h)},r.or=function(_){for(var l=Math.max(this.g.length,_.g.length),f=[],p=0;p<l;p++)f[p]=this.i(p)|_.i(p);return new h(f,this.h|_.h)},r.xor=function(_){for(var l=Math.max(this.g.length,_.g.length),f=[],p=0;p<l;p++)f[p]=this.i(p)^_.i(p);return new h(f,this.h^_.h)};function Ne(_){for(var l=_.g.length+1,f=[],p=0;p<l;p++)f[p]=_.i(p)<<1|_.i(p-1)>>>31;return new h(f,_.h)}function te(_,l){var f=l>>5;l%=32;for(var p=_.g.length-f,m=[],I=0;I<p;I++)m[I]=0<l?_.i(I+f)>>>l|_.i(I+f+1)<<32-l:_.i(I+f);return new h(m,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,oh=sh.Md5=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=w,h.fromString=b,Cs=sh.Integer=h}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});var ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ft={};var ah,x_,ch,uh,lh,hh,dh,fh,ph;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,s,a){return t==Array.prototype||t==Object.prototype||(t[s]=a.value),t};function n(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof ks=="object"&&ks];for(var s=0;s<t.length;++s){var a=t[s];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")}var i=n(this);function o(t,s){if(s)e:{var a=i;t=t.split(".");for(var c=0;c<t.length-1;c++){var g=t[c];if(!(g in a))break e;a=a[g]}t=t[t.length-1],c=a[t],s=s(c),s!=c&&s!=null&&e(a,t,{configurable:!0,writable:!0,value:s})}}function u(t,s){t instanceof String&&(t+="");var a=0,c=!1,g={next:function(){if(!c&&a<t.length){var E=a++;return{value:s(E,t[E]),done:!1}}return c=!0,{done:!0,value:void 0}}};return g[Symbol.iterator]=function(){return g},g}o("Array.prototype.values",function(t){return t||function(){return u(this,function(s,a){return a})}});var h=h||{},y=this||self;function v(t){var s=typeof t;return s=s!="object"?s:t?Array.isArray(t)?"array":s:"null",s=="array"||s=="object"&&typeof t.length=="number"}function w(t){var s=typeof t;return s=="object"&&t!=null||s=="function"}function b(t,s,a){return t.call.apply(t.bind,arguments)}function S(t,s,a){if(!t)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,c),t.apply(s,g)}}return function(){return t.apply(s,arguments)}}function A(t,s,a){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:S,A.apply(null,arguments)}function x(t,s){var a=Array.prototype.slice.call(arguments,1);return function(){var c=a.slice();return c.push.apply(c,arguments),t.apply(this,c)}}function R(t,s){function a(){}a.prototype=s.prototype,t.aa=s.prototype,t.prototype=new a,t.prototype.constructor=t,t.Qb=function(c,g,E){for(var T=Array(arguments.length-2),C=2;C<arguments.length;C++)T[C-2]=arguments[C];return s.prototype[g].apply(c,T)}}function V(t){let s=t.length;if(0<s){let a=Array(s);for(let c=0;c<s;c++)a[c]=t[c];return a}return[]}function N(t,s){for(let a=1;a<arguments.length;a++){let c=arguments[a];if(v(c)){let g=t.length||0,E=c.length||0;t.length=g+E;for(let T=0;T<E;T++)t[g+T]=c[T]}else t.push(c)}}class re{constructor(s,a){this.i=s,this.j=a,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}function K(t){return/^[\s\xa0]*$/.test(t)}function q(){var t=y.navigator;return t&&(t=t.userAgent)?t:""}function se(t){return se[" "](t),t}se[" "]=function(){};var Ne=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function te(t,s,a){for(let c in t)s.call(a,t[c],c,t)}function _(t,s){for(let a in t)s.call(void 0,t[a],a,t)}function l(t){let s={};for(let a in t)s[a]=t[a];return s}let f="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function p(t,s){let a,c;for(let g=1;g<arguments.length;g++){c=arguments[g];for(a in c)t[a]=c[a];for(let E=0;E<f.length;E++)a=f[E],Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a])}}function m(t){var s=1;t=t.split(":");let a=[];for(;0<s&&t.length;)a.push(t.shift()),s--;return t.length&&a.push(t.join(":")),a}function I(t){y.setTimeout(()=>{throw t},0)}function d(){var t=dn;let s=null;return t.g&&(s=t.g,t.g=t.g.next,t.g||(t.h=null),s.next=null),s}class ue{constructor(){this.h=this.g=null}add(s,a){let c=Fe.get();c.set(s,a),this.h?this.h.next=c:this.g=c,this.h=c}}var Fe=new re(()=>new ko,t=>t.reset());class ko{constructor(){this.next=this.g=this.h=null}set(s,a){this.h=s,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Be=!1,dn=new ue,wr=()=>{let t=y.Promise.resolve(void 0);Ue=()=>{t.then(No)}};var No=()=>{for(var t;t=d();){try{t.h.call(t.g)}catch(a){I(a)}var s=Fe;s.j(t),100>s.h&&(s.h++,t.next=s.g,s.g=t)}Be=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(t,s){this.type=t,this.g=this.target=s,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var Do=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var t=!1,s=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let a=()=>{};y.addEventListener("test",a,s),y.removeEventListener("test",a,s)}catch{}return t})();function qe(t,s){if(j.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var a=this.type=t.type,c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=s,s=t.relatedTarget){if(Ne){e:{try{se(s.nodeName);var g=!0;break e}catch{}g=!1}g||(s=null)}}else a=="mouseover"?s=t.fromElement:a=="mouseout"&&(s=t.toElement);this.relatedTarget=s,c?(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Oo[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&qe.aa.h.call(this)}}R(qe,j);var Oo={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Vo=0;function xo(t,s,a,c,g){this.listener=t,this.proxy=null,this.src=s,this.type=a,this.capture=!!c,this.ha=g,this.key=++Vo,this.da=this.fa=!1}function yt(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function It(t){this.src=t,this.g={},this.h=0}It.prototype.add=function(t,s,a,c,g){var E=t.toString();t=this.g[E],t||(t=this.g[E]=[],this.h++);var T=pn(t,s,c,g);return-1<T?(s=t[T],a||(s.fa=!1)):(s=new xo(s,this.src,E,!!c,g),s.fa=a,t.push(s)),s};function fn(t,s){var a=s.type;if(a in t.g){var c=t.g[a],g=Array.prototype.indexOf.call(c,s,void 0),E;(E=0<=g)&&Array.prototype.splice.call(c,g,1),E&&(yt(s),t.g[a].length==0&&(delete t.g[a],t.h--))}}function pn(t,s,a,c){for(var g=0;g<t.length;++g){var E=t[g];if(!E.da&&E.listener==s&&E.capture==!!a&&E.ha==c)return g}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),gn={};function Tr(t,s,a,c,g){if(c&&c.once)return br(t,s,a,c,g);if(Array.isArray(s)){for(var E=0;E<s.length;E++)Tr(t,s[E],a,c,g);return null}return a=En(a),t&&t[je]?t.K(s,a,w(c)?!!c.capture:!!c,g):Ar(t,s,a,!1,c,g)}function Ar(t,s,a,c,g,E){if(!s)throw Error("Invalid event type");var T=w(g)?!!g.capture:!!g,C=yn(t);if(C||(t[mn]=C=new It(t)),a=C.add(s,a,c,T,E),a.proxy)return a;if(c=Lo(),a.proxy=c,c.src=t,c.listener=a,t.addEventListener)Do||(g=T),g===void 0&&(g=!1),t.addEventListener(s.toString(),c,g);else if(t.attachEvent)t.attachEvent(Rr(s.toString()),c);else if(t.addListener&&t.removeListener)t.addListener(c);else throw Error("addEventListener and attachEvent are unavailable.");return a}function Lo(){function t(a){return s.call(t.src,t.listener,a)}let s=Mo;return t}function br(t,s,a,c,g){if(Array.isArray(s)){for(var E=0;E<s.length;E++)br(t,s[E],a,c,g);return null}return a=En(a),t&&t[je]?t.L(s,a,w(c)?!!c.capture:!!c,g):Ar(t,s,a,!0,c,g)}function Sr(t,s,a,c,g){if(Array.isArray(s))for(var E=0;E<s.length;E++)Sr(t,s[E],a,c,g);else c=w(c)?!!c.capture:!!c,a=En(a),t&&t[je]?(t=t.i,s=String(s).toString(),s in t.g&&(E=t.g[s],a=pn(E,a,c,g),-1<a&&(yt(E[a]),Array.prototype.splice.call(E,a,1),E.length==0&&(delete t.g[s],t.h--)))):t&&(t=yn(t))&&(s=t.g[s.toString()],t=-1,s&&(t=pn(s,a,c,g)),(a=-1<t?s[t]:null)&&_n(a))}function _n(t){if(typeof t!="number"&&t&&!t.da){var s=t.src;if(s&&s[je])fn(s.i,t);else{var a=t.type,c=t.proxy;s.removeEventListener?s.removeEventListener(a,c,t.capture):s.detachEvent?s.detachEvent(Rr(a),c):s.addListener&&s.removeListener&&s.removeListener(c),(a=yn(s))?(fn(a,t),a.h==0&&(a.src=null,s[mn]=null)):yt(t)}}}function Rr(t){return t in gn?gn[t]:gn[t]="on"+t}function Mo(t,s){if(t.da)t=!0;else{s=new qe(s,this);var a=t.listener,c=t.ha||t.src;t.fa&&_n(t),t=a.call(c,s)}return t}function yn(t){return t=t[mn],t instanceof It?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return typeof t=="function"?t:(t[In]||(t[In]=function(s){return t.handleEvent(s)}),t[In])}function $(){de.call(this),this.i=new It(this),this.M=this,this.F=null}R($,de),$.prototype[je]=!0,$.prototype.removeEventListener=function(t,s,a,c){Sr(this,t,s,a,c)};function H(t,s){var a,c=t.F;if(c)for(a=[];c;c=c.F)a.push(c);if(t=t.M,c=s.type||s,typeof s=="string")s=new j(s,t);else if(s instanceof j)s.target=s.target||t;else{var g=s;s=new j(c,t),p(s,g)}if(g=!0,a)for(var E=a.length-1;0<=E;E--){var T=s.g=a[E];g=Et(T,c,!0,s)&&g}if(T=s.g=t,g=Et(T,c,!0,s)&&g,g=Et(T,c,!1,s)&&g,a)for(E=0;E<a.length;E++)T=s.g=a[E],g=Et(T,c,!1,s)&&g}$.prototype.N=function(){if($.aa.N.call(this),this.i){var t=this.i,s;for(s in t.g){for(var a=t.g[s],c=0;c<a.length;c++)yt(a[c]);delete t.g[s],t.h--}}this.F=null},$.prototype.K=function(t,s,a,c){return this.i.add(String(t),s,!1,a,c)},$.prototype.L=function(t,s,a,c){return this.i.add(String(t),s,!0,a,c)};function Et(t,s,a,c){if(s=t.i.g[String(s)],!s)return!0;s=s.concat();for(var g=!0,E=0;E<s.length;++E){var T=s[E];if(T&&!T.da&&T.capture==a){var C=T.listener,M=T.ha||T.src;T.fa&&fn(t.i,T),g=C.call(M,c)!==!1&&g}}return g&&!c.defaultPrevented}function Pr(t,s,a){if(typeof t=="function")a&&(t=A(t,a));else if(t&&typeof t.handleEvent=="function")t=A(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:y.setTimeout(t,s||0)}function Cr(t){t.g=Pr(()=>{t.g=null,t.i&&(t.i=!1,Cr(t))},t.l);let s=t.h;t.h=null,t.m.apply(null,s)}class Fo extends de{constructor(s,a){super(),this.m=s,this.l=a,this.h=null,this.i=!1,this.g=null}j(s){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $e(t){de.call(this),this.h=t,this.g={}}R($e,de);var kr=[];function Nr(t){te(t.g,function(s,a){this.g.hasOwnProperty(a)&&_n(s)},t),t.g={}}$e.prototype.N=function(){$e.aa.N.call(this),Nr(this)},$e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vn=y.JSON.stringify,Uo=y.JSON.parse,Bo=class{stringify(t){return y.JSON.stringify(t,void 0)}parse(t){return y.JSON.parse(t,void 0)}};function wn(){}wn.prototype.h=null;function Dr(t){return t.h||(t.h=t.i())}function Or(){}var ze={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tn(){j.call(this,"d")}R(Tn,j);function An(){j.call(this,"c")}R(An,j);var ye={},Vr=null;function vt(){return Vr=Vr||new $}ye.La="serverreachability";function xr(t){j.call(this,ye.La,t)}R(xr,j);function Ge(t){let s=vt();H(s,new xr(s))}ye.STAT_EVENT="statevent";function Lr(t,s){j.call(this,ye.STAT_EVENT,t),this.stat=s}R(Lr,j);function Q(t){let s=vt();H(s,new Lr(s,t))}ye.Ma="timingevent";function Mr(t,s){j.call(this,ye.Ma,t),this.size=s}R(Mr,j);function We(t,s){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){t()},s)}function Ke(){this.g=!0}Ke.prototype.xa=function(){this.g=!1};function qo(t,s,a,c,g,E){t.info(function(){if(t.g)if(E)for(var T="",C=E.split("&"),M=0;M<C.length;M++){var P=C[M].split("=");if(1<P.length){var z=P[0];P=P[1];var G=z.split("_");T=2<=G.length&&G[1]=="type"?T+(z+"="+P+"&"):T+(z+"=redacted&")}}else T=null;else T=E;return"XMLHTTP REQ ("+c+") [attempt "+g+"]: "+s+`
`+a+`
`+T})}function jo(t,s,a,c,g,E,T){t.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+g+"]: "+s+`
`+a+`
`+E+" "+T})}function be(t,s,a,c){t.info(function(){return"XMLHTTP TEXT ("+s+"): "+zo(t,a)+(c?" "+c:"")})}function $o(t,s){t.info(function(){return"TIMEOUT: "+s})}Ke.prototype.info=function(){};function zo(t,s){if(!t.g)return s;if(!s)return null;try{var a=JSON.parse(s);if(a){for(t=0;t<a.length;t++)if(Array.isArray(a[t])){var c=a[t];if(!(2>c.length)){var g=c[1];if(Array.isArray(g)&&!(1>g.length)){var E=g[0];if(E!="noop"&&E!="stop"&&E!="close")for(var T=1;T<g.length;T++)g[T]=""}}}}return vn(a)}catch{return s}}var wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function Tt(){}R(Tt,wn),Tt.prototype.g=function(){return new XMLHttpRequest},Tt.prototype.i=function(){return{}},bn=new Tt;function fe(t,s,a,c){this.j=t,this.i=s,this.l=a,this.R=c||1,this.U=new $e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ur}function Ur(){this.i=null,this.g="",this.h=!1}var Br={},Sn={};function Rn(t,s,a){t.L=1,t.v=Rt(le(s)),t.m=a,t.P=!0,qr(t,null)}function qr(t,s){t.F=Date.now(),At(t),t.A=le(t.v);var a=t.A,c=t.R;Array.isArray(c)||(c=[String(c)]),ti(a.i,"t",c),t.C=0,a=t.j.J,t.h=new Ur,t.g=Ii(t.j,a?s:null,!t.m),0<t.O&&(t.M=new Fo(A(t.Y,t,t.g),t.O)),s=t.U,a=t.g,c=t.ca;var g="readystatechange";Array.isArray(g)||(g&&(kr[0]=g.toString()),g=kr);for(var E=0;E<g.length;E++){var T=Tr(a,g[E],c||s.handleEvent,!1,s.h||s);if(!T)break;s.g[T.key]=T}s=t.H?l(t.H):{},t.m?(t.u||(t.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,s)):(t.u="GET",t.g.ea(t.A,t.u,null,s)),Ge(),qo(t.i,t.u,t.A,t.l,t.R,t.m)}fe.prototype.ca=function(t){t=t.target;let s=this.M;s&&he(t)==3?s.j():this.Y(t)},fe.prototype.Y=function(t){try{if(t==this.g)e:{let G=he(this.g);var s=this.g.Ba();let Pe=this.g.Z();if(!(3>G)&&(G!=3||this.g&&(this.h.h||this.g.oa()||ci(this.g)))){this.J||G!=4||s==7||(s==8||0>=Pe?Ge(3):Ge(2)),Pn(this);var a=this.g.Z();this.X=a;t:if(jr(this)){var c=ci(this.g);t="";var g=c.length,E=he(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ie(this),He(this);var T="";break t}this.h.i=new y.TextDecoder}for(s=0;s<g;s++)this.h.h=!0,t+=this.h.i.decode(c[s],{stream:!(E&&s==g-1)});c.length=0,this.h.g+=t,this.C=0,T=this.h.g}else T=this.g.oa();if(this.o=a==200,jo(this.i,this.u,this.A,this.l,this.R,G,a),this.o){if(this.T&&!this.K){t:{if(this.g){var C,M=this.g;if((C=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(C)){var P=C;break t}}P=null}if(a=P)be(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cn(this,a);else{this.o=!1,this.s=3,Q(12),Ie(this),He(this);break e}}if(this.P){a=!0;let ie;for(;!this.J&&this.C<T.length;)if(ie=Go(this,T),ie==Sn){G==4&&(this.s=4,Q(14),a=!1),be(this.i,this.l,null,"[Incomplete Response]");break}else if(ie==Br){this.s=4,Q(15),be(this.i,this.l,T,"[Invalid Chunk]"),a=!1;break}else be(this.i,this.l,ie,null),Cn(this,ie);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),G!=4||T.length!=0||this.h.h||(this.s=1,Q(16),a=!1),this.o=this.o&&a,!a)be(this.i,this.l,T,"[Invalid Chunked Response]"),Ie(this),He(this);else if(0<T.length&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.ba&&!z.M&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),xn(z),z.M=!0,Q(11))}}else be(this.i,this.l,T,null),Cn(this,T);G==4&&Ie(this),this.o&&!this.J&&(G==4?mi(this.j,this):(this.o=!1,At(this)))}else ca(this.g),a==400&&0<T.indexOf("Unknown SID")?(this.s=3,Q(12)):(this.s=0,Q(13)),Ie(this),He(this)}}}catch{}finally{}};function jr(t){return t.g?t.u=="GET"&&t.L!=2&&t.j.Ca:!1}function Go(t,s){var a=t.C,c=s.indexOf(`
`,a);return c==-1?Sn:(a=Number(s.substring(a,c)),isNaN(a)?Br:(c+=1,c+a>s.length?Sn:(s=s.slice(c,c+a),t.C=c+a,s)))}fe.prototype.cancel=function(){this.J=!0,Ie(this)};function At(t){t.S=Date.now()+t.I,$r(t,t.I)}function $r(t,s){if(t.B!=null)throw Error("WatchDog timer not null");t.B=We(A(t.ba,t),s)}function Pn(t){t.B&&(y.clearTimeout(t.B),t.B=null)}fe.prototype.ba=function(){this.B=null;let t=Date.now();0<=t-this.S?($o(this.i,this.A),this.L!=2&&(Ge(),Q(17)),Ie(this),this.s=2,He(this)):$r(this,this.S-t)};function He(t){t.j.G==0||t.J||mi(t.j,t)}function Ie(t){Pn(t);var s=t.M;s&&typeof s.ma=="function"&&s.ma(),t.M=null,Nr(t.U),t.g&&(s=t.g,t.g=null,s.abort(),s.ma())}function Cn(t,s){try{var a=t.j;if(a.G!=0&&(a.g==t||kn(a.h,t))){if(!t.K&&kn(a.h,t)&&a.G==3){try{var c=a.Da.g.parse(s)}catch{c=null}if(Array.isArray(c)&&c.length==3){var g=c;if(g[0]==0){e:if(!a.u){if(a.g)if(a.g.F+3e3<t.F)Dt(a),kt(a);else break e;Vn(a),Q(18)}}else a.za=g[1],0<a.za-a.T&&37500>g[2]&&a.F&&a.v==0&&!a.C&&(a.C=We(A(a.Za,a),6e3));if(1>=Wr(a.h)&&a.ca){try{a.ca()}catch{}a.ca=void 0}}else ve(a,11)}else if((t.K||a.g==t)&&Dt(a),!K(s))for(g=a.Da.g.parse(s),s=0;s<g.length;s++){let P=g[s];if(a.T=P[0],P=P[1],a.G==2)if(P[0]=="c"){a.K=P[1],a.ia=P[2];let z=P[3];z!=null&&(a.la=z,a.j.info("VER="+a.la));let G=P[4];G!=null&&(a.Aa=G,a.j.info("SVER="+a.Aa));let Pe=P[5];Pe!=null&&typeof Pe=="number"&&0<Pe&&(c=1.5*Pe,a.L=c,a.j.info("backChannelRequestTimeoutMs_="+c)),c=a;let ie=t.g;if(ie){let Vt=ie.g?ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vt){var E=c.h;E.g||Vt.indexOf("spdy")==-1&&Vt.indexOf("quic")==-1&&Vt.indexOf("h2")==-1||(E.j=E.l,E.g=new Set,E.h&&(Nn(E,E.h),E.h=null))}if(c.D){let Ln=ie.g?ie.g.getResponseHeader("X-HTTP-Session-Id"):null;Ln&&(c.ya=Ln,k(c.I,c.D,Ln))}}a.G=3,a.l&&a.l.ua(),a.ba&&(a.R=Date.now()-t.F,a.j.info("Handshake RTT: "+a.R+"ms")),c=a;var T=t;if(c.qa=yi(c,c.J?c.ia:null,c.W),T.K){Kr(c.h,T);var C=T,M=c.L;M&&(C.I=M),C.B&&(Pn(C),At(C)),c.g=T}else fi(c);0<a.i.length&&Nt(a)}else P[0]!="stop"&&P[0]!="close"||ve(a,7);else a.G==3&&(P[0]=="stop"||P[0]=="close"?P[0]=="stop"?ve(a,7):On(a):P[0]!="noop"&&a.l&&a.l.ta(P),a.v=0)}}Ge(4)}catch{}}var Wo=class{constructor(t,s){this.g=t,this.map=s}};function zr(t){this.l=t||10,y.PerformanceNavigationTiming?(t=y.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gr(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Wr(t){return t.h?1:t.g?t.g.size:0}function kn(t,s){return t.h?t.h==s:t.g?t.g.has(s):!1}function Nn(t,s){t.g?t.g.add(s):t.h=s}function Kr(t,s){t.h&&t.h==s?t.h=null:t.g&&t.g.has(s)&&t.g.delete(s)}zr.prototype.cancel=function(){if(this.i=Hr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Hr(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let s=t.i;for(let a of t.g.values())s=s.concat(a.D);return s}return V(t.i)}function Ko(t){if(t.V&&typeof t.V=="function")return t.V();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(v(t)){for(var s=[],a=t.length,c=0;c<a;c++)s.push(t[c]);return s}s=[],a=0;for(c in t)s[a++]=t[c];return s}function Ho(t){if(t.na&&typeof t.na=="function")return t.na();if(!t.V||typeof t.V!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(v(t)||typeof t=="string"){var s=[];t=t.length;for(var a=0;a<t;a++)s.push(a);return s}s=[],a=0;for(let c in t)s[a++]=c;return s}}}function Qr(t,s){if(t.forEach&&typeof t.forEach=="function")t.forEach(s,void 0);else if(v(t)||typeof t=="string")Array.prototype.forEach.call(t,s,void 0);else for(var a=Ho(t),c=Ko(t),g=c.length,E=0;E<g;E++)s.call(void 0,c[E],a&&a[E],t)}var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(t,s){if(t){t=t.split("&");for(var a=0;a<t.length;a++){var c=t[a].indexOf("="),g=null;if(0<=c){var E=t[a].substring(0,c);g=t[a].substring(c+1)}else E=t[a];s(E,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function Ee(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof Ee){this.h=t.h,bt(this,t.j),this.o=t.o,this.g=t.g,St(this,t.s),this.l=t.l;var s=t.i,a=new Ye;a.i=s.i,s.g&&(a.g=new Map(s.g),a.h=s.h),Yr(this,a),this.m=t.m}else t&&(s=String(t).match(Jr))?(this.h=!1,bt(this,s[1]||"",!0),this.o=Qe(s[2]||""),this.g=Qe(s[3]||"",!0),St(this,s[4]),this.l=Qe(s[5]||"",!0),Yr(this,s[6]||"",!0),this.m=Qe(s[7]||"")):(this.h=!1,this.i=new Ye(null,this.h))}Ee.prototype.toString=function(){var t=[],s=this.j;s&&t.push(Je(s,Xr,!0),":");var a=this.g;return(a||s=="file")&&(t.push("//"),(s=this.o)&&t.push(Je(s,Xr,!0),"@"),t.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.s,a!=null&&t.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(Je(a,a.charAt(0)=="/"?Xo:Yo,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.m)&&t.push("#",Je(a,ea)),t.join("")};function le(t){return new Ee(t)}function bt(t,s,a){t.j=a?Qe(s,!0):s,t.j&&(t.j=t.j.replace(/:$/,""))}function St(t,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);t.s=s}else t.s=null}function Yr(t,s,a){s instanceof Ye?(t.i=s,ta(t.i,t.h)):(a||(s=Je(s,Zo)),t.i=new Ye(s,t.h))}function k(t,s,a){t.i.set(s,a)}function Rt(t){return k(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qe(t,s){return t?s?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Je(t,s,a){return typeof t=="string"?(t=encodeURI(t).replace(s,Jo),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Jo(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Xr=/[#\/\?@]/g,Yo=/[#\?:]/g,Xo=/[#\?]/g,Zo=/[#\?@]/g,ea=/#/g;function Ye(t,s){this.h=this.g=null,this.i=t||null,this.j=!!s}function pe(t){t.g||(t.g=new Map,t.h=0,t.i&&Qo(t.i,function(s,a){t.add(decodeURIComponent(s.replace(/\+/g," ")),a)}))}r=Ye.prototype,r.add=function(t,s){pe(this),this.i=null,t=Se(this,t);var a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(s),this.h+=1,this};function Zr(t,s){pe(t),s=Se(t,s),t.g.has(s)&&(t.i=null,t.h-=t.g.get(s).length,t.g.delete(s))}function ei(t,s){return pe(t),s=Se(t,s),t.g.has(s)}r.forEach=function(t,s){pe(this),this.g.forEach(function(a,c){a.forEach(function(g){t.call(s,g,c,this)},this)},this)},r.na=function(){pe(this);let t=Array.from(this.g.values()),s=Array.from(this.g.keys()),a=[];for(let c=0;c<s.length;c++){let g=t[c];for(let E=0;E<g.length;E++)a.push(s[c])}return a},r.V=function(t){pe(this);let s=[];if(typeof t=="string")ei(this,t)&&(s=s.concat(this.g.get(Se(this,t))));else{t=Array.from(this.g.values());for(let a=0;a<t.length;a++)s=s.concat(t[a])}return s},r.set=function(t,s){return pe(this),this.i=null,t=Se(this,t),ei(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[s]),this.h+=1,this},r.get=function(t,s){return t?(t=this.V(t),0<t.length?String(t[0]):s):s};function ti(t,s,a){Zr(t,s),0<a.length&&(t.i=null,t.g.set(Se(t,s),V(a)),t.h+=a.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],s=Array.from(this.g.keys());for(var a=0;a<s.length;a++){var c=s[a];let E=encodeURIComponent(String(c)),T=this.V(c);for(c=0;c<T.length;c++){var g=E;T[c]!==""&&(g+="="+encodeURIComponent(String(T[c]))),t.push(g)}}return this.i=t.join("&")};function Se(t,s){return s=String(s),t.j&&(s=s.toLowerCase()),s}function ta(t,s){s&&!t.j&&(pe(t),t.i=null,t.g.forEach(function(a,c){var g=c.toLowerCase();c!=g&&(Zr(this,c),ti(this,g,a))},t)),t.j=s}function na(t,s){let a=new Ke;if(y.Image){let c=new Image;c.onload=x(me,a,"TestLoadImage: loaded",!0,s,c),c.onerror=x(me,a,"TestLoadImage: error",!1,s,c),c.onabort=x(me,a,"TestLoadImage: abort",!1,s,c),c.ontimeout=x(me,a,"TestLoadImage: timeout",!1,s,c),y.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=t}else s(!1)}function ra(t,s){let a=new Ke,c=new AbortController,g=setTimeout(()=>{c.abort(),me(a,"TestPingServer: timeout",!1,s)},1e4);fetch(t,{signal:c.signal}).then(E=>{clearTimeout(g),E.ok?me(a,"TestPingServer: ok",!0,s):me(a,"TestPingServer: server error",!1,s)}).catch(()=>{clearTimeout(g),me(a,"TestPingServer: error",!1,s)})}function me(t,s,a,c,g){try{g&&(g.onload=null,g.onerror=null,g.onabort=null,g.ontimeout=null),c(a)}catch{}}function ia(){this.g=new Bo}function sa(t,s,a){let c=a||"";try{Qr(t,function(g,E){let T=g;w(g)&&(T=vn(g)),s.push(c+E+"="+encodeURIComponent(T))})}catch(g){throw s.push(c+"type="+encodeURIComponent("_badmap")),g}}function Xe(t){this.l=t.Ub||null,this.j=t.eb||!1}R(Xe,wn),Xe.prototype.g=function(){return new Pt(this.l,this.j)},Xe.prototype.i=(function(t){return function(){return t}})({});function Pt(t,s){$.call(this),this.D=t,this.o=s,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Pt,$),r=Pt.prototype,r.open=function(t,s){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=s,this.readyState=1,et(this)},r.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let s={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(s.body=t),(this.D||y).fetch(new Request(this.A,s)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ze(this)),this.readyState=0},r.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,et(this)),this.g&&(this.readyState=3,et(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ni(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))};function ni(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}r.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var s=t.value?t.value:new Uint8Array(0);(s=this.v.decode(s,{stream:!t.done}))&&(this.response=this.responseText+=s)}t.done?Ze(this):et(this),this.readyState==3&&ni(this)}},r.Ra=function(t){this.g&&(this.response=this.responseText=t,Ze(this))},r.Qa=function(t){this.g&&(this.response=t,Ze(this))},r.ga=function(){this.g&&Ze(this)};function Ze(t){t.readyState=4,t.l=null,t.j=null,t.v=null,et(t)}r.setRequestHeader=function(t,s){this.u.append(t,s)},r.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],s=this.h.entries();for(var a=s.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=s.next();return t.join(`\r
`)};function et(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});function ri(t){let s="";return te(t,function(a,c){s+=c,s+=":",s+=a,s+=`\r
`}),s}function Dn(t,s,a){e:{for(c in a){var c=!1;break e}c=!0}c||(a=ri(a),typeof t=="string"?a!=null&&encodeURIComponent(String(a)):k(t,s,a))}function O(t){$.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(O,$);var oa=/^https?$/i,aa=["POST","PUT"];r=O.prototype,r.Ha=function(t){this.J=t},r.ea=function(t,s,a,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);s=s?s.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?Dr(this.o):Dr(bn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(s,String(t),!0),this.B=!1}catch(E){ii(this,E);return}if(t=a||"",a=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var g in c)a.set(g,c[g]);else if(typeof c.keys=="function"&&typeof c.get=="function")for(let E of c.keys())a.set(E,c.get(E));else throw Error("Unknown input type for opt_headers: "+String(c));c=Array.from(a.keys()).find(E=>E.toLowerCase()=="content-type"),g=y.FormData&&t instanceof y.FormData,!(0<=Array.prototype.indexOf.call(aa,s,void 0))||c||g||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[E,T]of a)this.g.setRequestHeader(E,T);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ai(this),this.u=!0,this.g.send(t),this.u=!1}catch(E){ii(this,E)}};function ii(t,s){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=s,t.m=5,si(t),Ct(t)}function si(t){t.A||(t.A=!0,H(t,"complete"),H(t,"error"))}r.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,H(this,"complete"),H(this,"abort"),Ct(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ct(this,!0)),O.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?oi(this):this.bb())},r.bb=function(){oi(this)};function oi(t){if(t.h&&typeof h<"u"&&(!t.v[1]||he(t)!=4||t.Z()!=2)){if(t.u&&he(t)==4)Pr(t.Ea,0,t);else if(H(t,"readystatechange"),he(t)==4){t.h=!1;try{let T=t.Z();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var a;if(!(a=s)){var c;if(c=T===0){var g=String(t.D).match(Jr)[1]||null;!g&&y.self&&y.self.location&&(g=y.self.location.protocol.slice(0,-1)),c=!oa.test(g?g.toLowerCase():"")}a=c}if(a)H(t,"complete"),H(t,"success");else{t.m=6;try{var E=2<he(t)?t.g.statusText:""}catch{E=""}t.l=E+" ["+t.Z()+"]",si(t)}}finally{Ct(t)}}}}function Ct(t,s){if(t.g){ai(t);let a=t.g,c=t.v[0]?()=>{}:null;t.g=null,t.v=null,s||H(t,"ready");try{a.onreadystatechange=c}catch{}}}function ai(t){t.I&&(y.clearTimeout(t.I),t.I=null)}r.isActive=function(){return!!this.g};function he(t){return t.g?t.g.readyState:0}r.Z=function(){try{return 2<he(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(t){if(this.g){var s=this.g.responseText;return t&&s.indexOf(t)==0&&(s=s.substring(t.length)),Uo(s)}};function ci(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(t){let s={};t=(t.g&&2<=he(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let c=0;c<t.length;c++){if(K(t[c]))continue;var a=m(t[c]);let g=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();let E=s[g]||[];s[g]=E,E.push(a)}_(s,function(c){return c.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tt(t,s,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||s}function ui(t){this.Aa=0,this.i=[],this.j=new Ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tt("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tt("baseRetryDelayMs",5e3,t),this.cb=tt("retryDelaySeedMs",1e4,t),this.Wa=tt("forwardChannelMaxRetries",2,t),this.wa=tt("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new zr(t&&t.concurrentRequestLimit),this.Da=new ia,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ui.prototype,r.la=8,r.G=1,r.connect=function(t,s,a,c){Q(0),this.W=t,this.H=s||{},a&&c!==void 0&&(this.H.OSID=a,this.H.OAID=c),this.F=this.X,this.I=yi(this,null,this.W),Nt(this)};function On(t){if(li(t),t.G==3){var s=t.U++,a=le(t.I);if(k(a,"SID",t.K),k(a,"RID",s),k(a,"TYPE","terminate"),nt(t,a),s=new fe(t,t.j,s),s.L=2,s.v=Rt(le(a)),a=!1,y.navigator&&y.navigator.sendBeacon)try{a=y.navigator.sendBeacon(s.v.toString(),"")}catch{}!a&&y.Image&&(new Image().src=s.v,a=!0),a||(s.g=Ii(s.j,null),s.g.ea(s.v)),s.F=Date.now(),At(s)}_i(t)}function kt(t){t.g&&(xn(t),t.g.cancel(),t.g=null)}function li(t){kt(t),t.u&&(y.clearTimeout(t.u),t.u=null),Dt(t),t.h.cancel(),t.s&&(typeof t.s=="number"&&y.clearTimeout(t.s),t.s=null)}function Nt(t){if(!Gr(t.h)&&!t.s){t.s=!0;var s=t.Ga;Ue||wr(),Be||(Ue(),Be=!0),dn.add(s,t),t.B=0}}function ua(t,s){return Wr(t.h)>=t.h.j-(t.s?1:0)?!1:t.s?(t.i=s.D.concat(t.i),!0):t.G==1||t.G==2||t.B>=(t.Va?0:t.Wa)?!1:(t.s=We(A(t.Ga,t,s),gi(t,t.B)),t.B++,!0)}r.Ga=function(t){if(this.s)if(this.s=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;let g=new fe(this,this.j,t),E=this.o;if(this.S&&(E?(E=l(E),p(E,this.S)):E=this.S),this.m!==null||this.O||(g.H=E,E=null),this.P)e:{for(var s=0,a=0;a<this.i.length;a++){t:{var c=this.i[a];if("__data__"in c.map&&(c=c.map.__data__,typeof c=="string")){c=c.length;break t}c=void 0}if(c===void 0)break;if(s+=c,4096<s){s=a;break e}if(s===4096||a===this.i.length-1){s=a+1;break e}}s=1e3}else s=1e3;s=di(this,g,s),a=le(this.I),k(a,"RID",t),k(a,"CVER",22),this.D&&k(a,"X-HTTP-Session-Id",this.D),nt(this,a),E&&(this.O?s="headers="+encodeURIComponent(String(ri(E)))+"&"+s:this.m&&Dn(a,this.m,E)),Nn(this.h,g),this.Ua&&k(a,"TYPE","init"),this.P?(k(a,"$req",s),k(a,"SID","null"),g.T=!0,Rn(g,a,null)):Rn(g,a,s),this.G=2}}else this.G==3&&(t?hi(this,t):this.i.length==0||Gr(this.h)||hi(this))};function hi(t,s){var a;s?a=s.l:a=t.U++;let c=le(t.I);k(c,"SID",t.K),k(c,"RID",a),k(c,"AID",t.T),nt(t,c),t.m&&t.o&&Dn(c,t.m,t.o),a=new fe(t,t.j,a,t.B+1),t.m===null&&(a.H=t.o),s&&(t.i=s.D.concat(t.i)),s=di(t,a,1e3),a.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),Nn(t.h,a),Rn(a,c,s)}function nt(t,s){t.H&&te(t.H,function(a,c){k(s,c,a)}),t.l&&Qr({},function(a,c){k(s,c,a)})}function di(t,s,a){a=Math.min(t.i.length,a);var c=t.l?A(t.l.Na,t.l,t):null;e:{var g=t.i;let E=-1;for(;;){let T=["count="+a];E==-1?0<a?(E=g[0].g,T.push("ofs="+E)):E=0:T.push("ofs="+E);let C=!0;for(let M=0;M<a;M++){let P=g[M].g,z=g[M].map;if(P-=E,0>P)E=Math.max(0,g[M].g-100),C=!1;else try{sa(z,T,"req"+P+"_")}catch{c&&c(z)}}if(C){c=T.join("&");break e}}}return t=t.i.splice(0,a),s.D=t,c}function fi(t){if(!t.g&&!t.u){t.Y=1;var s=t.Fa;Ue||wr(),Be||(Ue(),Be=!0),dn.add(s,t),t.v=0}}function Vn(t){return t.g||t.u||3<=t.v?!1:(t.Y++,t.u=We(A(t.Fa,t),gi(t,t.v)),t.v++,!0)}r.Fa=function(){if(this.u=null,pi(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=We(A(this.ab,this),t)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Q(10),kt(this),pi(this))};function xn(t){t.A!=null&&(y.clearTimeout(t.A),t.A=null)}function pi(t){t.g=new fe(t,t.j,"rpc",t.Y),t.m===null&&(t.g.H=t.o),t.g.O=0;var s=le(t.qa);k(s,"RID","rpc"),k(s,"SID",t.K),k(s,"AID",t.T),k(s,"CI",t.F?"0":"1"),!t.F&&t.ja&&k(s,"TO",t.ja),k(s,"TYPE","xmlhttp"),nt(t,s),t.m&&t.o&&Dn(s,t.m,t.o),t.L&&(t.g.I=t.L);var a=t.g;t=t.ia,a.L=1,a.v=Rt(le(s)),a.m=null,a.P=!0,qr(a,t)}r.Za=function(){this.C!=null&&(this.C=null,kt(this),Vn(this),Q(19))};function Dt(t){t.C!=null&&(y.clearTimeout(t.C),t.C=null)}function mi(t,s){var a=null;if(t.g==s){Dt(t),xn(t),t.g=null;var c=2}else if(kn(t.h,s))a=s.D,Kr(t.h,s),c=1;else return;if(t.G!=0){if(s.o)if(c==1){a=s.m?s.m.length:0,s=Date.now()-s.F;var g=t.B;c=vt(),H(c,new Mr(c,a)),Nt(t)}else fi(t);else if(g=s.s,g==3||g==0&&0<s.X||!(c==1&&ua(t,s)||c==2&&Vn(t)))switch(a&&0<a.length&&(s=t.h,s.i=s.i.concat(a)),g){case 1:ve(t,5);break;case 4:ve(t,10);break;case 3:ve(t,6);break;default:ve(t,2)}}}function gi(t,s){let a=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(a*=2),a*s}function ve(t,s){if(t.j.info("Error code "+s),s==2){var a=A(t.fb,t),c=t.Xa;let g=!c;c=new Ee(c||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||bt(c,"https"),Rt(c),g?na(c.toString(),a):ra(c.toString(),a)}else Q(2);t.G=0,t.l&&t.l.sa(s),_i(t),li(t)}r.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Q(2)):(this.j.info("Failed to ping google.com"),Q(1))};function _i(t){if(t.G=0,t.ka=[],t.l){let s=Hr(t.h);(s.length!=0||t.i.length!=0)&&(N(t.ka,s),N(t.ka,t.i),t.h.i.length=0,V(t.i),t.i.length=0),t.l.ra()}}function yi(t,s,a){var c=a instanceof Ee?le(a):new Ee(a);if(c.g!="")s&&(c.g=s+"."+c.g),St(c,c.s);else{var g=y.location;c=g.protocol,s=s?s+"."+g.hostname:g.hostname,g=+g.port;var E=new Ee(null);c&&bt(E,c),s&&(E.g=s),g&&St(E,g),a&&(E.l=a),c=E}return a=t.D,s=t.ya,a&&s&&k(c,a,s),k(c,"VER",t.la),nt(t,c),c}function Ii(t,s,a){if(s&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return s=t.Ca&&!t.pa?new O(new Xe({eb:a})):new O(t.pa),s.Ha(t.J),s}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ei(){}r=Ei.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ot(){}Ot.prototype.g=function(t,s){return new ee(t,s)};function ee(t,s){$.call(this),this.g=new ui(s),this.l=t,this.h=s&&s.messageUrlParams||null,t=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(t?t["X-WebChannel-Content-Type"]=s.messageContentType:t={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.va&&(t?t["X-WebChannel-Client-Profile"]=s.va:t={"X-WebChannel-Client-Profile":s.va}),this.g.S=t,(t=s&&s.Sb)&&!K(t)&&(this.g.m=t),this.v=s&&s.supportsCrossDomainXhr||!1,this.u=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!K(s)&&(this.g.D=s,t=this.h,t!==null&&s in t&&(t=this.h,s in t&&delete t[s])),this.j=new Re(this)}R(ee,$),ee.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ee.prototype.close=function(){On(this.g)},ee.prototype.o=function(t){var s=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.u&&(a={},a.__data__=vn(t),t=a);s.i.push(new Wo(s.Ya++,t)),s.G==3&&Nt(s)},ee.prototype.N=function(){this.g.l=null,delete this.j,On(this.g),delete this.g,ee.aa.N.call(this)};function vi(t){Tn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var s=t.__sm__;if(s){e:{for(let a in s){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,s=s!==null&&t in s?s[t]:void 0),this.data=s}else this.data=t}R(vi,Tn);function wi(){An.call(this),this.status=1}R(wi,An);function Re(t){this.g=t}R(Re,Ei),Re.prototype.ua=function(){H(this.g,"a")},Re.prototype.ta=function(t){H(this.g,new vi(t))},Re.prototype.sa=function(t){H(this.g,new wi)},Re.prototype.ra=function(){H(this.g,"b")},Ot.prototype.createWebChannel=Ot.prototype.g,ee.prototype.send=ee.prototype.o,ee.prototype.open=ee.prototype.m,ee.prototype.close=ee.prototype.close,ph=Ft.createWebChannelTransport=function(){return new Ot},fh=Ft.getStatEventTarget=function(){return vt()},dh=Ft.Event=ye,hh=Ft.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,lh=Ft.ErrorCode=wt,Fr.COMPLETE="complete",uh=Ft.EventType=Fr,Or.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",$.prototype.listen=$.prototype.K,ch=Ft.WebChannel=Or,x_=Ft.FetchXmlHttpFactory=Xe,O.prototype.listenOnce=O.prototype.L,O.prototype.getLastError=O.prototype.Ka,O.prototype.getLastErrorCode=O.prototype.Ba,O.prototype.getStatus=O.prototype.Z,O.prototype.getResponseJson=O.prototype.Oa,O.prototype.getResponseText=O.prototype.oa,O.prototype.send=O.prototype.ea,O.prototype.setWithCredentials=O.prototype.Ha,ah=Ft.XhrIo=O}).apply(typeof ks<"u"?ks:typeof self<"u"?self:typeof window<"u"?window:{});var mh="@firebase/firestore",gh="4.8.0";var Te=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");var qs="11.10.0";var Ns=new lt("@firebase/firestore");function at(r,...e){if(Ns.logLevel<=Z.DEBUG){let n=e.map(Nh);Ns.debug(`Firestore (${qs}): ${r}`,...n)}}function kh(r,...e){if(Ns.logLevel<=Z.ERROR){let n=e.map(Nh);Ns.error(`Firestore (${qs}): ${r}`,...n)}}function Nh(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ce(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Dh(r,i,n)}function Dh(r,e,n){let i=`FIRESTORE (${qs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw kh(i),new Error(i)}function Gn(r,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,r||Dh(e,o,i)}var Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},W=class extends Oe{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var oc=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ac=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Te.UNAUTHENTICATED))}shutdown(){}};var cc=class{constructor(e){this.t=e,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Gn(this.o===void 0,42304);let i=this.i,o=v=>this.i!==i?(i=this.i,n(v)):Promise.resolve(),u=new Wn;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Wn,e.enqueueRetryable(()=>o(this.currentUser))};let h=()=>{let v=u;e.enqueueRetryable(async()=>{await v.promise,await o(this.currentUser)})},y=v=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(v=>y(v)),setTimeout(()=>{if(!this.auth){let v=this.t.getImmediate({optional:!0});v?y(v):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Wn)}},0),h()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Gn(typeof i.accessToken=="string",31837,{l:i}),new oc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Gn(e===null||typeof e=="string",2055,{h:e}),new Te(e)}},uc=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},lc=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new uc(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ds=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hc=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Lt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Gn(this.o===void 0,3512);let i=u=>{u.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);let h=u.token!==this.m;return this.m=u.token,at("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>i(u))};let o=u=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){let u=this.V.getImmediate({optional:!0});u?o(u):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ds(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Gn(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ds(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function L_(r){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}function M_(){return new TextEncoder}var dc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let o=L_(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}};function xe(r,e){return r<e?-1:r>e?1:0}function F_(r,e){let n=0;for(;n<r.length&&n<e.length;){let i=r.codePointAt(n),o=e.codePointAt(n);if(i!==o){if(i<128&&o<128)return xe(i,o);{let u=M_(),h=U_(u.encode(_h(r,n)),u.encode(_h(e,n)));return h!==0?h:xe(i,o)}}n+=i>65535?2:1}return xe(r.length,e.length)}function _h(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function U_(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return xe(r[n],e[n]);return xe(r.length,e.length)}var yh="__name__",Os=class r{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ce(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return r.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof r?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let o=0;o<i;o++){let u=r.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return xe(e.length,n.length)}static compareSegments(e,n){let i=r.isNumericId(e),o=r.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?r.extractNumericId(e).compare(r.extractNumericId(n)):F_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cs.fromString(e.substring(4,e.length-2))}},Ut=class r extends Os{construct(e,n,i){return new r(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new W(Y.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new r(n)}static emptyPath(){return new r([])}},B_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fc=class r extends Os{construct(e,n,i){return new r(e,n,i)}static isValidIdentifier(e){return B_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yh}static keyField(){return new r([yh])}static fromServerFormat(e){let n=[],i="",o=0,u=()=>{if(i.length===0)throw new W(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},h=!1;for(;o<e.length;){let y=e[o];if(y==="\\"){if(o+1===e.length)throw new W(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new W(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,o+=2}else y==="`"?(h=!h,o++):y!=="."||h?(i+=y,o++):(u(),o++)}if(u(),h)throw new W(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(n)}static emptyPath(){return new r([])}};var Bt=class r{constructor(e){this.path=e}static fromPath(e){return new r(Ut.fromString(e))}static fromName(e){return new r(Ut.fromString(e).popFirst(5))}static empty(){return new r(Ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new r(new Ut(e.slice()))}};function q_(r,e,n,i){if(e===!0&&i===!0)throw new W(Y.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function j_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ae(r,e){let n={typeString:r};return e&&(n.value=e),n}function ji(r,e){if(!j_(r))throw new W(Y.INVALID_ARGUMENT,"JSON must be an object");let n;for(let i in e)if(e[i]){let o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}let h=r[i];if(o&&typeof h!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new W(Y.INVALID_ARGUMENT,n);return!0}var Ih=-62135596800,Eh=1e6,Li=class r{static now(){return r.fromMillis(Date.now())}static fromDate(e){return r.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Eh);return new r(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ih)throw new W(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Eh}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ji(e,r._jsonSchema))return new r(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Ih;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Li._jsonSchemaVersion="firestore/timestamp/1.0",Li._jsonSchema={type:ae("string",Li._jsonSchemaVersion),seconds:ae("number"),nanoseconds:ae("number")};var pc=class{constructor(e,n,i,o){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=o}};pc.UNKNOWN_ID=-1;function $_(r){return r.name==="IndexedDbTransactionError"}function z_(r){return r===0&&1/r==-1/0}var G_="remoteDocuments",Oh="owner";var Vh="mutationQueues";var xh="mutations";var Lh="documentMutations",W_="remoteDocumentsV14";var Mh="remoteDocumentGlobal";var Fh="targets";var Uh="targetDocuments";var Bh="targetGlobal",qh="collectionParents";var jh="clientMetadata";var $h="bundles";var zh="namedQueries";var K_="indexConfiguration";var H_="indexState";var Q_="indexEntries";var Gh="documentOverlays";var J_="globals";var Y_=[Vh,xh,Lh,G_,Fh,Oh,Bh,Uh,jh,Mh,qh,$h,zh],bA=[...Y_,Gh],X_=[Vh,xh,Lh,W_,Fh,Oh,Bh,Uh,jh,Mh,qh,$h,zh,Gh],Z_=X_,ey=[...Z_,K_,H_,Q_];var SA=[...ey,J_];var pr=class r{constructor(e,n){this.comparator=e,this.root=n||ft.EMPTY}insert(e,n){return new r(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lr(this.root,e,this.comparator,!1)}getReverseIterator(){return new lr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lr(this.root,e,this.comparator,!0)}},lr=class{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ft=class r{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??r.RED,this.left=o??r.EMPTY,this.right=u??r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new r(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this,u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return r.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}};ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1;ft.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Vs=class r{constructor(e){this.comparator=e,this.data=new pr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xs(this.data.getIterator())}getIteratorFrom(e){return new xs(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof r)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new r(this.comparator);return n.data=e,n}},xs=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var mc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var en=class r{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new mc("Invalid base64 string: "+u):u}})(e);return new r(n)}static fromUint8Array(e){let n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new r(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};en.EMPTY_BYTE_STRING=new en("");var ty=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ny(r){if(Gn(!!r,39018),typeof r=="string"){let e=0,n=ty.exec(r);if(Gn(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}let i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Mi(r.seconds),nanos:Mi(r.nanos)}}function Mi(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ry(r){return typeof r=="string"?en.fromBase64String(r):en.fromUint8Array(r)}var vh="(default)",gc=class r{constructor(e,n){this.projectId=e,this.database=n||vh}static empty(){return new r("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof r&&e.projectId===this.projectId&&e.database===this.database}};var Wh="__type__",iy="__max__";var Kh="__vector__",Hh="value";function sy(r){var e,n;return((n=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Wh])===null||n===void 0?void 0:n.stringValue)===Kh}function oy(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iy}var PA={mapValue:{fields:{[Wh]:{stringValue:Kh},[Hh]:{arrayValue:{}}}}};var _c=class{constructor(e,n=null,i=[],o=[],u=null,h="F",y=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=y,this.endAt=v,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function ay(r){return new _c(r)}var CA=new pr(Bt.comparator);var kA=new pr(Bt.comparator);var NA=new pr(Bt.comparator),DA=new Vs(Bt.comparator);var OA=new Vs(xe);var wh,F;(F=wh||(wh={}))[F.OK=0]="OK",F[F.CANCELLED=1]="CANCELLED",F[F.UNKNOWN=2]="UNKNOWN",F[F.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",F[F.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",F[F.NOT_FOUND=5]="NOT_FOUND",F[F.ALREADY_EXISTS=6]="ALREADY_EXISTS",F[F.PERMISSION_DENIED=7]="PERMISSION_DENIED",F[F.UNAUTHENTICATED=16]="UNAUTHENTICATED",F[F.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",F[F.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",F[F.ABORTED=10]="ABORTED",F[F.OUT_OF_RANGE=11]="OUT_OF_RANGE",F[F.UNIMPLEMENTED=12]="UNIMPLEMENTED",F[F.INTERNAL=13]="INTERNAL",F[F.UNAVAILABLE=14]="UNAVAILABLE",F[F.DATA_LOSS=15]="DATA_LOSS";var VA=new Cs([4294967295,4294967295],0);var Ls=class{constructor(){}bt(e,n){this.Dt(e,n),n.vt()}Dt(e,n){if("nullValue"in e)this.Ct(n,5);else if("booleanValue"in e)this.Ct(n,10),n.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(n,15),n.Ft(Mi(e.integerValue));else if("doubleValue"in e){let i=Mi(e.doubleValue);isNaN(i)?this.Ct(n,13):(this.Ct(n,15),z_(i)?n.Ft(0):n.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(n,20),typeof i=="string"&&(i=ny(i)),n.Mt(`${i.seconds||""}`),n.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,n),this.Ot(n);else if("bytesValue"in e)this.Ct(n,30),n.Nt(ry(e.bytesValue)),this.Ot(n);else if("referenceValue"in e)this.Bt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(n,45),n.Ft(i.latitude||0),n.Ft(i.longitude||0)}else"mapValue"in e?oy(e)?this.Ct(n,Number.MAX_SAFE_INTEGER):sy(e)?this.Lt(e.mapValue,n):(this.kt(e.mapValue,n),this.Ot(n)):"arrayValue"in e?(this.qt(e.arrayValue,n),this.Ot(n)):Ce(19022,{Qt:e})}xt(e,n){this.Ct(n,25),this.$t(e,n)}$t(e,n){n.Mt(e)}kt(e,n){let i=e.fields||{};this.Ct(n,55);for(let o of Object.keys(i))this.xt(o,n),this.Dt(i[o],n)}Lt(e,n){var i,o;let u=e.fields||{};this.Ct(n,53);let h=Hh,y=((o=(i=u[h].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.length)||0;this.Ct(n,15),n.Ft(Mi(y)),this.xt(h,n),this.Dt(u[h],n)}qt(e,n){let i=e.values||[];this.Ct(n,50);for(let o of i)this.Dt(o,n)}Bt(e,n){this.Ct(n,37),Bt.fromName(e).path.forEach(i=>{this.Ct(n,60),this.$t(i,n)})}Ct(e,n){e.Ft(n)}Ot(e){e.Ft(2)}};Ls.Ut=new Ls;var xA=new Uint8Array(0);var Qh=41943040,dt=class r{static withCacheSize(e){return new r(e,r.DEFAULT_COLLECTION_PERCENTILE,r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}};dt.DEFAULT_COLLECTION_PERCENTILE=10,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dt.DEFAULT=new dt(Qh,dt.DEFAULT_COLLECTION_PERCENTILE,dt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dt.DISABLED=new dt(-1,0,0);var cy=1048576;function sc(){return typeof document<"u"?document:null}var yc=class{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Fi=e,this.timerId=n,this.d_=i,this.E_=o,this.A_=u,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let n=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,n-i);o>0&&at("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var Ic=class r{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Wn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){let h=Date.now()+i,y=new r(e,n,h,o,u);return y.start(i),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Th,Ah;(Ah=Th||(Th={})).Fa="default",Ah.Cache="cache";function uy(r){let e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}var bh=new Map;var ly="firestore.googleapis.com",Sh=!0,Ms=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new W(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ly,this.ssl=Sh}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:Sh;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Qh;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cy)throw new W(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}q_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uy((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new W(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new W(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new W(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ec=class{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ms({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ms(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new ac;switch(i.type){case"firstParty":return new lc(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new W(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let i=bh.get(n);i&&(at("ComponentProvider","Removing Datastore"),bh.delete(n),i.terminate())})(this),Promise.resolve()}};var vc=class r{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new r(this.firestore,e,this._query)}},Kn=class r{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new r(this.firestore,e,this._key)}toJSON(){return{type:r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(ji(n,r._jsonSchema))return new r(e,i||null,new Bt(Ut.fromString(n.referencePath)))}};Kn._jsonSchemaVersion="firestore/documentReference/1.0",Kn._jsonSchema={type:ae("string",Kn._jsonSchemaVersion),referencePath:ae("string")};var wc=class r extends vc{constructor(e,n,i){super(e,n,ay(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new Bt(e))}withConverter(e){return new r(this.firestore,e,this._path)}};var Rh="AsyncQueue",Fs=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new yc(this,"async_queue_retry"),this.oc=()=>{let i=sc();i&&at(Rh,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let n=sc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let n=sc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let n=new Wn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!$_(e))throw e;at(Rh,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let n=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,kh("INTERNAL UNHANDLED ERROR: ",Ph(i)),i}).then(i=>(this.nc=!1,i))));return this._c=n,n}enqueueAfterDelay(e,n,i){this.ac(),this.sc.indexOf(e)>-1&&(n=0);let o=Ic.createAndSchedule(this,e,n,i,u=>this.lc(u));return this.ec.push(o),o}ac(){this.tc&&Ce(47125,{hc:Ph(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let n=this.ec.indexOf(e);this.ec.splice(n,1)}};function Ph(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}var Tc=class extends Ec{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new Fs,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Fs(e),this._firestoreClient=void 0,await e}}};var Fi=class r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new r(en.fromBase64String(e))}catch(n){throw new W(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new r(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ji(e,r._jsonSchema))return r.fromBase64String(e.bytes)}};Fi._jsonSchemaVersion="firestore/bytes/1.0",Fi._jsonSchema={type:ae("string",Fi._jsonSchemaVersion),bytes:ae("string")};var Us=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ui=class r{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:r._jsonSchemaVersion}}static fromJSON(e){if(ji(e,r._jsonSchema))return new r(e.latitude,e.longitude)}};Ui._jsonSchemaVersion="firestore/geoPoint/1.0",Ui._jsonSchema={type:ae("string",Ui._jsonSchemaVersion),latitude:ae("number"),longitude:ae("number")};var Bi=class r{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ji(e,r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new r(e.vectorValues);throw new W(Y.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Bi._jsonSchemaVersion="firestore/vectorValue/1.0",Bi._jsonSchema={type:ae("string",Bi._jsonSchemaVersion),vectorValues:ae("object")};var hy=new RegExp("[~\\*/\\[\\]]");function dy(r,e,n){if(e.search(hy)>=0)throw Ch(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Us(...e.split("."))._internalPath}catch{throw Ch(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Ch(r,e,n,i,o){let u=i&&!i.isEmpty(),h=o!==void 0,y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let v="";return(u||h)&&(v+=" (found",u&&(v+=` in field ${i}`),h&&(v+=` in document ${o}`),v+=")"),new W(Y.INVALID_ARGUMENT,y+r+v)}var Bs=class{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Ac(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Jh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Ac=class extends Bs{data(){return super.data()}};function Jh(r,e){return typeof e=="string"?dy(r,e):e instanceof Us?e._internalPath:e._delegate._internalPath}var hr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dr=class r extends Bs{constructor(e,n,i,o,u,h){super(e,n,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new fr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Jh("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(Y.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};dr._jsonSchemaVersion="firestore/documentSnapshot/1.0",dr._jsonSchema={type:ae("string",dr._jsonSchemaVersion),bundleSource:ae("string","DocumentSnapshot"),bundleName:ae("string"),bundle:ae("string")};var fr=class extends dr{data(e={}){return super.data(e)}},qi=class r{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new hr(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new fr(this._firestore,this._userDataWriter,i.key,i,new hr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(y=>{let v=new fr(o._firestore,o._userDataWriter,y.doc.key,y.doc,new hr(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:v,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(y=>u||y.type!==3).map(y=>{let v=new fr(o._firestore,o._userDataWriter,y.doc.key,y.doc,new hr(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter),w=-1,b=-1;return y.type!==0&&(w=h.indexOf(y.doc.key),h=h.delete(y.doc.key)),y.type!==1&&(h=h.add(y.doc),b=h.indexOf(y.doc.key)),{type:fy(y.type),doc:v,oldIndex:w,newIndex:b}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(Y.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],i=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function fy(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:r})}}qi._jsonSchemaVersion="firestore/querySnapshot/1.0",qi._jsonSchema={type:ae("string",qi._jsonSchemaVersion),bundleSource:ae("string","QuerySnapshot"),bundleName:ae("string"),bundle:ae("string")};(function(e,n=!0){(function(o){qs=o})(ar),st(new we("firestore",(i,{instanceIdentifier:o,options:u})=>{let h=i.getProvider("app").getImmediate(),y=new Tc(new cc(i.getProvider("auth-internal")),new hc(h,i.getProvider("app-check-internal")),(function(w,b){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new W(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(w.options.projectId,b)})(h,o),h);return u=Object.assign({useFetchStreams:n},u),y._setSettings(u),y},"PUBLIC").setMultipleInstances(!0)),oe(mh,gh,e),oe(mh,gh,"esm2017")})();var $i=class{constructor(e){return e}},Yh="firestore",bc=class{constructor(){return cr(Yh)}};var Sc=new rr("angularfire2.firestore-instances");function py(r,e){let n=Ri(Yh,r,e);return n&&new $i(n)}function my(r){return(e,n)=>{let i=e.runOutsideAngular(()=>r(n));return new $i(i)}}var gy={provide:bc,deps:[[new De,Sc]]},_y={provide:$i,useFactory:py,deps:[[new De,Sc],Mt]};function Xh(r,...e){return oe("angularfire",Yt.full,"fst"),ir([_y,gy,{provide:Sc,useFactory:my(r),multi:!0,deps:[Qt,sr,Bn,qn,[new De,xi],[new De,ur],...e]}])}var Zh=()=>{};var nd=function(r){let e=[],n=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},yy=function(r){let e=[],n=0,i=0;for(;n<r.length;){let o=r[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){let u=r[n++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){let u=r[n++],h=r[n++],y=r[n++],v=((o&7)<<18|(u&63)<<12|(h&63)<<6|y&63)-65536;e[i++]=String.fromCharCode(55296+(v>>10)),e[i++]=String.fromCharCode(56320+(v&1023))}else{let u=r[n++],h=r[n++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},rd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){let u=r[o],h=o+1<r.length,y=h?r[o+1]:0,v=o+2<r.length,w=v?r[o+2]:0,b=u>>2,S=(u&3)<<4|y>>4,A=(y&15)<<2|w>>6,x=w&63;v||(x=64,h||(A=64)),i.push(n[b],n[S],n[A],n[x])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(nd(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):yy(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){let u=n[r.charAt(o++)],y=o<r.length?n[r.charAt(o)]:0;++o;let w=o<r.length?n[r.charAt(o)]:64;++o;let S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||y==null||w==null||S==null)throw new Pc;let A=u<<2|y>>4;if(i.push(A),w!==64){let x=y<<4&240|w>>2;if(i.push(x),S!==64){let R=w<<6&192|S;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}},Pc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Iy=function(r){let e=nd(r);return rd.encodeByteArray(e,!0)},Gi=function(r){return Iy(r).replace(/\./g,"")},$s=function(r){try{return rd.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function id(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ey=()=>id().__FIREBASE_DEFAULTS__,vy=()=>{if(typeof process>"u"||typeof process.env>"u")return;let r=process.env.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},wy=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=r&&$s(r[1]);return e&&JSON.parse(e)},kc=()=>{try{return Zh()||Ey()||vy()||wy()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Nc=r=>kc()?.emulatorHosts?.[r],sd=r=>{let e=Nc(r);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Dc=()=>kc()?.config,Oc=r=>kc()?.[`_${r}`];var js=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function Hn(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zs(r){return(await fetch(r,{credentials:"include"})).ok}function od(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let h=ne({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Gi(JSON.stringify(n)),Gi(JSON.stringify(h)),""].join(".")}var zi={};function Ty(){let r={prod:[],emulator:[]};for(let e of Object.keys(zi))zi[e]?r.emulator.push(e):r.prod.push(e);return r}function Ay(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}var ed=!1;function Gs(r,e){if(typeof window>"u"||typeof document>"u"||!Hn(window.location.host)||zi[r]===e||zi[r]||ed)return;zi[r]=e;function n(A){return`__firebase__banner__${A}`}let i="__firebase__banner",u=Ty().prod.length>0;function h(){let A=document.getElementById(i);A&&A.remove()}function y(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function v(A,x){A.setAttribute("width","24"),A.setAttribute("id",x),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function w(){let A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{ed=!0,h()},A}function b(A,x){A.setAttribute("id",x),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){let A=Ay(i),x=n("text"),R=document.getElementById(x)||document.createElement("span"),V=n("learnmore"),N=document.getElementById(V)||document.createElement("a"),re=n("preprendIcon"),K=document.getElementById(re)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){let q=A.element;y(q),b(N,V);let se=w();v(K,re),q.append(K,R,N,se),document.body.appendChild(q)}u?(R.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function ge(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ad(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ge())}function cd(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ud(){let r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ld(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hd(){let r=ge();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Vc(){try{return typeof indexedDB=="object"}catch{return!1}}function dd(){return new Promise((r,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}var by="FirebaseError",ke=class r extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=by,Object.setPrototypeOf(this,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}},qt=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?Sy(u,i):"Error",y=`${this.serviceName}: ${h} (${o}).`;return new ke(o,y,i)}};function Sy(r,e){return r.replace(Ry,(n,i)=>{let o=e[i];return o!=null?String(o):`<${i}?>`})}var Ry=/\{\$([^}]+)}/g;function fd(r){for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function pt(r,e){if(r===e)return!0;let n=Object.keys(r),i=Object.keys(e);for(let o of n){if(!i.includes(o))return!1;let u=r[o],h=e[o];if(td(u)&&td(h)){if(!pt(u,h))return!1}else if(u!==h)return!1}for(let o of i)if(!n.includes(o))return!1;return!0}function td(r){return r!==null&&typeof r=="object"}function Wi(r){let e=[];for(let[n,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pd(r,e){let n=new Cc(r,e);return n.subscribe.bind(n)}var Cc=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let o;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");Py(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:i},o.next===void 0&&(o.next=Rc),o.error===void 0&&(o.error=Rc),o.complete===void 0&&(o.complete=Rc);let u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Py(r,e){if(typeof r!="object"||r===null)return!1;for(let n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Rc(){}var tS=14400*1e3;function tn(r){return r&&r._delegate?r._delegate:r}var Le=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Qn="[DEFAULT]";var xc=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new js;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ky(e))try{this.getOrInitializeService({instanceIdentifier:Qn})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(n);try{let u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=Qn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qn){return this.instances.has(e)}getOptions(e=Qn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[u,h]of this.instancesDeferred.entries()){let y=this.normalizeInstanceIdentifier(u);i===y&&h.resolve(o)}return o}onInit(e,n){let i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);let u=this.instances.get(i);return u&&e(u,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Cy(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Qn){return this.component?this.component.multipleInstances?e:Qn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Cy(r){return r===Qn?void 0:r}function ky(r){return r.instantiationMode==="EAGER"}var Ws=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new xc(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Ny=[],X=(function(r){return r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT",r})(X||{}),Dy={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},Oy=X.INFO,Vy={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},xy=(r,e,...n)=>{if(e<r.logLevel)return;let i=new Date().toISOString(),o=Vy[e];if(o)console[o](`[${i}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nn=class{constructor(e){this.name=e,this._logLevel=Oy,this._logHandler=xy,this._userLogHandler=null,Ny.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in X))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dy[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...e),this._logHandler(this,X.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...e),this._logHandler(this,X.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,X.INFO,...e),this._logHandler(this,X.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,X.WARN,...e),this._logHandler(this,X.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...e),this._logHandler(this,X.ERROR,...e)}};var Mc=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ly(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function Ly(r){return r.getComponent()?.type==="VERSION"}var Fc="@firebase/app",md="0.14.1";var jt=new nn("@firebase/app"),My="@firebase/app-compat",Fy="@firebase/analytics-compat",Uy="@firebase/analytics",By="@firebase/app-check-compat",qy="@firebase/app-check",jy="@firebase/auth",$y="@firebase/auth-compat",zy="@firebase/database",Gy="@firebase/data-connect",Wy="@firebase/database-compat",Ky="@firebase/functions",Hy="@firebase/functions-compat",Qy="@firebase/installations",Jy="@firebase/installations-compat",Yy="@firebase/messaging",Xy="@firebase/messaging-compat",Zy="@firebase/performance",eI="@firebase/performance-compat",tI="@firebase/remote-config",nI="@firebase/remote-config-compat",rI="@firebase/storage",iI="@firebase/storage-compat",sI="@firebase/firestore",oI="@firebase/ai",aI="@firebase/firestore-compat",cI="firebase",uI="12.1.0";var Uc="[DEFAULT]",lI={[Fc]:"fire-core",[My]:"fire-core-compat",[Uy]:"fire-analytics",[Fy]:"fire-analytics-compat",[qy]:"fire-app-check",[By]:"fire-app-check-compat",[jy]:"fire-auth",[$y]:"fire-auth-compat",[zy]:"fire-rtdb",[Gy]:"fire-data-connect",[Wy]:"fire-rtdb-compat",[Ky]:"fire-fn",[Hy]:"fire-fn-compat",[Qy]:"fire-iid",[Jy]:"fire-iid-compat",[Yy]:"fire-fcm",[Xy]:"fire-fcm-compat",[Zy]:"fire-perf",[eI]:"fire-perf-compat",[tI]:"fire-rc",[nI]:"fire-rc-compat",[rI]:"fire-gcs",[iI]:"fire-gcs-compat",[sI]:"fire-fst",[aI]:"fire-fst-compat",[oI]:"fire-vertex","fire-js":"fire-js",[cI]:"fire-js-all"};var Ks=new Map,hI=new Map,Bc=new Map;function gd(r,e){try{r.container.addComponent(e)}catch(n){jt.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function sn(r){let e=r.name;if(Bc.has(e))return jt.debug(`There were multiple attempts to register component ${e}.`),!1;Bc.set(e,r);for(let n of Ks.values())gd(n,r);for(let n of hI.values())gd(n,r);return!0}function Hi(r,e){let n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Me(r){return r==null?!1:r.settings!==void 0}var dI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rn=new qt("app","Firebase",dI);var qc=class{constructor(e,n,i){this._isDeleted=!1,this._options=ne({},e),this._config=ne({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Le("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rn.create("app-deleted",{appName:this._name})}};var on=uI;function Hs(r,e={}){let n=r;typeof e!="object"&&(e={name:e});let i=ne({name:Uc,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw rn.create("bad-app-name",{appName:String(o)});if(n||(n=Dc()),!n)throw rn.create("no-options");let u=Ks.get(o);if(u){if(pt(n,u.options)&&pt(i,u.config))return u;throw rn.create("duplicate-app",{appName:o})}let h=new Ws(o);for(let v of Bc.values())h.addComponent(v);let y=new qc(n,i,h);return Ks.set(o,y),y}function Qs(r=Uc){let e=Ks.get(r);if(!e&&r===Uc&&Dc())return Hs();if(!e)throw rn.create("no-app",{appName:r});return e}function ct(r,e,n){let i=lI[r]??r;n&&(i+=`-${n}`);let o=i.match(/\s|\//),u=e.match(/\s|\//);if(o||u){let h=[`Unable to register library "${i}" with version "${e}":`];o&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jt.warn(h.join(" "));return}sn(new Le(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var fI="firebase-heartbeat-database",pI=1,Ki="firebase-heartbeat-store",Lc=null;function Ed(){return Lc||(Lc=ps(fI,pI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ki)}catch(n){console.warn(n)}}}}).catch(r=>{throw rn.create("idb-open",{originalErrorMessage:r.message})})),Lc}async function mI(r){try{let n=(await Ed()).transaction(Ki),i=await n.objectStore(Ki).get(vd(r));return await n.done,i}catch(e){if(e instanceof ke)jt.warn(e.message);else{let n=rn.create("idb-get",{originalErrorMessage:e?.message});jt.warn(n.message)}}}async function _d(r,e){try{let i=(await Ed()).transaction(Ki,"readwrite");await i.objectStore(Ki).put(e,vd(r)),await i.done}catch(n){if(n instanceof ke)jt.warn(n.message);else{let i=rn.create("idb-set",{originalErrorMessage:n?.message});jt.warn(i.message)}}}function vd(r){return`${r.name}!${r.options.appId}`}var gI=1024,_I=30,jc=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new $c(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yd();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>_I){let o=II(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){jt.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=yd(),{heartbeatsToSend:n,unsentEntries:i}=yI(this._heartbeatsCache.heartbeats),o=Gi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return jt.warn(e),""}}};function yd(){return new Date().toISOString().substring(0,10)}function yI(r,e=gI){let n=[],i=r.slice();for(let o of r){let u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),Id(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Id(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var $c=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vc()?dd().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await mI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return _d(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return _d(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function Id(r){return Gi(JSON.stringify({version:2,heartbeats:r})).length}function II(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let i=1;i<r.length;i++)r[i].date<n&&(n=r[i].date,e=i);return e}function EI(r){sn(new Le("platform-logger",e=>new Mc(e),"PRIVATE")),sn(new Le("heartbeat",e=>new jc(e),"PRIVATE")),ct(Fc,md,r),ct(Fc,md,"esm2020"),ct("fire-js","")}EI("");var vI="firebase",wI="12.1.0";ct(vI,wI,"app");function Ld(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Md=Ld,Fd=new qt("auth","Firebase",Ld());var to=new nn("@firebase/auth");function TI(r,...e){to.logLevel<=X.WARN&&to.warn(`Auth (${on}): ${r}`,...e)}function Ys(r,...e){to.logLevel<=X.ERROR&&to.error(`Auth (${on}): ${r}`,...e)}function un(r,...e){throw uu(r,...e)}function Yn(r,...e){return uu(r,...e)}function Ud(r,e,n){let i=rt(ne({},Md()),{[e]:n});return new qt("auth","Firebase",i).create(e,{appName:r.name})}function Jn(r){return Ud(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uu(r,...e){if(typeof r!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(n,...i)}return Fd.create(r,...e)}function D(r,e,...n){if(!r)throw uu(e,...n)}function $t(r){let e="INTERNAL ASSERTION FAILED: "+r;throw Ys(e),new Error(e)}function ln(r,e){r||$t(e)}function Kc(){return typeof self<"u"&&self.location?.href||""}function AI(){return wd()==="http:"||wd()==="https:"}function wd(){return typeof self<"u"&&self.location?.protocol||null}function bI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AI()||ud()||"connection"in navigator)?navigator.onLine:!0}function SI(){if(typeof navigator>"u")return null;let r=navigator;return r.languages&&r.languages[0]||r.language||null}var Xn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ln(n>e,"Short delay should be less than long delay!"),this.isMobile=ad()||ld()}get(){return bI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function lu(r,e){ln(r.emulator,"Emulator should always be set here");let{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var no=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var RI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var PI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CI=new Xn(3e4,6e4);function hu(r,e){return r.tenantId&&!e.tenantId?rt(ne({},e),{tenantId:r.tenantId}):e}async function mr(r,e,n,i,o={}){return Bd(r,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});let y=Wi(ne({key:r.config.apiKey},h)).slice(1),v=await r._getAdditionalHeaders();v["Content-Type"]="application/json",r.languageCode&&(v["X-Firebase-Locale"]=r.languageCode);let w=ne({method:e,headers:v},u);return cd()||(w.referrerPolicy="no-referrer"),r.emulatorConfig&&Hn(r.emulatorConfig.host)&&(w.credentials="include"),no.fetch()(await qd(r,r.config.apiHost,n,y),w)})}async function Bd(r,e,n){r._canInitEmulator=!1;let i=ne(ne({},RI),e);try{let o=new Hc(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();let h=await u.json();if("needConfirmation"in h)throw Js(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{let y=u.ok?h.errorMessage:h.error.message,[v,w]=y.split(" : ");if(v==="FEDERATED_USER_ID_ALREADY_LINKED")throw Js(r,"credential-already-in-use",h);if(v==="EMAIL_EXISTS")throw Js(r,"email-already-in-use",h);if(v==="USER_DISABLED")throw Js(r,"user-disabled",h);let b=i[v]||v.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw Ud(r,b,w);un(r,b)}}catch(o){if(o instanceof ke)throw o;un(r,"network-request-failed",{message:String(o)})}}async function kI(r,e,n,i,o={}){let u=await mr(r,e,n,i,o);return"mfaPendingCredential"in u&&un(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function qd(r,e,n,i){let o=`${e}${n}?${i}`,u=r,h=u.config.emulator?lu(r.config,o):`${r.config.apiScheme}://${o}`;return PI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}var Hc=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Yn(this.auth,"network-request-failed")),CI.get())})}};function Js(r,e,n){let i={appName:r.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let o=Yn(r,e,i);return o.customData._tokenResponse=n,o}async function NI(r,e){return mr(r,"POST","/v1/accounts:delete",e)}async function ro(r,e){return mr(r,"POST","/v1/accounts:lookup",e)}function Qi(r){if(r)try{let e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function jd(r,e=!1){let n=tn(r),i=await n.getIdToken(e),o=du(i);D(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");let u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:i,authTime:Qi(zc(o.auth_time)),issuedAtTime:Qi(zc(o.iat)),expirationTime:Qi(zc(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function zc(r){return Number(r)*1e3}function du(r){let[e,n,i]=r.split(".");if(e===void 0||n===void 0||i===void 0)return Ys("JWT malformed, contained fewer than 3 sections"),null;try{let o=$s(n);return o?JSON.parse(o):(Ys("Failed to decode base64 JWT payload"),null)}catch(o){return Ys("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Td(r){let e=du(r);return D(e,"internal-error"),D(typeof e.exp<"u","internal-error"),D(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yi(r,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof ke&&DI(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function DI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}var Qc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Xi=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qi(this.lastLoginAt),this.creationTime=Qi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function io(r){let e=r.auth,n=await r.getIdToken(),i=await Yi(r,ro(e,{idToken:n}));D(i?.users.length,e,"internal-error");let o=i.users[0];r._notifyReloadListener(o);let u=o.providerUserInfo?.length?zd(o.providerUserInfo):[],h=OI(r.providerData,u),y=r.isAnonymous,v=!(r.email&&o.passwordHash)&&!h?.length,w=y?v:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Xi(o.createdAt,o.lastLoginAt),isAnonymous:w};Object.assign(r,b)}async function $d(r){let e=tn(r);await io(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OI(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function zd(r){return r.map(i=>{var o=i,{providerId:e}=o,n=la(o,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}async function VI(r,e){let n=await Bd(r,{},async()=>{let i=Wi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await qd(r,o,"/v1/token",`key=${u}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";let v={method:"POST",headers:y,body:i};return r.emulatorConfig&&Hn(r.emulatorConfig.host)&&(v.credentials="include"),no.fetch()(h,v)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function xI(r,e){return mr(r,"POST","/v2/accounts:revokeToken",hu(r,e))}var Ji=class r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){D(e.idToken,"internal-error"),D(typeof e.idToken<"u","internal-error"),D(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Td(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){D(e.length!==0,"internal-error");let n=Td(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(D(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){let{accessToken:i,refreshToken:o,expiresIn:u}=await VI(e,n);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:o,expirationTime:u}=n,h=new r;return i&&(D(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(D(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(D(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new r,this.toJSON())}_performRefresh(){return $t("not implemented")}};function an(r,e){D(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}var cn=class r{constructor(u){var h=u,{uid:e,auth:n,stsTokenManager:i}=h,o=la(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Xi(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let n=await Yi(this,this.stsTokenManager.getToken(this.auth,e));return D(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return jd(this,e)}reload(){return $d(this)}_assign(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>ne({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new r(rt(ne({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await io(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Me(this.auth.app))return Promise.reject(Jn(this.auth));let e=await this.getIdToken();return await Yi(this,NI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return rt(ne({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>ne({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){let i=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,y=n.tenantId??void 0,v=n._redirectEventId??void 0,w=n.createdAt??void 0,b=n.lastLoginAt??void 0,{uid:S,emailVerified:A,isAnonymous:x,providerData:R,stsTokenManager:V}=n;D(S&&V,e,"internal-error");let N=Ji.fromJSON(this.name,V);D(typeof S=="string",e,"internal-error"),an(i,e.name),an(o,e.name),D(typeof A=="boolean",e,"internal-error"),D(typeof x=="boolean",e,"internal-error"),an(u,e.name),an(h,e.name),an(y,e.name),an(v,e.name),an(w,e.name),an(b,e.name);let re=new r({uid:S,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:x,photoURL:h,phoneNumber:u,tenantId:y,stsTokenManager:N,createdAt:w,lastLoginAt:b});return R&&Array.isArray(R)&&(re.providerData=R.map(K=>ne({},K))),v&&(re._redirectEventId=v),re}static async _fromIdTokenResponse(e,n,i=!1){let o=new Ji;o.updateFromServerResponse(n);let u=new r({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await io(u),u}static async _fromGetAccountInfoResponse(e,n,i){let o=n.users[0];D(o.localId!==void 0,"internal-error");let u=o.providerUserInfo!==void 0?zd(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,y=new Ji;y.updateFromIdToken(i);let v=new r({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:h}),w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Xi(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(v,w),v}};var Ad=new Map;function zt(r){ln(r instanceof Function,"Expected a class definition");let e=Ad.get(r);return e?(ln(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ad.set(r,e),e)}var LI=(()=>{class r{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(n,i){this.storage[n]=i}async _get(n){let i=this.storage[n];return i===void 0?null:i}async _remove(n){delete this.storage[n]}_addListener(n,i){}_removeListener(n,i){}}return r.type="NONE",r})(),Jc=LI;function Xs(r,e,n){return`firebase:${r}:${e}:${n}`}var so=class r{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:o,name:u}=this.auth;this.fullUserKey=Xs(this.userKey,o.apiKey,u),this.fullPersistenceKey=Xs("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=await ro(this.auth,{idToken:e}).catch(()=>{});return n?cn._fromGetAccountInfoResponse(this.auth,n,e):null}return cn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new r(zt(Jc),e,i);let o=(await Promise.all(n.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w),u=o[0]||zt(Jc),h=Xs(i,e.config.apiKey,e.name),y=null;for(let w of n)try{let b=await w._get(h);if(b){let S;if(typeof b=="string"){let A=await ro(e,{idToken:b}).catch(()=>{});if(!A)break;S=await cn._fromGetAccountInfoResponse(e,A,b)}else S=cn._fromJSON(e,b);w!==u&&(y=S),u=w;break}}catch{}let v=o.filter(w=>w._shouldAllowMigration);return!u._shouldAllowMigration||!v.length?new r(u,e,i):(u=v[0],y&&await u._set(h,y.toJSON()),await Promise.all(n.map(async w=>{if(w!==u)try{await w._remove(h)}catch{}})),new r(u,e,i))}};function bd(r){let e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Jd(e))return"Blackberry";if(Yd(e))return"Webos";if(Wd(e))return"Safari";if((e.includes("chrome/")||Kd(e))&&!e.includes("edge/"))return"Chrome";if(Qd(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(n);if(i?.length===2)return i[1]}return"Other"}function Gd(r=ge()){return/firefox\//i.test(r)}function Wd(r=ge()){let e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kd(r=ge()){return/crios\//i.test(r)}function Hd(r=ge()){return/iemobile/i.test(r)}function Qd(r=ge()){return/android/i.test(r)}function Jd(r=ge()){return/blackberry/i.test(r)}function Yd(r=ge()){return/webos/i.test(r)}function fu(r=ge()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function MI(r=ge()){return fu(r)&&!!window.navigator?.standalone}function FI(){return hd()&&document.documentMode===10}function Xd(r=ge()){return fu(r)||Qd(r)||Yd(r)||Jd(r)||/windows phone/i.test(r)||Hd(r)}function Zd(r,e=[]){let n;switch(r){case"Browser":n=bd(ge());break;case"Worker":n=`${bd(ge())}-${r}`;break;default:n=r}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${on}/${i}`}var Yc=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=u=>new Promise((h,y)=>{try{let v=e(u);h(v)}catch(v){y(v)}});i.onAbort=n,this.queue.push(i);let o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function UI(r,e={}){return mr(r,"GET","/v2/passwordPolicy",hu(r,e))}var BI=6,Xc=class{constructor(e){let n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}};var Zc=class{constructor(e,n,i,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oo(this),this.idTokenSubscription=new oo(this),this.beforeStateQueue=new Yc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zt(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await so.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let n=await ro(this,{idToken:e}),i=await cn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Me(this.app)){let u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}let n=await this.assertedPersistence.getCurrentUser(),i=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let u=this.redirectUser?._redirectEventId,h=i?._redirectEventId,y=await this.tryRedirectSignIn(e);(!u||u===h)&&y?.user&&(i=y.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return D(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await io(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Me(this.app))return Promise.reject(Jn(this));let n=e?tn(e):null;return n&&D(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&D(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Me(this.app)?Promise.reject(Jn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Me(this.app)?Promise.reject(Jn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await UI(this),n=new Xc(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qt("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){let n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await xI(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){let i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let n=e&&zt(e)||this._popupRedirectResolver;D(n,this,"argument-error"),this.redirectPersistenceManager=await so.create(this,[zt(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,o){if(this._deleted)return()=>{};let u=typeof n=="function"?n:n.next.bind(n),h=!1,y=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(y,this,"internal-error"),y.then(()=>{h||u(this.currentUser)}),typeof n=="function"){let v=e.addObserver(n,i,o);return()=>{h=!0,v()}}else{let v=e.addObserver(n);return()=>{h=!0,v()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Me(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&TI(`Error while retrieving App Check token: ${e.error}`),e?.token}};function pu(r){return tn(r)}var oo=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=pd(n=>this.observer=n)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qI(r){mu=r}function jI(r){return mu.loadJS(r)}function $I(){return mu.gapiScript}function ef(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function tf(r,e){let n=Hi(r,"auth");if(n.isInitialized()){let o=n.getImmediate(),u=n.getOptions();if(pt(u,e??{}))return o;un(o,"already-initialized")}return n.initialize({options:e})}function zI(r,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(zt);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function nf(r,e,n){let i=pu(r);D(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let o=!!n?.disableWarnings,u=rf(e),{host:h,port:y}=GI(e),v=y===null?"":`:${y}`,w={url:`${u}//${h}${v}/`},b=Object.freeze({host:h,port:y,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){D(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),D(pt(w,i.config.emulator)&&pt(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=w,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,Hn(h)?(zs(`${u}//${h}${v}`),Gs("Auth",!0)):o||WI()}function rf(r){let e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function GI(r){let e=rf(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){let u=o[1];return{host:u,port:Sd(i.substr(u.length+1))}}else{let[u,h]=i.split(":");return{host:u,port:Sd(h)}}}function Sd(r){if(!r)return null;let e=Number(r);return isNaN(e)?null:e}function WI(){function r(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}var ao=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return $t("not implemented")}_getIdTokenResponse(e){return $t("not implemented")}_linkToIdToken(e,n){return $t("not implemented")}_getReauthenticationResolver(e){return $t("not implemented")}};async function Gc(r,e){return kI(r,"POST","/v1/accounts:signInWithIdp",hu(r,e))}var co=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var eu=class extends co{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Zi=class r{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,o=!1){let u=await cn._fromIdTokenResponse(e,i,o),h=Rd(i);return new r({user:u,providerId:h,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);let o=Rd(i);return new r({user:e,providerId:o,_tokenResponse:i,operationType:n})}};function Rd(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}var tu=class r extends ke{constructor(e,n,i,o){super(n.code,n.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,r.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,o){return new r(e,n,i,o)}};function sf(r,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?tu._fromErrorAndOperation(r,u,e,i):u})}async function KI(r,e,n=!1){let i=await Yi(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Zi._forOperation(r,"link",i)}async function HI(r,e,n=!1){let{auth:i}=r;if(Me(i.app))return Promise.reject(Jn(i));let o="reauthenticate";try{let u=await Yi(r,sf(i,o,e,r),n);D(u.idToken,i,"internal-error");let h=du(u.idToken);D(h,i,"internal-error");let{sub:y}=h;return D(r.uid===y,i,"user-mismatch"),Zi._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&un(i,"user-mismatch"),u}}async function QI(r,e,n=!1){if(Me(r.app))return Promise.reject(Jn(r));let i="signIn",o=await sf(r,i,e),u=await Zi._fromIdTokenResponse(r,i,o);return n||await r._updateCurrentUser(u.user),u}function of(r,e,n,i){return tn(r).onIdTokenChanged(e,n,i)}function af(r,e,n){return tn(r).beforeAuthStateChanged(e,n)}var uo="__sak";var lo=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var JI=1e3,YI=10,XI=(()=>{class r extends lo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xd(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let o=this.storage.getItem(i),u=this.localCache[i];o!==u&&n(i,u,o)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((y,v,w)=>{this.notifyListeners(y,w)});return}let o=n.key;i?this.detachListener():this.stopPolling();let u=()=>{let y=this.storage.getItem(o);!i&&this.localCache[o]===y||this.notifyListeners(o,y)},h=this.storage.getItem(o);FI()&&h!==n.newValue&&n.newValue!==n.oldValue?setTimeout(u,YI):u()}notifyListeners(n,i){this.localCache[n]=i;let o=this.listeners[n];if(o)for(let u of Array.from(o))u(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:o}),!0)})},JI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(n,i){await super._set(n,i),this.localCache[n]=JSON.stringify(i)}async _get(n){let i=await super._get(n);return this.localCache[n]=JSON.stringify(i),i}async _remove(n){await super._remove(n),delete this.localCache[n]}}return r.type="LOCAL",r})(),cf=XI;var ZI=(()=>{class r extends lo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return r.type="SESSION",r})(),gu=ZI;function eE(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}var tE=(()=>{class r{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(u=>u.isListeningto(n));if(i)return i;let o=new r(n);return this.receivers.push(o),o}isListeningto(n){return this.eventTarget===n}async handleEvent(n){let i=n,{eventId:o,eventType:u,data:h}=i.data,y=this.handlersMap[u];if(!y?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:u});let v=Array.from(y).map(async b=>b(i.origin,h)),w=await eE(v);i.ports[0].postMessage({status:"done",eventId:o,eventType:u,response:w})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}r.receivers=[];return r})();function uf(r="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return r+n}var nu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){let o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((y,v)=>{let w=uf("",20);o.port1.start();let b=setTimeout(()=>{v(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(S){let A=S;if(A.data.eventId===w)switch(A.data.status){case"ack":clearTimeout(b),u=setTimeout(()=>{v(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),y(A.data.response);break;default:clearTimeout(b),clearTimeout(u),v(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:w,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}};function mt(){return window}function nE(r){mt().location.href=r}function lf(){return typeof mt().WorkerGlobalScope<"u"&&typeof mt().importScripts=="function"}async function rE(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function iE(){return navigator?.serviceWorker?.controller||null}function sE(){return lf()?self:null}var hf="firebaseLocalStorageDb",oE=1,ho="firebaseLocalStorage",df="fbase_key",Zn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function po(r,e){return r.transaction([ho],e?"readwrite":"readonly").objectStore(ho)}function aE(){let r=indexedDB.deleteDatabase(hf);return new Zn(r).toPromise()}function ru(){let r=indexedDB.open(hf,oE);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{let i=r.result;try{i.createObjectStore(ho,{keyPath:df})}catch(o){n(o)}}),r.addEventListener("success",async()=>{let i=r.result;i.objectStoreNames.contains(ho)?e(i):(i.close(),await aE(),e(await ru()))})})}async function Pd(r,e,n){let i=po(r,!0).put({[df]:e,value:n});return new Zn(i).toPromise()}async function cE(r,e){let n=po(r,!1).get(e),i=await new Zn(n).toPromise();return i===void 0?null:i.value}function Cd(r,e){let n=po(r,!0).delete(e);return new Zn(n).toPromise()}var uE=800,lE=3,hE=(()=>{class r{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ru(),this.db)}async _withRetries(n){let i=0;for(;;)try{let o=await this._openDb();return await n(o)}catch(o){if(i++>lE)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tE._getInstance(sE()),this.receiver._subscribe("keyChanged",async(n,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(n,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await rE(),!this.activeServiceWorker)return;this.sender=new nu(this.activeServiceWorker);let n=await this.sender._send("ping",{},800);n&&n[0]?.fulfilled&&n[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(n){if(!(!this.sender||!this.activeServiceWorker||iE()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let n=await ru();return await Pd(n,uo,"1"),await Cd(n,uo),!0}catch{}return!1}async _withPendingWrite(n){this.pendingWrites++;try{await n()}finally{this.pendingWrites--}}async _set(n,i){return this._withPendingWrite(async()=>(await this._withRetries(o=>Pd(o,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)))}async _get(n){let i=await this._withRetries(o=>cE(o,n));return this.localCache[n]=i,i}async _remove(n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Cd(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)))}async _poll(){let n=await this._withRetries(u=>{let h=po(u,!1).getAll();return new Zn(h).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],o=new Set;if(n.length!==0)for(let{fbase_key:u,value:h}of n)o.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(h)&&(this.notifyListeners(u,h),i.push(u));for(let u of Object.keys(this.localCache))this.localCache[u]&&!o.has(u)&&(this.notifyListeners(u,null),i.push(u));return i}notifyListeners(n,i){this.localCache[n]=i;let o=this.listeners[n];if(o)for(let u of Array.from(o))u(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),uE)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return r.type="LOCAL",r})(),ff=hE;var RS=ef("rcb"),PS=new Xn(3e4,6e4);function dE(r,e){return e?zt(e):(D(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}var es=class extends ao{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gc(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function fE(r){return QI(r.auth,new es(r),r.bypassAuthState)}function pE(r){let{auth:e,user:n}=r;return D(n,e,"internal-error"),HI(n,new es(r),r.bypassAuthState)}async function mE(r){let{auth:e,user:n}=r;return D(n,e,"internal-error"),KI(n,new es(r),r.bypassAuthState)}var iu=class{constructor(e,n,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:n,sessionId:i,postBody:o,tenantId:u,error:h,type:y}=e;if(h){this.reject(h);return}let v={auth:this.auth,requestUri:n,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(v))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fE;case"linkViaPopup":case"linkViaRedirect":return mE;case"reauthViaPopup":case"reauthViaRedirect":return pE;default:un(this.auth,"internal-error")}}resolve(e){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var CS=new Xn(2e3,1e4);var gE="pendingRedirect",Zs=new Map,su=class extends iu{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Zs.get(this.auth._key());if(!e){try{let i=await _E(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Zs.set(this.auth._key(),e)}return this.bypassAuthState||Zs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function _E(r,e){let n=EE(e),i=IE(r);if(!await i._isAvailable())return!1;let o=await i._get(n)==="true";return await i._remove(n),o}function yE(r,e){Zs.set(r._key(),e)}function IE(r){return zt(r._redirectPersistence)}function EE(r){return Xs(gE,r.config.apiKey,r.name)}async function vE(r,e,n=!1){if(Me(r.app))return Promise.reject(Jn(r));let i=pu(r),o=dE(i,e),h=await new su(i,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}var wE=600*1e3,ou=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TE(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!pf(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Yn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wE&&this.cachedEventUids.clear(),this.cachedEventUids.has(kd(e))}saveEventToCache(e){this.cachedEventUids.add(kd(e)),this.lastProcessedEventTime=Date.now()}};function kd(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function pf({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function TE(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pf(r);default:return!1}}async function AE(r,e={}){return mr(r,"GET","/v1/projects",e)}var bE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SE=/^https?/;async function RE(r){if(r.config.emulator)return;let{authorizedDomains:e}=await AE(r);for(let n of e)try{if(PE(n))return}catch{}un(r,"unauthorized-domain")}function PE(r){let e=Kc(),{protocol:n,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){let h=new URL(r);return h.hostname===""&&i===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===i}if(!SE.test(n))return!1;if(bE.test(r))return i===r;let o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var CE=new Xn(3e4,6e4);function Nd(){let r=mt().___jsl;if(r?.H){for(let e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function kE(r){return new Promise((e,n)=>{function i(){Nd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Nd(),n(Yn(r,"network-request-failed"))},timeout:CE.get()})}if(mt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(mt().gapi?.load)i();else{let o=ef("iframefcb");return mt()[o]=()=>{gapi.load?i():n(Yn(r,"network-request-failed"))},jI(`${$I()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw eo=null,e})}var eo=null;function NE(r){return eo=eo||kE(r),eo}var DE=new Xn(5e3,15e3),OE="__/auth/iframe",VE="emulator/auth/iframe",xE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ME(r){let e=r.config;D(e.authDomain,r,"auth-domain-config-required");let n=e.emulator?lu(e,VE):`https://${r.config.authDomain}/${OE}`,i={apiKey:e.apiKey,appName:r.name,v:on},o=LE.get(r.config.apiHost);o&&(i.eid=o);let u=r._getFrameworks();return u.length&&(i.fw=u.join(",")),`${n}?${Wi(i).slice(1)}`}async function FE(r){let e=await NE(r),n=mt().gapi;return D(n,r,"internal-error"),e.open({where:document.body,url:ME(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xE,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});let h=Yn(r,"network-request-failed"),y=mt().setTimeout(()=>{u(h)},DE.get());function v(){mt().clearTimeout(y),o(i)}i.ping(v).then(v,()=>{u(h)})}))}var UE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BE=500,qE=600,jE="_blank",$E="http://localhost",fo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function zE(r,e,n,i=BE,o=qE){let u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString(),y="",v=rt(ne({},UE),{width:i.toString(),height:o.toString(),top:u,left:h}),w=ge().toLowerCase();n&&(y=Kd(w)?jE:n),Gd(w)&&(e=e||$E,v.scrollbars="yes");let b=Object.entries(v).reduce((A,[x,R])=>`${A}${x}=${R},`,"");if(MI(w)&&y!=="_self")return GE(e||"",y),new fo(null);let S=window.open(e||"",y,b);D(S,r,"popup-blocked");try{S.focus()}catch{}return new fo(S)}function GE(r,e){let n=document.createElement("a");n.href=r,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var WE="__/auth/handler",KE="emulator/auth/handler",HE=encodeURIComponent("fac");async function Dd(r,e,n,i,o,u){D(r.config.authDomain,r,"auth-domain-config-required"),D(r.config.apiKey,r,"invalid-api-key");let h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:i,v:on,eventId:o};if(e instanceof co){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",fd(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(let[b,S]of Object.entries(u||{}))h[b]=S}if(e instanceof eu){let b=e.getScopes().filter(S=>S!=="");b.length>0&&(h.scopes=b.join(","))}r.tenantId&&(h.tid=r.tenantId);let y=h;for(let b of Object.keys(y))y[b]===void 0&&delete y[b];let v=await r._getAppCheckToken(),w=v?`#${HE}=${encodeURIComponent(v)}`:"";return`${QE(r)}?${Wi(y).slice(1)}${w}`}function QE({config:r}){return r.emulator?lu(r,KE):`https://${r.authDomain}/${WE}`}var Wc="webStorageSupport",au=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gu,this._completeRedirectFn=vE,this._overrideRedirectResult=yE}async _openPopup(e,n,i,o){ln(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let u=await Dd(e,n,i,Kc(),o);return zE(e,u,uf())}async _openRedirect(e,n,i,o){await this._originValidation(e);let u=await Dd(e,n,i,Kc(),o);return nE(u),new Promise(()=>{})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(ln(u,"If manager is not set, promise should be"),u)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){let n=await FE(e),i=new ou(e);return n.register("authEvent",o=>(D(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wc,{type:Wc},o=>{let u=o?.[0]?.[Wc];u!==void 0&&n(!!u),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RE(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Xd()||Wd()||fu()}},mf=au;var Od="@firebase/auth",Vd="1.11.0";var cu=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function JE(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YE(r){sn(new Le("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:y}=i.options;D(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});let v={apiKey:h,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zd(r)},w=new Zc(i,o,u,v);return zI(w,n),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),sn(new Le("auth-internal",e=>{let n=pu(e.getProvider("auth").getImmediate());return(i=>new cu(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ct(Od,Vd,JE(r)),ct(Od,Vd,"esm2020")}var XE=300,ZE=Oc("authIdTokenMaxAge")||XE,xd=null,ev=r=>async e=>{let n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>ZE)return;let o=n?.token;xd!==o&&(xd=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function mo(r=Qs()){let e=Hi(r,"auth");if(e.isInitialized())return e.getImmediate();let n=tf(r,{popupRedirectResolver:mf,persistence:[ff,cf,gu]}),i=Oc("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let u=new URL(i,location.origin);if(location.origin===u.origin){let h=ev(u.toString());af(n,h,()=>h(n.currentUser)),of(n,y=>h(y))}}let o=Nc("auth");return o&&nf(n,`http://${o}`),n}function tv(){return document.getElementsByTagName("head")?.[0]??document}qI({loadJS(r){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{let u=Yn("internal-error");u.customData=o,n(u)},i.type="text/javascript",i.charset="UTF-8",tv().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YE("Browser");var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_f={};var go,yf;(function(){var r;function e(_,l){function f(){}f.prototype=l.prototype,_.D=l.prototype,_.prototype=new f,_.prototype.constructor=_,_.C=function(p,m,I){for(var d=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)d[ue-2]=arguments[ue];return l.prototype[m].apply(p,d)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(_,l,f){f||(f=0);var p=Array(16);if(typeof l=="string")for(var m=0;16>m;++m)p[m]=l.charCodeAt(f++)|l.charCodeAt(f++)<<8|l.charCodeAt(f++)<<16|l.charCodeAt(f++)<<24;else for(m=0;16>m;++m)p[m]=l[f++]|l[f++]<<8|l[f++]<<16|l[f++]<<24;l=_.g[0],f=_.g[1],m=_.g[2];var I=_.g[3],d=l+(I^f&(m^I))+p[0]+3614090360&4294967295;l=f+(d<<7&4294967295|d>>>25),d=I+(m^l&(f^m))+p[1]+3905402710&4294967295,I=l+(d<<12&4294967295|d>>>20),d=m+(f^I&(l^f))+p[2]+606105819&4294967295,m=I+(d<<17&4294967295|d>>>15),d=f+(l^m&(I^l))+p[3]+3250441966&4294967295,f=m+(d<<22&4294967295|d>>>10),d=l+(I^f&(m^I))+p[4]+4118548399&4294967295,l=f+(d<<7&4294967295|d>>>25),d=I+(m^l&(f^m))+p[5]+1200080426&4294967295,I=l+(d<<12&4294967295|d>>>20),d=m+(f^I&(l^f))+p[6]+2821735955&4294967295,m=I+(d<<17&4294967295|d>>>15),d=f+(l^m&(I^l))+p[7]+4249261313&4294967295,f=m+(d<<22&4294967295|d>>>10),d=l+(I^f&(m^I))+p[8]+1770035416&4294967295,l=f+(d<<7&4294967295|d>>>25),d=I+(m^l&(f^m))+p[9]+2336552879&4294967295,I=l+(d<<12&4294967295|d>>>20),d=m+(f^I&(l^f))+p[10]+4294925233&4294967295,m=I+(d<<17&4294967295|d>>>15),d=f+(l^m&(I^l))+p[11]+2304563134&4294967295,f=m+(d<<22&4294967295|d>>>10),d=l+(I^f&(m^I))+p[12]+1804603682&4294967295,l=f+(d<<7&4294967295|d>>>25),d=I+(m^l&(f^m))+p[13]+4254626195&4294967295,I=l+(d<<12&4294967295|d>>>20),d=m+(f^I&(l^f))+p[14]+2792965006&4294967295,m=I+(d<<17&4294967295|d>>>15),d=f+(l^m&(I^l))+p[15]+1236535329&4294967295,f=m+(d<<22&4294967295|d>>>10),d=l+(m^I&(f^m))+p[1]+4129170786&4294967295,l=f+(d<<5&4294967295|d>>>27),d=I+(f^m&(l^f))+p[6]+3225465664&4294967295,I=l+(d<<9&4294967295|d>>>23),d=m+(l^f&(I^l))+p[11]+643717713&4294967295,m=I+(d<<14&4294967295|d>>>18),d=f+(I^l&(m^I))+p[0]+3921069994&4294967295,f=m+(d<<20&4294967295|d>>>12),d=l+(m^I&(f^m))+p[5]+3593408605&4294967295,l=f+(d<<5&4294967295|d>>>27),d=I+(f^m&(l^f))+p[10]+38016083&4294967295,I=l+(d<<9&4294967295|d>>>23),d=m+(l^f&(I^l))+p[15]+3634488961&4294967295,m=I+(d<<14&4294967295|d>>>18),d=f+(I^l&(m^I))+p[4]+3889429448&4294967295,f=m+(d<<20&4294967295|d>>>12),d=l+(m^I&(f^m))+p[9]+568446438&4294967295,l=f+(d<<5&4294967295|d>>>27),d=I+(f^m&(l^f))+p[14]+3275163606&4294967295,I=l+(d<<9&4294967295|d>>>23),d=m+(l^f&(I^l))+p[3]+4107603335&4294967295,m=I+(d<<14&4294967295|d>>>18),d=f+(I^l&(m^I))+p[8]+1163531501&4294967295,f=m+(d<<20&4294967295|d>>>12),d=l+(m^I&(f^m))+p[13]+2850285829&4294967295,l=f+(d<<5&4294967295|d>>>27),d=I+(f^m&(l^f))+p[2]+4243563512&4294967295,I=l+(d<<9&4294967295|d>>>23),d=m+(l^f&(I^l))+p[7]+1735328473&4294967295,m=I+(d<<14&4294967295|d>>>18),d=f+(I^l&(m^I))+p[12]+2368359562&4294967295,f=m+(d<<20&4294967295|d>>>12),d=l+(f^m^I)+p[5]+4294588738&4294967295,l=f+(d<<4&4294967295|d>>>28),d=I+(l^f^m)+p[8]+2272392833&4294967295,I=l+(d<<11&4294967295|d>>>21),d=m+(I^l^f)+p[11]+1839030562&4294967295,m=I+(d<<16&4294967295|d>>>16),d=f+(m^I^l)+p[14]+4259657740&4294967295,f=m+(d<<23&4294967295|d>>>9),d=l+(f^m^I)+p[1]+2763975236&4294967295,l=f+(d<<4&4294967295|d>>>28),d=I+(l^f^m)+p[4]+1272893353&4294967295,I=l+(d<<11&4294967295|d>>>21),d=m+(I^l^f)+p[7]+4139469664&4294967295,m=I+(d<<16&4294967295|d>>>16),d=f+(m^I^l)+p[10]+3200236656&4294967295,f=m+(d<<23&4294967295|d>>>9),d=l+(f^m^I)+p[13]+681279174&4294967295,l=f+(d<<4&4294967295|d>>>28),d=I+(l^f^m)+p[0]+3936430074&4294967295,I=l+(d<<11&4294967295|d>>>21),d=m+(I^l^f)+p[3]+3572445317&4294967295,m=I+(d<<16&4294967295|d>>>16),d=f+(m^I^l)+p[6]+76029189&4294967295,f=m+(d<<23&4294967295|d>>>9),d=l+(f^m^I)+p[9]+3654602809&4294967295,l=f+(d<<4&4294967295|d>>>28),d=I+(l^f^m)+p[12]+3873151461&4294967295,I=l+(d<<11&4294967295|d>>>21),d=m+(I^l^f)+p[15]+530742520&4294967295,m=I+(d<<16&4294967295|d>>>16),d=f+(m^I^l)+p[2]+3299628645&4294967295,f=m+(d<<23&4294967295|d>>>9),d=l+(m^(f|~I))+p[0]+4096336452&4294967295,l=f+(d<<6&4294967295|d>>>26),d=I+(f^(l|~m))+p[7]+1126891415&4294967295,I=l+(d<<10&4294967295|d>>>22),d=m+(l^(I|~f))+p[14]+2878612391&4294967295,m=I+(d<<15&4294967295|d>>>17),d=f+(I^(m|~l))+p[5]+4237533241&4294967295,f=m+(d<<21&4294967295|d>>>11),d=l+(m^(f|~I))+p[12]+1700485571&4294967295,l=f+(d<<6&4294967295|d>>>26),d=I+(f^(l|~m))+p[3]+2399980690&4294967295,I=l+(d<<10&4294967295|d>>>22),d=m+(l^(I|~f))+p[10]+4293915773&4294967295,m=I+(d<<15&4294967295|d>>>17),d=f+(I^(m|~l))+p[1]+2240044497&4294967295,f=m+(d<<21&4294967295|d>>>11),d=l+(m^(f|~I))+p[8]+1873313359&4294967295,l=f+(d<<6&4294967295|d>>>26),d=I+(f^(l|~m))+p[15]+4264355552&4294967295,I=l+(d<<10&4294967295|d>>>22),d=m+(l^(I|~f))+p[6]+2734768916&4294967295,m=I+(d<<15&4294967295|d>>>17),d=f+(I^(m|~l))+p[13]+1309151649&4294967295,f=m+(d<<21&4294967295|d>>>11),d=l+(m^(f|~I))+p[4]+4149444226&4294967295,l=f+(d<<6&4294967295|d>>>26),d=I+(f^(l|~m))+p[11]+3174756917&4294967295,I=l+(d<<10&4294967295|d>>>22),d=m+(l^(I|~f))+p[2]+718787259&4294967295,m=I+(d<<15&4294967295|d>>>17),d=f+(I^(m|~l))+p[9]+3951481745&4294967295,_.g[0]=_.g[0]+l&4294967295,_.g[1]=_.g[1]+(m+(d<<21&4294967295|d>>>11))&4294967295,_.g[2]=_.g[2]+m&4294967295,_.g[3]=_.g[3]+I&4294967295}i.prototype.u=function(_,l){l===void 0&&(l=_.length);for(var f=l-this.blockSize,p=this.B,m=this.h,I=0;I<l;){if(m==0)for(;I<=f;)o(this,_,I),I+=this.blockSize;if(typeof _=="string"){for(;I<l;)if(p[m++]=_.charCodeAt(I++),m==this.blockSize){o(this,p),m=0;break}}else for(;I<l;)if(p[m++]=_[I++],m==this.blockSize){o(this,p),m=0;break}}this.h=m,this.o+=l},i.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var l=1;l<_.length-8;++l)_[l]=0;var f=8*this.o;for(l=_.length-8;l<_.length;++l)_[l]=f&255,f/=256;for(this.u(_),_=Array(16),l=f=0;4>l;++l)for(var p=0;32>p;p+=8)_[f++]=this.g[l]>>>p&255;return _};function u(_,l){var f=y;return Object.prototype.hasOwnProperty.call(f,_)?f[_]:f[_]=l(_)}function h(_,l){this.h=l;for(var f=[],p=!0,m=_.length-1;0<=m;m--){var I=_[m]|0;p&&I==l||(f[m]=I,p=!1)}this.g=f}var y={};function v(_){return-128<=_&&128>_?u(_,function(l){return new h([l|0],0>l?-1:0)}):new h([_|0],0>_?-1:0)}function w(_){if(isNaN(_)||!isFinite(_))return S;if(0>_)return N(w(-_));for(var l=[],f=1,p=0;_>=f;p++)l[p]=_/f|0,f*=4294967296;return new h(l,0)}function b(_,l){if(_.length==0)throw Error("number format error: empty string");if(l=l||10,2>l||36<l)throw Error("radix out of range: "+l);if(_.charAt(0)=="-")return N(b(_.substring(1),l));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var f=w(Math.pow(l,8)),p=S,m=0;m<_.length;m+=8){var I=Math.min(8,_.length-m),d=parseInt(_.substring(m,m+I),l);8>I?(I=w(Math.pow(l,I)),p=p.j(I).add(w(d))):(p=p.j(f),p=p.add(w(d)))}return p}var S=v(0),A=v(1),x=v(16777216);r=h.prototype,r.m=function(){if(V(this))return-N(this).m();for(var _=0,l=1,f=0;f<this.g.length;f++){var p=this.i(f);_+=(0<=p?p:4294967296+p)*l,l*=4294967296}return _},r.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(R(this))return"0";if(V(this))return"-"+N(this).toString(_);for(var l=w(Math.pow(_,6)),f=this,p="";;){var m=se(f,l).g;f=re(f,m.j(l));var I=((0<f.g.length?f.g[0]:f.h)>>>0).toString(_);if(f=m,R(f))return I+p;for(;6>I.length;)I="0"+I;p=I+p}},r.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function R(_){if(_.h!=0)return!1;for(var l=0;l<_.g.length;l++)if(_.g[l]!=0)return!1;return!0}function V(_){return _.h==-1}r.l=function(_){return _=re(this,_),V(_)?-1:R(_)?0:1};function N(_){for(var l=_.g.length,f=[],p=0;p<l;p++)f[p]=~_.g[p];return new h(f,~_.h).add(A)}r.abs=function(){return V(this)?N(this):this},r.add=function(_){for(var l=Math.max(this.g.length,_.g.length),f=[],p=0,m=0;m<=l;m++){var I=p+(this.i(m)&65535)+(_.i(m)&65535),d=(I>>>16)+(this.i(m)>>>16)+(_.i(m)>>>16);p=d>>>16,I&=65535,d&=65535,f[m]=d<<16|I}return new h(f,f[f.length-1]&-2147483648?-1:0)};function re(_,l){return _.add(N(l))}r.j=function(_){if(R(this)||R(_))return S;if(V(this))return V(_)?N(this).j(N(_)):N(N(this).j(_));if(V(_))return N(this.j(N(_)));if(0>this.l(x)&&0>_.l(x))return w(this.m()*_.m());for(var l=this.g.length+_.g.length,f=[],p=0;p<2*l;p++)f[p]=0;for(p=0;p<this.g.length;p++)for(var m=0;m<_.g.length;m++){var I=this.i(p)>>>16,d=this.i(p)&65535,ue=_.i(m)>>>16,Fe=_.i(m)&65535;f[2*p+2*m]+=d*Fe,K(f,2*p+2*m),f[2*p+2*m+1]+=I*Fe,K(f,2*p+2*m+1),f[2*p+2*m+1]+=d*ue,K(f,2*p+2*m+1),f[2*p+2*m+2]+=I*ue,K(f,2*p+2*m+2)}for(p=0;p<l;p++)f[p]=f[2*p+1]<<16|f[2*p];for(p=l;p<2*l;p++)f[p]=0;return new h(f,0)};function K(_,l){for(;(_[l]&65535)!=_[l];)_[l+1]+=_[l]>>>16,_[l]&=65535,l++}function q(_,l){this.g=_,this.h=l}function se(_,l){if(R(l))throw Error("division by zero");if(R(_))return new q(S,S);if(V(_))return l=se(N(_),l),new q(N(l.g),N(l.h));if(V(l))return l=se(_,N(l)),new q(N(l.g),l.h);if(30<_.g.length){if(V(_)||V(l))throw Error("slowDivide_ only works with positive integers.");for(var f=A,p=l;0>=p.l(_);)f=Ne(f),p=Ne(p);var m=te(f,1),I=te(p,1);for(p=te(p,2),f=te(f,2);!R(p);){var d=I.add(p);0>=d.l(_)&&(m=m.add(f),I=d),p=te(p,1),f=te(f,1)}return l=re(_,m.j(l)),new q(m,l)}for(m=S;0<=_.l(l);){for(f=Math.max(1,Math.floor(_.m()/l.m())),p=Math.ceil(Math.log(f)/Math.LN2),p=48>=p?1:Math.pow(2,p-48),I=w(f),d=I.j(l);V(d)||0<d.l(_);)f-=p,I=w(f),d=I.j(l);R(I)&&(I=A),m=m.add(I),_=re(_,d)}return new q(m,_)}r.A=function(_){return se(this,_).h},r.and=function(_){for(var l=Math.max(this.g.length,_.g.length),f=[],p=0;p<l;p++)f[p]=this.i(p)&_.i(p);return new h(f,this.h&_.h)},r.or=function(_){for(var l=Math.max(this.g.length,_.g.length),f=[],p=0;p<l;p++)f[p]=this.i(p)|_.i(p);return new h(f,this.h|_.h)},r.xor=function(_){for(var l=Math.max(this.g.length,_.g.length),f=[],p=0;p<l;p++)f[p]=this.i(p)^_.i(p);return new h(f,this.h^_.h)};function Ne(_){for(var l=_.g.length+1,f=[],p=0;p<l;p++)f[p]=_.i(p)<<1|_.i(p-1)>>>31;return new h(f,_.h)}function te(_,l){var f=l>>5;l%=32;for(var p=_.g.length-f,m=[],I=0;I<p;I++)m[I]=0<l?_.i(I+f)>>>l|_.i(I+f+1)<<32-l:_.i(I+f);return new h(m,_.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,yf=_f.Md5=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=w,h.fromString=b,go=_f.Integer=h}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});var _o=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gt={};var If,nv,Ef,vf,wf,Tf,Af,bf,Sf;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,s,a){return t==Array.prototype||t==Object.prototype||(t[s]=a.value),t};function n(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof _o=="object"&&_o];for(var s=0;s<t.length;++s){var a=t[s];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")}var i=n(this);function o(t,s){if(s)e:{var a=i;t=t.split(".");for(var c=0;c<t.length-1;c++){var g=t[c];if(!(g in a))break e;a=a[g]}t=t[t.length-1],c=a[t],s=s(c),s!=c&&s!=null&&e(a,t,{configurable:!0,writable:!0,value:s})}}function u(t,s){t instanceof String&&(t+="");var a=0,c=!1,g={next:function(){if(!c&&a<t.length){var E=a++;return{value:s(E,t[E]),done:!1}}return c=!0,{done:!0,value:void 0}}};return g[Symbol.iterator]=function(){return g},g}o("Array.prototype.values",function(t){return t||function(){return u(this,function(s,a){return a})}});var h=h||{},y=this||self;function v(t){var s=typeof t;return s=s!="object"?s:t?Array.isArray(t)?"array":s:"null",s=="array"||s=="object"&&typeof t.length=="number"}function w(t){var s=typeof t;return s=="object"&&t!=null||s=="function"}function b(t,s,a){return t.call.apply(t.bind,arguments)}function S(t,s,a){if(!t)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,c),t.apply(s,g)}}return function(){return t.apply(s,arguments)}}function A(t,s,a){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:S,A.apply(null,arguments)}function x(t,s){var a=Array.prototype.slice.call(arguments,1);return function(){var c=a.slice();return c.push.apply(c,arguments),t.apply(this,c)}}function R(t,s){function a(){}a.prototype=s.prototype,t.aa=s.prototype,t.prototype=new a,t.prototype.constructor=t,t.Qb=function(c,g,E){for(var T=Array(arguments.length-2),C=2;C<arguments.length;C++)T[C-2]=arguments[C];return s.prototype[g].apply(c,T)}}function V(t){let s=t.length;if(0<s){let a=Array(s);for(let c=0;c<s;c++)a[c]=t[c];return a}return[]}function N(t,s){for(let a=1;a<arguments.length;a++){let c=arguments[a];if(v(c)){let g=t.length||0,E=c.length||0;t.length=g+E;for(let T=0;T<E;T++)t[g+T]=c[T]}else t.push(c)}}class re{constructor(s,a){this.i=s,this.j=a,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}function K(t){return/^[\s\xa0]*$/.test(t)}function q(){var t=y.navigator;return t&&(t=t.userAgent)?t:""}function se(t){return se[" "](t),t}se[" "]=function(){};var Ne=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function te(t,s,a){for(let c in t)s.call(a,t[c],c,t)}function _(t,s){for(let a in t)s.call(void 0,t[a],a,t)}function l(t){let s={};for(let a in t)s[a]=t[a];return s}let f="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function p(t,s){let a,c;for(let g=1;g<arguments.length;g++){c=arguments[g];for(a in c)t[a]=c[a];for(let E=0;E<f.length;E++)a=f[E],Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a])}}function m(t){var s=1;t=t.split(":");let a=[];for(;0<s&&t.length;)a.push(t.shift()),s--;return t.length&&a.push(t.join(":")),a}function I(t){y.setTimeout(()=>{throw t},0)}function d(){var t=dn;let s=null;return t.g&&(s=t.g,t.g=t.g.next,t.g||(t.h=null),s.next=null),s}class ue{constructor(){this.h=this.g=null}add(s,a){let c=Fe.get();c.set(s,a),this.h?this.h.next=c:this.g=c,this.h=c}}var Fe=new re(()=>new ko,t=>t.reset());class ko{constructor(){this.next=this.g=this.h=null}set(s,a){this.h=s,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,Be=!1,dn=new ue,wr=()=>{let t=y.Promise.resolve(void 0);Ue=()=>{t.then(No)}};var No=()=>{for(var t;t=d();){try{t.h.call(t.g)}catch(a){I(a)}var s=Fe;s.j(t),100>s.h&&(s.h++,t.next=s.g,s.g=t)}Be=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(t,s){this.type=t,this.g=this.target=s,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var Do=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var t=!1,s=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let a=()=>{};y.addEventListener("test",a,s),y.removeEventListener("test",a,s)}catch{}return t})();function qe(t,s){if(j.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var a=this.type=t.type,c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=s,s=t.relatedTarget){if(Ne){e:{try{se(s.nodeName);var g=!0;break e}catch{}g=!1}g||(s=null)}}else a=="mouseover"?s=t.fromElement:a=="mouseout"&&(s=t.toElement);this.relatedTarget=s,c?(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Oo[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&qe.aa.h.call(this)}}R(qe,j);var Oo={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Vo=0;function xo(t,s,a,c,g){this.listener=t,this.proxy=null,this.src=s,this.type=a,this.capture=!!c,this.ha=g,this.key=++Vo,this.da=this.fa=!1}function yt(t){t.da=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function It(t){this.src=t,this.g={},this.h=0}It.prototype.add=function(t,s,a,c,g){var E=t.toString();t=this.g[E],t||(t=this.g[E]=[],this.h++);var T=pn(t,s,c,g);return-1<T?(s=t[T],a||(s.fa=!1)):(s=new xo(s,this.src,E,!!c,g),s.fa=a,t.push(s)),s};function fn(t,s){var a=s.type;if(a in t.g){var c=t.g[a],g=Array.prototype.indexOf.call(c,s,void 0),E;(E=0<=g)&&Array.prototype.splice.call(c,g,1),E&&(yt(s),t.g[a].length==0&&(delete t.g[a],t.h--))}}function pn(t,s,a,c){for(var g=0;g<t.length;++g){var E=t[g];if(!E.da&&E.listener==s&&E.capture==!!a&&E.ha==c)return g}return-1}var mn="closure_lm_"+(1e6*Math.random()|0),gn={};function Tr(t,s,a,c,g){if(c&&c.once)return br(t,s,a,c,g);if(Array.isArray(s)){for(var E=0;E<s.length;E++)Tr(t,s[E],a,c,g);return null}return a=En(a),t&&t[je]?t.K(s,a,w(c)?!!c.capture:!!c,g):Ar(t,s,a,!1,c,g)}function Ar(t,s,a,c,g,E){if(!s)throw Error("Invalid event type");var T=w(g)?!!g.capture:!!g,C=yn(t);if(C||(t[mn]=C=new It(t)),a=C.add(s,a,c,T,E),a.proxy)return a;if(c=Lo(),a.proxy=c,c.src=t,c.listener=a,t.addEventListener)Do||(g=T),g===void 0&&(g=!1),t.addEventListener(s.toString(),c,g);else if(t.attachEvent)t.attachEvent(Rr(s.toString()),c);else if(t.addListener&&t.removeListener)t.addListener(c);else throw Error("addEventListener and attachEvent are unavailable.");return a}function Lo(){function t(a){return s.call(t.src,t.listener,a)}let s=Mo;return t}function br(t,s,a,c,g){if(Array.isArray(s)){for(var E=0;E<s.length;E++)br(t,s[E],a,c,g);return null}return a=En(a),t&&t[je]?t.L(s,a,w(c)?!!c.capture:!!c,g):Ar(t,s,a,!0,c,g)}function Sr(t,s,a,c,g){if(Array.isArray(s))for(var E=0;E<s.length;E++)Sr(t,s[E],a,c,g);else c=w(c)?!!c.capture:!!c,a=En(a),t&&t[je]?(t=t.i,s=String(s).toString(),s in t.g&&(E=t.g[s],a=pn(E,a,c,g),-1<a&&(yt(E[a]),Array.prototype.splice.call(E,a,1),E.length==0&&(delete t.g[s],t.h--)))):t&&(t=yn(t))&&(s=t.g[s.toString()],t=-1,s&&(t=pn(s,a,c,g)),(a=-1<t?s[t]:null)&&_n(a))}function _n(t){if(typeof t!="number"&&t&&!t.da){var s=t.src;if(s&&s[je])fn(s.i,t);else{var a=t.type,c=t.proxy;s.removeEventListener?s.removeEventListener(a,c,t.capture):s.detachEvent?s.detachEvent(Rr(a),c):s.addListener&&s.removeListener&&s.removeListener(c),(a=yn(s))?(fn(a,t),a.h==0&&(a.src=null,s[mn]=null)):yt(t)}}}function Rr(t){return t in gn?gn[t]:gn[t]="on"+t}function Mo(t,s){if(t.da)t=!0;else{s=new qe(s,this);var a=t.listener,c=t.ha||t.src;t.fa&&_n(t),t=a.call(c,s)}return t}function yn(t){return t=t[mn],t instanceof It?t:null}var In="__closure_events_fn_"+(1e9*Math.random()>>>0);function En(t){return typeof t=="function"?t:(t[In]||(t[In]=function(s){return t.handleEvent(s)}),t[In])}function $(){de.call(this),this.i=new It(this),this.M=this,this.F=null}R($,de),$.prototype[je]=!0,$.prototype.removeEventListener=function(t,s,a,c){Sr(this,t,s,a,c)};function H(t,s){var a,c=t.F;if(c)for(a=[];c;c=c.F)a.push(c);if(t=t.M,c=s.type||s,typeof s=="string")s=new j(s,t);else if(s instanceof j)s.target=s.target||t;else{var g=s;s=new j(c,t),p(s,g)}if(g=!0,a)for(var E=a.length-1;0<=E;E--){var T=s.g=a[E];g=Et(T,c,!0,s)&&g}if(T=s.g=t,g=Et(T,c,!0,s)&&g,g=Et(T,c,!1,s)&&g,a)for(E=0;E<a.length;E++)T=s.g=a[E],g=Et(T,c,!1,s)&&g}$.prototype.N=function(){if($.aa.N.call(this),this.i){var t=this.i,s;for(s in t.g){for(var a=t.g[s],c=0;c<a.length;c++)yt(a[c]);delete t.g[s],t.h--}}this.F=null},$.prototype.K=function(t,s,a,c){return this.i.add(String(t),s,!1,a,c)},$.prototype.L=function(t,s,a,c){return this.i.add(String(t),s,!0,a,c)};function Et(t,s,a,c){if(s=t.i.g[String(s)],!s)return!0;s=s.concat();for(var g=!0,E=0;E<s.length;++E){var T=s[E];if(T&&!T.da&&T.capture==a){var C=T.listener,M=T.ha||T.src;T.fa&&fn(t.i,T),g=C.call(M,c)!==!1&&g}}return g&&!c.defaultPrevented}function Pr(t,s,a){if(typeof t=="function")a&&(t=A(t,a));else if(t&&typeof t.handleEvent=="function")t=A(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:y.setTimeout(t,s||0)}function Cr(t){t.g=Pr(()=>{t.g=null,t.i&&(t.i=!1,Cr(t))},t.l);let s=t.h;t.h=null,t.m.apply(null,s)}class Fo extends de{constructor(s,a){super(),this.m=s,this.l=a,this.h=null,this.i=!1,this.g=null}j(s){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $e(t){de.call(this),this.h=t,this.g={}}R($e,de);var kr=[];function Nr(t){te(t.g,function(s,a){this.g.hasOwnProperty(a)&&_n(s)},t),t.g={}}$e.prototype.N=function(){$e.aa.N.call(this),Nr(this)},$e.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vn=y.JSON.stringify,Uo=y.JSON.parse,Bo=class{stringify(t){return y.JSON.stringify(t,void 0)}parse(t){return y.JSON.parse(t,void 0)}};function wn(){}wn.prototype.h=null;function Dr(t){return t.h||(t.h=t.i())}function Or(){}var ze={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tn(){j.call(this,"d")}R(Tn,j);function An(){j.call(this,"c")}R(An,j);var ye={},Vr=null;function vt(){return Vr=Vr||new $}ye.La="serverreachability";function xr(t){j.call(this,ye.La,t)}R(xr,j);function Ge(t){let s=vt();H(s,new xr(s))}ye.STAT_EVENT="statevent";function Lr(t,s){j.call(this,ye.STAT_EVENT,t),this.stat=s}R(Lr,j);function Q(t){let s=vt();H(s,new Lr(s,t))}ye.Ma="timingevent";function Mr(t,s){j.call(this,ye.Ma,t),this.size=s}R(Mr,j);function We(t,s){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){t()},s)}function Ke(){this.g=!0}Ke.prototype.xa=function(){this.g=!1};function qo(t,s,a,c,g,E){t.info(function(){if(t.g)if(E)for(var T="",C=E.split("&"),M=0;M<C.length;M++){var P=C[M].split("=");if(1<P.length){var z=P[0];P=P[1];var G=z.split("_");T=2<=G.length&&G[1]=="type"?T+(z+"="+P+"&"):T+(z+"=redacted&")}}else T=null;else T=E;return"XMLHTTP REQ ("+c+") [attempt "+g+"]: "+s+`
`+a+`
`+T})}function jo(t,s,a,c,g,E,T){t.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+g+"]: "+s+`
`+a+`
`+E+" "+T})}function be(t,s,a,c){t.info(function(){return"XMLHTTP TEXT ("+s+"): "+zo(t,a)+(c?" "+c:"")})}function $o(t,s){t.info(function(){return"TIMEOUT: "+s})}Ke.prototype.info=function(){};function zo(t,s){if(!t.g)return s;if(!s)return null;try{var a=JSON.parse(s);if(a){for(t=0;t<a.length;t++)if(Array.isArray(a[t])){var c=a[t];if(!(2>c.length)){var g=c[1];if(Array.isArray(g)&&!(1>g.length)){var E=g[0];if(E!="noop"&&E!="stop"&&E!="close")for(var T=1;T<g.length;T++)g[T]=""}}}}return vn(a)}catch{return s}}var wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bn;function Tt(){}R(Tt,wn),Tt.prototype.g=function(){return new XMLHttpRequest},Tt.prototype.i=function(){return{}},bn=new Tt;function fe(t,s,a,c){this.j=t,this.i=s,this.l=a,this.R=c||1,this.U=new $e(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ur}function Ur(){this.i=null,this.g="",this.h=!1}var Br={},Sn={};function Rn(t,s,a){t.L=1,t.v=Rt(le(s)),t.m=a,t.P=!0,qr(t,null)}function qr(t,s){t.F=Date.now(),At(t),t.A=le(t.v);var a=t.A,c=t.R;Array.isArray(c)||(c=[String(c)]),ti(a.i,"t",c),t.C=0,a=t.j.J,t.h=new Ur,t.g=Ii(t.j,a?s:null,!t.m),0<t.O&&(t.M=new Fo(A(t.Y,t,t.g),t.O)),s=t.U,a=t.g,c=t.ca;var g="readystatechange";Array.isArray(g)||(g&&(kr[0]=g.toString()),g=kr);for(var E=0;E<g.length;E++){var T=Tr(a,g[E],c||s.handleEvent,!1,s.h||s);if(!T)break;s.g[T.key]=T}s=t.H?l(t.H):{},t.m?(t.u||(t.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.m,s)):(t.u="GET",t.g.ea(t.A,t.u,null,s)),Ge(),qo(t.i,t.u,t.A,t.l,t.R,t.m)}fe.prototype.ca=function(t){t=t.target;let s=this.M;s&&he(t)==3?s.j():this.Y(t)},fe.prototype.Y=function(t){try{if(t==this.g)e:{let G=he(this.g);var s=this.g.Ba();let Pe=this.g.Z();if(!(3>G)&&(G!=3||this.g&&(this.h.h||this.g.oa()||ci(this.g)))){this.J||G!=4||s==7||(s==8||0>=Pe?Ge(3):Ge(2)),Pn(this);var a=this.g.Z();this.X=a;t:if(jr(this)){var c=ci(this.g);t="";var g=c.length,E=he(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ie(this),He(this);var T="";break t}this.h.i=new y.TextDecoder}for(s=0;s<g;s++)this.h.h=!0,t+=this.h.i.decode(c[s],{stream:!(E&&s==g-1)});c.length=0,this.h.g+=t,this.C=0,T=this.h.g}else T=this.g.oa();if(this.o=a==200,jo(this.i,this.u,this.A,this.l,this.R,G,a),this.o){if(this.T&&!this.K){t:{if(this.g){var C,M=this.g;if((C=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(C)){var P=C;break t}}P=null}if(a=P)be(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Cn(this,a);else{this.o=!1,this.s=3,Q(12),Ie(this),He(this);break e}}if(this.P){a=!0;let ie;for(;!this.J&&this.C<T.length;)if(ie=Go(this,T),ie==Sn){G==4&&(this.s=4,Q(14),a=!1),be(this.i,this.l,null,"[Incomplete Response]");break}else if(ie==Br){this.s=4,Q(15),be(this.i,this.l,T,"[Invalid Chunk]"),a=!1;break}else be(this.i,this.l,ie,null),Cn(this,ie);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),G!=4||T.length!=0||this.h.h||(this.s=1,Q(16),a=!1),this.o=this.o&&a,!a)be(this.i,this.l,T,"[Invalid Chunked Response]"),Ie(this),He(this);else if(0<T.length&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.ba&&!z.M&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),xn(z),z.M=!0,Q(11))}}else be(this.i,this.l,T,null),Cn(this,T);G==4&&Ie(this),this.o&&!this.J&&(G==4?mi(this.j,this):(this.o=!1,At(this)))}else ca(this.g),a==400&&0<T.indexOf("Unknown SID")?(this.s=3,Q(12)):(this.s=0,Q(13)),Ie(this),He(this)}}}catch{}finally{}};function jr(t){return t.g?t.u=="GET"&&t.L!=2&&t.j.Ca:!1}function Go(t,s){var a=t.C,c=s.indexOf(`
`,a);return c==-1?Sn:(a=Number(s.substring(a,c)),isNaN(a)?Br:(c+=1,c+a>s.length?Sn:(s=s.slice(c,c+a),t.C=c+a,s)))}fe.prototype.cancel=function(){this.J=!0,Ie(this)};function At(t){t.S=Date.now()+t.I,$r(t,t.I)}function $r(t,s){if(t.B!=null)throw Error("WatchDog timer not null");t.B=We(A(t.ba,t),s)}function Pn(t){t.B&&(y.clearTimeout(t.B),t.B=null)}fe.prototype.ba=function(){this.B=null;let t=Date.now();0<=t-this.S?($o(this.i,this.A),this.L!=2&&(Ge(),Q(17)),Ie(this),this.s=2,He(this)):$r(this,this.S-t)};function He(t){t.j.G==0||t.J||mi(t.j,t)}function Ie(t){Pn(t);var s=t.M;s&&typeof s.ma=="function"&&s.ma(),t.M=null,Nr(t.U),t.g&&(s=t.g,t.g=null,s.abort(),s.ma())}function Cn(t,s){try{var a=t.j;if(a.G!=0&&(a.g==t||kn(a.h,t))){if(!t.K&&kn(a.h,t)&&a.G==3){try{var c=a.Da.g.parse(s)}catch{c=null}if(Array.isArray(c)&&c.length==3){var g=c;if(g[0]==0){e:if(!a.u){if(a.g)if(a.g.F+3e3<t.F)Dt(a),kt(a);else break e;Vn(a),Q(18)}}else a.za=g[1],0<a.za-a.T&&37500>g[2]&&a.F&&a.v==0&&!a.C&&(a.C=We(A(a.Za,a),6e3));if(1>=Wr(a.h)&&a.ca){try{a.ca()}catch{}a.ca=void 0}}else ve(a,11)}else if((t.K||a.g==t)&&Dt(a),!K(s))for(g=a.Da.g.parse(s),s=0;s<g.length;s++){let P=g[s];if(a.T=P[0],P=P[1],a.G==2)if(P[0]=="c"){a.K=P[1],a.ia=P[2];let z=P[3];z!=null&&(a.la=z,a.j.info("VER="+a.la));let G=P[4];G!=null&&(a.Aa=G,a.j.info("SVER="+a.Aa));let Pe=P[5];Pe!=null&&typeof Pe=="number"&&0<Pe&&(c=1.5*Pe,a.L=c,a.j.info("backChannelRequestTimeoutMs_="+c)),c=a;let ie=t.g;if(ie){let Vt=ie.g?ie.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vt){var E=c.h;E.g||Vt.indexOf("spdy")==-1&&Vt.indexOf("quic")==-1&&Vt.indexOf("h2")==-1||(E.j=E.l,E.g=new Set,E.h&&(Nn(E,E.h),E.h=null))}if(c.D){let Ln=ie.g?ie.g.getResponseHeader("X-HTTP-Session-Id"):null;Ln&&(c.ya=Ln,k(c.I,c.D,Ln))}}a.G=3,a.l&&a.l.ua(),a.ba&&(a.R=Date.now()-t.F,a.j.info("Handshake RTT: "+a.R+"ms")),c=a;var T=t;if(c.qa=yi(c,c.J?c.ia:null,c.W),T.K){Kr(c.h,T);var C=T,M=c.L;M&&(C.I=M),C.B&&(Pn(C),At(C)),c.g=T}else fi(c);0<a.i.length&&Nt(a)}else P[0]!="stop"&&P[0]!="close"||ve(a,7);else a.G==3&&(P[0]=="stop"||P[0]=="close"?P[0]=="stop"?ve(a,7):On(a):P[0]!="noop"&&a.l&&a.l.ta(P),a.v=0)}}Ge(4)}catch{}}var Wo=class{constructor(t,s){this.g=t,this.map=s}};function zr(t){this.l=t||10,y.PerformanceNavigationTiming?(t=y.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gr(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Wr(t){return t.h?1:t.g?t.g.size:0}function kn(t,s){return t.h?t.h==s:t.g?t.g.has(s):!1}function Nn(t,s){t.g?t.g.add(s):t.h=s}function Kr(t,s){t.h&&t.h==s?t.h=null:t.g&&t.g.has(s)&&t.g.delete(s)}zr.prototype.cancel=function(){if(this.i=Hr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Hr(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let s=t.i;for(let a of t.g.values())s=s.concat(a.D);return s}return V(t.i)}function Ko(t){if(t.V&&typeof t.V=="function")return t.V();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(v(t)){for(var s=[],a=t.length,c=0;c<a;c++)s.push(t[c]);return s}s=[],a=0;for(c in t)s[a++]=t[c];return s}function Ho(t){if(t.na&&typeof t.na=="function")return t.na();if(!t.V||typeof t.V!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(v(t)||typeof t=="string"){var s=[];t=t.length;for(var a=0;a<t;a++)s.push(a);return s}s=[],a=0;for(let c in t)s[a++]=c;return s}}}function Qr(t,s){if(t.forEach&&typeof t.forEach=="function")t.forEach(s,void 0);else if(v(t)||typeof t=="string")Array.prototype.forEach.call(t,s,void 0);else for(var a=Ho(t),c=Ko(t),g=c.length,E=0;E<g;E++)s.call(void 0,c[E],a&&a[E],t)}var Jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qo(t,s){if(t){t=t.split("&");for(var a=0;a<t.length;a++){var c=t[a].indexOf("="),g=null;if(0<=c){var E=t[a].substring(0,c);g=t[a].substring(c+1)}else E=t[a];s(E,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function Ee(t){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,t instanceof Ee){this.h=t.h,bt(this,t.j),this.o=t.o,this.g=t.g,St(this,t.s),this.l=t.l;var s=t.i,a=new Ye;a.i=s.i,s.g&&(a.g=new Map(s.g),a.h=s.h),Yr(this,a),this.m=t.m}else t&&(s=String(t).match(Jr))?(this.h=!1,bt(this,s[1]||"",!0),this.o=Qe(s[2]||""),this.g=Qe(s[3]||"",!0),St(this,s[4]),this.l=Qe(s[5]||"",!0),Yr(this,s[6]||"",!0),this.m=Qe(s[7]||"")):(this.h=!1,this.i=new Ye(null,this.h))}Ee.prototype.toString=function(){var t=[],s=this.j;s&&t.push(Je(s,Xr,!0),":");var a=this.g;return(a||s=="file")&&(t.push("//"),(s=this.o)&&t.push(Je(s,Xr,!0),"@"),t.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.s,a!=null&&t.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&t.push("/"),t.push(Je(a,a.charAt(0)=="/"?Xo:Yo,!0))),(a=this.i.toString())&&t.push("?",a),(a=this.m)&&t.push("#",Je(a,ea)),t.join("")};function le(t){return new Ee(t)}function bt(t,s,a){t.j=a?Qe(s,!0):s,t.j&&(t.j=t.j.replace(/:$/,""))}function St(t,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);t.s=s}else t.s=null}function Yr(t,s,a){s instanceof Ye?(t.i=s,ta(t.i,t.h)):(a||(s=Je(s,Zo)),t.i=new Ye(s,t.h))}function k(t,s,a){t.i.set(s,a)}function Rt(t){return k(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qe(t,s){return t?s?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Je(t,s,a){return typeof t=="string"?(t=encodeURI(t).replace(s,Jo),a&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Jo(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Xr=/[#\/\?@]/g,Yo=/[#\?:]/g,Xo=/[#\?]/g,Zo=/[#\?@]/g,ea=/#/g;function Ye(t,s){this.h=this.g=null,this.i=t||null,this.j=!!s}function pe(t){t.g||(t.g=new Map,t.h=0,t.i&&Qo(t.i,function(s,a){t.add(decodeURIComponent(s.replace(/\+/g," ")),a)}))}r=Ye.prototype,r.add=function(t,s){pe(this),this.i=null,t=Se(this,t);var a=this.g.get(t);return a||this.g.set(t,a=[]),a.push(s),this.h+=1,this};function Zr(t,s){pe(t),s=Se(t,s),t.g.has(s)&&(t.i=null,t.h-=t.g.get(s).length,t.g.delete(s))}function ei(t,s){return pe(t),s=Se(t,s),t.g.has(s)}r.forEach=function(t,s){pe(this),this.g.forEach(function(a,c){a.forEach(function(g){t.call(s,g,c,this)},this)},this)},r.na=function(){pe(this);let t=Array.from(this.g.values()),s=Array.from(this.g.keys()),a=[];for(let c=0;c<s.length;c++){let g=t[c];for(let E=0;E<g.length;E++)a.push(s[c])}return a},r.V=function(t){pe(this);let s=[];if(typeof t=="string")ei(this,t)&&(s=s.concat(this.g.get(Se(this,t))));else{t=Array.from(this.g.values());for(let a=0;a<t.length;a++)s=s.concat(t[a])}return s},r.set=function(t,s){return pe(this),this.i=null,t=Se(this,t),ei(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[s]),this.h+=1,this},r.get=function(t,s){return t?(t=this.V(t),0<t.length?String(t[0]):s):s};function ti(t,s,a){Zr(t,s),0<a.length&&(t.i=null,t.g.set(Se(t,s),V(a)),t.h+=a.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],s=Array.from(this.g.keys());for(var a=0;a<s.length;a++){var c=s[a];let E=encodeURIComponent(String(c)),T=this.V(c);for(c=0;c<T.length;c++){var g=E;T[c]!==""&&(g+="="+encodeURIComponent(String(T[c]))),t.push(g)}}return this.i=t.join("&")};function Se(t,s){return s=String(s),t.j&&(s=s.toLowerCase()),s}function ta(t,s){s&&!t.j&&(pe(t),t.i=null,t.g.forEach(function(a,c){var g=c.toLowerCase();c!=g&&(Zr(this,c),ti(this,g,a))},t)),t.j=s}function na(t,s){let a=new Ke;if(y.Image){let c=new Image;c.onload=x(me,a,"TestLoadImage: loaded",!0,s,c),c.onerror=x(me,a,"TestLoadImage: error",!1,s,c),c.onabort=x(me,a,"TestLoadImage: abort",!1,s,c),c.ontimeout=x(me,a,"TestLoadImage: timeout",!1,s,c),y.setTimeout(function(){c.ontimeout&&c.ontimeout()},1e4),c.src=t}else s(!1)}function ra(t,s){let a=new Ke,c=new AbortController,g=setTimeout(()=>{c.abort(),me(a,"TestPingServer: timeout",!1,s)},1e4);fetch(t,{signal:c.signal}).then(E=>{clearTimeout(g),E.ok?me(a,"TestPingServer: ok",!0,s):me(a,"TestPingServer: server error",!1,s)}).catch(()=>{clearTimeout(g),me(a,"TestPingServer: error",!1,s)})}function me(t,s,a,c,g){try{g&&(g.onload=null,g.onerror=null,g.onabort=null,g.ontimeout=null),c(a)}catch{}}function ia(){this.g=new Bo}function sa(t,s,a){let c=a||"";try{Qr(t,function(g,E){let T=g;w(g)&&(T=vn(g)),s.push(c+E+"="+encodeURIComponent(T))})}catch(g){throw s.push(c+"type="+encodeURIComponent("_badmap")),g}}function Xe(t){this.l=t.Ub||null,this.j=t.eb||!1}R(Xe,wn),Xe.prototype.g=function(){return new Pt(this.l,this.j)},Xe.prototype.i=(function(t){return function(){return t}})({});function Pt(t,s){$.call(this),this.D=t,this.o=s,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Pt,$),r=Pt.prototype,r.open=function(t,s){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=t,this.A=s,this.readyState=1,et(this)},r.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let s={headers:this.u,method:this.B,credentials:this.m,cache:void 0};t&&(s.body=t),(this.D||y).fetch(new Request(this.A,s)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ze(this)),this.readyState=0},r.Sa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,et(this)),this.g&&(this.readyState=3,et(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ni(this)}else t.text().then(this.Ra.bind(this),this.ga.bind(this))};function ni(t){t.j.read().then(t.Pa.bind(t)).catch(t.ga.bind(t))}r.Pa=function(t){if(this.g){if(this.o&&t.value)this.response.push(t.value);else if(!this.o){var s=t.value?t.value:new Uint8Array(0);(s=this.v.decode(s,{stream:!t.done}))&&(this.response=this.responseText+=s)}t.done?Ze(this):et(this),this.readyState==3&&ni(this)}},r.Ra=function(t){this.g&&(this.response=this.responseText=t,Ze(this))},r.Qa=function(t){this.g&&(this.response=t,Ze(this))},r.ga=function(){this.g&&Ze(this)};function Ze(t){t.readyState=4,t.l=null,t.j=null,t.v=null,et(t)}r.setRequestHeader=function(t,s){this.u.append(t,s)},r.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],s=this.h.entries();for(var a=s.next();!a.done;)a=a.value,t.push(a[0]+": "+a[1]),a=s.next();return t.join(`\r
`)};function et(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Pt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});function ri(t){let s="";return te(t,function(a,c){s+=c,s+=":",s+=a,s+=`\r
`}),s}function Dn(t,s,a){e:{for(c in a){var c=!1;break e}c=!0}c||(a=ri(a),typeof t=="string"?a!=null&&encodeURIComponent(String(a)):k(t,s,a))}function O(t){$.call(this),this.headers=new Map,this.o=t||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(O,$);var oa=/^https?$/i,aa=["POST","PUT"];r=O.prototype,r.Ha=function(t){this.J=t},r.ea=function(t,s,a,c){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);s=s?s.toUpperCase():"GET",this.D=t,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bn.g(),this.v=this.o?Dr(this.o):Dr(bn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(s,String(t),!0),this.B=!1}catch(E){ii(this,E);return}if(t=a||"",a=new Map(this.headers),c)if(Object.getPrototypeOf(c)===Object.prototype)for(var g in c)a.set(g,c[g]);else if(typeof c.keys=="function"&&typeof c.get=="function")for(let E of c.keys())a.set(E,c.get(E));else throw Error("Unknown input type for opt_headers: "+String(c));c=Array.from(a.keys()).find(E=>E.toLowerCase()=="content-type"),g=y.FormData&&t instanceof y.FormData,!(0<=Array.prototype.indexOf.call(aa,s,void 0))||c||g||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[E,T]of a)this.g.setRequestHeader(E,T);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ai(this),this.u=!0,this.g.send(t),this.u=!1}catch(E){ii(this,E)}};function ii(t,s){t.h=!1,t.g&&(t.j=!0,t.g.abort(),t.j=!1),t.l=s,t.m=5,si(t),Ct(t)}function si(t){t.A||(t.A=!0,H(t,"complete"),H(t,"error"))}r.abort=function(t){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=t||7,H(this,"complete"),H(this,"abort"),Ct(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ct(this,!0)),O.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?oi(this):this.bb())},r.bb=function(){oi(this)};function oi(t){if(t.h&&typeof h<"u"&&(!t.v[1]||he(t)!=4||t.Z()!=2)){if(t.u&&he(t)==4)Pr(t.Ea,0,t);else if(H(t,"readystatechange"),he(t)==4){t.h=!1;try{let T=t.Z();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var a;if(!(a=s)){var c;if(c=T===0){var g=String(t.D).match(Jr)[1]||null;!g&&y.self&&y.self.location&&(g=y.self.location.protocol.slice(0,-1)),c=!oa.test(g?g.toLowerCase():"")}a=c}if(a)H(t,"complete"),H(t,"success");else{t.m=6;try{var E=2<he(t)?t.g.statusText:""}catch{E=""}t.l=E+" ["+t.Z()+"]",si(t)}}finally{Ct(t)}}}}function Ct(t,s){if(t.g){ai(t);let a=t.g,c=t.v[0]?()=>{}:null;t.g=null,t.v=null,s||H(t,"ready");try{a.onreadystatechange=c}catch{}}}function ai(t){t.I&&(y.clearTimeout(t.I),t.I=null)}r.isActive=function(){return!!this.g};function he(t){return t.g?t.g.readyState:0}r.Z=function(){try{return 2<he(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(t){if(this.g){var s=this.g.responseText;return t&&s.indexOf(t)==0&&(s=s.substring(t.length)),Uo(s)}};function ci(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.H){case"":case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function ca(t){let s={};t=(t.g&&2<=he(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let c=0;c<t.length;c++){if(K(t[c]))continue;var a=m(t[c]);let g=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();let E=s[g]||[];s[g]=E,E.push(a)}_(s,function(c){return c.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tt(t,s,a){return a&&a.internalChannelParams&&a.internalChannelParams[t]||s}function ui(t){this.Aa=0,this.i=[],this.j=new Ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tt("failFast",!1,t),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tt("baseRetryDelayMs",5e3,t),this.cb=tt("retryDelaySeedMs",1e4,t),this.Wa=tt("forwardChannelMaxRetries",2,t),this.wa=tt("forwardChannelRequestTimeoutMs",2e4,t),this.pa=t&&t.xmlHttpFactory||void 0,this.Xa=t&&t.Tb||void 0,this.Ca=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.h=new zr(t&&t.concurrentRequestLimit),this.Da=new ia,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=t&&t.Rb||!1,t&&t.xa&&this.j.xa(),t&&t.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&t&&t.detectBufferingProxy||!1,this.ja=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.ja=t.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ui.prototype,r.la=8,r.G=1,r.connect=function(t,s,a,c){Q(0),this.W=t,this.H=s||{},a&&c!==void 0&&(this.H.OSID=a,this.H.OAID=c),this.F=this.X,this.I=yi(this,null,this.W),Nt(this)};function On(t){if(li(t),t.G==3){var s=t.U++,a=le(t.I);if(k(a,"SID",t.K),k(a,"RID",s),k(a,"TYPE","terminate"),nt(t,a),s=new fe(t,t.j,s),s.L=2,s.v=Rt(le(a)),a=!1,y.navigator&&y.navigator.sendBeacon)try{a=y.navigator.sendBeacon(s.v.toString(),"")}catch{}!a&&y.Image&&(new Image().src=s.v,a=!0),a||(s.g=Ii(s.j,null),s.g.ea(s.v)),s.F=Date.now(),At(s)}_i(t)}function kt(t){t.g&&(xn(t),t.g.cancel(),t.g=null)}function li(t){kt(t),t.u&&(y.clearTimeout(t.u),t.u=null),Dt(t),t.h.cancel(),t.s&&(typeof t.s=="number"&&y.clearTimeout(t.s),t.s=null)}function Nt(t){if(!Gr(t.h)&&!t.s){t.s=!0;var s=t.Ga;Ue||wr(),Be||(Ue(),Be=!0),dn.add(s,t),t.B=0}}function ua(t,s){return Wr(t.h)>=t.h.j-(t.s?1:0)?!1:t.s?(t.i=s.D.concat(t.i),!0):t.G==1||t.G==2||t.B>=(t.Va?0:t.Wa)?!1:(t.s=We(A(t.Ga,t,s),gi(t,t.B)),t.B++,!0)}r.Ga=function(t){if(this.s)if(this.s=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;let g=new fe(this,this.j,t),E=this.o;if(this.S&&(E?(E=l(E),p(E,this.S)):E=this.S),this.m!==null||this.O||(g.H=E,E=null),this.P)e:{for(var s=0,a=0;a<this.i.length;a++){t:{var c=this.i[a];if("__data__"in c.map&&(c=c.map.__data__,typeof c=="string")){c=c.length;break t}c=void 0}if(c===void 0)break;if(s+=c,4096<s){s=a;break e}if(s===4096||a===this.i.length-1){s=a+1;break e}}s=1e3}else s=1e3;s=di(this,g,s),a=le(this.I),k(a,"RID",t),k(a,"CVER",22),this.D&&k(a,"X-HTTP-Session-Id",this.D),nt(this,a),E&&(this.O?s="headers="+encodeURIComponent(String(ri(E)))+"&"+s:this.m&&Dn(a,this.m,E)),Nn(this.h,g),this.Ua&&k(a,"TYPE","init"),this.P?(k(a,"$req",s),k(a,"SID","null"),g.T=!0,Rn(g,a,null)):Rn(g,a,s),this.G=2}}else this.G==3&&(t?hi(this,t):this.i.length==0||Gr(this.h)||hi(this))};function hi(t,s){var a;s?a=s.l:a=t.U++;let c=le(t.I);k(c,"SID",t.K),k(c,"RID",a),k(c,"AID",t.T),nt(t,c),t.m&&t.o&&Dn(c,t.m,t.o),a=new fe(t,t.j,a,t.B+1),t.m===null&&(a.H=t.o),s&&(t.i=s.D.concat(t.i)),s=di(t,a,1e3),a.I=Math.round(.5*t.wa)+Math.round(.5*t.wa*Math.random()),Nn(t.h,a),Rn(a,c,s)}function nt(t,s){t.H&&te(t.H,function(a,c){k(s,c,a)}),t.l&&Qr({},function(a,c){k(s,c,a)})}function di(t,s,a){a=Math.min(t.i.length,a);var c=t.l?A(t.l.Na,t.l,t):null;e:{var g=t.i;let E=-1;for(;;){let T=["count="+a];E==-1?0<a?(E=g[0].g,T.push("ofs="+E)):E=0:T.push("ofs="+E);let C=!0;for(let M=0;M<a;M++){let P=g[M].g,z=g[M].map;if(P-=E,0>P)E=Math.max(0,g[M].g-100),C=!1;else try{sa(z,T,"req"+P+"_")}catch{c&&c(z)}}if(C){c=T.join("&");break e}}}return t=t.i.splice(0,a),s.D=t,c}function fi(t){if(!t.g&&!t.u){t.Y=1;var s=t.Fa;Ue||wr(),Be||(Ue(),Be=!0),dn.add(s,t),t.v=0}}function Vn(t){return t.g||t.u||3<=t.v?!1:(t.Y++,t.u=We(A(t.Fa,t),gi(t,t.v)),t.v++,!0)}r.Fa=function(){if(this.u=null,pi(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var t=2*this.R;this.j.info("BP detection timer enabled: "+t),this.A=We(A(this.ab,this),t)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Q(10),kt(this),pi(this))};function xn(t){t.A!=null&&(y.clearTimeout(t.A),t.A=null)}function pi(t){t.g=new fe(t,t.j,"rpc",t.Y),t.m===null&&(t.g.H=t.o),t.g.O=0;var s=le(t.qa);k(s,"RID","rpc"),k(s,"SID",t.K),k(s,"AID",t.T),k(s,"CI",t.F?"0":"1"),!t.F&&t.ja&&k(s,"TO",t.ja),k(s,"TYPE","xmlhttp"),nt(t,s),t.m&&t.o&&Dn(s,t.m,t.o),t.L&&(t.g.I=t.L);var a=t.g;t=t.ia,a.L=1,a.v=Rt(le(s)),a.m=null,a.P=!0,qr(a,t)}r.Za=function(){this.C!=null&&(this.C=null,kt(this),Vn(this),Q(19))};function Dt(t){t.C!=null&&(y.clearTimeout(t.C),t.C=null)}function mi(t,s){var a=null;if(t.g==s){Dt(t),xn(t),t.g=null;var c=2}else if(kn(t.h,s))a=s.D,Kr(t.h,s),c=1;else return;if(t.G!=0){if(s.o)if(c==1){a=s.m?s.m.length:0,s=Date.now()-s.F;var g=t.B;c=vt(),H(c,new Mr(c,a)),Nt(t)}else fi(t);else if(g=s.s,g==3||g==0&&0<s.X||!(c==1&&ua(t,s)||c==2&&Vn(t)))switch(a&&0<a.length&&(s=t.h,s.i=s.i.concat(a)),g){case 1:ve(t,5);break;case 4:ve(t,10);break;case 3:ve(t,6);break;default:ve(t,2)}}}function gi(t,s){let a=t.Ta+Math.floor(Math.random()*t.cb);return t.isActive()||(a*=2),a*s}function ve(t,s){if(t.j.info("Error code "+s),s==2){var a=A(t.fb,t),c=t.Xa;let g=!c;c=new Ee(c||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||bt(c,"https"),Rt(c),g?na(c.toString(),a):ra(c.toString(),a)}else Q(2);t.G=0,t.l&&t.l.sa(s),_i(t),li(t)}r.fb=function(t){t?(this.j.info("Successfully pinged google.com"),Q(2)):(this.j.info("Failed to ping google.com"),Q(1))};function _i(t){if(t.G=0,t.ka=[],t.l){let s=Hr(t.h);(s.length!=0||t.i.length!=0)&&(N(t.ka,s),N(t.ka,t.i),t.h.i.length=0,V(t.i),t.i.length=0),t.l.ra()}}function yi(t,s,a){var c=a instanceof Ee?le(a):new Ee(a);if(c.g!="")s&&(c.g=s+"."+c.g),St(c,c.s);else{var g=y.location;c=g.protocol,s=s?s+"."+g.hostname:g.hostname,g=+g.port;var E=new Ee(null);c&&bt(E,c),s&&(E.g=s),g&&St(E,g),a&&(E.l=a),c=E}return a=t.D,s=t.ya,a&&s&&k(c,a,s),k(c,"VER",t.la),nt(t,c),c}function Ii(t,s,a){if(s&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return s=t.Ca&&!t.pa?new O(new Xe({eb:a})):new O(t.pa),s.Ha(t.J),s}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ei(){}r=Ei.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ot(){}Ot.prototype.g=function(t,s){return new ee(t,s)};function ee(t,s){$.call(this),this.g=new ui(s),this.l=t,this.h=s&&s.messageUrlParams||null,t=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.o=t,t=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(t?t["X-WebChannel-Content-Type"]=s.messageContentType:t={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.va&&(t?t["X-WebChannel-Client-Profile"]=s.va:t={"X-WebChannel-Client-Profile":s.va}),this.g.S=t,(t=s&&s.Sb)&&!K(t)&&(this.g.m=t),this.v=s&&s.supportsCrossDomainXhr||!1,this.u=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!K(s)&&(this.g.D=s,t=this.h,t!==null&&s in t&&(t=this.h,s in t&&delete t[s])),this.j=new Re(this)}R(ee,$),ee.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ee.prototype.close=function(){On(this.g)},ee.prototype.o=function(t){var s=this.g;if(typeof t=="string"){var a={};a.__data__=t,t=a}else this.u&&(a={},a.__data__=vn(t),t=a);s.i.push(new Wo(s.Ya++,t)),s.G==3&&Nt(s)},ee.prototype.N=function(){this.g.l=null,delete this.j,On(this.g),delete this.g,ee.aa.N.call(this)};function vi(t){Tn.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var s=t.__sm__;if(s){e:{for(let a in s){t=a;break e}t=void 0}(this.i=t)&&(t=this.i,s=s!==null&&t in s?s[t]:void 0),this.data=s}else this.data=t}R(vi,Tn);function wi(){An.call(this),this.status=1}R(wi,An);function Re(t){this.g=t}R(Re,Ei),Re.prototype.ua=function(){H(this.g,"a")},Re.prototype.ta=function(t){H(this.g,new vi(t))},Re.prototype.sa=function(t){H(this.g,new wi)},Re.prototype.ra=function(){H(this.g,"b")},Ot.prototype.createWebChannel=Ot.prototype.g,ee.prototype.send=ee.prototype.o,ee.prototype.open=ee.prototype.m,ee.prototype.close=ee.prototype.close,Sf=Gt.createWebChannelTransport=function(){return new Ot},bf=Gt.getStatEventTarget=function(){return vt()},Af=Gt.Event=ye,Tf=Gt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,wf=Gt.ErrorCode=wt,Fr.COMPLETE="complete",vf=Gt.EventType=Fr,Or.EventType=ze,ze.OPEN="a",ze.CLOSE="b",ze.ERROR="c",ze.MESSAGE="d",$.prototype.listen=$.prototype.K,Ef=Gt.WebChannel=Or,nv=Gt.FetchXmlHttpFactory=Xe,O.prototype.listenOnce=O.prototype.L,O.prototype.getLastError=O.prototype.Ka,O.prototype.getLastErrorCode=O.prototype.Ba,O.prototype.getStatus=O.prototype.Z,O.prototype.getResponseJson=O.prototype.Oa,O.prototype.getResponseText=O.prototype.oa,O.prototype.send=O.prototype.ea,O.prototype.setWithCredentials=O.prototype.Ha,If=Gt.XhrIo=O}).apply(typeof _o<"u"?_o:typeof self<"u"?self:typeof window<"u"?window:{});var Rf="@firebase/firestore",Pf="4.9.0";var _e=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_e.UNAUTHENTICATED=new _e(null),_e.GOOGLE_CREDENTIALS=new _e("google-credentials-uid"),_e.FIRST_PARTY=new _e("first-party-uid"),_e.MOCK_USER=new _e("mock-user");var as="12.0.0";var Er=new nn("@firebase/firestore");function ut(r,...e){if(Er.logLevel<=X.DEBUG){let n=e.map(Fu);Er.debug(`Firestore (${as}): ${r}`,...n)}}function Bf(r,...e){if(Er.logLevel<=X.ERROR){let n=e.map(Fu);Er.error(`Firestore (${as}): ${r}`,...n)}}function rv(r,...e){if(Er.logLevel<=X.WARN){let n=e.map(Fu);Er.warn(`Firestore (${as}): ${r}`,...n)}}function Fu(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Ae(r,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,qf(r,i,n)}function qf(r,e,n){let i=`FIRESTORE (${as}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Bf(i),new Error(i)}function er(r,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,r||qf(e,o,i)}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends ke{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var tr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var yo=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Iu=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_e.UNAUTHENTICATED))}shutdown(){}},Eu=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},vu=class{constructor(e){this.t=e,this.currentUser=_e.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){er(this.o===void 0,42304);let i=this.i,o=v=>this.i!==i?(i=this.i,n(v)):Promise.resolve(),u=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new tr,e.enqueueRetryable(()=>o(this.currentUser))};let h=()=>{let v=u;e.enqueueRetryable(async()=>{await v.promise,await o(this.currentUser)})},y=v=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(v=>y(v)),setTimeout(()=>{if(!this.auth){let v=this.t.getImmediate({optional:!0});v?y(v):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new tr)}},0),h()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(er(typeof i.accessToken=="string",31837,{l:i}),new yo(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return er(e===null||typeof e=="string",2055,{h:e}),new _e(e)}},wu=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=_e.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Tu=class{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new wu(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_e.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Io=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Au=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Me(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){er(this.o===void 0,3512);let i=u=>{u.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);let h=u.token!==this.m;return this.m=u.token,ut("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>i(u))};let o=u=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){let u=this.V.getImmediate({optional:!0});u?o(u):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Io(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(er(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Io(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function iv(r){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());return n}var bu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let o=iv(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=e.charAt(o[u]%62))}return i}};function Kt(r,e){return r<e?-1:r>e?1:0}function sv(r,e){let n=Math.min(r.length,e.length);for(let i=0;i<n;i++){let o=r.charAt(i),u=e.charAt(i);if(o!==u)return _u(o)===_u(u)?Kt(o,u):_u(o)?1:-1}return Kt(r.length,e.length)}var ov=55296,av=57343;function _u(r){let e=r.charCodeAt(0);return e>=ov&&e<=av}var Cf="__name__",Eo=class r{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ae(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return r.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof r?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let o=0;o<i;o++){let u=r.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Kt(e.length,n.length)}static compareSegments(e,n){let i=r.isNumericId(e),o=r.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?r.extractNumericId(e).compare(r.extractNumericId(n)):sv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return go.fromString(e.substring(4,e.length-2))}},Wt=class r extends Eo{construct(e,n,i){return new r(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new L(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new r(n)}static emptyPath(){return new r([])}},cv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Su=class r extends Eo{construct(e,n,i){return new r(e,n,i)}static isValidIdentifier(e){return cv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cf}static keyField(){return new r([Cf])}static fromServerFormat(e){let n=[],i="",o=0,u=()=>{if(i.length===0)throw new L(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},h=!1;for(;o<e.length;){let y=e[o];if(y==="\\"){if(o+1===e.length)throw new L(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new L(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=v,o+=2}else y==="`"?(h=!h,o++):y!=="."||h?(i+=y,o++):(u(),o++)}if(u(),h)throw new L(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(n)}static emptyPath(){return new r([])}};var Ht=class r{constructor(e){this.path=e}static fromPath(e){return new r(Wt.fromString(e))}static fromName(e){return new r(Wt.fromString(e).popFirst(5))}static empty(){return new r(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new r(new Wt(e.slice()))}};function uv(r,e,n,i){if(e===!0&&i===!0)throw new L(B.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function lv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function hv(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function dv(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new L(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=hv(r);throw new L(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function ce(r,e){let n={typeString:r};return e&&(n.value=e),n}function cs(r,e){if(!lv(r))throw new L(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(let i in e)if(e[i]){let o=e[i].typeString,u="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){n=`JSON missing required field: '${i}'`;break}let h=r[i];if(o&&typeof h!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new L(B.INVALID_ARGUMENT,n);return!0}var kf=-62135596800,Nf=1e6,ts=class r{static now(){return r.fromMillis(Date.now())}static fromDate(e){return r.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Nf);return new r(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kf)throw new L(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nf}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cs(e,r._jsonSchema))return new r(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-kf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ts._jsonSchemaVersion="firestore/timestamp/1.0",ts._jsonSchema={type:ce("string",ts._jsonSchemaVersion),seconds:ce("number"),nanoseconds:ce("number")};var Ru=class{constructor(e,n,i,o){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=o}};Ru.UNKNOWN_ID=-1;function fv(r){return r.name==="IndexedDbTransactionError"}function pv(r){return r===0&&1/r==-1/0}var mv="remoteDocuments",jf="owner";var $f="mutationQueues";var zf="mutations";var Gf="documentMutations",gv="remoteDocumentsV14";var Wf="remoteDocumentGlobal";var Kf="targets";var Hf="targetDocuments";var Qf="targetGlobal",Jf="collectionParents";var Yf="clientMetadata";var Xf="bundles";var Zf="namedQueries";var _v="indexConfiguration";var yv="indexState";var Iv="indexEntries";var ep="documentOverlays";var Ev="globals";var vv=[$f,zf,Gf,mv,Kf,jf,Qf,Hf,Yf,Wf,Jf,Xf,Zf],g0=[...vv,ep],wv=[$f,zf,Gf,gv,Kf,jf,Qf,Hf,Yf,Wf,Jf,Xf,Zf,ep],Tv=wv,Av=[...Tv,_v,yv,Iv];var _0=[...Av,Ev];var vr=class r{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new r(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gr(this.root,e,this.comparator,!1)}getReverseIterator(){return new gr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gr(this.root,e,this.comparator,!0)}},gr=class{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?i(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},_t=class r{constructor(e,n,i,o,u){this.key=e,this.value=n,this.color=i??r.RED,this.left=o??r.EMPTY,this.right=u??r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,u){return new r(e??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this,u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return r.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}};_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,i,o,u){return this}insert(e,n,i){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vo=class r{constructor(e){this.comparator=e,this.data=new vr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wo(this.data.getIterator())}getIteratorFrom(e){return new wo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof r)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new r(this.comparator);return n.data=e,n}},wo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Pu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var hn=class r{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new Pu("Invalid base64 string: "+u):u}})(e);return new r(n)}static fromUint8Array(e){let n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new r(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};hn.EMPTY_BYTE_STRING=new hn("");var bv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sv(r){if(er(!!r,39018),typeof r=="string"){let e=0,n=bv.exec(r);if(er(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}let i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ns(r.seconds),nanos:ns(r.nanos)}}function ns(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Rv(r){return typeof r=="string"?hn.fromBase64String(r):hn.fromUint8Array(r)}var Cu="(default)",ku=class r{constructor(e,n){this.projectId=e,this.database=n||Cu}static empty(){return new r("","")}get isDefaultDatabase(){return this.database===Cu}isEqual(e){return e instanceof r&&e.projectId===this.projectId&&e.database===this.database}};var tp="__type__",Pv="__max__";var np="__vector__",rp="value";function Cv(r){return(r?.mapValue?.fields||{})[tp]?.stringValue===np}function kv(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===Pv}var I0={mapValue:{fields:{[tp]:{stringValue:np},[rp]:{arrayValue:{}}}}};var Nu=class{constructor(e,n=null,i=[],o=[],u=null,h="F",y=null,v=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=y,this.endAt=v,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Nv(r){return new Nu(r)}var E0=new vr(Ht.comparator);var v0=new vr(Ht.comparator);var w0=new vr(Ht.comparator),T0=new vo(Ht.comparator);var A0=new vo(Kt);var Df,U;(U=Df||(Df={}))[U.OK=0]="OK",U[U.CANCELLED=1]="CANCELLED",U[U.UNKNOWN=2]="UNKNOWN",U[U.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",U[U.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",U[U.NOT_FOUND=5]="NOT_FOUND",U[U.ALREADY_EXISTS=6]="ALREADY_EXISTS",U[U.PERMISSION_DENIED=7]="PERMISSION_DENIED",U[U.UNAUTHENTICATED=16]="UNAUTHENTICATED",U[U.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",U[U.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",U[U.ABORTED=10]="ABORTED",U[U.OUT_OF_RANGE=11]="OUT_OF_RANGE",U[U.UNIMPLEMENTED=12]="UNIMPLEMENTED",U[U.INTERNAL=13]="INTERNAL",U[U.UNAVAILABLE=14]="UNAVAILABLE",U[U.DATA_LOSS=15]="DATA_LOSS";var b0=new go([4294967295,4294967295],0);var To=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(ns(e.integerValue));else if("doubleValue"in e){let i=ns(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),pv(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=Sv(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Rv(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?kv(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):Cv(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ae(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let i=e.fields||{};this.Ft(n,55);for(let o of Object.keys(i))this.Ot(o,n),this.Ct(i[o],n)}kt(e,n){let i=e.fields||{};this.Ft(n,53);let o=rp,u=i[o].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(ns(u)),this.Ot(o,n),this.Ct(i[o],n)}Qt(e,n){let i=e.values||[];this.Ft(n,50);for(let o of i)this.Ct(o,n)}Lt(e,n){this.Ft(n,37),Ht.fromName(e).path.forEach(i=>{this.Ft(n,60),this.Ut(i,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};To.Kt=new To;var S0=new Uint8Array(0);var ip=41943040,gt=class r{static withCacheSize(e){return new r(e,r.DEFAULT_COLLECTION_PERCENTILE,r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}};gt.DEFAULT_COLLECTION_PERCENTILE=10,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gt.DEFAULT=new gt(ip,gt.DEFAULT_COLLECTION_PERCENTILE,gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gt.DISABLED=new gt(-1,0,0);var Dv=1048576;function yu(){return typeof document<"u"?document:null}var Du=class{constructor(e,n,i=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&ut("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var Ou=class r{constructor(e,n,i,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,u){let h=Date.now()+i,y=new r(e,n,h,o,u);return y.start(i),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var Of,Vf;(Vf=Of||(Of={})).Ma="default",Vf.Cache="cache";function Ov(r){let e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}var xf=new Map;var sp="firestore.googleapis.com",Lf=!0,Ao=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new L(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sp,this.ssl=Lf}else this.host=e.host,this.ssl=e.ssl??Lf;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ip;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Dv)throw new L(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ov(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new L(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new L(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new L(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},bo=class{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ao({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ao(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Iu;switch(i.type){case"firstParty":return new Tu(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new L(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let i=xf.get(n);i&&(ut("ComponentProvider","Removing Datastore"),xf.delete(n),i.terminate())})(this),Promise.resolve()}};function Vv(r,e,n,i={}){r=dv(r,bo);let o=Hn(e),u=r._getSettings(),h=rt(ne({},u),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${n}`;o&&(zs(`https://${y}`),Gs("Firestore",!0)),u.host!==sp&&u.host!==y&&rv("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let v=rt(ne({},u),{host:y,ssl:o,emulatorOptions:i});if(!pt(v,h)&&(r._setSettings(v),i.mockUserToken)){let w,b;if(typeof i.mockUserToken=="string")w=i.mockUserToken,b=_e.MOCK_USER;else{w=od(i.mockUserToken,r._app?.options.projectId);let S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new L(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new _e(S)}r._authCredentials=new Eu(new yo(w,b))}}var Vu=class r{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new r(this.firestore,e,this._query)}},nr=class r{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new r(this.firestore,e,this._key)}toJSON(){return{type:r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(cs(n,r._jsonSchema))return new r(e,i||null,new Ht(Wt.fromString(n.referencePath)))}};nr._jsonSchemaVersion="firestore/documentReference/1.0",nr._jsonSchema={type:ce("string",nr._jsonSchemaVersion),referencePath:ce("string")};var xu=class r extends Vu{constructor(e,n,i){super(e,n,Nv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new nr(this.firestore,null,new Ht(e))}withConverter(e){return new r(this.firestore,e,this._path)}};var Mf="AsyncQueue",So=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Du(this,"async_queue_retry"),this._c=()=>{let i=yu();i&&ut(Mf,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;let n=yu();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=yu();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!fv(e))throw e;ut(Mf,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Bf("INTERNAL UNHANDLED ERROR: ",Ff(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let o=Ou.createAndSchedule(this,e,n,i,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&Ae(47125,{Pc:Ff(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function Ff(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}var Lu=class extends bo{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new So,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new So(e),this._firestoreClient=void 0,await e}}};function op(r,e){let n=typeof r=="object"?r:Qs(),i=typeof r=="string"?r:e||Cu,o=Hi(n,"firestore").getImmediate({identifier:i});if(!o._initialized){let u=sd("firestore");u&&Vv(o,...u)}return o}var rs=class r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new r(hn.fromBase64String(e))}catch(n){throw new L(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new r(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cs(e,r._jsonSchema))return r.fromBase64String(e.bytes)}};rs._jsonSchemaVersion="firestore/bytes/1.0",rs._jsonSchema={type:ce("string",rs._jsonSchemaVersion),bytes:ce("string")};var Ro=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Su(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var is=class r{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:r._jsonSchemaVersion}}static fromJSON(e){if(cs(e,r._jsonSchema))return new r(e.latitude,e.longitude)}};is._jsonSchemaVersion="firestore/geoPoint/1.0",is._jsonSchema={type:ce("string",is._jsonSchemaVersion),latitude:ce("number"),longitude:ce("number")};var ss=class r{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cs(e,r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new r(e.vectorValues);throw new L(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ss._jsonSchemaVersion="firestore/vectorValue/1.0",ss._jsonSchema={type:ce("string",ss._jsonSchemaVersion),vectorValues:ce("object")};var xv=new RegExp("[~\\*/\\[\\]]");function Lv(r,e,n){if(e.search(xv)>=0)throw Uf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Ro(...e.split("."))._internalPath}catch{throw Uf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Uf(r,e,n,i,o){let u=i&&!i.isEmpty(),h=o!==void 0,y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let v="";return(u||h)&&(v+=" (found",u&&(v+=` in field ${i}`),h&&(v+=` in document ${o}`),v+=")"),new L(B.INVALID_ARGUMENT,y+r+v)}var Po=class{constructor(e,n,i,o,u){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new nr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Mu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(ap("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Mu=class extends Po{data(){return super.data()}};function ap(r,e){return typeof e=="string"?Lv(r,e):e instanceof Ro?e._internalPath:e._delegate._internalPath}var _r=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},yr=class r extends Po{constructor(e,n,i,o,u,h){super(e,n,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ir(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(ap("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};yr._jsonSchemaVersion="firestore/documentSnapshot/1.0",yr._jsonSchema={type:ce("string",yr._jsonSchemaVersion),bundleSource:ce("string","DocumentSnapshot"),bundleName:ce("string"),bundle:ce("string")};var Ir=class extends yr{data(e={}){return super.data(e)}},os=class r{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new _r(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ir(this._firestore,this._userDataWriter,i.key,i,new _r(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(y=>{let v=new Ir(o._firestore,o._userDataWriter,y.doc.key,y.doc,new _r(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:v,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(y=>u||y.type!==3).map(y=>{let v=new Ir(o._firestore,o._userDataWriter,y.doc.key,y.doc,new _r(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter),w=-1,b=-1;return y.type!==0&&(w=h.indexOf(y.doc.key),h=h.delete(y.doc.key)),y.type!==1&&(h=h.add(y.doc),b=h.indexOf(y.doc.key)),{type:Mv(y.type),doc:v,oldIndex:w,newIndex:b}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],i=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Mv(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}os._jsonSchemaVersion="firestore/querySnapshot/1.0",os._jsonSchema={type:ce("string",os._jsonSchemaVersion),bundleSource:ce("string","QuerySnapshot"),bundleName:ce("string"),bundle:ce("string")};(function(e,n=!0){(function(o){as=o})(on),sn(new Le("firestore",(i,{instanceIdentifier:o,options:u})=>{let h=i.getProvider("app").getImmediate(),y=new Lu(new vu(i.getProvider("auth-internal")),new Au(h,i.getProvider("app-check-internal")),(function(w,b){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new L(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(w.options.projectId,b)})(h,o),h);return u=ne({useFetchStreams:n},u),y._setSettings(u),y},"PUBLIC").setMultipleInstances(!0)),ct(Rf,Pf,e),ct(Rf,Pf,"esm2020")})();var cp={production:!1,firebaseConfig:{apiKey:"AIzaSyDwIcr47aUDCJnbWvBbUuyHf5SwGc3XIQU",authDomain:"cuac-design.firebaseapp.com",projectId:"cuac-design",storageBucket:"cuac-design.firebasestorage.app",messagingSenderId:"121482677688",appId:"1:121482677688:web:93831d6940daae2ddf534d",measurementId:"G-JT5JB6WHC1"}};var up={providers:[$u(),Hu(),nl(rl),el(Zu()),La(()=>Hs(cp.firebaseConfig)),ic(()=>mo()),La(()=>Hs({projectId:"cuac-design",appId:"1:121482677688:web:93831d6940daae2ddf534d",storageBucket:"cuac-design.firebasestorage.app",apiKey:"AIzaSyDwIcr47aUDCJnbWvBbUuyHf5SwGc3XIQU",authDomain:"cuac-design.firebaseapp.com",messagingSenderId:"121482677688",measurementId:"G-JT5JB6WHC1"})),ic(()=>mo()),Xh(()=>op())]};var Co=class r{title=zu("cuac-design");static \u0275fac=function(n){return new(n||r)};static \u0275cmp=Wu({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(n,i){n&1&&Ku(0,"router-outlet")},dependencies:[tl],encapsulation:2})};Xu(Co,up).catch(r=>console.error(r));
