import{B as Jl,C as Yl,D as Xl,E as Zl,H as Ua,I as eh,J as th,K as nh,L as rh,O as ih,a as $l,b as jl,c as Fa,d as zl,e as un,f as Gl,g as ln,h as hn,i as Wl,j as Kl,k as Ce,l as Bi,p as Hl,q as Et,u as Ql}from"./chunk-SFITRFMU.js";import{a as W,b as fe,c as Ma}from"./chunk-7CGTOI24.js";var sh=[{path:"",loadChildren:()=>import("./chunk-JTALL7HW.js").then(r=>r.userRoutes),title:"Cuac Design"},{path:"admin",loadChildren:()=>import("./chunk-7RINTF54.js").then(r=>r.adminRoutes),data:{prerender:!1}},{path:"**",pathMatch:"full",redirectTo:""}];var oh=()=>{};var ch=function(r){let e=[],t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},vg=function(r){let e=[],t=0,i=0;for(;t<r.length;){let o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){let c=r[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){let c=r[t++],l=r[t++],d=r[t++],I=((o&7)<<18|(c&63)<<12|(l&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(I>>10)),e[i++]=String.fromCharCode(56320+(I&1023))}else{let c=r[t++],l=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|l&63)}}return e.join("")},Rs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){let c=r[o],l=o+1<r.length,d=l?r[o+1]:0,I=o+2<r.length,v=I?r[o+2]:0,b=c>>2,S=(c&3)<<4|d>>4,A=(d&15)<<2|v>>6,D=v&63;I||(D=64,l||(A=64)),i.push(t[b],t[S],t[A],t[D])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ch(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):vg(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){let c=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;let v=o<r.length?t[r.charAt(o)]:64;++o;let S=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||d==null||v==null||S==null)throw new qa;let A=c<<2|d>>4;if(i.push(A),v!==64){let D=d<<4&240|v>>2;if(i.push(D),S!==64){let R=v<<6&192|S;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}},qa=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Tg=function(r){let e=ch(r);return Rs.encodeByteArray(e,!0)},ja=function(r){return Tg(r).replace(/\./g,"")},Ps=function(r){try{return Rs.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function za(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ag=()=>za().__FIREBASE_DEFAULTS__,bg=()=>{if(typeof process>"u"||typeof process.env>"u")return;let r=process.env.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Sg=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=r&&Ps(r[1]);return e&&JSON.parse(e)},uh=()=>{try{return oh()||Ag()||bg()||Sg()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}};var Ga=()=>{var r;return(r=uh())===null||r===void 0?void 0:r.config},lh=r=>{var e;return(e=uh())===null||e===void 0?void 0:e[`_${r}`]};var Jn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function Cs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function dh(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ks(){let r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function fh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yn(){try{return typeof indexedDB=="object"}catch{return!1}}function Ns(){return new Promise((r,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}function ph(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var Rg="FirebaseError",Ae=class r extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Rg,Object.setPrototypeOf(this,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}},ke=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],l=c?Pg(c,i):"Error",d=`${this.serviceName}: ${l} (${o}).`;return new Ae(o,d,i)}};function Pg(r,e){return r.replace(Cg,(t,i)=>{let o=e[i];return o!=null?String(o):`<${i}?>`})}var Cg=/\{\$([^}]+)}/g;function Xn(r,e){if(r===e)return!0;let t=Object.keys(r),i=Object.keys(e);for(let o of t){if(!i.includes(o))return!1;let c=r[o],l=e[o];if(ah(c)&&ah(l)){if(!Xn(c,l))return!1}else if(c!==l)return!1}for(let o of i)if(!t.includes(o))return!1;return!0}function ah(r){return r!==null&&typeof r=="object"}function Wa(r){let e=[];for(let[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mh(r,e){let t=new $a(r,e);return t.subscribe.bind(t)}var $a=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");kg(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Ba),o.error===void 0&&(o.error=Ba),o.complete===void 0&&(o.complete=Ba);let c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kg(r,e){if(typeof r!="object"||r===null)return!1;for(let t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Ba(){}var Ng=1e3,Dg=2,Og=14400*1e3,Vg=.5;function Ds(r,e=Ng,t=Dg){let i=e*Math.pow(t,r),o=Math.round(Vg*i*(Math.random()-.5)*2);return Math.min(Og,i+o)}function Kt(r){return r&&r._delegate?r._delegate:r}var ae=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Zn="[DEFAULT]";var Ka=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Jn;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Lg(e))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(t);try{let c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=Zn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zn){return this.instances.has(e)}getOptions(e=Zn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[c,l]of this.instancesDeferred.entries()){let d=this.normalizeInstanceIdentifier(c);i===d&&l.resolve(o)}return o}onInit(e,t){var i;let o=this.normalizeInstanceIdentifier(t),c=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(o,c);let l=this.instances.get(o);return l&&e(l,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xg(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Zn){return this.component?this.component.multipleInstances?e:Zn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xg(r){return r===Zn?void 0:r}function Lg(r){return r.instantiationMode==="EAGER"}var Os=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ka(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Mg=[],ee=(function(r){return r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT",r})(ee||{}),Fg={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},Ug=ee.INFO,Bg={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},qg=(r,e,...t)=>{if(e<r.logLevel)return;let i=new Date().toISOString(),o=Bg[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ge=class{constructor(e){this.name=e,this._logLevel=Ug,this._logHandler=qg,this._userLogHandler=null,Mg.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Fg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...e),this._logHandler(this,ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...e),this._logHandler(this,ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...e),this._logHandler(this,ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...e),this._logHandler(this,ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...e),this._logHandler(this,ee.ERROR,...e)}};var $g=(r,e)=>e.some(t=>r instanceof t),gh,_h;function jg(){return gh||(gh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zg(){return _h||(_h=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var yh=new WeakMap,Qa=new WeakMap,Ih=new WeakMap,Ha=new WeakMap,Ya=new WeakMap;function Gg(r){let e=new Promise((t,i)=>{let o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",l)},c=()=>{t(vt(r.result)),o()},l=()=>{i(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&yh.set(t,r)}).catch(()=>{}),Ya.set(e,r),e}function Wg(r){if(Qa.has(r))return;let e=new Promise((t,i)=>{let o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",l),r.removeEventListener("abort",l)},c=()=>{t(),o()},l=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",l),r.addEventListener("abort",l)});Qa.set(r,e)}var Ja={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Qa.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ih.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vt(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wh(r){Ja=r(Ja)}function Kg(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=r.call(Vs(this),e,...t);return Ih.set(i,e.sort?e.sort():[e]),vt(i)}:zg().includes(r)?function(...e){return r.apply(Vs(this),e),vt(yh.get(this))}:function(...e){return vt(r.apply(Vs(this),e))}}function Hg(r){return typeof r=="function"?Kg(r):(r instanceof IDBTransaction&&Wg(r),$g(r,jg())?new Proxy(r,Ja):r)}function vt(r){if(r instanceof IDBRequest)return Gg(r);if(Ha.has(r))return Ha.get(r);let e=Hg(r);return e!==r&&(Ha.set(r,e),Ya.set(e,r)),e}var Vs=r=>Ya.get(r);function dn(r,e,{blocked:t,upgrade:i,blocking:o,terminated:c}={}){let l=indexedDB.open(r,e),d=vt(l);return i&&l.addEventListener("upgradeneeded",I=>{i(vt(l.result),I.oldVersion,I.newVersion,vt(l.transaction),I)}),t&&l.addEventListener("blocked",I=>t(I.oldVersion,I.newVersion,I)),d.then(I=>{c&&I.addEventListener("close",()=>c()),o&&I.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),d}var Qg=["get","getKey","getAll","getAllKeys","count"],Jg=["put","add","delete","clear"],Xa=new Map;function Eh(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Xa.get(e))return Xa.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,o=Jg.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Qg.includes(t)))return;let c=async function(l,...d){let I=this.transaction(l,o?"readwrite":"readonly"),v=I.store;return i&&(v=v.index(d.shift())),(await Promise.all([v[t](...d),o&&I.done]))[0]};return Xa.set(e,c),c}wh(r=>fe(W({},r),{get:(e,t,i)=>Eh(e,t)||r.get(e,t,i),has:(e,t)=>!!Eh(e,t)||r.has(e,t)}));var ec=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Yg(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Yg(r){let e=r.getComponent();return e?.type==="VERSION"}var tc="@firebase/app",vh="0.13.2";var Ht=new Ge("@firebase/app"),Xg="@firebase/app-compat",Zg="@firebase/analytics-compat",e_="@firebase/analytics",t_="@firebase/app-check-compat",n_="@firebase/app-check",r_="@firebase/auth",i_="@firebase/auth-compat",s_="@firebase/database",o_="@firebase/data-connect",a_="@firebase/database-compat",c_="@firebase/functions",u_="@firebase/functions-compat",l_="@firebase/installations",h_="@firebase/installations-compat",d_="@firebase/messaging",f_="@firebase/messaging-compat",p_="@firebase/performance",m_="@firebase/performance-compat",g_="@firebase/remote-config",__="@firebase/remote-config-compat",y_="@firebase/storage",I_="@firebase/storage-compat",w_="@firebase/firestore",E_="@firebase/ai",v_="@firebase/firestore-compat",T_="firebase",A_="11.10.0";var nc="[DEFAULT]",b_={[tc]:"fire-core",[Xg]:"fire-core-compat",[e_]:"fire-analytics",[Zg]:"fire-analytics-compat",[n_]:"fire-app-check",[t_]:"fire-app-check-compat",[r_]:"fire-auth",[i_]:"fire-auth-compat",[s_]:"fire-rtdb",[o_]:"fire-data-connect",[a_]:"fire-rtdb-compat",[c_]:"fire-fn",[u_]:"fire-fn-compat",[l_]:"fire-iid",[h_]:"fire-iid-compat",[d_]:"fire-fcm",[f_]:"fire-fcm-compat",[p_]:"fire-perf",[m_]:"fire-perf-compat",[g_]:"fire-rc",[__]:"fire-rc-compat",[y_]:"fire-gcs",[I_]:"fire-gcs-compat",[w_]:"fire-fst",[v_]:"fire-fst-compat",[E_]:"fire-vertex","fire-js":"fire-js",[T_]:"fire-js-all"};var qi=new Map,S_=new Map,rc=new Map;function Th(r,e){try{r.container.addComponent(e)}catch(t){Ht.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ie(r){let e=r.name;if(rc.has(e))return Ht.debug(`There were multiple attempts to register component ${e}.`),!1;rc.set(e,r);for(let t of qi.values())Th(t,r);for(let t of S_.values())Th(t,r);return!0}function er(r,e){let t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Qt(r){return r==null?!1:r.settings!==void 0}var R_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fn=new ke("app","Firebase",R_);var ic=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ae("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}};var br=A_;function Rh(r,e={}){let t=r;typeof e!="object"&&(e={name:e});let i=Object.assign({name:nc,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw fn.create("bad-app-name",{appName:String(o)});if(t||(t=Ga()),!t)throw fn.create("no-options");let c=qi.get(o);if(c){if(Xn(t,c.options)&&Xn(i,c.config))return c;throw fn.create("duplicate-app",{appName:o})}let l=new Os(o);for(let I of rc.values())l.addComponent(I);let d=new ic(t,i,l);return qi.set(o,d),d}function tr(r=nc){let e=qi.get(r);if(!e&&r===nc&&Ga())return Rh();if(!e)throw fn.create("no-app",{appName:r});return e}function xs(){return Array.from(qi.values())}function te(r,e,t){var i;let o=(i=b_[r])!==null&&i!==void 0?i:r;t&&(o+=`-${t}`);let c=o.match(/\s|\//),l=e.match(/\s|\//);if(c||l){let d=[`Unable to register library "${o}" with version "${e}":`];c&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ht.warn(d.join(" "));return}Ie(new ae(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}var P_="firebase-heartbeat-database",C_=1,$i="firebase-heartbeat-store",Za=null;function Ph(){return Za||(Za=dn(P_,C_,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore($i)}catch(t){console.warn(t)}}}}).catch(r=>{throw fn.create("idb-open",{originalErrorMessage:r.message})})),Za}async function k_(r){try{let t=(await Ph()).transaction($i),i=await t.objectStore($i).get(Ch(r));return await t.done,i}catch(e){if(e instanceof Ae)Ht.warn(e.message);else{let t=fn.create("idb-get",{originalErrorMessage:e?.message});Ht.warn(t.message)}}}async function Ah(r,e){try{let i=(await Ph()).transaction($i,"readwrite");await i.objectStore($i).put(e,Ch(r)),await i.done}catch(t){if(t instanceof Ae)Ht.warn(t.message);else{let i=fn.create("idb-set",{originalErrorMessage:t?.message});Ht.warn(i.message)}}}function Ch(r){return`${r.name}!${r.options.appId}`}var N_=1024,D_=30,sc=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new oc(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{let o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=bh();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(l=>l.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>D_){let l=V_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ht.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=bh(),{heartbeatsToSend:i,unsentEntries:o}=O_(this._heartbeatsCache.heartbeats),c=ja(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(t){return Ht.warn(t),""}}};function bh(){return new Date().toISOString().substring(0,10)}function O_(r,e=N_){let t=[],i=r.slice();for(let o of r){let c=t.find(l=>l.agent===o.agent);if(c){if(c.dates.push(o.date),Sh(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Sh(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var oc=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yn()?Ns().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await k_(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let o=await this.read();return Ah(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let o=await this.read();return Ah(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}};function Sh(r){return ja(JSON.stringify({version:2,heartbeats:r})).length}function V_(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function x_(r){Ie(new ae("platform-logger",e=>new ec(e),"PRIVATE")),Ie(new ae("heartbeat",e=>new sc(e),"PRIVATE")),te(tc,vh,r),te(tc,vh,"esm2017"),te("fire-js","")}x_("");var L_="firebase",M_="11.10.0";te(L_,M_,"app");var Tt=new Yl("ANGULARFIRE2_VERSION");function nr(r,e,t){if(e){if(e.length===1)return e[0];let c=e.filter(l=>l.app===t);if(c.length===1)return c[0]}return t.container.getProvider(r).getImmediate({optional:!0})}var pn=(r,e)=>{let t=e?[e]:xs(),i=[];return t.forEach(o=>{o.container.getProvider(r).instances.forEach(l=>{i.includes(l)||i.push(l)})}),i},ac=(function(r){return r[r.SILENT=0]="SILENT",r[r.WARN=1]="WARN",r[r.VERBOSE=2]="VERBOSE",r})(ac||{}),I0=Zl()&&typeof Zone<"u"?ac.WARN:ac.SILENT;var Ls=class{zone;delegate;constructor(e,t=jl){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let o=this.zone,c=function(l){o?o.runGuarded(()=>{e.apply(this,[l])}):e.apply(this,[l])};return this.delegate.schedule(c,t,i)}},Jt=(()=>{class r{outsideAngular;insideAngular;constructor(){let t=Gl(Et);this.outsideAngular=t.runOutsideAngular(()=>new Ls(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Ls(typeof Zone>"u"?void 0:Zone.current,$l))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=zl({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var mt=class{constructor(e){return e}},Yt=class{constructor(){return xs()}};function U_(r){return r&&r.length===1?r[0]:new mt(tr())}var cc=new un("angularfire2._apps"),B_={provide:mt,useFactory:U_,deps:[[new Ce,cc]]},q_={provide:Yt,deps:[[new Ce,cc]]};function $_(r){return(e,t)=>{let i=t.get(Bi);te("angularfire",Tt.full,"core"),te("angularfire",Tt.full,"app"),te("angular",Xl.full,i.toString());let o=e.runOutsideAngular(()=>r(t));return new mt(o)}}function kh(r,...e){return ln([B_,q_,{provide:cc,useFactory:$_(r),multi:!0,deps:[Et,hn,Jt,...e]}])}var j_=new Map,z_={activated:!1,tokenObservers:[]},G_={initialized:!1,enabled:!1};function gt(r){return j_.get(r)||Object.assign({},z_)}function Vh(){return G_}var W_="https://content-firebaseappcheck.googleapis.com/v1";var K_="exchangeDebugToken",Nh={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},M0=1440*60*1e3;var hc=class{constructor(e,t,i,o,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=o,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=o,o>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new Jn,this.pending.promise.catch(t=>{}),await H_(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new Jn,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function H_(r){return new Promise(e=>{setTimeout(e,r)})}var Q_={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},mn=new ke("appCheck","AppCheck",Q_);function xh(r){if(!gt(r).activated)throw mn.create("use-before-activation",{appName:r.name})}async function Lh({url:r,body:e},t){let i={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let S=await o.getHeartbeatsHeader();S&&(i["X-Firebase-Client"]=S)}let c={method:"POST",body:JSON.stringify(e),headers:i},l;try{l=await fetch(r,c)}catch(S){throw mn.create("fetch-network-error",{originalErrorMessage:S?.message})}if(l.status!==200)throw mn.create("fetch-status-error",{httpStatus:l.status});let d;try{d=await l.json()}catch(S){throw mn.create("fetch-parse-error",{originalErrorMessage:S?.message})}let I=d.ttl.match(/^([\d.]+)(s)$/);if(!I||!I[2]||isNaN(Number(I[1])))throw mn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});let v=Number(I[1])*1e3,b=Date.now();return{token:d.token,expireTimeMillis:b+v,issuedAtTimeMillis:b}}function Mh(r,e){let{projectId:t,appId:i,apiKey:o}=r.options;return{url:`${W_}/projects/${t}/apps/${i}:${K_}?key=${o}`,body:{debug_token:e}}}var J_="firebase-app-check-database",Y_=1,dc="firebase-app-check-store";var Fs=null;function X_(){return Fs||(Fs=new Promise((r,e)=>{try{let t=indexedDB.open(J_,Y_);t.onsuccess=i=>{r(i.target.result)},t.onerror=i=>{var o;e(mn.create("storage-open",{originalErrorMessage:(o=i.target.error)===null||o===void 0?void 0:o.message}))},t.onupgradeneeded=i=>{let o=i.target.result;switch(i.oldVersion){case 0:o.createObjectStore(dc,{keyPath:"compositeKey"})}}}catch(t){e(mn.create("storage-open",{originalErrorMessage:t?.message}))}}),Fs)}function Z_(r,e){return ey(ty(r),e)}async function ey(r,e){let i=(await X_()).transaction(dc,"readwrite"),c=i.objectStore(dc).put({compositeKey:r,value:e});return new Promise((l,d)=>{c.onsuccess=I=>{l()},i.onerror=I=>{var v;d(mn.create("storage-set",{originalErrorMessage:(v=I.target.error)===null||v===void 0?void 0:v.message}))}})}function ty(r){return`${r.options.appId}-${r.name}`}var ji=new Ge("@firebase/app-check");function uc(r,e){return Yn()?Z_(r,e).catch(t=>{ji.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Fh(){return Vh().enabled}async function Uh(){let r=Vh();if(r.enabled&&r.token)return r.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var ny={error:"UNKNOWN_ERROR"};function ry(r){return Rs.encodeString(JSON.stringify(r),!1)}async function fc(r,e=!1,t=!1){let i=r.app;xh(i);let o=gt(i),c=o.token,l;if(c&&!zi(c)&&(o.token=void 0,c=void 0),!c){let v=await o.cachedTokenPromise;v&&(zi(v)?c=v:await uc(i,void 0))}if(!e&&c&&zi(c))return{token:c.token};let d=!1;if(Fh())try{o.exchangeTokenPromise||(o.exchangeTokenPromise=Lh(Mh(i,await Uh()),r.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),d=!0);let v=await o.exchangeTokenPromise;return await uc(i,v),o.token=v,{token:v.token}}catch(v){return v.code==="appCheck/throttled"||v.code==="appCheck/initial-throttle"?ji.warn(v.message):t&&ji.error(v),lc(v)}try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),d=!0),c=await gt(i).exchangeTokenPromise}catch(v){v.code==="appCheck/throttled"||v.code==="appCheck/initial-throttle"?ji.warn(v.message):t&&ji.error(v),l=v}let I;return c?l?zi(c)?I={token:c.token,internalError:l}:I=lc(l):(I={token:c.token},o.token=c,await uc(i,c)):I=lc(l),d&&ay(i,I),I}async function iy(r){let e=r.app;xh(e);let{provider:t}=gt(e);if(Fh()){let i=await Uh(),{token:o}=await Lh(Mh(e,i),r.heartbeatServiceProvider);return{token:o}}else{let{token:i}=await t.getToken();return{token:i}}}function sy(r,e,t,i){let{app:o}=r,c=gt(o),l={next:t,error:i,type:e};if(c.tokenObservers=[...c.tokenObservers,l],c.token&&zi(c.token)){let d=c.token;Promise.resolve().then(()=>{t({token:d.token}),Dh(r)}).catch(()=>{})}c.cachedTokenPromise.then(()=>Dh(r))}function Bh(r,e){let t=gt(r),i=t.tokenObservers.filter(o=>o.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function Dh(r){let{app:e}=r,t=gt(e),i=t.tokenRefresher;i||(i=oy(r),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function oy(r){let{app:e}=r;return new hc(async()=>{let t=gt(e),i;if(t.token?i=await fc(r,!0):i=await fc(r),i.error)throw i.error;if(i.internalError)throw i.internalError},()=>!0,()=>{let t=gt(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,o=t.token.expireTimeMillis-300*1e3;return i=Math.min(i,o),Math.max(0,i-Date.now())}else return 0},Nh.RETRIAL_MIN_WAIT,Nh.RETRIAL_MAX_WAIT)}function ay(r,e){let t=gt(r).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function zi(r){return r.expireTimeMillis-Date.now()>0}function lc(r){return{token:ry(ny),error:r}}var pc=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gt(this.app);for(let t of e)Bh(this.app,t.next);return Promise.resolve()}};function cy(r,e){return new pc(r,e)}function uy(r){return{getToken:e=>fc(r,e),getLimitedUseToken:()=>iy(r),addTokenListener:e=>sy(r,"INTERNAL",e),removeTokenListener:e=>Bh(r.app,e)}}var ly="@firebase/app-check",hy="0.10.1";var dy="app-check",Oh="app-check-internal";function fy(){Ie(new ae(dy,r=>{let e=r.getProvider("app").getImmediate(),t=r.getProvider("heartbeat");return cy(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,e,t)=>{r.getProvider(Oh).initialize()})),Ie(new ae(Oh,r=>{let e=r.getProvider("app-check").getImmediate();return uy(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),te(ly,hy)}fy();var py="app-check";var Sr=class{constructor(){return pn(py)}};var my=["localhost","0.0.0.0","127.0.0.1"],Q0=typeof window<"u"&&my.includes(window.location.hostname);function Hh(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Qh=Hh,Jh=new ke("auth","Firebase",Hh());var $s=new Ge("@firebase/auth");function yy(r,...e){$s.logLevel<=ee.WARN&&$s.warn(`Auth (${br}): ${r}`,...e)}function Bs(r,...e){$s.logLevel<=ee.ERROR&&$s.error(`Auth (${br}): ${r}`,...e)}function qh(r,...e){throw Sc(r,...e)}function bc(r,...e){return Sc(r,...e)}function Yh(r,e,t){let i=Object.assign(Object.assign({},Qh()),{[e]:t});return new ke("auth","Firebase",i).create(e,{appName:r.name})}function qs(r){return Yh(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sc(r,...e){if(typeof r!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return Jh.create(r,...e)}function Y(r,e,...t){if(!r)throw Sc(e,...t)}function Gi(r){let e="INTERNAL ASSERTION FAILED: "+r;throw Bs(e),new Error(e)}function js(r,e){r||Gi(e)}function Iy(){return $h()==="http:"||$h()==="https:"}function $h(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}function wy(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Iy()||ks()||"connection"in navigator)?navigator.onLine:!0}function Ey(){if(typeof navigator>"u")return null;let r=navigator;return r.languages&&r.languages[0]||r.language||null}var sr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,js(t>e,"Short delay should be less than long delay!"),this.isMobile=hh()||fh()}get(){return wy()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function vy(r,e){js(r.emulator,"Emulator should always be set here");let{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var zs=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ty={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Ay=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],by=new sr(3e4,6e4);function Xh(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Qs(r,e,t,i,o={}){return Zh(r,o,async()=>{let c={},l={};i&&(e==="GET"?l=i:c={body:JSON.stringify(i)});let d=Wa(Object.assign({key:r.config.apiKey},l)).slice(1),I=await r._getAdditionalHeaders();I["Content-Type"]="application/json",r.languageCode&&(I["X-Firebase-Locale"]=r.languageCode);let v=Object.assign({method:e,headers:I},c);return dh()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&Cs(r.emulatorConfig.host)&&(v.credentials="include"),zs.fetch()(await ed(r,r.config.apiHost,t,d),v)})}async function Zh(r,e,t){r._canInitEmulator=!1;let i=Object.assign(Object.assign({},Ty),e);try{let o=new _c(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();let l=await c.json();if("needConfirmation"in l)throw Us(r,"account-exists-with-different-credential",l);if(c.ok&&!("errorMessage"in l))return l;{let d=c.ok?l.errorMessage:l.error.message,[I,v]=d.split(" : ");if(I==="FEDERATED_USER_ID_ALREADY_LINKED")throw Us(r,"credential-already-in-use",l);if(I==="EMAIL_EXISTS")throw Us(r,"email-already-in-use",l);if(I==="USER_DISABLED")throw Us(r,"user-disabled",l);let b=i[I]||I.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Yh(r,b,v);qh(r,b)}}catch(o){if(o instanceof Ae)throw o;qh(r,"network-request-failed",{message:String(o)})}}async function ed(r,e,t,i){let o=`${e}${t}?${i}`,c=r,l=c.config.emulator?vy(r.config,o):`${r.config.apiScheme}://${o}`;return Ay.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(l).toString():l}var _c=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(bc(this.auth,"network-request-failed")),by.get())})}};function Us(r,e,t){let i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let o=bc(r,e,i);return o.customData._tokenResponse=t,o}async function Sy(r,e){return Qs(r,"POST","/v1/accounts:delete",e)}async function Gs(r,e){return Qs(r,"POST","/v1/accounts:lookup",e)}function Wi(r){if(r)try{let e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Rc(r,e=!1){let t=Kt(r),i=await t.getIdToken(e),o=td(i);Y(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");let c=typeof o.firebase=="object"?o.firebase:void 0,l=c?.sign_in_provider;return{claims:o,token:i,authTime:Wi(mc(o.auth_time)),issuedAtTime:Wi(mc(o.iat)),expirationTime:Wi(mc(o.exp)),signInProvider:l||null,signInSecondFactor:c?.sign_in_second_factor||null}}function mc(r){return Number(r)*1e3}function td(r){let[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Bs("JWT malformed, contained fewer than 3 sections"),null;try{let o=Ps(t);return o?JSON.parse(o):(Bs("Failed to decode base64 JWT payload"),null)}catch(o){return Bs("Caught error parsing JWT payload as JSON",o?.toString()),null}}function jh(r){let e=td(r);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function yc(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ae&&Ry(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function Ry({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}var Ic=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Hi=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wi(this.lastLoginAt),this.creationTime=Wi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Ws(r){var e;let t=r.auth,i=await r.getIdToken(),o=await yc(r,Gs(t,{idToken:i}));Y(o?.users.length,t,"internal-error");let c=o.users[0];r._notifyReloadListener(c);let l=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?nd(c.providerUserInfo):[],d=Py(r.providerData,l),I=r.isAnonymous,v=!(r.email&&c.passwordHash)&&!d?.length,b=I?v:!1,S={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:d,metadata:new Hi(c.createdAt,c.lastLoginAt),isAnonymous:b};Object.assign(r,S)}async function Pc(r){let e=Kt(r);await Ws(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Py(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function nd(r){return r.map(e=>{var{providerId:t}=e,i=Fa(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function Cy(r,e){let t=await Zh(r,{},async()=>{let i=Wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,l=await ed(r,o,"/v1/token",`key=${c}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";let I={method:"POST",headers:d,body:i};return r.emulatorConfig&&Cs(r.emulatorConfig.host)&&(I.credentials="include"),zs.fetch()(l,I)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ky(r,e){return Qs(r,"POST","/v2/accounts:revokeToken",Xh(r,e))}var Ki=class r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=jh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:o,expiresIn:c}=await Cy(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:o,expirationTime:c}=t,l=new r;return i&&(Y(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),o&&(Y(typeof o=="string","internal-error",{appName:e}),l.accessToken=o),c&&(Y(typeof c=="number","internal-error",{appName:e}),l.expirationTime=c),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new r,this.toJSON())}_performRefresh(){return Gi("not implemented")}};function gn(r,e){Y(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}var rr=class r{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,c=Fa(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ic(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Hi(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){let t=await yc(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Rc(this,e)}reload(){return Pc(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new r(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Ws(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qt(this.auth.app))return Promise.reject(qs(this.auth));let e=await this.getIdToken();return await yc(this,Sy(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,c,l,d,I,v,b;let S=(i=t.displayName)!==null&&i!==void 0?i:void 0,A=(o=t.email)!==null&&o!==void 0?o:void 0,D=(c=t.phoneNumber)!==null&&c!==void 0?c:void 0,R=(l=t.photoURL)!==null&&l!==void 0?l:void 0,x=(d=t.tenantId)!==null&&d!==void 0?d:void 0,N=(I=t._redirectEventId)!==null&&I!==void 0?I:void 0,ie=(v=t.createdAt)!==null&&v!==void 0?v:void 0,H=(b=t.lastLoginAt)!==null&&b!==void 0?b:void 0,{uid:q,emailVerified:oe,isAnonymous:je,providerData:re,stsTokenManager:y}=t;Y(q&&y,e,"internal-error");let h=Ki.fromJSON(this.name,y);Y(typeof q=="string",e,"internal-error"),gn(S,e.name),gn(A,e.name),Y(typeof oe=="boolean",e,"internal-error"),Y(typeof je=="boolean",e,"internal-error"),gn(D,e.name),gn(R,e.name),gn(x,e.name),gn(N,e.name),gn(ie,e.name),gn(H,e.name);let p=new r({uid:q,auth:e,email:A,emailVerified:oe,displayName:S,isAnonymous:je,photoURL:R,phoneNumber:D,tenantId:x,stsTokenManager:h,createdAt:ie,lastLoginAt:H});return re&&Array.isArray(re)&&(p.providerData=re.map(m=>Object.assign({},m))),N&&(p._redirectEventId=N),p}static async _fromIdTokenResponse(e,t,i=!1){let o=new Ki;o.updateFromServerResponse(t);let c=new r({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Ws(c),c}static async _fromGetAccountInfoResponse(e,t,i){let o=t.users[0];Y(o.localId!==void 0,"internal-error");let c=o.providerUserInfo!==void 0?nd(o.providerUserInfo):[],l=!(o.email&&o.passwordHash)&&!c?.length,d=new Ki;d.updateFromIdToken(i);let I=new r({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:l}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Hi(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(I,v),I}};var zh=new Map;function ir(r){js(r instanceof Function,"Expected a class definition");let e=zh.get(r);return e?(js(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,zh.set(r,e),e)}var Ny=(()=>{class r{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return r.type="NONE",r})(),wc=Ny;function gc(r,e,t){return`firebase:${r}:${e}:${t}`}var Ks=class r{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:o,name:c}=this.auth;this.fullUserKey=gc(this.userKey,o.apiKey,c),this.fullPersistenceKey=gc("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Gs(this.auth,{idToken:e}).catch(()=>{});return t?rr._fromGetAccountInfoResponse(this.auth,t,e):null}return rr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new r(ir(wc),e,i);let o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v),c=o[0]||ir(wc),l=gc(i,e.config.apiKey,e.name),d=null;for(let v of t)try{let b=await v._get(l);if(b){let S;if(typeof b=="string"){let A=await Gs(e,{idToken:b}).catch(()=>{});if(!A)break;S=await rr._fromGetAccountInfoResponse(e,A,b)}else S=rr._fromJSON(e,b);v!==c&&(d=S),c=v;break}}catch{}let I=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!I.length?new r(c,e,i):(c=I[0],d&&await c._set(l,d.toJSON()),await Promise.all(t.map(async v=>{if(v!==c)try{await v._remove(l)}catch{}})),new r(c,e,i))}};function Gh(r){let e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(xy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(My(e))return"Blackberry";if(Fy(e))return"Webos";if(Oy(e))return"Safari";if((e.includes("chrome/")||Vy(e))&&!e.includes("edge/"))return"Chrome";if(Ly(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function Dy(r=ze()){return/firefox\//i.test(r)}function Oy(r=ze()){let e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vy(r=ze()){return/crios\//i.test(r)}function xy(r=ze()){return/iemobile/i.test(r)}function Ly(r=ze()){return/android/i.test(r)}function My(r=ze()){return/blackberry/i.test(r)}function Fy(r=ze()){return/webos/i.test(r)}function rd(r,e=[]){let t;switch(r){case"Browser":t=Gh(ze());break;case"Worker":t=`${Gh(ze())}-${r}`;break;default:t=r}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${br}/${i}`}var Ec=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=c=>new Promise((l,d)=>{try{let I=e(c);l(I)}catch(I){d(I)}});i.onAbort=t,this.queue.push(i);let o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function Uy(r,e={}){return Qs(r,"GET","/v2/passwordPolicy",Xh(r,e))}var By=6,vc=class{constructor(e){var t,i,o,c;let l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=l.minPasswordLength)!==null&&t!==void 0?t:By,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,c,l,d;let I={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,I),this.validatePasswordCharacterOptions(e,I),I.isValid&&(I.isValid=(t=I.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),I.isValid&&(I.isValid=(i=I.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),I.isValid&&(I.isValid=(o=I.containsLowercaseLetter)!==null&&o!==void 0?o:!0),I.isValid&&(I.isValid=(c=I.containsUppercaseLetter)!==null&&c!==void 0?c:!0),I.isValid&&(I.isValid=(l=I.containsNumericCharacter)!==null&&l!==void 0?l:!0),I.isValid&&(I.isValid=(d=I.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),I}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}};var Tc=class{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hs(this),this.idTokenSubscription=new Hs(this),this.beforeStateQueue=new Ec(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ir(t)),this._initializationPromise=this.queue(async()=>{var i,o,c;if(!this._deleted&&(this.persistenceManager=await Ks.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Gs(this,{idToken:e}),i=await rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Qt(this.app)){let l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}let i=await this.assertedPersistence.getCurrentUser(),o=i,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let l=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o?._redirectEventId,I=await this.tryRedirectSignIn(e);(!l||l===d)&&I?.user&&(o=I.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(l){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ws(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ey()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qt(this.app))return Promise.reject(qs(this));let t=e?Kt(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qt(this.app)?Promise.reject(qs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qt(this.app)?Promise.reject(qs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Uy(this),t=new vc(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ke("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await ky(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ir(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=await Ks.create(this,[ir(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};let c=typeof t=="function"?t:t.next.bind(t),l=!1,d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(d,this,"internal-error"),d.then(()=>{l||c(this.currentUser)}),typeof t=="function"){let I=e.addObserver(t,i,o);return()=>{l=!0,I()}}else{let I=e.addObserver(t);return()=>{l=!0,I()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);let o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Qt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&yy(`Error while retrieving App Check token: ${t.error}`),t?.token}};function qy(r){return Kt(r)}var Hs=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=mh(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $y={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jy(r){$y=r}function zy(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function Gy(r,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ir);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}var cR=zy("rcb"),uR=new sr(3e4,6e4);var lR=new sr(2e3,1e4);var hR=600*1e3;var dR=new sr(3e4,6e4);var fR=new sr(5e3,15e3);var pR=encodeURIComponent("fac");var Wh="@firebase/auth",Kh="1.10.8";var Ac=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Wy(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ky(r){Ie(new ae("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=i.options;Y(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});let I={apiKey:l,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rd(r)},v=new Tc(i,o,c,I);return Gy(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ie(new ae("auth-internal",e=>{let t=qy(e.getProvider("auth").getImmediate());return(i=>new Ac(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),te(Wh,Kh,Wy(r)),te(Wh,Kh,"esm2017")}var Hy=300,mR=lh("authIdTokenMaxAge")||Hy;function Qy(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}jy({loadJS(r){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{let c=bc("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",Qy().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ky("Browser");var id="auth",Qi=class{constructor(e){return e}},Ji=class{constructor(){return pn(id)}};var Cc=new un("angularfire2.auth-instances");function KI(r,e){let t=nr(id,r,e);return t&&new Qi(t)}function HI(r){return(e,t)=>{let i=e.runOutsideAngular(()=>r(t));return new Qi(i)}}var QI={provide:Ji,deps:[[new Ce,Cc]]},JI={provide:Qi,useFactory:KI,deps:[[new Ce,Cc],mt]};function sd(r,...e){return te("angularfire",Tt.full,"auth"),ln([JI,QI,{provide:Cc,useFactory:HI(r),multi:!0,deps:[Et,hn,Jt,Yt,[new Ce,Sr],...e]}])}var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ad={};var Js,cd;(function(){var r;function e(y,h){function p(){}p.prototype=h.prototype,y.D=h.prototype,y.prototype=new p,y.prototype.constructor=y,y.C=function(m,g,w){for(var f=Array(arguments.length-2),le=2;le<arguments.length;le++)f[le-2]=arguments[le];return h.prototype[g].apply(m,f)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(y,h,p){p||(p=0);var m=Array(16);if(typeof h=="string")for(var g=0;16>g;++g)m[g]=h.charCodeAt(p++)|h.charCodeAt(p++)<<8|h.charCodeAt(p++)<<16|h.charCodeAt(p++)<<24;else for(g=0;16>g;++g)m[g]=h[p++]|h[p++]<<8|h[p++]<<16|h[p++]<<24;h=y.g[0],p=y.g[1],g=y.g[2];var w=y.g[3],f=h+(w^p&(g^w))+m[0]+3614090360&4294967295;h=p+(f<<7&4294967295|f>>>25),f=w+(g^h&(p^g))+m[1]+3905402710&4294967295,w=h+(f<<12&4294967295|f>>>20),f=g+(p^w&(h^p))+m[2]+606105819&4294967295,g=w+(f<<17&4294967295|f>>>15),f=p+(h^g&(w^h))+m[3]+3250441966&4294967295,p=g+(f<<22&4294967295|f>>>10),f=h+(w^p&(g^w))+m[4]+4118548399&4294967295,h=p+(f<<7&4294967295|f>>>25),f=w+(g^h&(p^g))+m[5]+1200080426&4294967295,w=h+(f<<12&4294967295|f>>>20),f=g+(p^w&(h^p))+m[6]+2821735955&4294967295,g=w+(f<<17&4294967295|f>>>15),f=p+(h^g&(w^h))+m[7]+4249261313&4294967295,p=g+(f<<22&4294967295|f>>>10),f=h+(w^p&(g^w))+m[8]+1770035416&4294967295,h=p+(f<<7&4294967295|f>>>25),f=w+(g^h&(p^g))+m[9]+2336552879&4294967295,w=h+(f<<12&4294967295|f>>>20),f=g+(p^w&(h^p))+m[10]+4294925233&4294967295,g=w+(f<<17&4294967295|f>>>15),f=p+(h^g&(w^h))+m[11]+2304563134&4294967295,p=g+(f<<22&4294967295|f>>>10),f=h+(w^p&(g^w))+m[12]+1804603682&4294967295,h=p+(f<<7&4294967295|f>>>25),f=w+(g^h&(p^g))+m[13]+4254626195&4294967295,w=h+(f<<12&4294967295|f>>>20),f=g+(p^w&(h^p))+m[14]+2792965006&4294967295,g=w+(f<<17&4294967295|f>>>15),f=p+(h^g&(w^h))+m[15]+1236535329&4294967295,p=g+(f<<22&4294967295|f>>>10),f=h+(g^w&(p^g))+m[1]+4129170786&4294967295,h=p+(f<<5&4294967295|f>>>27),f=w+(p^g&(h^p))+m[6]+3225465664&4294967295,w=h+(f<<9&4294967295|f>>>23),f=g+(h^p&(w^h))+m[11]+643717713&4294967295,g=w+(f<<14&4294967295|f>>>18),f=p+(w^h&(g^w))+m[0]+3921069994&4294967295,p=g+(f<<20&4294967295|f>>>12),f=h+(g^w&(p^g))+m[5]+3593408605&4294967295,h=p+(f<<5&4294967295|f>>>27),f=w+(p^g&(h^p))+m[10]+38016083&4294967295,w=h+(f<<9&4294967295|f>>>23),f=g+(h^p&(w^h))+m[15]+3634488961&4294967295,g=w+(f<<14&4294967295|f>>>18),f=p+(w^h&(g^w))+m[4]+3889429448&4294967295,p=g+(f<<20&4294967295|f>>>12),f=h+(g^w&(p^g))+m[9]+568446438&4294967295,h=p+(f<<5&4294967295|f>>>27),f=w+(p^g&(h^p))+m[14]+3275163606&4294967295,w=h+(f<<9&4294967295|f>>>23),f=g+(h^p&(w^h))+m[3]+4107603335&4294967295,g=w+(f<<14&4294967295|f>>>18),f=p+(w^h&(g^w))+m[8]+1163531501&4294967295,p=g+(f<<20&4294967295|f>>>12),f=h+(g^w&(p^g))+m[13]+2850285829&4294967295,h=p+(f<<5&4294967295|f>>>27),f=w+(p^g&(h^p))+m[2]+4243563512&4294967295,w=h+(f<<9&4294967295|f>>>23),f=g+(h^p&(w^h))+m[7]+1735328473&4294967295,g=w+(f<<14&4294967295|f>>>18),f=p+(w^h&(g^w))+m[12]+2368359562&4294967295,p=g+(f<<20&4294967295|f>>>12),f=h+(p^g^w)+m[5]+4294588738&4294967295,h=p+(f<<4&4294967295|f>>>28),f=w+(h^p^g)+m[8]+2272392833&4294967295,w=h+(f<<11&4294967295|f>>>21),f=g+(w^h^p)+m[11]+1839030562&4294967295,g=w+(f<<16&4294967295|f>>>16),f=p+(g^w^h)+m[14]+4259657740&4294967295,p=g+(f<<23&4294967295|f>>>9),f=h+(p^g^w)+m[1]+2763975236&4294967295,h=p+(f<<4&4294967295|f>>>28),f=w+(h^p^g)+m[4]+1272893353&4294967295,w=h+(f<<11&4294967295|f>>>21),f=g+(w^h^p)+m[7]+4139469664&4294967295,g=w+(f<<16&4294967295|f>>>16),f=p+(g^w^h)+m[10]+3200236656&4294967295,p=g+(f<<23&4294967295|f>>>9),f=h+(p^g^w)+m[13]+681279174&4294967295,h=p+(f<<4&4294967295|f>>>28),f=w+(h^p^g)+m[0]+3936430074&4294967295,w=h+(f<<11&4294967295|f>>>21),f=g+(w^h^p)+m[3]+3572445317&4294967295,g=w+(f<<16&4294967295|f>>>16),f=p+(g^w^h)+m[6]+76029189&4294967295,p=g+(f<<23&4294967295|f>>>9),f=h+(p^g^w)+m[9]+3654602809&4294967295,h=p+(f<<4&4294967295|f>>>28),f=w+(h^p^g)+m[12]+3873151461&4294967295,w=h+(f<<11&4294967295|f>>>21),f=g+(w^h^p)+m[15]+530742520&4294967295,g=w+(f<<16&4294967295|f>>>16),f=p+(g^w^h)+m[2]+3299628645&4294967295,p=g+(f<<23&4294967295|f>>>9),f=h+(g^(p|~w))+m[0]+4096336452&4294967295,h=p+(f<<6&4294967295|f>>>26),f=w+(p^(h|~g))+m[7]+1126891415&4294967295,w=h+(f<<10&4294967295|f>>>22),f=g+(h^(w|~p))+m[14]+2878612391&4294967295,g=w+(f<<15&4294967295|f>>>17),f=p+(w^(g|~h))+m[5]+4237533241&4294967295,p=g+(f<<21&4294967295|f>>>11),f=h+(g^(p|~w))+m[12]+1700485571&4294967295,h=p+(f<<6&4294967295|f>>>26),f=w+(p^(h|~g))+m[3]+2399980690&4294967295,w=h+(f<<10&4294967295|f>>>22),f=g+(h^(w|~p))+m[10]+4293915773&4294967295,g=w+(f<<15&4294967295|f>>>17),f=p+(w^(g|~h))+m[1]+2240044497&4294967295,p=g+(f<<21&4294967295|f>>>11),f=h+(g^(p|~w))+m[8]+1873313359&4294967295,h=p+(f<<6&4294967295|f>>>26),f=w+(p^(h|~g))+m[15]+4264355552&4294967295,w=h+(f<<10&4294967295|f>>>22),f=g+(h^(w|~p))+m[6]+2734768916&4294967295,g=w+(f<<15&4294967295|f>>>17),f=p+(w^(g|~h))+m[13]+1309151649&4294967295,p=g+(f<<21&4294967295|f>>>11),f=h+(g^(p|~w))+m[4]+4149444226&4294967295,h=p+(f<<6&4294967295|f>>>26),f=w+(p^(h|~g))+m[11]+3174756917&4294967295,w=h+(f<<10&4294967295|f>>>22),f=g+(h^(w|~p))+m[2]+718787259&4294967295,g=w+(f<<15&4294967295|f>>>17),f=p+(w^(g|~h))+m[9]+3951481745&4294967295,y.g[0]=y.g[0]+h&4294967295,y.g[1]=y.g[1]+(g+(f<<21&4294967295|f>>>11))&4294967295,y.g[2]=y.g[2]+g&4294967295,y.g[3]=y.g[3]+w&4294967295}i.prototype.u=function(y,h){h===void 0&&(h=y.length);for(var p=h-this.blockSize,m=this.B,g=this.h,w=0;w<h;){if(g==0)for(;w<=p;)o(this,y,w),w+=this.blockSize;if(typeof y=="string"){for(;w<h;)if(m[g++]=y.charCodeAt(w++),g==this.blockSize){o(this,m),g=0;break}}else for(;w<h;)if(m[g++]=y[w++],g==this.blockSize){o(this,m),g=0;break}}this.h=g,this.o+=h},i.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var h=1;h<y.length-8;++h)y[h]=0;var p=8*this.o;for(h=y.length-8;h<y.length;++h)y[h]=p&255,p/=256;for(this.u(y),y=Array(16),h=p=0;4>h;++h)for(var m=0;32>m;m+=8)y[p++]=this.g[h]>>>m&255;return y};function c(y,h){var p=d;return Object.prototype.hasOwnProperty.call(p,y)?p[y]:p[y]=h(y)}function l(y,h){this.h=h;for(var p=[],m=!0,g=y.length-1;0<=g;g--){var w=y[g]|0;m&&w==h||(p[g]=w,m=!1)}this.g=p}var d={};function I(y){return-128<=y&&128>y?c(y,function(h){return new l([h|0],0>h?-1:0)}):new l([y|0],0>y?-1:0)}function v(y){if(isNaN(y)||!isFinite(y))return S;if(0>y)return N(v(-y));for(var h=[],p=1,m=0;y>=p;m++)h[m]=y/p|0,p*=4294967296;return new l(h,0)}function b(y,h){if(y.length==0)throw Error("number format error: empty string");if(h=h||10,2>h||36<h)throw Error("radix out of range: "+h);if(y.charAt(0)=="-")return N(b(y.substring(1),h));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var p=v(Math.pow(h,8)),m=S,g=0;g<y.length;g+=8){var w=Math.min(8,y.length-g),f=parseInt(y.substring(g,g+w),h);8>w?(w=v(Math.pow(h,w)),m=m.j(w).add(v(f))):(m=m.j(p),m=m.add(v(f)))}return m}var S=I(0),A=I(1),D=I(16777216);r=l.prototype,r.m=function(){if(x(this))return-N(this).m();for(var y=0,h=1,p=0;p<this.g.length;p++){var m=this.i(p);y+=(0<=m?m:4294967296+m)*h,h*=4294967296}return y},r.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(R(this))return"0";if(x(this))return"-"+N(this).toString(y);for(var h=v(Math.pow(y,6)),p=this,m="";;){var g=oe(p,h).g;p=ie(p,g.j(h));var w=((0<p.g.length?p.g[0]:p.h)>>>0).toString(y);if(p=g,R(p))return w+m;for(;6>w.length;)w="0"+w;m=w+m}},r.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function R(y){if(y.h!=0)return!1;for(var h=0;h<y.g.length;h++)if(y.g[h]!=0)return!1;return!0}function x(y){return y.h==-1}r.l=function(y){return y=ie(this,y),x(y)?-1:R(y)?0:1};function N(y){for(var h=y.g.length,p=[],m=0;m<h;m++)p[m]=~y.g[m];return new l(p,~y.h).add(A)}r.abs=function(){return x(this)?N(this):this},r.add=function(y){for(var h=Math.max(this.g.length,y.g.length),p=[],m=0,g=0;g<=h;g++){var w=m+(this.i(g)&65535)+(y.i(g)&65535),f=(w>>>16)+(this.i(g)>>>16)+(y.i(g)>>>16);m=f>>>16,w&=65535,f&=65535,p[g]=f<<16|w}return new l(p,p[p.length-1]&-2147483648?-1:0)};function ie(y,h){return y.add(N(h))}r.j=function(y){if(R(this)||R(y))return S;if(x(this))return x(y)?N(this).j(N(y)):N(N(this).j(y));if(x(y))return N(this.j(N(y)));if(0>this.l(D)&&0>y.l(D))return v(this.m()*y.m());for(var h=this.g.length+y.g.length,p=[],m=0;m<2*h;m++)p[m]=0;for(m=0;m<this.g.length;m++)for(var g=0;g<y.g.length;g++){var w=this.i(m)>>>16,f=this.i(m)&65535,le=y.i(g)>>>16,Je=y.i(g)&65535;p[2*m+2*g]+=f*Je,H(p,2*m+2*g),p[2*m+2*g+1]+=w*Je,H(p,2*m+2*g+1),p[2*m+2*g+1]+=f*le,H(p,2*m+2*g+1),p[2*m+2*g+2]+=w*le,H(p,2*m+2*g+2)}for(m=0;m<h;m++)p[m]=p[2*m+1]<<16|p[2*m];for(m=h;m<2*h;m++)p[m]=0;return new l(p,0)};function H(y,h){for(;(y[h]&65535)!=y[h];)y[h+1]+=y[h]>>>16,y[h]&=65535,h++}function q(y,h){this.g=y,this.h=h}function oe(y,h){if(R(h))throw Error("division by zero");if(R(y))return new q(S,S);if(x(y))return h=oe(N(y),h),new q(N(h.g),N(h.h));if(x(h))return h=oe(y,N(h)),new q(N(h.g),h.h);if(30<y.g.length){if(x(y)||x(h))throw Error("slowDivide_ only works with positive integers.");for(var p=A,m=h;0>=m.l(y);)p=je(p),m=je(m);var g=re(p,1),w=re(m,1);for(m=re(m,2),p=re(p,2);!R(m);){var f=w.add(m);0>=f.l(y)&&(g=g.add(p),w=f),m=re(m,1),p=re(p,1)}return h=ie(y,g.j(h)),new q(g,h)}for(g=S;0<=y.l(h);){for(p=Math.max(1,Math.floor(y.m()/h.m())),m=Math.ceil(Math.log(p)/Math.LN2),m=48>=m?1:Math.pow(2,m-48),w=v(p),f=w.j(h);x(f)||0<f.l(y);)p-=m,w=v(p),f=w.j(h);R(w)&&(w=A),g=g.add(w),y=ie(y,f)}return new q(g,y)}r.A=function(y){return oe(this,y).h},r.and=function(y){for(var h=Math.max(this.g.length,y.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)&y.i(m);return new l(p,this.h&y.h)},r.or=function(y){for(var h=Math.max(this.g.length,y.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)|y.i(m);return new l(p,this.h|y.h)},r.xor=function(y){for(var h=Math.max(this.g.length,y.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)^y.i(m);return new l(p,this.h^y.h)};function je(y){for(var h=y.g.length+1,p=[],m=0;m<h;m++)p[m]=y.i(m)<<1|y.i(m-1)>>>31;return new l(p,y.h)}function re(y,h){var p=h>>5;h%=32;for(var m=y.g.length-p,g=[],w=0;w<m;w++)g[w]=0<h?y.i(w+p)>>>h|y.i(w+p+1)<<32-h:y.i(w+p);return new l(g,y.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,cd=ad.Md5=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=v,l.fromString=b,Js=ad.Integer=l}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});var Ys=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xt={};var ud,YI,ld,hd,dd,fd,pd,md,gd;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(n,s,a){return n==Array.prototype||n==Object.prototype||(n[s]=a.value),n};function t(n){n=[typeof globalThis=="object"&&globalThis,n,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ys=="object"&&Ys];for(var s=0;s<n.length;++s){var a=n[s];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")}var i=t(this);function o(n,s){if(s)e:{var a=i;n=n.split(".");for(var u=0;u<n.length-1;u++){var _=n[u];if(!(_ in a))break e;a=a[_]}n=n[n.length-1],u=a[n],s=s(u),s!=u&&s!=null&&e(a,n,{configurable:!0,writable:!0,value:s})}}function c(n,s){n instanceof String&&(n+="");var a=0,u=!1,_={next:function(){if(!u&&a<n.length){var E=a++;return{value:s(E,n[E]),done:!1}}return u=!0,{done:!0,value:void 0}}};return _[Symbol.iterator]=function(){return _},_}o("Array.prototype.values",function(n){return n||function(){return c(this,function(s,a){return a})}});var l=l||{},d=this||self;function I(n){var s=typeof n;return s=s!="object"?s:n?Array.isArray(n)?"array":s:"null",s=="array"||s=="object"&&typeof n.length=="number"}function v(n){var s=typeof n;return s=="object"&&n!=null||s=="function"}function b(n,s,a){return n.call.apply(n.bind,arguments)}function S(n,s,a){if(!n)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var _=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_,u),n.apply(s,_)}}return function(){return n.apply(s,arguments)}}function A(n,s,a){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:S,A.apply(null,arguments)}function D(n,s){var a=Array.prototype.slice.call(arguments,1);return function(){var u=a.slice();return u.push.apply(u,arguments),n.apply(this,u)}}function R(n,s){function a(){}a.prototype=s.prototype,n.aa=s.prototype,n.prototype=new a,n.prototype.constructor=n,n.Qb=function(u,_,E){for(var T=Array(arguments.length-2),C=2;C<arguments.length;C++)T[C-2]=arguments[C];return s.prototype[_].apply(u,T)}}function x(n){let s=n.length;if(0<s){let a=Array(s);for(let u=0;u<s;u++)a[u]=n[u];return a}return[]}function N(n,s){for(let a=1;a<arguments.length;a++){let u=arguments[a];if(I(u)){let _=n.length||0,E=u.length||0;n.length=_+E;for(let T=0;T<E;T++)n[_+T]=u[T]}else n.push(u)}}class ie{constructor(s,a){this.i=s,this.j=a,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}function H(n){return/^[\s\xa0]*$/.test(n)}function q(){var n=d.navigator;return n&&(n=n.userAgent)?n:""}function oe(n){return oe[" "](n),n}oe[" "]=function(){};var je=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function re(n,s,a){for(let u in n)s.call(a,n[u],u,n)}function y(n,s){for(let a in n)s.call(void 0,n[a],a,n)}function h(n){let s={};for(let a in n)s[a]=n[a];return s}let p="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function m(n,s){let a,u;for(let _=1;_<arguments.length;_++){u=arguments[_];for(a in u)n[a]=u[a];for(let E=0;E<p.length;E++)a=p[E],Object.prototype.hasOwnProperty.call(u,a)&&(n[a]=u[a])}}function g(n){var s=1;n=n.split(":");let a=[];for(;0<s&&n.length;)a.push(n.shift()),s--;return n.length&&a.push(n.join(":")),a}function w(n){d.setTimeout(()=>{throw n},0)}function f(){var n=bn;let s=null;return n.g&&(s=n.g,n.g=n.g.next,n.g||(n.h=null),s.next=null),s}class le{constructor(){this.h=this.g=null}add(s,a){let u=Je.get();u.set(s,a),this.h?this.h.next=u:this.g=u,this.h=u}}var Je=new ie(()=>new ra,n=>n.reset());class ra{constructor(){this.next=this.g=this.h=null}set(s,a){this.h=s,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}let Ye,Xe=!1,bn=new le,Ur=()=>{let n=d.Promise.resolve(void 0);Ye=()=>{n.then(ia)}};var ia=()=>{for(var n;n=f();){try{n.h.call(n.g)}catch(a){w(a)}var s=Je;s.j(n),100>s.h&&(s.h++,n.next=s.g,s.g=n)}Xe=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(n,s){this.type=n,this.g=this.target=s,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var sa=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var n=!1,s=Object.defineProperty({},"passive",{get:function(){n=!0}});try{let a=()=>{};d.addEventListener("test",a,s),d.removeEventListener("test",a,s)}catch{}return n})();function Ze(n,s){if($.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var a=this.type=n.type,u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=s,s=n.relatedTarget){if(je){e:{try{oe(s.nodeName);var _=!0;break e}catch{}_=!1}_||(s=null)}}else a=="mouseover"?s=n.fromElement:a=="mouseout"&&(s=n.toElement);this.relatedTarget=s,u?(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:oa[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ze.aa.h.call(this)}}R(Ze,$);var oa={2:"touch",3:"pen",4:"mouse"};Ze.prototype.h=function(){Ze.aa.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),aa=0;function ca(n,s,a,u,_){this.listener=n,this.proxy=null,this.src=s,this.type=a,this.capture=!!u,this.ha=_,this.key=++aa,this.da=this.fa=!1}function kt(n){n.da=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Nt(n){this.src=n,this.g={},this.h=0}Nt.prototype.add=function(n,s,a,u,_){var E=n.toString();n=this.g[E],n||(n=this.g[E]=[],this.h++);var T=Rn(n,s,u,_);return-1<T?(s=n[T],a||(s.fa=!1)):(s=new ca(s,this.src,E,!!u,_),s.fa=a,n.push(s)),s};function Sn(n,s){var a=s.type;if(a in n.g){var u=n.g[a],_=Array.prototype.indexOf.call(u,s,void 0),E;(E=0<=_)&&Array.prototype.splice.call(u,_,1),E&&(kt(s),n.g[a].length==0&&(delete n.g[a],n.h--))}}function Rn(n,s,a,u){for(var _=0;_<n.length;++_){var E=n[_];if(!E.da&&E.listener==s&&E.capture==!!a&&E.ha==u)return _}return-1}var Pn="closure_lm_"+(1e6*Math.random()|0),Cn={};function Br(n,s,a,u,_){if(u&&u.once)return $r(n,s,a,u,_);if(Array.isArray(s)){for(var E=0;E<s.length;E++)Br(n,s[E],a,u,_);return null}return a=On(a),n&&n[et]?n.K(s,a,v(u)?!!u.capture:!!u,_):qr(n,s,a,!1,u,_)}function qr(n,s,a,u,_,E){if(!s)throw Error("Invalid event type");var T=v(_)?!!_.capture:!!_,C=Nn(n);if(C||(n[Pn]=C=new Nt(n)),a=C.add(s,a,u,T,E),a.proxy)return a;if(u=ua(),a.proxy=u,u.src=n,u.listener=a,n.addEventListener)sa||(_=T),_===void 0&&(_=!1),n.addEventListener(s.toString(),u,_);else if(n.attachEvent)n.attachEvent(zr(s.toString()),u);else if(n.addListener&&n.removeListener)n.addListener(u);else throw Error("addEventListener and attachEvent are unavailable.");return a}function ua(){function n(a){return s.call(n.src,n.listener,a)}let s=la;return n}function $r(n,s,a,u,_){if(Array.isArray(s)){for(var E=0;E<s.length;E++)$r(n,s[E],a,u,_);return null}return a=On(a),n&&n[et]?n.L(s,a,v(u)?!!u.capture:!!u,_):qr(n,s,a,!0,u,_)}function jr(n,s,a,u,_){if(Array.isArray(s))for(var E=0;E<s.length;E++)jr(n,s[E],a,u,_);else u=v(u)?!!u.capture:!!u,a=On(a),n&&n[et]?(n=n.i,s=String(s).toString(),s in n.g&&(E=n.g[s],a=Rn(E,a,u,_),-1<a&&(kt(E[a]),Array.prototype.splice.call(E,a,1),E.length==0&&(delete n.g[s],n.h--)))):n&&(n=Nn(n))&&(s=n.g[s.toString()],n=-1,s&&(n=Rn(s,a,u,_)),(a=-1<n?s[n]:null)&&kn(a))}function kn(n){if(typeof n!="number"&&n&&!n.da){var s=n.src;if(s&&s[et])Sn(s.i,n);else{var a=n.type,u=n.proxy;s.removeEventListener?s.removeEventListener(a,u,n.capture):s.detachEvent?s.detachEvent(zr(a),u):s.addListener&&s.removeListener&&s.removeListener(u),(a=Nn(s))?(Sn(a,n),a.h==0&&(a.src=null,s[Pn]=null)):kt(n)}}}function zr(n){return n in Cn?Cn[n]:Cn[n]="on"+n}function la(n,s){if(n.da)n=!0;else{s=new Ze(s,this);var a=n.listener,u=n.ha||n.src;n.fa&&kn(n),n=a.call(u,s)}return n}function Nn(n){return n=n[Pn],n instanceof Nt?n:null}var Dn="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(n){return typeof n=="function"?n:(n[Dn]||(n[Dn]=function(s){return n.handleEvent(s)}),n[Dn])}function j(){me.call(this),this.i=new Nt(this),this.M=this,this.F=null}R(j,me),j.prototype[et]=!0,j.prototype.removeEventListener=function(n,s,a,u){jr(this,n,s,a,u)};function Q(n,s){var a,u=n.F;if(u)for(a=[];u;u=u.F)a.push(u);if(n=n.M,u=s.type||s,typeof s=="string")s=new $(s,n);else if(s instanceof $)s.target=s.target||n;else{var _=s;s=new $(u,n),m(s,_)}if(_=!0,a)for(var E=a.length-1;0<=E;E--){var T=s.g=a[E];_=Dt(T,u,!0,s)&&_}if(T=s.g=n,_=Dt(T,u,!0,s)&&_,_=Dt(T,u,!1,s)&&_,a)for(E=0;E<a.length;E++)T=s.g=a[E],_=Dt(T,u,!1,s)&&_}j.prototype.N=function(){if(j.aa.N.call(this),this.i){var n=this.i,s;for(s in n.g){for(var a=n.g[s],u=0;u<a.length;u++)kt(a[u]);delete n.g[s],n.h--}}this.F=null},j.prototype.K=function(n,s,a,u){return this.i.add(String(n),s,!1,a,u)},j.prototype.L=function(n,s,a,u){return this.i.add(String(n),s,!0,a,u)};function Dt(n,s,a,u){if(s=n.i.g[String(s)],!s)return!0;s=s.concat();for(var _=!0,E=0;E<s.length;++E){var T=s[E];if(T&&!T.da&&T.capture==a){var C=T.listener,M=T.ha||T.src;T.fa&&Sn(n.i,T),_=C.call(M,u)!==!1&&_}}return _&&!u.defaultPrevented}function Gr(n,s,a){if(typeof n=="function")a&&(n=A(n,a));else if(n&&typeof n.handleEvent=="function")n=A(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:d.setTimeout(n,s||0)}function Wr(n){n.g=Gr(()=>{n.g=null,n.i&&(n.i=!1,Wr(n))},n.l);let s=n.h;n.h=null,n.m.apply(null,s)}class ha extends me{constructor(s,a){super(),this.m=s,this.l=a,this.h=null,this.i=!1,this.g=null}j(s){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tt(n){me.call(this),this.h=n,this.g={}}R(tt,me);var Kr=[];function Hr(n){re(n.g,function(s,a){this.g.hasOwnProperty(a)&&kn(s)},n),n.g={}}tt.prototype.N=function(){tt.aa.N.call(this),Hr(this)},tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=d.JSON.stringify,da=d.JSON.parse,fa=class{stringify(n){return d.JSON.stringify(n,void 0)}parse(n){return d.JSON.parse(n,void 0)}};function xn(){}xn.prototype.h=null;function Qr(n){return n.h||(n.h=n.i())}function Jr(){}var nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){$.call(this,"d")}R(Ln,$);function Mn(){$.call(this,"c")}R(Mn,$);var be={},Yr=null;function Ot(){return Yr=Yr||new j}be.La="serverreachability";function Xr(n){$.call(this,be.La,n)}R(Xr,$);function rt(n){let s=Ot();Q(s,new Xr(s))}be.STAT_EVENT="statevent";function Zr(n,s){$.call(this,be.STAT_EVENT,n),this.stat=s}R(Zr,$);function J(n){let s=Ot();Q(s,new Zr(s,n))}be.Ma="timingevent";function ei(n,s){$.call(this,be.Ma,n),this.size=s}R(ei,$);function it(n,s){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){n()},s)}function st(){this.g=!0}st.prototype.xa=function(){this.g=!1};function pa(n,s,a,u,_,E){n.info(function(){if(n.g)if(E)for(var T="",C=E.split("&"),M=0;M<C.length;M++){var P=C[M].split("=");if(1<P.length){var z=P[0];P=P[1];var G=z.split("_");T=2<=G.length&&G[1]=="type"?T+(z+"="+P+"&"):T+(z+"=redacted&")}}else T=null;else T=E;return"XMLHTTP REQ ("+u+") [attempt "+_+"]: "+s+`
`+a+`
`+T})}function ma(n,s,a,u,_,E,T){n.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+_+"]: "+s+`
`+a+`
`+E+" "+T})}function Le(n,s,a,u){n.info(function(){return"XMLHTTP TEXT ("+s+"): "+_a(n,a)+(u?" "+u:"")})}function ga(n,s){n.info(function(){return"TIMEOUT: "+s})}st.prototype.info=function(){};function _a(n,s){if(!n.g)return s;if(!s)return null;try{var a=JSON.parse(s);if(a){for(n=0;n<a.length;n++)if(Array.isArray(a[n])){var u=a[n];if(!(2>u.length)){var _=u[1];if(Array.isArray(_)&&!(1>_.length)){var E=_[0];if(E!="noop"&&E!="stop"&&E!="close")for(var T=1;T<_.length;T++)_[T]=""}}}}return Vn(a)}catch{return s}}var Vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function xt(){}R(xt,xn),xt.prototype.g=function(){return new XMLHttpRequest},xt.prototype.i=function(){return{}},Fn=new xt;function ge(n,s,a,u){this.j=n,this.i=s,this.l=a,this.R=u||1,this.U=new tt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}var ri={},Un={};function Bn(n,s,a){n.L=1,n.v=Ut(he(s)),n.m=a,n.P=!0,ii(n,null)}function ii(n,s){n.F=Date.now(),Lt(n),n.A=he(n.v);var a=n.A,u=n.R;Array.isArray(u)||(u=[String(u)]),yi(a.i,"t",u),n.C=0,a=n.j.J,n.h=new ni,n.g=Li(n.j,a?s:null,!n.m),0<n.O&&(n.M=new ha(A(n.Y,n,n.g),n.O)),s=n.U,a=n.g,u=n.ca;var _="readystatechange";Array.isArray(_)||(_&&(Kr[0]=_.toString()),_=Kr);for(var E=0;E<_.length;E++){var T=Br(a,_[E],u||s.handleEvent,!1,s.h||s);if(!T)break;s.g[T.key]=T}s=n.H?h(n.H):{},n.m?(n.u||(n.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.m,s)):(n.u="GET",n.g.ea(n.A,n.u,null,s)),rt(),pa(n.i,n.u,n.A,n.l,n.R,n.m)}ge.prototype.ca=function(n){n=n.target;let s=this.M;s&&de(n)==3?s.j():this.Y(n)},ge.prototype.Y=function(n){try{if(n==this.g)e:{let G=de(this.g);var s=this.g.Ba();let Ue=this.g.Z();if(!(3>G)&&(G!=3||this.g&&(this.h.h||this.g.oa()||bi(this.g)))){this.J||G!=4||s==7||(s==8||0>=Ue?rt(3):rt(2)),qn(this);var a=this.g.Z();this.X=a;t:if(si(this)){var u=bi(this.g);n="";var _=u.length,E=de(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Se(this),ot(this);var T="";break t}this.h.i=new d.TextDecoder}for(s=0;s<_;s++)this.h.h=!0,n+=this.h.i.decode(u[s],{stream:!(E&&s==_-1)});u.length=0,this.h.g+=n,this.C=0,T=this.h.g}else T=this.g.oa();if(this.o=a==200,ma(this.i,this.u,this.A,this.l,this.R,G,a),this.o){if(this.T&&!this.K){t:{if(this.g){var C,M=this.g;if((C=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(C)){var P=C;break t}}P=null}if(a=P)Le(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$n(this,a);else{this.o=!1,this.s=3,J(12),Se(this),ot(this);break e}}if(this.P){a=!0;let se;for(;!this.J&&this.C<T.length;)if(se=ya(this,T),se==Un){G==4&&(this.s=4,J(14),a=!1),Le(this.i,this.l,null,"[Incomplete Response]");break}else if(se==ri){this.s=4,J(15),Le(this.i,this.l,T,"[Invalid Chunk]"),a=!1;break}else Le(this.i,this.l,se,null),$n(this,se);if(si(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),G!=4||T.length!=0||this.h.h||(this.s=1,J(16),a=!1),this.o=this.o&&a,!a)Le(this.i,this.l,T,"[Invalid Chunked Response]"),Se(this),ot(this);else if(0<T.length&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.ba&&!z.M&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Hn(z),z.M=!0,J(11))}}else Le(this.i,this.l,T,null),$n(this,T);G==4&&Se(this),this.o&&!this.J&&(G==4?Di(this.j,this):(this.o=!1,Lt(this)))}else xa(this.g),a==400&&0<T.indexOf("Unknown SID")?(this.s=3,J(12)):(this.s=0,J(13)),Se(this),ot(this)}}}catch{}finally{}};function si(n){return n.g?n.u=="GET"&&n.L!=2&&n.j.Ca:!1}function ya(n,s){var a=n.C,u=s.indexOf(`
`,a);return u==-1?Un:(a=Number(s.substring(a,u)),isNaN(a)?ri:(u+=1,u+a>s.length?Un:(s=s.slice(u,u+a),n.C=u+a,s)))}ge.prototype.cancel=function(){this.J=!0,Se(this)};function Lt(n){n.S=Date.now()+n.I,oi(n,n.I)}function oi(n,s){if(n.B!=null)throw Error("WatchDog timer not null");n.B=it(A(n.ba,n),s)}function qn(n){n.B&&(d.clearTimeout(n.B),n.B=null)}ge.prototype.ba=function(){this.B=null;let n=Date.now();0<=n-this.S?(ga(this.i,this.A),this.L!=2&&(rt(),J(17)),Se(this),this.s=2,ot(this)):oi(this,this.S-n)};function ot(n){n.j.G==0||n.J||Di(n.j,n)}function Se(n){qn(n);var s=n.M;s&&typeof s.ma=="function"&&s.ma(),n.M=null,Hr(n.U),n.g&&(s=n.g,n.g=null,s.abort(),s.ma())}function $n(n,s){try{var a=n.j;if(a.G!=0&&(a.g==n||jn(a.h,n))){if(!n.K&&jn(a.h,n)&&a.G==3){try{var u=a.Da.g.parse(s)}catch{u=null}if(Array.isArray(u)&&u.length==3){var _=u;if(_[0]==0){e:if(!a.u){if(a.g)if(a.g.F+3e3<n.F)zt(a),$t(a);else break e;Kn(a),J(18)}}else a.za=_[1],0<a.za-a.T&&37500>_[2]&&a.F&&a.v==0&&!a.C&&(a.C=it(A(a.Za,a),6e3));if(1>=ui(a.h)&&a.ca){try{a.ca()}catch{}a.ca=void 0}}else Pe(a,11)}else if((n.K||a.g==n)&&zt(a),!H(s))for(_=a.Da.g.parse(s),s=0;s<_.length;s++){let P=_[s];if(a.T=P[0],P=P[1],a.G==2)if(P[0]=="c"){a.K=P[1],a.ia=P[2];let z=P[3];z!=null&&(a.la=z,a.j.info("VER="+a.la));let G=P[4];G!=null&&(a.Aa=G,a.j.info("SVER="+a.Aa));let Ue=P[5];Ue!=null&&typeof Ue=="number"&&0<Ue&&(u=1.5*Ue,a.L=u,a.j.info("backChannelRequestTimeoutMs_="+u)),u=a;let se=n.g;if(se){let Wt=se.g?se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wt){var E=u.h;E.g||Wt.indexOf("spdy")==-1&&Wt.indexOf("quic")==-1&&Wt.indexOf("h2")==-1||(E.j=E.l,E.g=new Set,E.h&&(zn(E,E.h),E.h=null))}if(u.D){let Qn=se.g?se.g.getResponseHeader("X-HTTP-Session-Id"):null;Qn&&(u.ya=Qn,k(u.I,u.D,Qn))}}a.G=3,a.l&&a.l.ua(),a.ba&&(a.R=Date.now()-n.F,a.j.info("Handshake RTT: "+a.R+"ms")),u=a;var T=n;if(u.qa=xi(u,u.J?u.ia:null,u.W),T.K){li(u.h,T);var C=T,M=u.L;M&&(C.I=M),C.B&&(qn(C),Lt(C)),u.g=T}else ki(u);0<a.i.length&&jt(a)}else P[0]!="stop"&&P[0]!="close"||Pe(a,7);else a.G==3&&(P[0]=="stop"||P[0]=="close"?P[0]=="stop"?Pe(a,7):Wn(a):P[0]!="noop"&&a.l&&a.l.ta(P),a.v=0)}}rt(4)}catch{}}var Ia=class{constructor(n,s){this.g=n,this.map=s}};function ai(n){this.l=n||10,d.PerformanceNavigationTiming?(n=d.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ci(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function ui(n){return n.h?1:n.g?n.g.size:0}function jn(n,s){return n.h?n.h==s:n.g?n.g.has(s):!1}function zn(n,s){n.g?n.g.add(s):n.h=s}function li(n,s){n.h&&n.h==s?n.h=null:n.g&&n.g.has(s)&&n.g.delete(s)}ai.prototype.cancel=function(){if(this.i=hi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let n of this.g.values())n.cancel();this.g.clear()}};function hi(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let s=n.i;for(let a of n.g.values())s=s.concat(a.D);return s}return x(n.i)}function wa(n){if(n.V&&typeof n.V=="function")return n.V();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(I(n)){for(var s=[],a=n.length,u=0;u<a;u++)s.push(n[u]);return s}s=[],a=0;for(u in n)s[a++]=n[u];return s}function Ea(n){if(n.na&&typeof n.na=="function")return n.na();if(!n.V||typeof n.V!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(I(n)||typeof n=="string"){var s=[];n=n.length;for(var a=0;a<n;a++)s.push(a);return s}s=[],a=0;for(let u in n)s[a++]=u;return s}}}function di(n,s){if(n.forEach&&typeof n.forEach=="function")n.forEach(s,void 0);else if(I(n)||typeof n=="string")Array.prototype.forEach.call(n,s,void 0);else for(var a=Ea(n),u=wa(n),_=u.length,E=0;E<_;E++)s.call(void 0,u[E],a&&a[E],n)}var fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(n,s){if(n){n=n.split("&");for(var a=0;a<n.length;a++){var u=n[a].indexOf("="),_=null;if(0<=u){var E=n[a].substring(0,u);_=n[a].substring(u+1)}else E=n[a];s(E,_?decodeURIComponent(_.replace(/\+/g," ")):"")}}}function Re(n){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,n instanceof Re){this.h=n.h,Mt(this,n.j),this.o=n.o,this.g=n.g,Ft(this,n.s),this.l=n.l;var s=n.i,a=new ut;a.i=s.i,s.g&&(a.g=new Map(s.g),a.h=s.h),pi(this,a),this.m=n.m}else n&&(s=String(n).match(fi))?(this.h=!1,Mt(this,s[1]||"",!0),this.o=at(s[2]||""),this.g=at(s[3]||"",!0),Ft(this,s[4]),this.l=at(s[5]||"",!0),pi(this,s[6]||"",!0),this.m=at(s[7]||"")):(this.h=!1,this.i=new ut(null,this.h))}Re.prototype.toString=function(){var n=[],s=this.j;s&&n.push(ct(s,mi,!0),":");var a=this.g;return(a||s=="file")&&(n.push("//"),(s=this.o)&&n.push(ct(s,mi,!0),"@"),n.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.s,a!=null&&n.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&n.push("/"),n.push(ct(a,a.charAt(0)=="/"?ba:Aa,!0))),(a=this.i.toString())&&n.push("?",a),(a=this.m)&&n.push("#",ct(a,Ra)),n.join("")};function he(n){return new Re(n)}function Mt(n,s,a){n.j=a?at(s,!0):s,n.j&&(n.j=n.j.replace(/:$/,""))}function Ft(n,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);n.s=s}else n.s=null}function pi(n,s,a){s instanceof ut?(n.i=s,Pa(n.i,n.h)):(a||(s=ct(s,Sa)),n.i=new ut(s,n.h))}function k(n,s,a){n.i.set(s,a)}function Ut(n){return k(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function at(n,s){return n?s?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ct(n,s,a){return typeof n=="string"?(n=encodeURI(n).replace(s,Ta),a&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ta(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var mi=/[#\/\?@]/g,Aa=/[#\?:]/g,ba=/[#\?]/g,Sa=/[#\?@]/g,Ra=/#/g;function ut(n,s){this.h=this.g=null,this.i=n||null,this.j=!!s}function _e(n){n.g||(n.g=new Map,n.h=0,n.i&&va(n.i,function(s,a){n.add(decodeURIComponent(s.replace(/\+/g," ")),a)}))}r=ut.prototype,r.add=function(n,s){_e(this),this.i=null,n=Me(this,n);var a=this.g.get(n);return a||this.g.set(n,a=[]),a.push(s),this.h+=1,this};function gi(n,s){_e(n),s=Me(n,s),n.g.has(s)&&(n.i=null,n.h-=n.g.get(s).length,n.g.delete(s))}function _i(n,s){return _e(n),s=Me(n,s),n.g.has(s)}r.forEach=function(n,s){_e(this),this.g.forEach(function(a,u){a.forEach(function(_){n.call(s,_,u,this)},this)},this)},r.na=function(){_e(this);let n=Array.from(this.g.values()),s=Array.from(this.g.keys()),a=[];for(let u=0;u<s.length;u++){let _=n[u];for(let E=0;E<_.length;E++)a.push(s[u])}return a},r.V=function(n){_e(this);let s=[];if(typeof n=="string")_i(this,n)&&(s=s.concat(this.g.get(Me(this,n))));else{n=Array.from(this.g.values());for(let a=0;a<n.length;a++)s=s.concat(n[a])}return s},r.set=function(n,s){return _e(this),this.i=null,n=Me(this,n),_i(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[s]),this.h+=1,this},r.get=function(n,s){return n?(n=this.V(n),0<n.length?String(n[0]):s):s};function yi(n,s,a){gi(n,s),0<a.length&&(n.i=null,n.g.set(Me(n,s),x(a)),n.h+=a.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let n=[],s=Array.from(this.g.keys());for(var a=0;a<s.length;a++){var u=s[a];let E=encodeURIComponent(String(u)),T=this.V(u);for(u=0;u<T.length;u++){var _=E;T[u]!==""&&(_+="="+encodeURIComponent(String(T[u]))),n.push(_)}}return this.i=n.join("&")};function Me(n,s){return s=String(s),n.j&&(s=s.toLowerCase()),s}function Pa(n,s){s&&!n.j&&(_e(n),n.i=null,n.g.forEach(function(a,u){var _=u.toLowerCase();u!=_&&(gi(this,u),yi(this,_,a))},n)),n.j=s}function Ca(n,s){let a=new st;if(d.Image){let u=new Image;u.onload=D(ye,a,"TestLoadImage: loaded",!0,s,u),u.onerror=D(ye,a,"TestLoadImage: error",!1,s,u),u.onabort=D(ye,a,"TestLoadImage: abort",!1,s,u),u.ontimeout=D(ye,a,"TestLoadImage: timeout",!1,s,u),d.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=n}else s(!1)}function ka(n,s){let a=new st,u=new AbortController,_=setTimeout(()=>{u.abort(),ye(a,"TestPingServer: timeout",!1,s)},1e4);fetch(n,{signal:u.signal}).then(E=>{clearTimeout(_),E.ok?ye(a,"TestPingServer: ok",!0,s):ye(a,"TestPingServer: server error",!1,s)}).catch(()=>{clearTimeout(_),ye(a,"TestPingServer: error",!1,s)})}function ye(n,s,a,u,_){try{_&&(_.onload=null,_.onerror=null,_.onabort=null,_.ontimeout=null),u(a)}catch{}}function Na(){this.g=new fa}function Da(n,s,a){let u=a||"";try{di(n,function(_,E){let T=_;v(_)&&(T=Vn(_)),s.push(u+E+"="+encodeURIComponent(T))})}catch(_){throw s.push(u+"type="+encodeURIComponent("_badmap")),_}}function lt(n){this.l=n.Ub||null,this.j=n.eb||!1}R(lt,xn),lt.prototype.g=function(){return new Bt(this.l,this.j)},lt.prototype.i=(function(n){return function(){return n}})({});function Bt(n,s){j.call(this),this.D=n,this.o=s,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Bt,j),r=Bt.prototype,r.open=function(n,s){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=n,this.A=s,this.readyState=1,dt(this)},r.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let s={headers:this.u,method:this.B,credentials:this.m,cache:void 0};n&&(s.body=n),(this.D||d).fetch(new Request(this.A,s)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ht(this)),this.readyState=0},r.Sa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,dt(this)),this.g&&(this.readyState=3,dt(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ii(this)}else n.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ii(n){n.j.read().then(n.Pa.bind(n)).catch(n.ga.bind(n))}r.Pa=function(n){if(this.g){if(this.o&&n.value)this.response.push(n.value);else if(!this.o){var s=n.value?n.value:new Uint8Array(0);(s=this.v.decode(s,{stream:!n.done}))&&(this.response=this.responseText+=s)}n.done?ht(this):dt(this),this.readyState==3&&Ii(this)}},r.Ra=function(n){this.g&&(this.response=this.responseText=n,ht(this))},r.Qa=function(n){this.g&&(this.response=n,ht(this))},r.ga=function(){this.g&&ht(this)};function ht(n){n.readyState=4,n.l=null,n.j=null,n.v=null,dt(n)}r.setRequestHeader=function(n,s){this.u.append(n,s)},r.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let n=[],s=this.h.entries();for(var a=s.next();!a.done;)a=a.value,n.push(a[0]+": "+a[1]),a=s.next();return n.join(`\r
`)};function dt(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(Bt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});function wi(n){let s="";return re(n,function(a,u){s+=u,s+=":",s+=a,s+=`\r
`}),s}function Gn(n,s,a){e:{for(u in a){var u=!1;break e}u=!0}u||(a=wi(a),typeof n=="string"?a!=null&&encodeURIComponent(String(a)):k(n,s,a))}function V(n){j.call(this),this.headers=new Map,this.o=n||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(V,j);var Oa=/^https?$/i,Va=["POST","PUT"];r=V.prototype,r.Ha=function(n){this.J=n},r.ea=function(n,s,a,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+n);s=s?s.toUpperCase():"GET",this.D=n,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?Qr(this.o):Qr(Fn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(s,String(n),!0),this.B=!1}catch(E){Ei(this,E);return}if(n=a||"",a=new Map(this.headers),u)if(Object.getPrototypeOf(u)===Object.prototype)for(var _ in u)a.set(_,u[_]);else if(typeof u.keys=="function"&&typeof u.get=="function")for(let E of u.keys())a.set(E,u.get(E));else throw Error("Unknown input type for opt_headers: "+String(u));u=Array.from(a.keys()).find(E=>E.toLowerCase()=="content-type"),_=d.FormData&&n instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Va,s,void 0))||u||_||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[E,T]of a)this.g.setRequestHeader(E,T);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ai(this),this.u=!0,this.g.send(n),this.u=!1}catch(E){Ei(this,E)}};function Ei(n,s){n.h=!1,n.g&&(n.j=!0,n.g.abort(),n.j=!1),n.l=s,n.m=5,vi(n),qt(n)}function vi(n){n.A||(n.A=!0,Q(n,"complete"),Q(n,"error"))}r.abort=function(n){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=n||7,Q(this,"complete"),Q(this,"abort"),qt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),V.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ti(this):this.bb())},r.bb=function(){Ti(this)};function Ti(n){if(n.h&&typeof l<"u"&&(!n.v[1]||de(n)!=4||n.Z()!=2)){if(n.u&&de(n)==4)Gr(n.Ea,0,n);else if(Q(n,"readystatechange"),de(n)==4){n.h=!1;try{let T=n.Z();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var a;if(!(a=s)){var u;if(u=T===0){var _=String(n.D).match(fi)[1]||null;!_&&d.self&&d.self.location&&(_=d.self.location.protocol.slice(0,-1)),u=!Oa.test(_?_.toLowerCase():"")}a=u}if(a)Q(n,"complete"),Q(n,"success");else{n.m=6;try{var E=2<de(n)?n.g.statusText:""}catch{E=""}n.l=E+" ["+n.Z()+"]",vi(n)}}finally{qt(n)}}}}function qt(n,s){if(n.g){Ai(n);let a=n.g,u=n.v[0]?()=>{}:null;n.g=null,n.v=null,s||Q(n,"ready");try{a.onreadystatechange=u}catch{}}}function Ai(n){n.I&&(d.clearTimeout(n.I),n.I=null)}r.isActive=function(){return!!this.g};function de(n){return n.g?n.g.readyState:0}r.Z=function(){try{return 2<de(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(n){if(this.g){var s=this.g.responseText;return n&&s.indexOf(n)==0&&(s=s.substring(n.length)),da(s)}};function bi(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.H){case"":case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(n){let s={};n=(n.g&&2<=de(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let u=0;u<n.length;u++){if(H(n[u]))continue;var a=g(n[u]);let _=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();let E=s[_]||[];s[_]=E,E.push(a)}y(s,function(u){return u.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ft(n,s,a){return a&&a.internalChannelParams&&a.internalChannelParams[n]||s}function Si(n){this.Aa=0,this.i=[],this.j=new st,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ft("failFast",!1,n),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ft("baseRetryDelayMs",5e3,n),this.cb=ft("retryDelaySeedMs",1e4,n),this.Wa=ft("forwardChannelMaxRetries",2,n),this.wa=ft("forwardChannelRequestTimeoutMs",2e4,n),this.pa=n&&n.xmlHttpFactory||void 0,this.Xa=n&&n.Tb||void 0,this.Ca=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.h=new ai(n&&n.concurrentRequestLimit),this.Da=new Na,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=n&&n.Rb||!1,n&&n.xa&&this.j.xa(),n&&n.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&n&&n.detectBufferingProxy||!1,this.ja=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.ja=n.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Si.prototype,r.la=8,r.G=1,r.connect=function(n,s,a,u){J(0),this.W=n,this.H=s||{},a&&u!==void 0&&(this.H.OSID=a,this.H.OAID=u),this.F=this.X,this.I=xi(this,null,this.W),jt(this)};function Wn(n){if(Ri(n),n.G==3){var s=n.U++,a=he(n.I);if(k(a,"SID",n.K),k(a,"RID",s),k(a,"TYPE","terminate"),pt(n,a),s=new ge(n,n.j,s),s.L=2,s.v=Ut(he(a)),a=!1,d.navigator&&d.navigator.sendBeacon)try{a=d.navigator.sendBeacon(s.v.toString(),"")}catch{}!a&&d.Image&&(new Image().src=s.v,a=!0),a||(s.g=Li(s.j,null),s.g.ea(s.v)),s.F=Date.now(),Lt(s)}Vi(n)}function $t(n){n.g&&(Hn(n),n.g.cancel(),n.g=null)}function Ri(n){$t(n),n.u&&(d.clearTimeout(n.u),n.u=null),zt(n),n.h.cancel(),n.s&&(typeof n.s=="number"&&d.clearTimeout(n.s),n.s=null)}function jt(n){if(!ci(n.h)&&!n.s){n.s=!0;var s=n.Ga;Ye||Ur(),Xe||(Ye(),Xe=!0),bn.add(s,n),n.B=0}}function La(n,s){return ui(n.h)>=n.h.j-(n.s?1:0)?!1:n.s?(n.i=s.D.concat(n.i),!0):n.G==1||n.G==2||n.B>=(n.Va?0:n.Wa)?!1:(n.s=it(A(n.Ga,n,s),Oi(n,n.B)),n.B++,!0)}r.Ga=function(n){if(this.s)if(this.s=null,this.G==1){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;let _=new ge(this,this.j,n),E=this.o;if(this.S&&(E?(E=h(E),m(E,this.S)):E=this.S),this.m!==null||this.O||(_.H=E,E=null),this.P)e:{for(var s=0,a=0;a<this.i.length;a++){t:{var u=this.i[a];if("__data__"in u.map&&(u=u.map.__data__,typeof u=="string")){u=u.length;break t}u=void 0}if(u===void 0)break;if(s+=u,4096<s){s=a;break e}if(s===4096||a===this.i.length-1){s=a+1;break e}}s=1e3}else s=1e3;s=Ci(this,_,s),a=he(this.I),k(a,"RID",n),k(a,"CVER",22),this.D&&k(a,"X-HTTP-Session-Id",this.D),pt(this,a),E&&(this.O?s="headers="+encodeURIComponent(String(wi(E)))+"&"+s:this.m&&Gn(a,this.m,E)),zn(this.h,_),this.Ua&&k(a,"TYPE","init"),this.P?(k(a,"$req",s),k(a,"SID","null"),_.T=!0,Bn(_,a,null)):Bn(_,a,s),this.G=2}}else this.G==3&&(n?Pi(this,n):this.i.length==0||ci(this.h)||Pi(this))};function Pi(n,s){var a;s?a=s.l:a=n.U++;let u=he(n.I);k(u,"SID",n.K),k(u,"RID",a),k(u,"AID",n.T),pt(n,u),n.m&&n.o&&Gn(u,n.m,n.o),a=new ge(n,n.j,a,n.B+1),n.m===null&&(a.H=n.o),s&&(n.i=s.D.concat(n.i)),s=Ci(n,a,1e3),a.I=Math.round(.5*n.wa)+Math.round(.5*n.wa*Math.random()),zn(n.h,a),Bn(a,u,s)}function pt(n,s){n.H&&re(n.H,function(a,u){k(s,u,a)}),n.l&&di({},function(a,u){k(s,u,a)})}function Ci(n,s,a){a=Math.min(n.i.length,a);var u=n.l?A(n.l.Na,n.l,n):null;e:{var _=n.i;let E=-1;for(;;){let T=["count="+a];E==-1?0<a?(E=_[0].g,T.push("ofs="+E)):E=0:T.push("ofs="+E);let C=!0;for(let M=0;M<a;M++){let P=_[M].g,z=_[M].map;if(P-=E,0>P)E=Math.max(0,_[M].g-100),C=!1;else try{Da(z,T,"req"+P+"_")}catch{u&&u(z)}}if(C){u=T.join("&");break e}}}return n=n.i.splice(0,a),s.D=n,u}function ki(n){if(!n.g&&!n.u){n.Y=1;var s=n.Fa;Ye||Ur(),Xe||(Ye(),Xe=!0),bn.add(s,n),n.v=0}}function Kn(n){return n.g||n.u||3<=n.v?!1:(n.Y++,n.u=it(A(n.Fa,n),Oi(n,n.v)),n.v++,!0)}r.Fa=function(){if(this.u=null,Ni(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var n=2*this.R;this.j.info("BP detection timer enabled: "+n),this.A=it(A(this.ab,this),n)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,J(10),$t(this),Ni(this))};function Hn(n){n.A!=null&&(d.clearTimeout(n.A),n.A=null)}function Ni(n){n.g=new ge(n,n.j,"rpc",n.Y),n.m===null&&(n.g.H=n.o),n.g.O=0;var s=he(n.qa);k(s,"RID","rpc"),k(s,"SID",n.K),k(s,"AID",n.T),k(s,"CI",n.F?"0":"1"),!n.F&&n.ja&&k(s,"TO",n.ja),k(s,"TYPE","xmlhttp"),pt(n,s),n.m&&n.o&&Gn(s,n.m,n.o),n.L&&(n.g.I=n.L);var a=n.g;n=n.ia,a.L=1,a.v=Ut(he(s)),a.m=null,a.P=!0,ii(a,n)}r.Za=function(){this.C!=null&&(this.C=null,$t(this),Kn(this),J(19))};function zt(n){n.C!=null&&(d.clearTimeout(n.C),n.C=null)}function Di(n,s){var a=null;if(n.g==s){zt(n),Hn(n),n.g=null;var u=2}else if(jn(n.h,s))a=s.D,li(n.h,s),u=1;else return;if(n.G!=0){if(s.o)if(u==1){a=s.m?s.m.length:0,s=Date.now()-s.F;var _=n.B;u=Ot(),Q(u,new ei(u,a)),jt(n)}else ki(n);else if(_=s.s,_==3||_==0&&0<s.X||!(u==1&&La(n,s)||u==2&&Kn(n)))switch(a&&0<a.length&&(s=n.h,s.i=s.i.concat(a)),_){case 1:Pe(n,5);break;case 4:Pe(n,10);break;case 3:Pe(n,6);break;default:Pe(n,2)}}}function Oi(n,s){let a=n.Ta+Math.floor(Math.random()*n.cb);return n.isActive()||(a*=2),a*s}function Pe(n,s){if(n.j.info("Error code "+s),s==2){var a=A(n.fb,n),u=n.Xa;let _=!u;u=new Re(u||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Mt(u,"https"),Ut(u),_?Ca(u.toString(),a):ka(u.toString(),a)}else J(2);n.G=0,n.l&&n.l.sa(s),Vi(n),Ri(n)}r.fb=function(n){n?(this.j.info("Successfully pinged google.com"),J(2)):(this.j.info("Failed to ping google.com"),J(1))};function Vi(n){if(n.G=0,n.ka=[],n.l){let s=hi(n.h);(s.length!=0||n.i.length!=0)&&(N(n.ka,s),N(n.ka,n.i),n.h.i.length=0,x(n.i),n.i.length=0),n.l.ra()}}function xi(n,s,a){var u=a instanceof Re?he(a):new Re(a);if(u.g!="")s&&(u.g=s+"."+u.g),Ft(u,u.s);else{var _=d.location;u=_.protocol,s=s?s+"."+_.hostname:_.hostname,_=+_.port;var E=new Re(null);u&&Mt(E,u),s&&(E.g=s),_&&Ft(E,_),a&&(E.l=a),u=E}return a=n.D,s=n.ya,a&&s&&k(u,a,s),k(u,"VER",n.la),pt(n,u),u}function Li(n,s,a){if(s&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return s=n.Ca&&!n.pa?new V(new lt({eb:a})):new V(n.pa),s.Ha(n.J),s}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mi(){}r=Mi.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Gt(){}Gt.prototype.g=function(n,s){return new ne(n,s)};function ne(n,s){j.call(this),this.g=new Si(s),this.l=n,this.h=s&&s.messageUrlParams||null,n=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.o=n,n=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(n?n["X-WebChannel-Content-Type"]=s.messageContentType:n={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.va&&(n?n["X-WebChannel-Client-Profile"]=s.va:n={"X-WebChannel-Client-Profile":s.va}),this.g.S=n,(n=s&&s.Sb)&&!H(n)&&(this.g.m=n),this.v=s&&s.supportsCrossDomainXhr||!1,this.u=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!H(s)&&(this.g.D=s,n=this.h,n!==null&&s in n&&(n=this.h,s in n&&delete n[s])),this.j=new Fe(this)}R(ne,j),ne.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ne.prototype.close=function(){Wn(this.g)},ne.prototype.o=function(n){var s=this.g;if(typeof n=="string"){var a={};a.__data__=n,n=a}else this.u&&(a={},a.__data__=Vn(n),n=a);s.i.push(new Ia(s.Ya++,n)),s.G==3&&jt(s)},ne.prototype.N=function(){this.g.l=null,delete this.j,Wn(this.g),delete this.g,ne.aa.N.call(this)};function Fi(n){Ln.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var s=n.__sm__;if(s){e:{for(let a in s){n=a;break e}n=void 0}(this.i=n)&&(n=this.i,s=s!==null&&n in s?s[n]:void 0),this.data=s}else this.data=n}R(Fi,Ln);function Ui(){Mn.call(this),this.status=1}R(Ui,Mn);function Fe(n){this.g=n}R(Fe,Mi),Fe.prototype.ua=function(){Q(this.g,"a")},Fe.prototype.ta=function(n){Q(this.g,new Fi(n))},Fe.prototype.sa=function(n){Q(this.g,new Ui)},Fe.prototype.ra=function(){Q(this.g,"b")},Gt.prototype.createWebChannel=Gt.prototype.g,ne.prototype.send=ne.prototype.o,ne.prototype.open=ne.prototype.m,ne.prototype.close=ne.prototype.close,gd=Xt.createWebChannelTransport=function(){return new Gt},md=Xt.getStatEventTarget=function(){return Ot()},pd=Xt.Event=be,fd=Xt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vt.NO_ERROR=0,Vt.TIMEOUT=8,Vt.HTTP_ERROR=6,dd=Xt.ErrorCode=Vt,ti.COMPLETE="complete",hd=Xt.EventType=ti,Jr.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",j.prototype.listen=j.prototype.K,ld=Xt.WebChannel=Jr,YI=Xt.FetchXmlHttpFactory=lt,V.prototype.listenOnce=V.prototype.L,V.prototype.getLastError=V.prototype.Ka,V.prototype.getLastErrorCode=V.prototype.Ba,V.prototype.getStatus=V.prototype.Z,V.prototype.getResponseJson=V.prototype.Oa,V.prototype.getResponseText=V.prototype.oa,V.prototype.send=V.prototype.ea,V.prototype.setWithCredentials=V.prototype.Ha,ud=Xt.XhrIo=V}).apply(typeof Ys<"u"?Ys:typeof self<"u"?self:typeof window<"u"?window:{});var _d="@firebase/firestore",yd="4.8.0";var Ne=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");var co="11.10.0";var Xs=new Ge("@firebase/firestore");function _t(r,...e){if(Xs.logLevel<=ee.DEBUG){let t=e.map(Od);Xs.debug(`Firestore (${co}): ${r}`,...t)}}function Dd(r,...e){if(Xs.logLevel<=ee.ERROR){let t=e.map(Od);Xs.error(`Firestore (${co}): ${r}`,...t)}}function Od(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Be(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Vd(r,i,t)}function Vd(r,e,t){let i=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Dd(i),new Error(i)}function or(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||Vd(e,o,i)}var X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Ae{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ar=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Nc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ne.UNAUTHENTICATED))}shutdown(){}};var Oc=class{constructor(e){this.t=e,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){or(this.o===void 0,42304);let i=this.i,o=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve(),c=new ar;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ar,e.enqueueRetryable(()=>o(this.currentUser))};let l=()=>{let I=c;e.enqueueRetryable(async()=>{await I.promise,await o(this.currentUser)})},d=I=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(I=>d(I)),setTimeout(()=>{if(!this.auth){let I=this.t.getImmediate({optional:!0});I?d(I):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ar)}},0),l()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(or(typeof i.accessToken=="string",31837,{l:i}),new Nc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return or(e===null||typeof e=="string",2055,{h:e}),new Ne(e)}},Vc=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Ne.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},xc=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Vc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Zs=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Lc=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){or(this.o===void 0,3512);let i=c=>{c.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);let l=c.token!==this.m;return this.m=c.token,_t("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};let o=c=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){let c=this.V.getImmediate({optional:!0});c?o(c):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zs(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(or(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Zs(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function XI(r){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}function ZI(){return new TextEncoder}var Mc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let o=XI(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}};function We(r,e){return r<e?-1:r>e?1:0}function ew(r,e){let t=0;for(;t<r.length&&t<e.length;){let i=r.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return We(i,o);{let c=ZI(),l=tw(c.encode(Id(r,t)),c.encode(Id(e,t)));return l!==0?l:We(i,o)}}t+=i>65535?2:1}return We(r.length,e.length)}function Id(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function tw(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return We(r[t],e[t]);return We(r.length,e.length)}var wd="__name__",eo=class r{constructor(e,t,i){t===void 0?t=0:t>e.length&&Be(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Be(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return r.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof r?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let o=0;o<i;o++){let c=r.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return We(e.length,t.length)}static compareSegments(e,t){let i=r.isNumericId(e),o=r.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?r.extractNumericId(e).compare(r.extractNumericId(t)):ew(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Js.fromString(e.substring(4,e.length-2))}},Zt=class r extends eo{construct(e,t,i){return new r(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new K(X.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new r(t)}static emptyPath(){return new r([])}},nw=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fc=class r extends eo{construct(e,t,i){return new r(e,t,i)}static isValidIdentifier(e){return nw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wd}static keyField(){return new r([wd])}static fromServerFormat(e){let t=[],i="",o=0,c=()=>{if(i.length===0)throw new K(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},l=!1;for(;o<e.length;){let d=e[o];if(d==="\\"){if(o+1===e.length)throw new K(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let I=e[o+1];if(I!=="\\"&&I!=="."&&I!=="`")throw new K(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=I,o+=2}else d==="`"?(l=!l,o++):d!=="."||l?(i+=d,o++):(c(),o++)}if(c(),l)throw new K(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(t)}static emptyPath(){return new r([])}};var en=class r{constructor(e){this.path=e}static fromPath(e){return new r(Zt.fromString(e))}static fromName(e){return new r(Zt.fromString(e).popFirst(5))}static empty(){return new r(Zt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Zt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new r(new Zt(e.slice()))}};function rw(r,e,t,i){if(e===!0&&i===!0)throw new K(X.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function iw(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ce(r,e){let t={typeString:r};return e&&(t.value=e),t}function rs(r,e){if(!iw(r))throw new K(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}let l=r[i];if(o&&typeof l!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&l!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new K(X.INVALID_ARGUMENT,t);return!0}var Ed=-62135596800,vd=1e6,Yi=class r{static now(){return r.fromMillis(Date.now())}static fromDate(e){return r.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*vd);return new r(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ed)throw new K(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vd}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rs(e,r._jsonSchema))return new r(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-Ed;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Yi._jsonSchemaVersion="firestore/timestamp/1.0",Yi._jsonSchema={type:ce("string",Yi._jsonSchemaVersion),seconds:ce("number"),nanoseconds:ce("number")};var Uc=class{constructor(e,t,i,o){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=o}};Uc.UNKNOWN_ID=-1;function sw(r){return r.name==="IndexedDbTransactionError"}function ow(r){return r===0&&1/r==-1/0}var aw="remoteDocuments",xd="owner";var Ld="mutationQueues";var Md="mutations";var Fd="documentMutations",cw="remoteDocumentsV14";var Ud="remoteDocumentGlobal";var Bd="targets";var qd="targetDocuments";var $d="targetGlobal",jd="collectionParents";var zd="clientMetadata";var Gd="bundles";var Wd="namedQueries";var uw="indexConfiguration";var lw="indexState";var hw="indexEntries";var Kd="documentOverlays";var dw="globals";var fw=[Ld,Md,Fd,aw,Bd,xd,$d,qd,zd,Ud,jd,Gd,Wd],bP=[...fw,Kd],pw=[Ld,Md,Fd,cw,Bd,xd,$d,qd,zd,Ud,jd,Gd,Wd,Kd],mw=pw,gw=[...mw,uw,lw,hw];var SP=[...gw,dw];var Nr=class r{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rr(this.root,e,this.comparator,!0)}},Rr=class{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},bt=class r{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??r.RED,this.left=o??r.EMPTY,this.right=c??r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new r(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this,c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return r.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Be(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Be(27949);return e+(this.isRed()?0:1)}};bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Be(57766)}get value(){throw Be(16141)}get color(){throw Be(16727)}get left(){throw Be(29726)}get right(){throw Be(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var to=class r{constructor(e){this.comparator=e,this.data=new Nr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new no(this.data.getIterator())}getIteratorFrom(e){return new no(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof r)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new r(this.comparator);return t.data=e,t}},no=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Bc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var _n=class r{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Bc("Invalid base64 string: "+c):c}})(e);return new r(t)}static fromUint8Array(e){let t=(function(o){let c="";for(let l=0;l<o.length;++l)c+=String.fromCharCode(o[l]);return c})(e);return new r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};_n.EMPTY_BYTE_STRING=new _n("");var _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yw(r){if(or(!!r,39018),typeof r=="string"){let e=0,t=_w.exec(r);if(or(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}let i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xi(r.seconds),nanos:Xi(r.nanos)}}function Xi(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Iw(r){return typeof r=="string"?_n.fromBase64String(r):_n.fromUint8Array(r)}var Td="(default)",qc=class r{constructor(e,t){this.projectId=e,this.database=t||Td}static empty(){return new r("","")}get isDefaultDatabase(){return this.database===Td}isEqual(e){return e instanceof r&&e.projectId===this.projectId&&e.database===this.database}};var Hd="__type__",ww="__max__";var Qd="__vector__",Jd="value";function Ew(r){var e,t;return((t=(((e=r?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Hd])===null||t===void 0?void 0:t.stringValue)===Qd}function vw(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===ww}var PP={mapValue:{fields:{[Hd]:{stringValue:Qd},[Jd]:{arrayValue:{}}}}};var $c=class{constructor(e,t=null,i=[],o=[],c=null,l="F",d=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=l,this.startAt=d,this.endAt=I,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function Tw(r){return new $c(r)}var CP=new Nr(en.comparator);var kP=new Nr(en.comparator);var NP=new Nr(en.comparator),DP=new to(en.comparator);var OP=new to(We);var Ad,F;(F=Ad||(Ad={}))[F.OK=0]="OK",F[F.CANCELLED=1]="CANCELLED",F[F.UNKNOWN=2]="UNKNOWN",F[F.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",F[F.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",F[F.NOT_FOUND=5]="NOT_FOUND",F[F.ALREADY_EXISTS=6]="ALREADY_EXISTS",F[F.PERMISSION_DENIED=7]="PERMISSION_DENIED",F[F.UNAUTHENTICATED=16]="UNAUTHENTICATED",F[F.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",F[F.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",F[F.ABORTED=10]="ABORTED",F[F.OUT_OF_RANGE=11]="OUT_OF_RANGE",F[F.UNIMPLEMENTED=12]="UNIMPLEMENTED",F[F.INTERNAL=13]="INTERNAL",F[F.UNAVAILABLE=14]="UNAVAILABLE",F[F.DATA_LOSS=15]="DATA_LOSS";var VP=new Js([4294967295,4294967295],0);var ro=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Xi(e.integerValue));else if("doubleValue"in e){let i=Xi(e.doubleValue);isNaN(i)?this.Ct(t,13):(this.Ct(t,15),ow(i)?t.Ft(0):t.Ft(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ct(t,20),typeof i=="string"&&(i=yw(i)),t.Mt(`${i.seconds||""}`),t.Ft(i.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Iw(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ct(t,45),t.Ft(i.latitude||0),t.Ft(i.longitude||0)}else"mapValue"in e?vw(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Ew(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):Be(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let i=e.fields||{};this.Ct(t,55);for(let o of Object.keys(i))this.xt(o,t),this.Dt(i[o],t)}Lt(e,t){var i,o;let c=e.fields||{};this.Ct(t,53);let l=Jd,d=((o=(i=c[l].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.length)||0;this.Ct(t,15),t.Ft(Xi(d)),this.xt(l,t),this.Dt(c[l],t)}qt(e,t){let i=e.values||[];this.Ct(t,50);for(let o of i)this.Dt(o,t)}Bt(e,t){this.Ct(t,37),en.fromName(e).path.forEach(i=>{this.Ct(t,60),this.$t(i,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};ro.Ut=new ro;var xP=new Uint8Array(0);var Yd=41943040,At=class r{static withCacheSize(e){return new r(e,r.DEFAULT_COLLECTION_PERCENTILE,r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At(Yd,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);var Aw=1048576;function kc(){return typeof document<"u"?document:null}var jc=class{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=o,this.A_=c,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),o=Math.max(0,t-i);o>0&&_t("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,o,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var zc=class r{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){let l=Date.now()+i,d=new r(e,t,l,o,c);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var bd,Sd;(Sd=bd||(bd={})).Fa="default",Sd.Cache="cache";function bw(r){let e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}var Rd=new Map;var Sw="firestore.googleapis.com",Pd=!0,io=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Sw,this.ssl=Pd}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Pd;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Yd;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Aw)throw new K(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new K(X.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new K(X.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new K(X.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Gc=class{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new io({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new io(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Dc;switch(i.type){case"firstParty":return new xc(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=Rd.get(t);i&&(_t("ComponentProvider","Removing Datastore"),Rd.delete(t),i.terminate())})(this),Promise.resolve()}};var Wc=class r{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new r(this.firestore,e,this._query)}},cr=class r{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Kc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new r(this.firestore,e,this._key)}toJSON(){return{type:r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(rs(t,r._jsonSchema))return new r(e,i||null,new en(Zt.fromString(t.referencePath)))}};cr._jsonSchemaVersion="firestore/documentReference/1.0",cr._jsonSchema={type:ce("string",cr._jsonSchemaVersion),referencePath:ce("string")};var Kc=class r extends Wc{constructor(e,t,i){super(e,t,Tw(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new en(e))}withConverter(e){return new r(this.firestore,e,this._path)}};var Cd="AsyncQueue",so=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new jc(this,"async_queue_retry"),this.oc=()=>{let i=kc();i&&_t(Cd,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;let t=kc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=kc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new ar;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!sw(e))throw e;_t(Cd,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Dd("INTERNAL UNHANDLED ERROR: ",kd(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let o=zc.createAndSchedule(this,e,t,i,c=>this.lc(c));return this.ec.push(o),o}ac(){this.tc&&Be(47125,{hc:kd(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function kd(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}var Hc=class extends Gc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new so,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new so(e),this._firestoreClient=void 0,await e}}};var Zi=class r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new r(_n.fromBase64String(e))}catch(t){throw new K(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new r(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rs(e,r._jsonSchema))return r.fromBase64String(e.bytes)}};Zi._jsonSchemaVersion="firestore/bytes/1.0",Zi._jsonSchema={type:ce("string",Zi._jsonSchemaVersion),bytes:ce("string")};var oo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fc(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var es=class r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:r._jsonSchemaVersion}}static fromJSON(e){if(rs(e,r._jsonSchema))return new r(e.latitude,e.longitude)}};es._jsonSchemaVersion="firestore/geoPoint/1.0",es._jsonSchema={type:ce("string",es._jsonSchemaVersion),latitude:ce("number"),longitude:ce("number")};var ts=class r{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rs(e,r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new r(e.vectorValues);throw new K(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};ts._jsonSchemaVersion="firestore/vectorValue/1.0",ts._jsonSchema={type:ce("string",ts._jsonSchemaVersion),vectorValues:ce("object")};var Rw=new RegExp("[~\\*/\\[\\]]");function Pw(r,e,t){if(e.search(Rw)>=0)throw Nd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new oo(...e.split("."))._internalPath}catch{throw Nd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Nd(r,e,t,i,o){let c=i&&!i.isEmpty(),l=o!==void 0,d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let I="";return(c||l)&&(I+=" (found",c&&(I+=` in field ${i}`),l&&(I+=` in document ${o}`),I+=")"),new K(X.INVALID_ARGUMENT,d+r+I)}var ao=class{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Qc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Xd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Qc=class extends ao{data(){return super.data()}};function Xd(r,e){return typeof e=="string"?Pw(r,e):e instanceof oo?e._internalPath:e._delegate._internalPath}var Pr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cr=class r extends ao{constructor(e,t,i,o,c,l){super(e,t,i,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new kr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Xd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=r._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Cr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cr._jsonSchema={type:ce("string",Cr._jsonSchemaVersion),bundleSource:ce("string","DocumentSnapshot"),bundleName:ce("string"),bundle:ce("string")};var kr=class extends Cr{data(e={}){return super.data(e)}},ns=class r{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Pr(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new kr(this._firestore,this._userDataWriter,i.key,i,new Pr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map(d=>{let I=new kr(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Pr(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:I,oldIndex:-1,newIndex:l++}})}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>c||d.type!==3).map(d=>{let I=new kr(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Pr(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter),v=-1,b=-1;return d.type!==0&&(v=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:Cw(d.type),doc:I,oldIndex:v,newIndex:b}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Mc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Cw(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be(61501,{type:r})}}ns._jsonSchemaVersion="firestore/querySnapshot/1.0",ns._jsonSchema={type:ce("string",ns._jsonSchemaVersion),bundleSource:ce("string","QuerySnapshot"),bundleName:ce("string"),bundle:ce("string")};(function(e,t=!0){(function(o){co=o})(br),Ie(new ae("firestore",(i,{instanceIdentifier:o,options:c})=>{let l=i.getProvider("app").getImmediate(),d=new Hc(new Oc(i.getProvider("auth-internal")),new Lc(l,i.getProvider("app-check-internal")),(function(v,b){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new K(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qc(v.options.projectId,b)})(l,o),l);return c=Object.assign({useFetchStreams:t},c),d._setSettings(c),d},"PUBLIC").setMultipleInstances(!0)),te(_d,yd,e),te(_d,yd,"esm2017")})();var is=class{constructor(e){return e}},Zd="firestore",Jc=class{constructor(){return pn(Zd)}};var Yc=new un("angularfire2.firestore-instances");function kw(r,e){let t=nr(Zd,r,e);return t&&new is(t)}function Nw(r){return(e,t)=>{let i=e.runOutsideAngular(()=>r(t));return new is(i)}}var Dw={provide:Jc,deps:[[new Ce,Yc]]},Ow={provide:is,useFactory:kw,deps:[[new Ce,Yc],mt]};function ef(r,...e){return te("angularfire",Tt.full,"fst"),ln([Ow,Dw,{provide:Yc,useFactory:Nw(r),multi:!0,deps:[Et,hn,Jt,Yt,[new Ce,Ji],[new Ce,Sr],...e]}])}var rf="@firebase/installations",tu="0.6.18";var sf=1e4,of=`w:${tu}`,af="FIS_v2",Vw="https://firebaseinstallations.googleapis.com/v1",xw=3600*1e3,Lw="installations",Mw="Installations";var Fw={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},lr=new ke(Lw,Mw,Fw);function cf(r){return r instanceof Ae&&r.code.includes("request-failed")}function uf({projectId:r}){return`${Vw}/projects/${r}/installations`}function lf(r){return{token:r.token,requestStatus:2,expiresIn:Bw(r.expiresIn),creationTime:Date.now()}}async function hf(r,e){let i=(await e.json()).error;return lr.create("request-failed",{requestName:r,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function df({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function Uw(r,{refreshToken:e}){let t=df(r);return t.append("Authorization",qw(e)),t}async function ff(r){let e=await r();return e.status>=500&&e.status<600?r():e}function Bw(r){return Number(r.replace("s","000"))}function qw(r){return`${af} ${r}`}async function $w({appConfig:r,heartbeatServiceProvider:e},{fid:t}){let i=uf(r),o=df(r),c=e.getImmediate({optional:!0});if(c){let v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}let l={fid:t,authVersion:af,appId:r.appId,sdkVersion:of},d={method:"POST",headers:o,body:JSON.stringify(l)},I=await ff(()=>fetch(i,d));if(I.ok){let v=await I.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:lf(v.authToken)}}else throw await hf("Create Installation",I)}function pf(r){return new Promise(e=>{setTimeout(e,r)})}function jw(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}var zw=/^[cdef][\w-]{21}$/,eu="";function Gw(){try{let r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;let t=Ww(r);return zw.test(t)?t:eu}catch{return eu}}function Ww(r){return jw(r).substr(0,22)}function lo(r){return`${r.appName}!${r.appId}`}var mf=new Map;function gf(r,e){let t=lo(r);_f(t,e),Kw(t,e)}function _f(r,e){let t=mf.get(r);if(t)for(let i of t)i(e)}function Kw(r,e){let t=Hw();t&&t.postMessage({key:r,fid:e}),Qw()}var ur=null;function Hw(){return!ur&&"BroadcastChannel"in self&&(ur=new BroadcastChannel("[Firebase] FID Change"),ur.onmessage=r=>{_f(r.data.key,r.data.fid)}),ur}function Qw(){mf.size===0&&ur&&(ur.close(),ur=null)}var Jw="firebase-installations-database",Yw=1,hr="firebase-installations-store",Xc=null;function nu(){return Xc||(Xc=dn(Jw,Yw,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(hr)}}})),Xc}async function uo(r,e){let t=lo(r),o=(await nu()).transaction(hr,"readwrite"),c=o.objectStore(hr),l=await c.get(t);return await c.put(e,t),await o.done,(!l||l.fid!==e.fid)&&gf(r,e.fid),e}async function yf(r){let e=lo(r),i=(await nu()).transaction(hr,"readwrite");await i.objectStore(hr).delete(e),await i.done}async function ho(r,e){let t=lo(r),o=(await nu()).transaction(hr,"readwrite"),c=o.objectStore(hr),l=await c.get(t),d=e(l);return d===void 0?await c.delete(t):await c.put(d,t),await o.done,d&&(!l||l.fid!==d.fid)&&gf(r,d.fid),d}async function ru(r){let e,t=await ho(r.appConfig,i=>{let o=Xw(i),c=Zw(r,o);return e=c.registrationPromise,c.installationEntry});return t.fid===eu?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Xw(r){let e=r||{fid:Gw(),registrationStatus:0};return If(e)}function Zw(r,e){if(e.registrationStatus===0){if(!navigator.onLine){let o=Promise.reject(lr.create("app-offline"));return{installationEntry:e,registrationPromise:o}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=eE(r,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:tE(r)}:{installationEntry:e}}async function eE(r,e){try{let t=await $w(r,e);return uo(r.appConfig,t)}catch(t){throw cf(t)&&t.customData.serverCode===409?await yf(r.appConfig):await uo(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function tE(r){let e=await tf(r.appConfig);for(;e.registrationStatus===1;)await pf(100),e=await tf(r.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:i}=await ru(r);return i||t}return e}function tf(r){return ho(r,e=>{if(!e)throw lr.create("installation-not-found");return If(e)})}function If(r){return nE(r)?{fid:r.fid,registrationStatus:0}:r}function nE(r){return r.registrationStatus===1&&r.registrationTime+sf<Date.now()}async function rE({appConfig:r,heartbeatServiceProvider:e},t){let i=iE(r,t),o=Uw(r,t),c=e.getImmediate({optional:!0});if(c){let v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}let l={installation:{sdkVersion:of,appId:r.appId}},d={method:"POST",headers:o,body:JSON.stringify(l)},I=await ff(()=>fetch(i,d));if(I.ok){let v=await I.json();return lf(v)}else throw await hf("Generate Auth Token",I)}function iE(r,{fid:e}){return`${uf(r)}/${e}/authTokens:generate`}async function iu(r,e=!1){let t,i=await ho(r.appConfig,c=>{if(!wf(c))throw lr.create("not-registered");let l=c.authToken;if(!e&&aE(l))return c;if(l.requestStatus===1)return t=sE(r,e),c;{if(!navigator.onLine)throw lr.create("app-offline");let d=uE(c);return t=oE(r,d),d}});return t?await t:i.authToken}async function sE(r,e){let t=await nf(r.appConfig);for(;t.authToken.requestStatus===1;)await pf(100),t=await nf(r.appConfig);let i=t.authToken;return i.requestStatus===0?iu(r,e):i}function nf(r){return ho(r,e=>{if(!wf(e))throw lr.create("not-registered");let t=e.authToken;return lE(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function oE(r,e){try{let t=await rE(r,e),i=Object.assign(Object.assign({},e),{authToken:t});return await uo(r.appConfig,i),t}catch(t){if(cf(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await yf(r.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await uo(r.appConfig,i)}throw t}}function wf(r){return r!==void 0&&r.registrationStatus===2}function aE(r){return r.requestStatus===2&&!cE(r)}function cE(r){let e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+xw}function uE(r){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function lE(r){return r.requestStatus===1&&r.requestTime+sf<Date.now()}async function hE(r){let e=r,{installationEntry:t,registrationPromise:i}=await ru(e);return i?i.catch(console.error):iu(e).catch(console.error),t.fid}async function dE(r,e=!1){let t=r;return await fE(t),(await iu(t,e)).token}async function fE(r){let{registrationPromise:e}=await ru(r);e&&await e}function pE(r){if(!r||!r.options)throw Zc("App Configuration");if(!r.name)throw Zc("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!r.options[t])throw Zc(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Zc(r){return lr.create("missing-app-config-values",{valueName:r})}var Ef="installations",mE="installations-internal",gE=r=>{let e=r.getProvider("app").getImmediate(),t=pE(e),i=er(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},_E=r=>{let e=r.getProvider("app").getImmediate(),t=er(e,Ef).getImmediate();return{getId:()=>hE(t),getToken:o=>dE(t,o)}};function yE(){Ie(new ae(Ef,gE,"PUBLIC")),Ie(new ae(mE,_E,"PRIVATE"))}yE();te(rf,tu);te(rf,tu,"esm2017");var vf="analytics",IE="firebase_id",wE="origin",EE=60*1e3,vE="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",hu="https://www.googletagmanager.com/gtag/js";var De=new Ge("@firebase/analytics");var TE={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ke=new ke("analytics","Analytics",TE);function AE(r){if(!r.startsWith(hu)){let e=Ke.create("invalid-gtag-resource",{gtagURL:r});return De.warn(e.message),""}return r}function Cf(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function bE(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function SE(r,e){let t=bE("firebase-js-sdk-policy",{createScriptURL:AE}),i=document.createElement("script"),o=`${hu}?l=${r}&id=${e}`;i.src=t?t?.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function RE(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function PE(r,e,t,i,o,c){let l=i[o];try{if(l)await e[l];else{let I=(await Cf(t)).find(v=>v.measurementId===o);I&&await e[I.appId]}}catch(d){De.error(d)}r("config",o,c)}async function CE(r,e,t,i,o){try{let c=[];if(o&&o.send_to){let l=o.send_to;Array.isArray(l)||(l=[l]);let d=await Cf(t);for(let I of l){let v=d.find(S=>S.measurementId===I),b=v&&e[v.appId];if(b)c.push(b);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",i,o||{})}catch(c){De.error(c)}}function kE(r,e,t,i){async function o(c,...l){try{if(c==="event"){let[d,I]=l;await CE(r,e,t,d,I)}else if(c==="config"){let[d,I]=l;await PE(r,e,t,i,d,I)}else if(c==="consent"){let[d,I]=l;r("consent",d,I)}else if(c==="get"){let[d,I,v]=l;r("get",d,I,v)}else if(c==="set"){let[d]=l;r("set",d)}else r(c,...l)}catch(d){De.error(d)}}return o}function NE(r,e,t,i,o){let c=function(...l){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=kE(c,r,e,t),{gtagCore:c,wrappedGtag:window[o]}}function DE(r){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(hu)&&t.src.includes(r))return t;return null}var OE=30,VE=1e3,ou=class{constructor(e={},t=VE){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},kf=new ou;function xE(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function LE(r){var e;let{appId:t,apiKey:i}=r,o={method:"GET",headers:xE(i)},c=vE.replace("{app-id}",t),l=await fetch(c,o);if(l.status!==200&&l.status!==304){let d="";try{let I=await l.json();!((e=I.error)===null||e===void 0)&&e.message&&(d=I.error.message)}catch{}throw Ke.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()}async function ME(r,e=kf,t){let{appId:i,apiKey:o,measurementId:c}=r.options;if(!i)throw Ke.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:i};throw Ke.create("no-api-key")}let l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new au;return setTimeout(async()=>{d.abort()},t!==void 0?t:EE),Nf({appId:i,apiKey:o,measurementId:c},l,d,e)}async function Nf(r,{throttleEndTimeMillis:e,backoffCount:t},i,o=kf){var c;let{appId:l,measurementId:d}=r;try{await FE(i,e)}catch(I){if(d)return De.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${I?.message}]`),{appId:l,measurementId:d};throw I}try{let I=await LE(r);return o.deleteThrottleMetadata(l),I}catch(I){let v=I;if(!UE(v)){if(o.deleteThrottleMetadata(l),d)return De.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${v?.message}]`),{appId:l,measurementId:d};throw I}let b=Number((c=v?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Ds(t,o.intervalMillis,OE):Ds(t,o.intervalMillis),S={throttleEndTimeMillis:Date.now()+b,backoffCount:t+1};return o.setThrottleMetadata(l,S),De.debug(`Calling attemptFetch again in ${b} millis`),Nf(r,S,i,o)}}function FE(r,e){return new Promise((t,i)=>{let o=Math.max(e-Date.now(),0),c=setTimeout(t,o);r.addEventListener(()=>{clearTimeout(c),i(Ke.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function UE(r){if(!(r instanceof Ae)||!r.customData)return!1;let e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}var au=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var cu;async function BE(r,e,t,i,o){if(o&&o.global){r("event",t,i);return}else{let c=await e,l=Object.assign(Object.assign({},i),{send_to:c});r("event",t,l)}}var uu;function qE(r){uu=r}function $E(r){cu=r}async function jE(){if(Yn())try{await Ns()}catch(r){return De.warn(Ke.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return De.warn(Ke.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function zE(r,e,t,i,o,c,l){var d;let I=ME(r);I.then(D=>{t[D.measurementId]=D.appId,r.options.measurementId&&D.measurementId!==r.options.measurementId&&De.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${D.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(D=>De.error(D)),e.push(I);let v=jE().then(D=>{if(D)return i.getId()}),[b,S]=await Promise.all([I,v]);DE(c)||SE(c,b.measurementId),uu&&(o("consent","default",uu),qE(void 0)),o("js",new Date);let A=(d=l?.config)!==null&&d!==void 0?d:{};return A[wE]="firebase",A.update=!0,S!=null&&(A[IE]=S),o("config",b.measurementId,A),cu&&(o("set",cu),$E(void 0)),b.measurementId}var lu=class{constructor(e){this.app=e}_delete(){return delete ss[this.app.options.appId],Promise.resolve()}},ss={},Tf=[],Af={},su="dataLayer",GE="gtag",bf,Df,Sf=!1;function WE(){let r=[];if(ks()&&r.push("This is a browser extension environment."),ph()||r.push("Cookies are not available."),r.length>0){let e=r.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=Ke.create("invalid-analytics-context",{errorInfo:e});De.warn(t.message)}}function KE(r,e,t){WE();let i=r.options.appId;if(!i)throw Ke.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)De.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ke.create("no-api-key");if(ss[i]!=null)throw Ke.create("already-exists",{id:i});if(!Sf){RE(su);let{wrappedGtag:c,gtagCore:l}=NE(ss,Tf,Af,su,GE);Df=c,bf=l,Sf=!0}return ss[i]=zE(r,Tf,Af,e,bf,su,t),new lu(r)}function Of(r,e,t,i){r=Kt(r),BE(Df,ss[r.app.options.appId],e,t,i).catch(o=>De.error(o))}var Rf="@firebase/analytics",Pf="0.10.17";function HE(){Ie(new ae(vf,(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return KE(i,o,t)},"PUBLIC")),Ie(new ae("analytics-internal",r,"PRIVATE")),te(Rf,Pf),te(Rf,Pf,"esm2017");function r(e){try{let t=e.getProvider(vf).getImmediate();return{logEvent:(i,o,c)=>Of(t,i,o,c)}}catch(t){throw Ke.create("interop-component-reg-failed",{reason:t})}}}HE();var os=class{constructor(e){return e}},Vf="analytics",du=class{constructor(){return pn(Vf)}};var Nk=Math.floor(Math.random()*(2**32-1))-2**31;var fu=new un("angularfire2.analytics-instances");function QE(r,e,t){if(!Ua(t))return null;let i=nr(Vf,r,e);return i&&new os(i)}function JE(r){return(e,t,i)=>{if(!Ua(i))return null;let o=e.runOutsideAngular(()=>r(t));return new os(o)}}var YE={provide:du,deps:[[new Ce,fu]]},XE={provide:os,useFactory:QE,deps:[[new Ce,fu],mt,Bi]};function xf(r,...e){return te("angularfire",Tt.full,"analytics"),ln([XE,YE,{provide:fu,useFactory:JE(r),multi:!0,deps:[Et,hn,Bi,Jt,Yt,...e]}])}var Lf=()=>{};var Uf=function(r){let e=[],t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ZE=function(r){let e=[],t=0,i=0;for(;t<r.length;){let o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){let c=r[t++];e[i++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){let c=r[t++],l=r[t++],d=r[t++],I=((o&7)<<18|(c&63)<<12|(l&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(I>>10)),e[i++]=String.fromCharCode(56320+(I&1023))}else{let c=r[t++],l=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(c&63)<<6|l&63)}}return e.join("")},Bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){let c=r[o],l=o+1<r.length,d=l?r[o+1]:0,I=o+2<r.length,v=I?r[o+2]:0,b=c>>2,S=(c&3)<<4|d>>4,A=(d&15)<<2|v>>6,D=v&63;I||(D=64,l||(A=64)),i.push(t[b],t[S],t[A],t[D])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Uf(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):ZE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){let c=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;let v=o<r.length?t[r.charAt(o)]:64;++o;let S=o<r.length?t[r.charAt(o)]:64;if(++o,c==null||d==null||v==null||S==null)throw new mu;let A=c<<2|d>>4;if(i.push(A),v!==64){let D=d<<4&240|v>>2;if(i.push(D),S!==64){let R=v<<6&192|S;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}},mu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ev=function(r){let e=Uf(r);return Bf.encodeByteArray(e,!0)},cs=function(r){return ev(r).replace(/\./g,"")},po=function(r){try{return Bf.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function qf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var tv=()=>qf().__FIREBASE_DEFAULTS__,nv=()=>{if(typeof process>"u"||typeof process.env>"u")return;let r=process.env.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},rv=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=r&&po(r[1]);return e&&JSON.parse(e)},_u=()=>{try{return Lf()||tv()||nv()||rv()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},yu=r=>_u()?.emulatorHosts?.[r],$f=r=>{let e=yu(r);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Iu=()=>_u()?.config,wu=r=>_u()?.[`_${r}`];var fo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function dr(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mo(r){return(await fetch(r,{credentials:"include"})).ok}function jf(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let l=W({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},r);return[cs(JSON.stringify(t)),cs(JSON.stringify(l)),""].join(".")}var as={};function iv(){let r={prod:[],emulator:[]};for(let e of Object.keys(as))as[e]?r.emulator.push(e):r.prod.push(e);return r}function sv(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}var Mf=!1;function go(r,e){if(typeof window>"u"||typeof document>"u"||!dr(window.location.host)||as[r]===e||as[r]||Mf)return;as[r]=e;function t(A){return`__firebase__banner__${A}`}let i="__firebase__banner",c=iv().prod.length>0;function l(){let A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function I(A,D){A.setAttribute("width","24"),A.setAttribute("id",D),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function v(){let A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Mf=!0,l()},A}function b(A,D){A.setAttribute("id",D),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function S(){let A=sv(i),D=t("text"),R=document.getElementById(D)||document.createElement("span"),x=t("learnmore"),N=document.getElementById(x)||document.createElement("a"),ie=t("preprendIcon"),H=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){let q=A.element;d(q),b(N,x);let oe=v();I(H,ie),q.append(H,R,N,oe),document.body.appendChild(q)}c?(R.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function Ee(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function Gf(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function _o(){let r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Wf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kf(){let r=Ee();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function us(){try{return typeof indexedDB=="object"}catch{return!1}}function yo(){return new Promise((r,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}function Hf(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var ov="FirebaseError",we=class r extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=ov,Object.setPrototypeOf(this,r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qe.prototype.create)}},qe=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},o=`${this.service}/${e}`,c=this.errors[e],l=c?av(c,i):"Error",d=`${this.serviceName}: ${l} (${o}).`;return new we(o,d,i)}};function av(r,e){return r.replace(cv,(t,i)=>{let o=e[i];return o!=null?String(o):`<${i}?>`})}var cv=/\{\$([^}]+)}/g;function Qf(r){for(let e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function He(r,e){if(r===e)return!0;let t=Object.keys(r),i=Object.keys(e);for(let o of t){if(!i.includes(o))return!1;let c=r[o],l=e[o];if(Ff(c)&&Ff(l)){if(!He(c,l))return!1}else if(c!==l)return!1}for(let o of i)if(!t.includes(o))return!1;return!0}function Ff(r){return r!==null&&typeof r=="object"}function ls(r){let e=[];for(let[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Jf(r,e){let t=new gu(r,e);return t.subscribe.bind(t)}var gu=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");uv(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=pu),o.error===void 0&&(o.error=pu),o.complete===void 0&&(o.complete=pu);let c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function uv(r,e){if(typeof r!="object"||r===null)return!1;for(let t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function pu(){}var lv=1e3,hv=2,dv=14400*1e3,fv=.5;function Eu(r,e=lv,t=hv){let i=e*Math.pow(t,r),o=Math.round(fv*i*(Math.random()-.5)*2);return Math.min(dv,i+o)}function yt(r){return r&&r._delegate?r._delegate:r}var pe=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var fr="[DEFAULT]";var vu=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new fo;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mv(e))try{this.getOrInitializeService({instanceIdentifier:fr})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let o=this.normalizeInstanceIdentifier(t);try{let c=this.getOrInitializeService({instanceIdentifier:o});i.resolve(c)}catch{}}}}clearInstance(e=fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fr){return this.instances.has(e)}getOptions(e=fr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[c,l]of this.instancesDeferred.entries()){let d=this.normalizeInstanceIdentifier(c);i===d&&l.resolve(o)}return o}onInit(e,t){let i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);let c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pv(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fr){return this.component?this.component.multipleInstances?e:fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pv(r){return r===fr?void 0:r}function mv(r){return r.instantiationMode==="EAGER"}var Io=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new vu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var gv=[],Z=(function(r){return r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT",r})(Z||{}),_v={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},yv=Z.INFO,Iv={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},wv=(r,e,...t)=>{if(e<r.logLevel)return;let i=new Date().toISOString(),o=Iv[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},St=class{constructor(e){this.name=e,this._logLevel=yv,this._logHandler=wv,this._userLogHandler=null,gv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_v[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}};var Au=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ev(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Ev(r){return r.getComponent()?.type==="VERSION"}var bu="@firebase/app",Yf="0.14.1";var tn=new St("@firebase/app"),vv="@firebase/app-compat",Tv="@firebase/analytics-compat",Av="@firebase/analytics",bv="@firebase/app-check-compat",Sv="@firebase/app-check",Rv="@firebase/auth",Pv="@firebase/auth-compat",Cv="@firebase/database",kv="@firebase/data-connect",Nv="@firebase/database-compat",Dv="@firebase/functions",Ov="@firebase/functions-compat",Vv="@firebase/installations",xv="@firebase/installations-compat",Lv="@firebase/messaging",Mv="@firebase/messaging-compat",Fv="@firebase/performance",Uv="@firebase/performance-compat",Bv="@firebase/remote-config",qv="@firebase/remote-config-compat",$v="@firebase/storage",jv="@firebase/storage-compat",zv="@firebase/firestore",Gv="@firebase/ai",Wv="@firebase/firestore-compat",Kv="firebase",Hv="12.1.0";var Su="[DEFAULT]",Qv={[bu]:"fire-core",[vv]:"fire-core-compat",[Av]:"fire-analytics",[Tv]:"fire-analytics-compat",[Sv]:"fire-app-check",[bv]:"fire-app-check-compat",[Rv]:"fire-auth",[Pv]:"fire-auth-compat",[Cv]:"fire-rtdb",[kv]:"fire-data-connect",[Nv]:"fire-rtdb-compat",[Dv]:"fire-fn",[Ov]:"fire-fn-compat",[Vv]:"fire-iid",[xv]:"fire-iid-compat",[Lv]:"fire-fcm",[Mv]:"fire-fcm-compat",[Fv]:"fire-perf",[Uv]:"fire-perf-compat",[Bv]:"fire-rc",[qv]:"fire-rc-compat",[$v]:"fire-gcs",[jv]:"fire-gcs-compat",[zv]:"fire-fst",[Wv]:"fire-fst-compat",[Gv]:"fire-vertex","fire-js":"fire-js",[Kv]:"fire-js-all"};var wo=new Map,Jv=new Map,Ru=new Map;function Xf(r,e){try{r.container.addComponent(e)}catch(t){tn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Oe(r){let e=r.name;if(Ru.has(e))return tn.debug(`There were multiple attempts to register component ${e}.`),!1;Ru.set(e,r);for(let t of wo.values())Xf(t,r);for(let t of Jv.values())Xf(t,r);return!0}function It(r,e){let t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Qe(r){return r==null?!1:r.settings!==void 0}var Yv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yn=new qe("app","Firebase",Yv);var Pu=class{constructor(e,t,i){this._isDeleted=!1,this._options=W({},e),this._config=W({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new pe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}};var In=Hv;function Nu(r,e={}){let t=r;typeof e!="object"&&(e={name:e});let i=W({name:Su,automaticDataCollectionEnabled:!0},e),o=i.name;if(typeof o!="string"||!o)throw yn.create("bad-app-name",{appName:String(o)});if(t||(t=Iu()),!t)throw yn.create("no-options");let c=wo.get(o);if(c){if(He(t,c.options)&&He(i,c.config))return c;throw yn.create("duplicate-app",{appName:o})}let l=new Io(o);for(let I of Ru.values())l.addComponent(I);let d=new Pu(t,i,l);return wo.set(o,d),d}function pr(r=Su){let e=wo.get(r);if(!e&&r===Su&&Iu())return Nu();if(!e)throw yn.create("no-app",{appName:r});return e}function ve(r,e,t){let i=Qv[r]??r;t&&(i+=`-${t}`);let o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){let l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&l.push("and"),c&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tn.warn(l.join(" "));return}Oe(new pe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Xv="firebase-heartbeat-database",Zv=1,hs="firebase-heartbeat-store",Tu=null;function np(){return Tu||(Tu=dn(Xv,Zv,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(hs)}catch(t){console.warn(t)}}}}).catch(r=>{throw yn.create("idb-open",{originalErrorMessage:r.message})})),Tu}async function eT(r){try{let t=(await np()).transaction(hs),i=await t.objectStore(hs).get(rp(r));return await t.done,i}catch(e){if(e instanceof we)tn.warn(e.message);else{let t=yn.create("idb-get",{originalErrorMessage:e?.message});tn.warn(t.message)}}}async function Zf(r,e){try{let i=(await np()).transaction(hs,"readwrite");await i.objectStore(hs).put(e,rp(r)),await i.done}catch(t){if(t instanceof we)tn.warn(t.message);else{let i=yn.create("idb-set",{originalErrorMessage:t?.message});tn.warn(i.message)}}}function rp(r){return`${r.name}!${r.options.appId}`}var tT=1024,nT=30,Cu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ku(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ep();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>nT){let o=iT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){tn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=ep(),{heartbeatsToSend:t,unsentEntries:i}=rT(this._heartbeatsCache.heartbeats),o=cs(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return tn.warn(e),""}}};function ep(){return new Date().toISOString().substring(0,10)}function rT(r,e=tT){let t=[],i=r.slice();for(let o of r){let c=t.find(l=>l.agent===o.agent);if(c){if(c.dates.push(o.date),tp(t)>e){c.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),tp(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var ku=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return us()?yo().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await eT(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return Zf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let i=await this.read();return Zf(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function tp(r){return cs(JSON.stringify({version:2,heartbeats:r})).length}function iT(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function sT(r){Oe(new pe("platform-logger",e=>new Au(e),"PRIVATE")),Oe(new pe("heartbeat",e=>new Cu(e),"PRIVATE")),ve(bu,Yf,r),ve(bu,Yf,"esm2020"),ve("fire-js","")}sT("");var oT="firebase",aT="12.1.0";ve(oT,aT,"app");function yp(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var Ip=yp,wp=new qe("auth","Firebase",yp());var So=new St("@firebase/auth");function cT(r,...e){So.logLevel<=Z.WARN&&So.warn(`Auth (${In}): ${r}`,...e)}function vo(r,...e){So.logLevel<=Z.ERROR&&So.error(`Auth (${In}): ${r}`,...e)}function vn(r,...e){throw Yu(r,...e)}function gr(r,...e){return Yu(r,...e)}function Ep(r,e,t){let i=fe(W({},Ip()),{[e]:t});return new qe("auth","Firebase",i).create(e,{appName:r.name})}function mr(r){return Ep(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yu(r,...e){if(typeof r!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return wp.create(r,...e)}function O(r,e,...t){if(!r)throw Yu(e,...t)}function nn(r){let e="INTERNAL ASSERTION FAILED: "+r;throw vo(e),new Error(e)}function Tn(r,e){r||nn(e)}function xu(){return typeof self<"u"&&self.location?.href||""}function uT(){return ip()==="http:"||ip()==="https:"}function ip(){return typeof self<"u"&&self.location?.protocol||null}function lT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uT()||_o()||"connection"in navigator)?navigator.onLine:!0}function hT(){if(typeof navigator>"u")return null;let r=navigator;return r.languages&&r.languages[0]||r.language||null}var _r=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tn(t>e,"Short delay should be less than long delay!"),this.isMobile=zf()||Wf()}get(){return lT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Xu(r,e){Tn(r.emulator,"Emulator should always be set here");let{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ro=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var dT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var fT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pT=new _r(3e4,6e4);function Zu(r,e){return r.tenantId&&!e.tenantId?fe(W({},e),{tenantId:r.tenantId}):e}async function Dr(r,e,t,i,o={}){return vp(r,o,async()=>{let c={},l={};i&&(e==="GET"?l=i:c={body:JSON.stringify(i)});let d=ls(W({key:r.config.apiKey},l)).slice(1),I=await r._getAdditionalHeaders();I["Content-Type"]="application/json",r.languageCode&&(I["X-Firebase-Locale"]=r.languageCode);let v=W({method:e,headers:I},c);return Gf()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&dr(r.emulatorConfig.host)&&(v.credentials="include"),Ro.fetch()(await Tp(r,r.config.apiHost,t,d),v)})}async function vp(r,e,t){r._canInitEmulator=!1;let i=W(W({},dT),e);try{let o=new Lu(r),c=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();let l=await c.json();if("needConfirmation"in l)throw Eo(r,"account-exists-with-different-credential",l);if(c.ok&&!("errorMessage"in l))return l;{let d=c.ok?l.errorMessage:l.error.message,[I,v]=d.split(" : ");if(I==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eo(r,"credential-already-in-use",l);if(I==="EMAIL_EXISTS")throw Eo(r,"email-already-in-use",l);if(I==="USER_DISABLED")throw Eo(r,"user-disabled",l);let b=i[I]||I.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Ep(r,b,v);vn(r,b)}}catch(o){if(o instanceof we)throw o;vn(r,"network-request-failed",{message:String(o)})}}async function mT(r,e,t,i,o={}){let c=await Dr(r,e,t,i,o);return"mfaPendingCredential"in c&&vn(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function Tp(r,e,t,i){let o=`${e}${t}?${i}`,c=r,l=c.config.emulator?Xu(r.config,o):`${r.config.apiScheme}://${o}`;return fT.includes(t)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(l).toString():l}var Lu=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(gr(this.auth,"network-request-failed")),pT.get())})}};function Eo(r,e,t){let i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let o=gr(r,e,i);return o.customData._tokenResponse=t,o}async function gT(r,e){return Dr(r,"POST","/v1/accounts:delete",e)}async function Po(r,e){return Dr(r,"POST","/v1/accounts:lookup",e)}function ds(r){if(r)try{let e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ap(r,e=!1){let t=yt(r),i=await t.getIdToken(e),o=el(i);O(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");let c=typeof o.firebase=="object"?o.firebase:void 0,l=c?.sign_in_provider;return{claims:o,token:i,authTime:ds(Du(o.auth_time)),issuedAtTime:ds(Du(o.iat)),expirationTime:ds(Du(o.exp)),signInProvider:l||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Du(r){return Number(r)*1e3}function el(r){let[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return vo("JWT malformed, contained fewer than 3 sections"),null;try{let o=po(t);return o?JSON.parse(o):(vo("Failed to decode base64 JWT payload"),null)}catch(o){return vo("Caught error parsing JWT payload as JSON",o?.toString()),null}}function sp(r){let e=el(r);return O(e,"internal-error"),O(typeof e.exp<"u","internal-error"),O(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function ps(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof we&&_T(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function _T({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}var Mu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var ms=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ds(this.lastLoginAt),this.creationTime=ds(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Co(r){let e=r.auth,t=await r.getIdToken(),i=await ps(r,Po(e,{idToken:t}));O(i?.users.length,e,"internal-error");let o=i.users[0];r._notifyReloadListener(o);let c=o.providerUserInfo?.length?Sp(o.providerUserInfo):[],l=yT(r.providerData,c),d=r.isAnonymous,I=!(r.email&&o.passwordHash)&&!l?.length,v=d?I:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new ms(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(r,b)}async function bp(r){let e=yt(r);await Co(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yT(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Sp(r){return r.map(i=>{var o=i,{providerId:e}=o,t=Ma(o,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function IT(r,e){let t=await vp(r,{},async()=>{let i=ls({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,l=await Tp(r,o,"/v1/token",`key=${c}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";let I={method:"POST",headers:d,body:i};return r.emulatorConfig&&dr(r.emulatorConfig.host)&&(I.credentials="include"),Ro.fetch()(l,I)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wT(r,e){return Dr(r,"POST","/v2/accounts:revokeToken",Zu(r,e))}var fs=class r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){O(e.idToken,"internal-error"),O(typeof e.idToken<"u","internal-error"),O(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){O(e.length!==0,"internal-error");let t=sp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(O(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:i,refreshToken:o,expiresIn:c}=await IT(e,t);this.updateTokensAndExpiration(i,o,Number(c))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:o,expirationTime:c}=t,l=new r;return i&&(O(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),o&&(O(typeof o=="string","internal-error",{appName:e}),l.accessToken=o),c&&(O(typeof c=="number","internal-error",{appName:e}),l.expirationTime=c),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new r,this.toJSON())}_performRefresh(){return nn("not implemented")}};function wn(r,e){O(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}var En=class r{constructor(c){var l=c,{uid:e,auth:t,stsTokenManager:i}=l,o=Ma(l,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ms(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await ps(this,this.stsTokenManager.getToken(this.auth,e));return O(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Ap(this,e)}reload(){return bp(this)}_assign(e){this!==e&&(O(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>W({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new r(fe(W({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){O(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Co(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qe(this.auth.app))return Promise.reject(mr(this.auth));let e=await this.getIdToken();return await ps(this,gT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return fe(W({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>W({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let i=t.displayName??void 0,o=t.email??void 0,c=t.phoneNumber??void 0,l=t.photoURL??void 0,d=t.tenantId??void 0,I=t._redirectEventId??void 0,v=t.createdAt??void 0,b=t.lastLoginAt??void 0,{uid:S,emailVerified:A,isAnonymous:D,providerData:R,stsTokenManager:x}=t;O(S&&x,e,"internal-error");let N=fs.fromJSON(this.name,x);O(typeof S=="string",e,"internal-error"),wn(i,e.name),wn(o,e.name),O(typeof A=="boolean",e,"internal-error"),O(typeof D=="boolean",e,"internal-error"),wn(c,e.name),wn(l,e.name),wn(d,e.name),wn(I,e.name),wn(v,e.name),wn(b,e.name);let ie=new r({uid:S,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:D,photoURL:l,phoneNumber:c,tenantId:d,stsTokenManager:N,createdAt:v,lastLoginAt:b});return R&&Array.isArray(R)&&(ie.providerData=R.map(H=>W({},H))),I&&(ie._redirectEventId=I),ie}static async _fromIdTokenResponse(e,t,i=!1){let o=new fs;o.updateFromServerResponse(t);let c=new r({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Co(c),c}static async _fromGetAccountInfoResponse(e,t,i){let o=t.users[0];O(o.localId!==void 0,"internal-error");let c=o.providerUserInfo!==void 0?Sp(o.providerUserInfo):[],l=!(o.email&&o.passwordHash)&&!c?.length,d=new fs;d.updateFromIdToken(i);let I=new r({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:l}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new ms(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(I,v),I}};var op=new Map;function rn(r){Tn(r instanceof Function,"Expected a class definition");let e=op.get(r);return e?(Tn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,op.set(r,e),e)}var ET=(()=>{class r{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){let i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}return r.type="NONE",r})(),Fu=ET;function To(r,e,t){return`firebase:${r}:${e}:${t}`}var ko=class r{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:o,name:c}=this.auth;this.fullUserKey=To(this.userKey,o.apiKey,c),this.fullPersistenceKey=To("persistence",o.apiKey,c),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Po(this.auth,{idToken:e}).catch(()=>{});return t?En._fromGetAccountInfoResponse(this.auth,t,e):null}return En._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new r(rn(Fu),e,i);let o=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v),c=o[0]||rn(Fu),l=To(i,e.config.apiKey,e.name),d=null;for(let v of t)try{let b=await v._get(l);if(b){let S;if(typeof b=="string"){let A=await Po(e,{idToken:b}).catch(()=>{});if(!A)break;S=await En._fromGetAccountInfoResponse(e,A,b)}else S=En._fromJSON(e,b);v!==c&&(d=S),c=v;break}}catch{}let I=o.filter(v=>v._shouldAllowMigration);return!c._shouldAllowMigration||!I.length?new r(c,e,i):(c=I[0],d&&await c._set(l,d.toJSON()),await Promise.all(t.map(async v=>{if(v!==c)try{await v._remove(l)}catch{}})),new r(c,e,i))}};function ap(r){let e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kp(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rp(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Dp(e))return"Blackberry";if(Op(e))return"Webos";if(Pp(e))return"Safari";if((e.includes("chrome/")||Cp(e))&&!e.includes("edge/"))return"Chrome";if(Np(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function Rp(r=Ee()){return/firefox\//i.test(r)}function Pp(r=Ee()){let e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cp(r=Ee()){return/crios\//i.test(r)}function kp(r=Ee()){return/iemobile/i.test(r)}function Np(r=Ee()){return/android/i.test(r)}function Dp(r=Ee()){return/blackberry/i.test(r)}function Op(r=Ee()){return/webos/i.test(r)}function tl(r=Ee()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function vT(r=Ee()){return tl(r)&&!!window.navigator?.standalone}function TT(){return Kf()&&document.documentMode===10}function Vp(r=Ee()){return tl(r)||Np(r)||Op(r)||Dp(r)||/windows phone/i.test(r)||kp(r)}function xp(r,e=[]){let t;switch(r){case"Browser":t=ap(Ee());break;case"Worker":t=`${ap(Ee())}-${r}`;break;default:t=r}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${In}/${i}`}var Uu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=c=>new Promise((l,d)=>{try{let I=e(c);l(I)}catch(I){d(I)}});i.onAbort=t,this.queue.push(i);let o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}};async function AT(r,e={}){return Dr(r,"GET","/v2/passwordPolicy",Zu(r,e))}var bT=6,Bu=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bT,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}};var qu=class{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new No(this),this.idTokenSubscription=new No(this),this.beforeStateQueue=new Uu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ko.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Po(this,{idToken:e}),i=await En._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qe(this.app)){let c=this.app.settings.authIdToken;return c?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(l,l))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let c=this.redirectUser?._redirectEventId,l=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!c||c===l)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(c){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return O(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Co(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qe(this.app))return Promise.reject(mr(this));let t=e?yt(e):null;return t&&O(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&O(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qe(this.app)?Promise.reject(mr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qe(this.app)?Promise.reject(mr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await AT(this),t=new Bu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qe("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await wT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&rn(e)||this._popupRedirectResolver;O(t,this,"argument-error"),this.redirectPersistenceManager=await ko.create(this,[rn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};let c=typeof t=="function"?t:t.next.bind(t),l=!1,d=this._isInitialized?Promise.resolve():this._initializationPromise;if(O(d,this,"internal-error"),d.then(()=>{l||c(this.currentUser)}),typeof t=="function"){let I=e.addObserver(t,i,o);return()=>{l=!0,I()}}else{let I=e.addObserver(t);return()=>{l=!0,I()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return O(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xp(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Qe(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cT(`Error while retrieving App Check token: ${e.error}`),e?.token}};function nl(r){return yt(r)}var No=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jf(t=>this.observer=t)}get next(){return O(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ST(r){rl=r}function RT(r){return rl.loadJS(r)}function PT(){return rl.gapiScript}function Lp(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function Mp(r,e){let t=It(r,"auth");if(t.isInitialized()){let o=t.getImmediate(),c=t.getOptions();if(He(c,e??{}))return o;vn(o,"already-initialized")}return t.initialize({options:e})}function CT(r,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(rn);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function Fp(r,e,t){let i=nl(r);O(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let o=!!t?.disableWarnings,c=Up(e),{host:l,port:d}=kT(e),I=d===null?"":`:${d}`,v={url:`${c}//${l}${I}/`},b=Object.freeze({host:l,port:d,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){O(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),O(He(v,i.config.emulator)&&He(b,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=v,i.emulatorConfig=b,i.settings.appVerificationDisabledForTesting=!0,dr(l)?(mo(`${c}//${l}${I}`),go("Auth",!0)):o||NT()}function Up(r){let e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function kT(r){let e=Up(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){let c=o[1];return{host:c,port:cp(i.substr(c.length+1))}}else{let[c,l]=i.split(":");return{host:c,port:cp(l)}}}function cp(r){if(!r)return null;let e=Number(r);return isNaN(e)?null:e}function NT(){function r(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}var Do=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return nn("not implemented")}_getIdTokenResponse(e){return nn("not implemented")}_linkToIdToken(e,t){return nn("not implemented")}_getReauthenticationResolver(e){return nn("not implemented")}};async function Ou(r,e){return mT(r,"POST","/v1/accounts:signInWithIdp",Zu(r,e))}var Oo=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var $u=class extends Oo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var gs=class r{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){let c=await En._fromIdTokenResponse(e,i,o),l=up(i);return new r({user:c,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);let o=up(i);return new r({user:e,providerId:o,_tokenResponse:i,operationType:t})}};function up(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}var ju=class r extends we{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,r.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new r(e,t,i,o)}};function Bp(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?ju._fromErrorAndOperation(r,c,e,i):c})}async function DT(r,e,t=!1){let i=await ps(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return gs._forOperation(r,"link",i)}async function OT(r,e,t=!1){let{auth:i}=r;if(Qe(i.app))return Promise.reject(mr(i));let o="reauthenticate";try{let c=await ps(r,Bp(i,o,e,r),t);O(c.idToken,i,"internal-error");let l=el(c.idToken);O(l,i,"internal-error");let{sub:d}=l;return O(r.uid===d,i,"user-mismatch"),gs._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&vn(i,"user-mismatch"),c}}async function VT(r,e,t=!1){if(Qe(r.app))return Promise.reject(mr(r));let i="signIn",o=await Bp(r,i,e),c=await gs._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(c.user),c}function qp(r,e,t,i){return yt(r).onIdTokenChanged(e,t,i)}function $p(r,e,t){return yt(r).beforeAuthStateChanged(e,t)}var Vo="__sak";var xo=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vo,"1"),this.storage.removeItem(Vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var xT=1e3,LT=10,MT=(()=>{class r extends xo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vp(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let o=this.storage.getItem(i),c=this.localCache[i];o!==c&&t(i,c,o)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,I,v)=>{this.notifyListeners(d,v)});return}let o=t.key;i?this.detachListener():this.stopPolling();let c=()=>{let d=this.storage.getItem(o);!i&&this.localCache[o]===d||this.notifyListeners(o,d)},l=this.storage.getItem(o);TT()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(c,LT):c()}notifyListeners(t,i){this.localCache[t]=i;let o=this.listeners[t];if(o)for(let c of Array.from(o))c(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:o}),!0)})},xT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){let i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}return r.type="LOCAL",r})(),jp=MT;var FT=(()=>{class r extends xo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return r.type="SESSION",r})(),il=FT;function UT(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var BT=(()=>{class r{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(c=>c.isListeningto(t));if(i)return i;let o=new r(t);return this.receivers.push(o),o}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let i=t,{eventId:o,eventType:c,data:l}=i.data,d=this.handlersMap[c];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:c});let I=Array.from(d).map(async b=>b(i.origin,l)),v=await UT(I);i.ports[0].postMessage({status:"done",eventId:o,eventType:c,response:v})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}r.receivers=[];return r})();function zp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}var zu=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){let o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,l;return new Promise((d,I)=>{let v=zp("",20);o.port1.start();let b=setTimeout(()=>{I(new Error("unsupported_event"))},i);l={messageChannel:o,onMessage(S){let A=S;if(A.data.eventId===v)switch(A.data.status){case"ack":clearTimeout(b),c=setTimeout(()=>{I(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),d(A.data.response);break;default:clearTimeout(b),clearTimeout(c),I(new Error("invalid_response"));break}}},this.handlers.add(l),o.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[o.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}};function Rt(){return window}function qT(r){Rt().location.href=r}function Gp(){return typeof Rt().WorkerGlobalScope<"u"&&typeof Rt().importScripts=="function"}async function $T(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jT(){return navigator?.serviceWorker?.controller||null}function zT(){return Gp()?self:null}var Wp="firebaseLocalStorageDb",GT=1,Lo="firebaseLocalStorage",Kp="fbase_key",yr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Fo(r,e){return r.transaction([Lo],e?"readwrite":"readonly").objectStore(Lo)}function WT(){let r=indexedDB.deleteDatabase(Wp);return new yr(r).toPromise()}function Gu(){let r=indexedDB.open(Wp,GT);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{let i=r.result;try{i.createObjectStore(Lo,{keyPath:Kp})}catch(o){t(o)}}),r.addEventListener("success",async()=>{let i=r.result;i.objectStoreNames.contains(Lo)?e(i):(i.close(),await WT(),e(await Gu()))})})}async function lp(r,e,t){let i=Fo(r,!0).put({[Kp]:e,value:t});return new yr(i).toPromise()}async function KT(r,e){let t=Fo(r,!1).get(e),i=await new yr(t).toPromise();return i===void 0?null:i.value}function hp(r,e){let t=Fo(r,!0).delete(e);return new yr(t).toPromise()}var HT=800,QT=3,JT=(()=>{class r{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gu(),this.db)}async _withRetries(t){let i=0;for(;;)try{let o=await this._openDb();return await t(o)}catch(o){if(i++>QT)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=BT._getInstance(zT()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await $T(),!this.activeServiceWorker)return;this.sender=new zu(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||jT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await Gu();return await lp(t,Vo,"1"),await hp(t,Vo),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(o=>lp(o,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){let i=await this._withRetries(o=>KT(o,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>hp(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(c=>{let l=Fo(c,!1).getAll();return new yr(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],o=new Set;if(t.length!==0)for(let{fbase_key:c,value:l}of t)o.add(c),JSON.stringify(this.localCache[c])!==JSON.stringify(l)&&(this.notifyListeners(c,l),i.push(c));for(let c of Object.keys(this.localCache))this.localCache[c]&&!o.has(c)&&(this.notifyListeners(c,null),i.push(c));return i}notifyListeners(t,i){this.localCache[t]=i;let o=this.listeners[t];if(o)for(let c of Array.from(o))c(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return r.type="LOCAL",r})(),Hp=JT;var cN=Lp("rcb"),uN=new _r(3e4,6e4);function YT(r,e){return e?rn(e):(O(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}var _s=class extends Do{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ou(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ou(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ou(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function XT(r){return VT(r.auth,new _s(r),r.bypassAuthState)}function ZT(r){let{auth:e,user:t}=r;return O(t,e,"internal-error"),OT(t,new _s(r),r.bypassAuthState)}async function eA(r){let{auth:e,user:t}=r;return O(t,e,"internal-error"),DT(t,new _s(r),r.bypassAuthState)}var Wu=class{constructor(e,t,i,o,c=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:i,postBody:o,tenantId:c,error:l,type:d}=e;if(l){this.reject(l);return}let I={auth:this.auth,requestUri:t,sessionId:i,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(I))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XT;case"linkViaPopup":case"linkViaRedirect":return eA;case"reauthViaPopup":case"reauthViaRedirect":return ZT;default:vn(this.auth,"internal-error")}}resolve(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var lN=new _r(2e3,1e4);var tA="pendingRedirect",Ao=new Map,Ku=class extends Wu{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Ao.get(this.auth._key());if(!e){try{let i=await nA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ao.set(this.auth._key(),e)}return this.bypassAuthState||Ao.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function nA(r,e){let t=sA(e),i=iA(r);if(!await i._isAvailable())return!1;let o=await i._get(t)==="true";return await i._remove(t),o}function rA(r,e){Ao.set(r._key(),e)}function iA(r){return rn(r._redirectPersistence)}function sA(r){return To(tA,r.config.apiKey,r.name)}async function oA(r,e,t=!1){if(Qe(r.app))return Promise.reject(mr(r));let i=nl(r),o=YT(i,e),l=await new Ku(i,o,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}var aA=600*1e3,Hu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Qp(e)){let i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(gr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=aA&&this.cachedEventUids.clear(),this.cachedEventUids.has(dp(e))}saveEventToCache(e){this.cachedEventUids.add(dp(e)),this.lastProcessedEventTime=Date.now()}};function dp(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Qp({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function cA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Qp(r);default:return!1}}async function uA(r,e={}){return Dr(r,"GET","/v1/projects",e)}var lA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hA=/^https?/;async function dA(r){if(r.config.emulator)return;let{authorizedDomains:e}=await uA(r);for(let t of e)try{if(fA(t))return}catch{}vn(r,"unauthorized-domain")}function fA(r){let e=xu(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){let l=new URL(r);return l.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!hA.test(t))return!1;if(lA.test(r))return i===r;let o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var pA=new _r(3e4,6e4);function fp(){let r=Rt().___jsl;if(r?.H){for(let e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function mA(r){return new Promise((e,t)=>{function i(){fp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fp(),t(gr(r,"network-request-failed"))},timeout:pA.get()})}if(Rt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Rt().gapi?.load)i();else{let o=Lp("iframefcb");return Rt()[o]=()=>{gapi.load?i():t(gr(r,"network-request-failed"))},RT(`${PT()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw bo=null,e})}var bo=null;function gA(r){return bo=bo||mA(r),bo}var _A=new _r(5e3,15e3),yA="__/auth/iframe",IA="emulator/auth/iframe",wA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vA(r){let e=r.config;O(e.authDomain,r,"auth-domain-config-required");let t=e.emulator?Xu(e,IA):`https://${r.config.authDomain}/${yA}`,i={apiKey:e.apiKey,appName:r.name,v:In},o=EA.get(r.config.apiHost);o&&(i.eid=o);let c=r._getFrameworks();return c.length&&(i.fw=c.join(",")),`${t}?${ls(i).slice(1)}`}async function TA(r){let e=await gA(r),t=Rt().gapi;return O(t,r,"internal-error"),e.open({where:document.body,url:vA(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wA,dontclear:!0},i=>new Promise(async(o,c)=>{await i.restyle({setHideOnLeave:!1});let l=gr(r,"network-request-failed"),d=Rt().setTimeout(()=>{c(l)},_A.get());function I(){Rt().clearTimeout(d),o(i)}i.ping(I).then(I,()=>{c(l)})}))}var AA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bA=500,SA=600,RA="_blank",PA="http://localhost",Mo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function CA(r,e,t,i=bA,o=SA){let c=Math.max((window.screen.availHeight-o)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString(),d="",I=fe(W({},AA),{width:i.toString(),height:o.toString(),top:c,left:l}),v=Ee().toLowerCase();t&&(d=Cp(v)?RA:t),Rp(v)&&(e=e||PA,I.scrollbars="yes");let b=Object.entries(I).reduce((A,[D,R])=>`${A}${D}=${R},`,"");if(vT(v)&&d!=="_self")return kA(e||"",d),new Mo(null);let S=window.open(e||"",d,b);O(S,r,"popup-blocked");try{S.focus()}catch{}return new Mo(S)}function kA(r,e){let t=document.createElement("a");t.href=r,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var NA="__/auth/handler",DA="emulator/auth/handler",OA=encodeURIComponent("fac");async function pp(r,e,t,i,o,c){O(r.config.authDomain,r,"auth-domain-config-required"),O(r.config.apiKey,r,"invalid-api-key");let l={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:In,eventId:o};if(e instanceof Oo){e.setDefaultLanguage(r.languageCode),l.providerId=e.providerId||"",Qf(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(let[b,S]of Object.entries(c||{}))l[b]=S}if(e instanceof $u){let b=e.getScopes().filter(S=>S!=="");b.length>0&&(l.scopes=b.join(","))}r.tenantId&&(l.tid=r.tenantId);let d=l;for(let b of Object.keys(d))d[b]===void 0&&delete d[b];let I=await r._getAppCheckToken(),v=I?`#${OA}=${encodeURIComponent(I)}`:"";return`${VA(r)}?${ls(d).slice(1)}${v}`}function VA({config:r}){return r.emulator?Xu(r,DA):`https://${r.authDomain}/${NA}`}var Vu="webStorageSupport",Qu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=il,this._completeRedirectFn=oA,this._overrideRedirectResult=rA}async _openPopup(e,t,i,o){Tn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let c=await pp(e,t,i,xu(),o);return CA(e,c,zp())}async _openRedirect(e,t,i,o){await this._originValidation(e);let c=await pp(e,t,i,xu(),o);return qT(c),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:o,promise:c}=this.eventManagers[t];return o?Promise.resolve(o):(Tn(c,"If manager is not set, promise should be"),c)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){let t=await TA(e),i=new Hu(e);return t.register("authEvent",o=>(O(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vu,{type:Vu},o=>{let c=o?.[0]?.[Vu];c!==void 0&&t(!!c),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=dA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Vp()||Pp()||tl()}},Jp=Qu;var mp="@firebase/auth",gp="1.11.0";var Ju=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){O(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function xA(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LA(r){Oe(new pe("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=i.options;O(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});let I={apiKey:l,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xp(r)},v=new qu(i,o,c,I);return CT(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Oe(new pe("auth-internal",e=>{let t=nl(e.getProvider("auth").getImmediate());return(i=>new Ju(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ve(mp,gp,xA(r)),ve(mp,gp,"esm2020")}var MA=300,FA=wu("authIdTokenMaxAge")||MA,_p=null,UA=r=>async e=>{let t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>FA)return;let o=t?.token;_p!==o&&(_p=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function sl(r=pr()){let e=It(r,"auth");if(e.isInitialized())return e.getImmediate();let t=Mp(r,{popupRedirectResolver:Jp,persistence:[Hp,jp,il]}),i=wu("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let c=new URL(i,location.origin);if(location.origin===c.origin){let l=UA(c.toString());$p(t,l,()=>l(t.currentUser)),qp(t,d=>l(d))}}let o=yu("auth");return o&&Fp(t,`http://${o}`),t}function BA(){return document.getElementsByTagName("head")?.[0]??document}ST({loadJS(r){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{let c=gr("internal-error");c.customData=o,t(c)},i.type="text/javascript",i.charset="UTF-8",BA().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LA("Browser");var Yp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xp={};var Uo,Zp;(function(){var r;function e(y,h){function p(){}p.prototype=h.prototype,y.D=h.prototype,y.prototype=new p,y.prototype.constructor=y,y.C=function(m,g,w){for(var f=Array(arguments.length-2),le=2;le<arguments.length;le++)f[le-2]=arguments[le];return h.prototype[g].apply(m,f)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(y,h,p){p||(p=0);var m=Array(16);if(typeof h=="string")for(var g=0;16>g;++g)m[g]=h.charCodeAt(p++)|h.charCodeAt(p++)<<8|h.charCodeAt(p++)<<16|h.charCodeAt(p++)<<24;else for(g=0;16>g;++g)m[g]=h[p++]|h[p++]<<8|h[p++]<<16|h[p++]<<24;h=y.g[0],p=y.g[1],g=y.g[2];var w=y.g[3],f=h+(w^p&(g^w))+m[0]+3614090360&4294967295;h=p+(f<<7&4294967295|f>>>25),f=w+(g^h&(p^g))+m[1]+3905402710&4294967295,w=h+(f<<12&4294967295|f>>>20),f=g+(p^w&(h^p))+m[2]+606105819&4294967295,g=w+(f<<17&4294967295|f>>>15),f=p+(h^g&(w^h))+m[3]+3250441966&4294967295,p=g+(f<<22&4294967295|f>>>10),f=h+(w^p&(g^w))+m[4]+4118548399&4294967295,h=p+(f<<7&4294967295|f>>>25),f=w+(g^h&(p^g))+m[5]+1200080426&4294967295,w=h+(f<<12&4294967295|f>>>20),f=g+(p^w&(h^p))+m[6]+2821735955&4294967295,g=w+(f<<17&4294967295|f>>>15),f=p+(h^g&(w^h))+m[7]+4249261313&4294967295,p=g+(f<<22&4294967295|f>>>10),f=h+(w^p&(g^w))+m[8]+1770035416&4294967295,h=p+(f<<7&4294967295|f>>>25),f=w+(g^h&(p^g))+m[9]+2336552879&4294967295,w=h+(f<<12&4294967295|f>>>20),f=g+(p^w&(h^p))+m[10]+4294925233&4294967295,g=w+(f<<17&4294967295|f>>>15),f=p+(h^g&(w^h))+m[11]+2304563134&4294967295,p=g+(f<<22&4294967295|f>>>10),f=h+(w^p&(g^w))+m[12]+1804603682&4294967295,h=p+(f<<7&4294967295|f>>>25),f=w+(g^h&(p^g))+m[13]+4254626195&4294967295,w=h+(f<<12&4294967295|f>>>20),f=g+(p^w&(h^p))+m[14]+2792965006&4294967295,g=w+(f<<17&4294967295|f>>>15),f=p+(h^g&(w^h))+m[15]+1236535329&4294967295,p=g+(f<<22&4294967295|f>>>10),f=h+(g^w&(p^g))+m[1]+4129170786&4294967295,h=p+(f<<5&4294967295|f>>>27),f=w+(p^g&(h^p))+m[6]+3225465664&4294967295,w=h+(f<<9&4294967295|f>>>23),f=g+(h^p&(w^h))+m[11]+643717713&4294967295,g=w+(f<<14&4294967295|f>>>18),f=p+(w^h&(g^w))+m[0]+3921069994&4294967295,p=g+(f<<20&4294967295|f>>>12),f=h+(g^w&(p^g))+m[5]+3593408605&4294967295,h=p+(f<<5&4294967295|f>>>27),f=w+(p^g&(h^p))+m[10]+38016083&4294967295,w=h+(f<<9&4294967295|f>>>23),f=g+(h^p&(w^h))+m[15]+3634488961&4294967295,g=w+(f<<14&4294967295|f>>>18),f=p+(w^h&(g^w))+m[4]+3889429448&4294967295,p=g+(f<<20&4294967295|f>>>12),f=h+(g^w&(p^g))+m[9]+568446438&4294967295,h=p+(f<<5&4294967295|f>>>27),f=w+(p^g&(h^p))+m[14]+3275163606&4294967295,w=h+(f<<9&4294967295|f>>>23),f=g+(h^p&(w^h))+m[3]+4107603335&4294967295,g=w+(f<<14&4294967295|f>>>18),f=p+(w^h&(g^w))+m[8]+1163531501&4294967295,p=g+(f<<20&4294967295|f>>>12),f=h+(g^w&(p^g))+m[13]+2850285829&4294967295,h=p+(f<<5&4294967295|f>>>27),f=w+(p^g&(h^p))+m[2]+4243563512&4294967295,w=h+(f<<9&4294967295|f>>>23),f=g+(h^p&(w^h))+m[7]+1735328473&4294967295,g=w+(f<<14&4294967295|f>>>18),f=p+(w^h&(g^w))+m[12]+2368359562&4294967295,p=g+(f<<20&4294967295|f>>>12),f=h+(p^g^w)+m[5]+4294588738&4294967295,h=p+(f<<4&4294967295|f>>>28),f=w+(h^p^g)+m[8]+2272392833&4294967295,w=h+(f<<11&4294967295|f>>>21),f=g+(w^h^p)+m[11]+1839030562&4294967295,g=w+(f<<16&4294967295|f>>>16),f=p+(g^w^h)+m[14]+4259657740&4294967295,p=g+(f<<23&4294967295|f>>>9),f=h+(p^g^w)+m[1]+2763975236&4294967295,h=p+(f<<4&4294967295|f>>>28),f=w+(h^p^g)+m[4]+1272893353&4294967295,w=h+(f<<11&4294967295|f>>>21),f=g+(w^h^p)+m[7]+4139469664&4294967295,g=w+(f<<16&4294967295|f>>>16),f=p+(g^w^h)+m[10]+3200236656&4294967295,p=g+(f<<23&4294967295|f>>>9),f=h+(p^g^w)+m[13]+681279174&4294967295,h=p+(f<<4&4294967295|f>>>28),f=w+(h^p^g)+m[0]+3936430074&4294967295,w=h+(f<<11&4294967295|f>>>21),f=g+(w^h^p)+m[3]+3572445317&4294967295,g=w+(f<<16&4294967295|f>>>16),f=p+(g^w^h)+m[6]+76029189&4294967295,p=g+(f<<23&4294967295|f>>>9),f=h+(p^g^w)+m[9]+3654602809&4294967295,h=p+(f<<4&4294967295|f>>>28),f=w+(h^p^g)+m[12]+3873151461&4294967295,w=h+(f<<11&4294967295|f>>>21),f=g+(w^h^p)+m[15]+530742520&4294967295,g=w+(f<<16&4294967295|f>>>16),f=p+(g^w^h)+m[2]+3299628645&4294967295,p=g+(f<<23&4294967295|f>>>9),f=h+(g^(p|~w))+m[0]+4096336452&4294967295,h=p+(f<<6&4294967295|f>>>26),f=w+(p^(h|~g))+m[7]+1126891415&4294967295,w=h+(f<<10&4294967295|f>>>22),f=g+(h^(w|~p))+m[14]+2878612391&4294967295,g=w+(f<<15&4294967295|f>>>17),f=p+(w^(g|~h))+m[5]+4237533241&4294967295,p=g+(f<<21&4294967295|f>>>11),f=h+(g^(p|~w))+m[12]+1700485571&4294967295,h=p+(f<<6&4294967295|f>>>26),f=w+(p^(h|~g))+m[3]+2399980690&4294967295,w=h+(f<<10&4294967295|f>>>22),f=g+(h^(w|~p))+m[10]+4293915773&4294967295,g=w+(f<<15&4294967295|f>>>17),f=p+(w^(g|~h))+m[1]+2240044497&4294967295,p=g+(f<<21&4294967295|f>>>11),f=h+(g^(p|~w))+m[8]+1873313359&4294967295,h=p+(f<<6&4294967295|f>>>26),f=w+(p^(h|~g))+m[15]+4264355552&4294967295,w=h+(f<<10&4294967295|f>>>22),f=g+(h^(w|~p))+m[6]+2734768916&4294967295,g=w+(f<<15&4294967295|f>>>17),f=p+(w^(g|~h))+m[13]+1309151649&4294967295,p=g+(f<<21&4294967295|f>>>11),f=h+(g^(p|~w))+m[4]+4149444226&4294967295,h=p+(f<<6&4294967295|f>>>26),f=w+(p^(h|~g))+m[11]+3174756917&4294967295,w=h+(f<<10&4294967295|f>>>22),f=g+(h^(w|~p))+m[2]+718787259&4294967295,g=w+(f<<15&4294967295|f>>>17),f=p+(w^(g|~h))+m[9]+3951481745&4294967295,y.g[0]=y.g[0]+h&4294967295,y.g[1]=y.g[1]+(g+(f<<21&4294967295|f>>>11))&4294967295,y.g[2]=y.g[2]+g&4294967295,y.g[3]=y.g[3]+w&4294967295}i.prototype.u=function(y,h){h===void 0&&(h=y.length);for(var p=h-this.blockSize,m=this.B,g=this.h,w=0;w<h;){if(g==0)for(;w<=p;)o(this,y,w),w+=this.blockSize;if(typeof y=="string"){for(;w<h;)if(m[g++]=y.charCodeAt(w++),g==this.blockSize){o(this,m),g=0;break}}else for(;w<h;)if(m[g++]=y[w++],g==this.blockSize){o(this,m),g=0;break}}this.h=g,this.o+=h},i.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var h=1;h<y.length-8;++h)y[h]=0;var p=8*this.o;for(h=y.length-8;h<y.length;++h)y[h]=p&255,p/=256;for(this.u(y),y=Array(16),h=p=0;4>h;++h)for(var m=0;32>m;m+=8)y[p++]=this.g[h]>>>m&255;return y};function c(y,h){var p=d;return Object.prototype.hasOwnProperty.call(p,y)?p[y]:p[y]=h(y)}function l(y,h){this.h=h;for(var p=[],m=!0,g=y.length-1;0<=g;g--){var w=y[g]|0;m&&w==h||(p[g]=w,m=!1)}this.g=p}var d={};function I(y){return-128<=y&&128>y?c(y,function(h){return new l([h|0],0>h?-1:0)}):new l([y|0],0>y?-1:0)}function v(y){if(isNaN(y)||!isFinite(y))return S;if(0>y)return N(v(-y));for(var h=[],p=1,m=0;y>=p;m++)h[m]=y/p|0,p*=4294967296;return new l(h,0)}function b(y,h){if(y.length==0)throw Error("number format error: empty string");if(h=h||10,2>h||36<h)throw Error("radix out of range: "+h);if(y.charAt(0)=="-")return N(b(y.substring(1),h));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var p=v(Math.pow(h,8)),m=S,g=0;g<y.length;g+=8){var w=Math.min(8,y.length-g),f=parseInt(y.substring(g,g+w),h);8>w?(w=v(Math.pow(h,w)),m=m.j(w).add(v(f))):(m=m.j(p),m=m.add(v(f)))}return m}var S=I(0),A=I(1),D=I(16777216);r=l.prototype,r.m=function(){if(x(this))return-N(this).m();for(var y=0,h=1,p=0;p<this.g.length;p++){var m=this.i(p);y+=(0<=m?m:4294967296+m)*h,h*=4294967296}return y},r.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(R(this))return"0";if(x(this))return"-"+N(this).toString(y);for(var h=v(Math.pow(y,6)),p=this,m="";;){var g=oe(p,h).g;p=ie(p,g.j(h));var w=((0<p.g.length?p.g[0]:p.h)>>>0).toString(y);if(p=g,R(p))return w+m;for(;6>w.length;)w="0"+w;m=w+m}},r.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function R(y){if(y.h!=0)return!1;for(var h=0;h<y.g.length;h++)if(y.g[h]!=0)return!1;return!0}function x(y){return y.h==-1}r.l=function(y){return y=ie(this,y),x(y)?-1:R(y)?0:1};function N(y){for(var h=y.g.length,p=[],m=0;m<h;m++)p[m]=~y.g[m];return new l(p,~y.h).add(A)}r.abs=function(){return x(this)?N(this):this},r.add=function(y){for(var h=Math.max(this.g.length,y.g.length),p=[],m=0,g=0;g<=h;g++){var w=m+(this.i(g)&65535)+(y.i(g)&65535),f=(w>>>16)+(this.i(g)>>>16)+(y.i(g)>>>16);m=f>>>16,w&=65535,f&=65535,p[g]=f<<16|w}return new l(p,p[p.length-1]&-2147483648?-1:0)};function ie(y,h){return y.add(N(h))}r.j=function(y){if(R(this)||R(y))return S;if(x(this))return x(y)?N(this).j(N(y)):N(N(this).j(y));if(x(y))return N(this.j(N(y)));if(0>this.l(D)&&0>y.l(D))return v(this.m()*y.m());for(var h=this.g.length+y.g.length,p=[],m=0;m<2*h;m++)p[m]=0;for(m=0;m<this.g.length;m++)for(var g=0;g<y.g.length;g++){var w=this.i(m)>>>16,f=this.i(m)&65535,le=y.i(g)>>>16,Je=y.i(g)&65535;p[2*m+2*g]+=f*Je,H(p,2*m+2*g),p[2*m+2*g+1]+=w*Je,H(p,2*m+2*g+1),p[2*m+2*g+1]+=f*le,H(p,2*m+2*g+1),p[2*m+2*g+2]+=w*le,H(p,2*m+2*g+2)}for(m=0;m<h;m++)p[m]=p[2*m+1]<<16|p[2*m];for(m=h;m<2*h;m++)p[m]=0;return new l(p,0)};function H(y,h){for(;(y[h]&65535)!=y[h];)y[h+1]+=y[h]>>>16,y[h]&=65535,h++}function q(y,h){this.g=y,this.h=h}function oe(y,h){if(R(h))throw Error("division by zero");if(R(y))return new q(S,S);if(x(y))return h=oe(N(y),h),new q(N(h.g),N(h.h));if(x(h))return h=oe(y,N(h)),new q(N(h.g),h.h);if(30<y.g.length){if(x(y)||x(h))throw Error("slowDivide_ only works with positive integers.");for(var p=A,m=h;0>=m.l(y);)p=je(p),m=je(m);var g=re(p,1),w=re(m,1);for(m=re(m,2),p=re(p,2);!R(m);){var f=w.add(m);0>=f.l(y)&&(g=g.add(p),w=f),m=re(m,1),p=re(p,1)}return h=ie(y,g.j(h)),new q(g,h)}for(g=S;0<=y.l(h);){for(p=Math.max(1,Math.floor(y.m()/h.m())),m=Math.ceil(Math.log(p)/Math.LN2),m=48>=m?1:Math.pow(2,m-48),w=v(p),f=w.j(h);x(f)||0<f.l(y);)p-=m,w=v(p),f=w.j(h);R(w)&&(w=A),g=g.add(w),y=ie(y,f)}return new q(g,y)}r.A=function(y){return oe(this,y).h},r.and=function(y){for(var h=Math.max(this.g.length,y.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)&y.i(m);return new l(p,this.h&y.h)},r.or=function(y){for(var h=Math.max(this.g.length,y.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)|y.i(m);return new l(p,this.h|y.h)},r.xor=function(y){for(var h=Math.max(this.g.length,y.g.length),p=[],m=0;m<h;m++)p[m]=this.i(m)^y.i(m);return new l(p,this.h^y.h)};function je(y){for(var h=y.g.length+1,p=[],m=0;m<h;m++)p[m]=y.i(m)<<1|y.i(m-1)>>>31;return new l(p,y.h)}function re(y,h){var p=h>>5;h%=32;for(var m=y.g.length-p,g=[],w=0;w<m;w++)g[w]=0<h?y.i(w+p)>>>h|y.i(w+p+1)<<32-h:y.i(w+p);return new l(g,y.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Zp=Xp.Md5=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=v,l.fromString=b,Uo=Xp.Integer=l}).apply(typeof Yp<"u"?Yp:typeof self<"u"?self:typeof window<"u"?window:{});var Bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sn={};var em,qA,tm,nm,rm,im,sm,om,am;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(n,s,a){return n==Array.prototype||n==Object.prototype||(n[s]=a.value),n};function t(n){n=[typeof globalThis=="object"&&globalThis,n,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bo=="object"&&Bo];for(var s=0;s<n.length;++s){var a=n[s];if(a&&a.Math==Math)return a}throw Error("Cannot find global object")}var i=t(this);function o(n,s){if(s)e:{var a=i;n=n.split(".");for(var u=0;u<n.length-1;u++){var _=n[u];if(!(_ in a))break e;a=a[_]}n=n[n.length-1],u=a[n],s=s(u),s!=u&&s!=null&&e(a,n,{configurable:!0,writable:!0,value:s})}}function c(n,s){n instanceof String&&(n+="");var a=0,u=!1,_={next:function(){if(!u&&a<n.length){var E=a++;return{value:s(E,n[E]),done:!1}}return u=!0,{done:!0,value:void 0}}};return _[Symbol.iterator]=function(){return _},_}o("Array.prototype.values",function(n){return n||function(){return c(this,function(s,a){return a})}});var l=l||{},d=this||self;function I(n){var s=typeof n;return s=s!="object"?s:n?Array.isArray(n)?"array":s:"null",s=="array"||s=="object"&&typeof n.length=="number"}function v(n){var s=typeof n;return s=="object"&&n!=null||s=="function"}function b(n,s,a){return n.call.apply(n.bind,arguments)}function S(n,s,a){if(!n)throw Error();if(2<arguments.length){var u=Array.prototype.slice.call(arguments,2);return function(){var _=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_,u),n.apply(s,_)}}return function(){return n.apply(s,arguments)}}function A(n,s,a){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?b:S,A.apply(null,arguments)}function D(n,s){var a=Array.prototype.slice.call(arguments,1);return function(){var u=a.slice();return u.push.apply(u,arguments),n.apply(this,u)}}function R(n,s){function a(){}a.prototype=s.prototype,n.aa=s.prototype,n.prototype=new a,n.prototype.constructor=n,n.Qb=function(u,_,E){for(var T=Array(arguments.length-2),C=2;C<arguments.length;C++)T[C-2]=arguments[C];return s.prototype[_].apply(u,T)}}function x(n){let s=n.length;if(0<s){let a=Array(s);for(let u=0;u<s;u++)a[u]=n[u];return a}return[]}function N(n,s){for(let a=1;a<arguments.length;a++){let u=arguments[a];if(I(u)){let _=n.length||0,E=u.length||0;n.length=_+E;for(let T=0;T<E;T++)n[_+T]=u[T]}else n.push(u)}}class ie{constructor(s,a){this.i=s,this.j=a,this.h=0,this.g=null}get(){let s;return 0<this.h?(this.h--,s=this.g,this.g=s.next,s.next=null):s=this.i(),s}}function H(n){return/^[\s\xa0]*$/.test(n)}function q(){var n=d.navigator;return n&&(n=n.userAgent)?n:""}function oe(n){return oe[" "](n),n}oe[" "]=function(){};var je=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function re(n,s,a){for(let u in n)s.call(a,n[u],u,n)}function y(n,s){for(let a in n)s.call(void 0,n[a],a,n)}function h(n){let s={};for(let a in n)s[a]=n[a];return s}let p="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function m(n,s){let a,u;for(let _=1;_<arguments.length;_++){u=arguments[_];for(a in u)n[a]=u[a];for(let E=0;E<p.length;E++)a=p[E],Object.prototype.hasOwnProperty.call(u,a)&&(n[a]=u[a])}}function g(n){var s=1;n=n.split(":");let a=[];for(;0<s&&n.length;)a.push(n.shift()),s--;return n.length&&a.push(n.join(":")),a}function w(n){d.setTimeout(()=>{throw n},0)}function f(){var n=bn;let s=null;return n.g&&(s=n.g,n.g=n.g.next,n.g||(n.h=null),s.next=null),s}class le{constructor(){this.h=this.g=null}add(s,a){let u=Je.get();u.set(s,a),this.h?this.h.next=u:this.g=u,this.h=u}}var Je=new ie(()=>new ra,n=>n.reset());class ra{constructor(){this.next=this.g=this.h=null}set(s,a){this.h=s,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}let Ye,Xe=!1,bn=new le,Ur=()=>{let n=d.Promise.resolve(void 0);Ye=()=>{n.then(ia)}};var ia=()=>{for(var n;n=f();){try{n.h.call(n.g)}catch(a){w(a)}var s=Je;s.j(n),100>s.h&&(s.h++,n.next=s.g,s.g=n)}Xe=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(n,s){this.type=n,this.g=this.target=s,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var sa=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var n=!1,s=Object.defineProperty({},"passive",{get:function(){n=!0}});try{let a=()=>{};d.addEventListener("test",a,s),d.removeEventListener("test",a,s)}catch{}return n})();function Ze(n,s){if($.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var a=this.type=n.type,u=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=s,s=n.relatedTarget){if(je){e:{try{oe(s.nodeName);var _=!0;break e}catch{}_=!1}_||(s=null)}}else a=="mouseover"?s=n.fromElement:a=="mouseout"&&(s=n.toElement);this.relatedTarget=s,u?(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:oa[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ze.aa.h.call(this)}}R(Ze,$);var oa={2:"touch",3:"pen",4:"mouse"};Ze.prototype.h=function(){Ze.aa.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),aa=0;function ca(n,s,a,u,_){this.listener=n,this.proxy=null,this.src=s,this.type=a,this.capture=!!u,this.ha=_,this.key=++aa,this.da=this.fa=!1}function kt(n){n.da=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Nt(n){this.src=n,this.g={},this.h=0}Nt.prototype.add=function(n,s,a,u,_){var E=n.toString();n=this.g[E],n||(n=this.g[E]=[],this.h++);var T=Rn(n,s,u,_);return-1<T?(s=n[T],a||(s.fa=!1)):(s=new ca(s,this.src,E,!!u,_),s.fa=a,n.push(s)),s};function Sn(n,s){var a=s.type;if(a in n.g){var u=n.g[a],_=Array.prototype.indexOf.call(u,s,void 0),E;(E=0<=_)&&Array.prototype.splice.call(u,_,1),E&&(kt(s),n.g[a].length==0&&(delete n.g[a],n.h--))}}function Rn(n,s,a,u){for(var _=0;_<n.length;++_){var E=n[_];if(!E.da&&E.listener==s&&E.capture==!!a&&E.ha==u)return _}return-1}var Pn="closure_lm_"+(1e6*Math.random()|0),Cn={};function Br(n,s,a,u,_){if(u&&u.once)return $r(n,s,a,u,_);if(Array.isArray(s)){for(var E=0;E<s.length;E++)Br(n,s[E],a,u,_);return null}return a=On(a),n&&n[et]?n.K(s,a,v(u)?!!u.capture:!!u,_):qr(n,s,a,!1,u,_)}function qr(n,s,a,u,_,E){if(!s)throw Error("Invalid event type");var T=v(_)?!!_.capture:!!_,C=Nn(n);if(C||(n[Pn]=C=new Nt(n)),a=C.add(s,a,u,T,E),a.proxy)return a;if(u=ua(),a.proxy=u,u.src=n,u.listener=a,n.addEventListener)sa||(_=T),_===void 0&&(_=!1),n.addEventListener(s.toString(),u,_);else if(n.attachEvent)n.attachEvent(zr(s.toString()),u);else if(n.addListener&&n.removeListener)n.addListener(u);else throw Error("addEventListener and attachEvent are unavailable.");return a}function ua(){function n(a){return s.call(n.src,n.listener,a)}let s=la;return n}function $r(n,s,a,u,_){if(Array.isArray(s)){for(var E=0;E<s.length;E++)$r(n,s[E],a,u,_);return null}return a=On(a),n&&n[et]?n.L(s,a,v(u)?!!u.capture:!!u,_):qr(n,s,a,!0,u,_)}function jr(n,s,a,u,_){if(Array.isArray(s))for(var E=0;E<s.length;E++)jr(n,s[E],a,u,_);else u=v(u)?!!u.capture:!!u,a=On(a),n&&n[et]?(n=n.i,s=String(s).toString(),s in n.g&&(E=n.g[s],a=Rn(E,a,u,_),-1<a&&(kt(E[a]),Array.prototype.splice.call(E,a,1),E.length==0&&(delete n.g[s],n.h--)))):n&&(n=Nn(n))&&(s=n.g[s.toString()],n=-1,s&&(n=Rn(s,a,u,_)),(a=-1<n?s[n]:null)&&kn(a))}function kn(n){if(typeof n!="number"&&n&&!n.da){var s=n.src;if(s&&s[et])Sn(s.i,n);else{var a=n.type,u=n.proxy;s.removeEventListener?s.removeEventListener(a,u,n.capture):s.detachEvent?s.detachEvent(zr(a),u):s.addListener&&s.removeListener&&s.removeListener(u),(a=Nn(s))?(Sn(a,n),a.h==0&&(a.src=null,s[Pn]=null)):kt(n)}}}function zr(n){return n in Cn?Cn[n]:Cn[n]="on"+n}function la(n,s){if(n.da)n=!0;else{s=new Ze(s,this);var a=n.listener,u=n.ha||n.src;n.fa&&kn(n),n=a.call(u,s)}return n}function Nn(n){return n=n[Pn],n instanceof Nt?n:null}var Dn="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(n){return typeof n=="function"?n:(n[Dn]||(n[Dn]=function(s){return n.handleEvent(s)}),n[Dn])}function j(){me.call(this),this.i=new Nt(this),this.M=this,this.F=null}R(j,me),j.prototype[et]=!0,j.prototype.removeEventListener=function(n,s,a,u){jr(this,n,s,a,u)};function Q(n,s){var a,u=n.F;if(u)for(a=[];u;u=u.F)a.push(u);if(n=n.M,u=s.type||s,typeof s=="string")s=new $(s,n);else if(s instanceof $)s.target=s.target||n;else{var _=s;s=new $(u,n),m(s,_)}if(_=!0,a)for(var E=a.length-1;0<=E;E--){var T=s.g=a[E];_=Dt(T,u,!0,s)&&_}if(T=s.g=n,_=Dt(T,u,!0,s)&&_,_=Dt(T,u,!1,s)&&_,a)for(E=0;E<a.length;E++)T=s.g=a[E],_=Dt(T,u,!1,s)&&_}j.prototype.N=function(){if(j.aa.N.call(this),this.i){var n=this.i,s;for(s in n.g){for(var a=n.g[s],u=0;u<a.length;u++)kt(a[u]);delete n.g[s],n.h--}}this.F=null},j.prototype.K=function(n,s,a,u){return this.i.add(String(n),s,!1,a,u)},j.prototype.L=function(n,s,a,u){return this.i.add(String(n),s,!0,a,u)};function Dt(n,s,a,u){if(s=n.i.g[String(s)],!s)return!0;s=s.concat();for(var _=!0,E=0;E<s.length;++E){var T=s[E];if(T&&!T.da&&T.capture==a){var C=T.listener,M=T.ha||T.src;T.fa&&Sn(n.i,T),_=C.call(M,u)!==!1&&_}}return _&&!u.defaultPrevented}function Gr(n,s,a){if(typeof n=="function")a&&(n=A(n,a));else if(n&&typeof n.handleEvent=="function")n=A(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:d.setTimeout(n,s||0)}function Wr(n){n.g=Gr(()=>{n.g=null,n.i&&(n.i=!1,Wr(n))},n.l);let s=n.h;n.h=null,n.m.apply(null,s)}class ha extends me{constructor(s,a){super(),this.m=s,this.l=a,this.h=null,this.i=!1,this.g=null}j(s){this.h=arguments,this.g?this.i=!0:Wr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tt(n){me.call(this),this.h=n,this.g={}}R(tt,me);var Kr=[];function Hr(n){re(n.g,function(s,a){this.g.hasOwnProperty(a)&&kn(s)},n),n.g={}}tt.prototype.N=function(){tt.aa.N.call(this),Hr(this)},tt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=d.JSON.stringify,da=d.JSON.parse,fa=class{stringify(n){return d.JSON.stringify(n,void 0)}parse(n){return d.JSON.parse(n,void 0)}};function xn(){}xn.prototype.h=null;function Qr(n){return n.h||(n.h=n.i())}function Jr(){}var nt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){$.call(this,"d")}R(Ln,$);function Mn(){$.call(this,"c")}R(Mn,$);var be={},Yr=null;function Ot(){return Yr=Yr||new j}be.La="serverreachability";function Xr(n){$.call(this,be.La,n)}R(Xr,$);function rt(n){let s=Ot();Q(s,new Xr(s))}be.STAT_EVENT="statevent";function Zr(n,s){$.call(this,be.STAT_EVENT,n),this.stat=s}R(Zr,$);function J(n){let s=Ot();Q(s,new Zr(s,n))}be.Ma="timingevent";function ei(n,s){$.call(this,be.Ma,n),this.size=s}R(ei,$);function it(n,s){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){n()},s)}function st(){this.g=!0}st.prototype.xa=function(){this.g=!1};function pa(n,s,a,u,_,E){n.info(function(){if(n.g)if(E)for(var T="",C=E.split("&"),M=0;M<C.length;M++){var P=C[M].split("=");if(1<P.length){var z=P[0];P=P[1];var G=z.split("_");T=2<=G.length&&G[1]=="type"?T+(z+"="+P+"&"):T+(z+"=redacted&")}}else T=null;else T=E;return"XMLHTTP REQ ("+u+") [attempt "+_+"]: "+s+`
`+a+`
`+T})}function ma(n,s,a,u,_,E,T){n.info(function(){return"XMLHTTP RESP ("+u+") [ attempt "+_+"]: "+s+`
`+a+`
`+E+" "+T})}function Le(n,s,a,u){n.info(function(){return"XMLHTTP TEXT ("+s+"): "+_a(n,a)+(u?" "+u:"")})}function ga(n,s){n.info(function(){return"TIMEOUT: "+s})}st.prototype.info=function(){};function _a(n,s){if(!n.g)return s;if(!s)return null;try{var a=JSON.parse(s);if(a){for(n=0;n<a.length;n++)if(Array.isArray(a[n])){var u=a[n];if(!(2>u.length)){var _=u[1];if(Array.isArray(_)&&!(1>_.length)){var E=_[0];if(E!="noop"&&E!="stop"&&E!="close")for(var T=1;T<_.length;T++)_[T]=""}}}}return Vn(a)}catch{return s}}var Vt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fn;function xt(){}R(xt,xn),xt.prototype.g=function(){return new XMLHttpRequest},xt.prototype.i=function(){return{}},Fn=new xt;function ge(n,s,a,u){this.j=n,this.i=s,this.l=a,this.R=u||1,this.U=new tt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}var ri={},Un={};function Bn(n,s,a){n.L=1,n.v=Ut(he(s)),n.m=a,n.P=!0,ii(n,null)}function ii(n,s){n.F=Date.now(),Lt(n),n.A=he(n.v);var a=n.A,u=n.R;Array.isArray(u)||(u=[String(u)]),yi(a.i,"t",u),n.C=0,a=n.j.J,n.h=new ni,n.g=Li(n.j,a?s:null,!n.m),0<n.O&&(n.M=new ha(A(n.Y,n,n.g),n.O)),s=n.U,a=n.g,u=n.ca;var _="readystatechange";Array.isArray(_)||(_&&(Kr[0]=_.toString()),_=Kr);for(var E=0;E<_.length;E++){var T=Br(a,_[E],u||s.handleEvent,!1,s.h||s);if(!T)break;s.g[T.key]=T}s=n.H?h(n.H):{},n.m?(n.u||(n.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.m,s)):(n.u="GET",n.g.ea(n.A,n.u,null,s)),rt(),pa(n.i,n.u,n.A,n.l,n.R,n.m)}ge.prototype.ca=function(n){n=n.target;let s=this.M;s&&de(n)==3?s.j():this.Y(n)},ge.prototype.Y=function(n){try{if(n==this.g)e:{let G=de(this.g);var s=this.g.Ba();let Ue=this.g.Z();if(!(3>G)&&(G!=3||this.g&&(this.h.h||this.g.oa()||bi(this.g)))){this.J||G!=4||s==7||(s==8||0>=Ue?rt(3):rt(2)),qn(this);var a=this.g.Z();this.X=a;t:if(si(this)){var u=bi(this.g);n="";var _=u.length,E=de(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Se(this),ot(this);var T="";break t}this.h.i=new d.TextDecoder}for(s=0;s<_;s++)this.h.h=!0,n+=this.h.i.decode(u[s],{stream:!(E&&s==_-1)});u.length=0,this.h.g+=n,this.C=0,T=this.h.g}else T=this.g.oa();if(this.o=a==200,ma(this.i,this.u,this.A,this.l,this.R,G,a),this.o){if(this.T&&!this.K){t:{if(this.g){var C,M=this.g;if((C=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(C)){var P=C;break t}}P=null}if(a=P)Le(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$n(this,a);else{this.o=!1,this.s=3,J(12),Se(this),ot(this);break e}}if(this.P){a=!0;let se;for(;!this.J&&this.C<T.length;)if(se=ya(this,T),se==Un){G==4&&(this.s=4,J(14),a=!1),Le(this.i,this.l,null,"[Incomplete Response]");break}else if(se==ri){this.s=4,J(15),Le(this.i,this.l,T,"[Invalid Chunk]"),a=!1;break}else Le(this.i,this.l,se,null),$n(this,se);if(si(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),G!=4||T.length!=0||this.h.h||(this.s=1,J(16),a=!1),this.o=this.o&&a,!a)Le(this.i,this.l,T,"[Invalid Chunked Response]"),Se(this),ot(this);else if(0<T.length&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.ba&&!z.M&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Hn(z),z.M=!0,J(11))}}else Le(this.i,this.l,T,null),$n(this,T);G==4&&Se(this),this.o&&!this.J&&(G==4?Di(this.j,this):(this.o=!1,Lt(this)))}else xa(this.g),a==400&&0<T.indexOf("Unknown SID")?(this.s=3,J(12)):(this.s=0,J(13)),Se(this),ot(this)}}}catch{}finally{}};function si(n){return n.g?n.u=="GET"&&n.L!=2&&n.j.Ca:!1}function ya(n,s){var a=n.C,u=s.indexOf(`
`,a);return u==-1?Un:(a=Number(s.substring(a,u)),isNaN(a)?ri:(u+=1,u+a>s.length?Un:(s=s.slice(u,u+a),n.C=u+a,s)))}ge.prototype.cancel=function(){this.J=!0,Se(this)};function Lt(n){n.S=Date.now()+n.I,oi(n,n.I)}function oi(n,s){if(n.B!=null)throw Error("WatchDog timer not null");n.B=it(A(n.ba,n),s)}function qn(n){n.B&&(d.clearTimeout(n.B),n.B=null)}ge.prototype.ba=function(){this.B=null;let n=Date.now();0<=n-this.S?(ga(this.i,this.A),this.L!=2&&(rt(),J(17)),Se(this),this.s=2,ot(this)):oi(this,this.S-n)};function ot(n){n.j.G==0||n.J||Di(n.j,n)}function Se(n){qn(n);var s=n.M;s&&typeof s.ma=="function"&&s.ma(),n.M=null,Hr(n.U),n.g&&(s=n.g,n.g=null,s.abort(),s.ma())}function $n(n,s){try{var a=n.j;if(a.G!=0&&(a.g==n||jn(a.h,n))){if(!n.K&&jn(a.h,n)&&a.G==3){try{var u=a.Da.g.parse(s)}catch{u=null}if(Array.isArray(u)&&u.length==3){var _=u;if(_[0]==0){e:if(!a.u){if(a.g)if(a.g.F+3e3<n.F)zt(a),$t(a);else break e;Kn(a),J(18)}}else a.za=_[1],0<a.za-a.T&&37500>_[2]&&a.F&&a.v==0&&!a.C&&(a.C=it(A(a.Za,a),6e3));if(1>=ui(a.h)&&a.ca){try{a.ca()}catch{}a.ca=void 0}}else Pe(a,11)}else if((n.K||a.g==n)&&zt(a),!H(s))for(_=a.Da.g.parse(s),s=0;s<_.length;s++){let P=_[s];if(a.T=P[0],P=P[1],a.G==2)if(P[0]=="c"){a.K=P[1],a.ia=P[2];let z=P[3];z!=null&&(a.la=z,a.j.info("VER="+a.la));let G=P[4];G!=null&&(a.Aa=G,a.j.info("SVER="+a.Aa));let Ue=P[5];Ue!=null&&typeof Ue=="number"&&0<Ue&&(u=1.5*Ue,a.L=u,a.j.info("backChannelRequestTimeoutMs_="+u)),u=a;let se=n.g;if(se){let Wt=se.g?se.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wt){var E=u.h;E.g||Wt.indexOf("spdy")==-1&&Wt.indexOf("quic")==-1&&Wt.indexOf("h2")==-1||(E.j=E.l,E.g=new Set,E.h&&(zn(E,E.h),E.h=null))}if(u.D){let Qn=se.g?se.g.getResponseHeader("X-HTTP-Session-Id"):null;Qn&&(u.ya=Qn,k(u.I,u.D,Qn))}}a.G=3,a.l&&a.l.ua(),a.ba&&(a.R=Date.now()-n.F,a.j.info("Handshake RTT: "+a.R+"ms")),u=a;var T=n;if(u.qa=xi(u,u.J?u.ia:null,u.W),T.K){li(u.h,T);var C=T,M=u.L;M&&(C.I=M),C.B&&(qn(C),Lt(C)),u.g=T}else ki(u);0<a.i.length&&jt(a)}else P[0]!="stop"&&P[0]!="close"||Pe(a,7);else a.G==3&&(P[0]=="stop"||P[0]=="close"?P[0]=="stop"?Pe(a,7):Wn(a):P[0]!="noop"&&a.l&&a.l.ta(P),a.v=0)}}rt(4)}catch{}}var Ia=class{constructor(n,s){this.g=n,this.map=s}};function ai(n){this.l=n||10,d.PerformanceNavigationTiming?(n=d.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ci(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function ui(n){return n.h?1:n.g?n.g.size:0}function jn(n,s){return n.h?n.h==s:n.g?n.g.has(s):!1}function zn(n,s){n.g?n.g.add(s):n.h=s}function li(n,s){n.h&&n.h==s?n.h=null:n.g&&n.g.has(s)&&n.g.delete(s)}ai.prototype.cancel=function(){if(this.i=hi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let n of this.g.values())n.cancel();this.g.clear()}};function hi(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let s=n.i;for(let a of n.g.values())s=s.concat(a.D);return s}return x(n.i)}function wa(n){if(n.V&&typeof n.V=="function")return n.V();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(I(n)){for(var s=[],a=n.length,u=0;u<a;u++)s.push(n[u]);return s}s=[],a=0;for(u in n)s[a++]=n[u];return s}function Ea(n){if(n.na&&typeof n.na=="function")return n.na();if(!n.V||typeof n.V!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(I(n)||typeof n=="string"){var s=[];n=n.length;for(var a=0;a<n;a++)s.push(a);return s}s=[],a=0;for(let u in n)s[a++]=u;return s}}}function di(n,s){if(n.forEach&&typeof n.forEach=="function")n.forEach(s,void 0);else if(I(n)||typeof n=="string")Array.prototype.forEach.call(n,s,void 0);else for(var a=Ea(n),u=wa(n),_=u.length,E=0;E<_;E++)s.call(void 0,u[E],a&&a[E],n)}var fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(n,s){if(n){n=n.split("&");for(var a=0;a<n.length;a++){var u=n[a].indexOf("="),_=null;if(0<=u){var E=n[a].substring(0,u);_=n[a].substring(u+1)}else E=n[a];s(E,_?decodeURIComponent(_.replace(/\+/g," ")):"")}}}function Re(n){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,n instanceof Re){this.h=n.h,Mt(this,n.j),this.o=n.o,this.g=n.g,Ft(this,n.s),this.l=n.l;var s=n.i,a=new ut;a.i=s.i,s.g&&(a.g=new Map(s.g),a.h=s.h),pi(this,a),this.m=n.m}else n&&(s=String(n).match(fi))?(this.h=!1,Mt(this,s[1]||"",!0),this.o=at(s[2]||""),this.g=at(s[3]||"",!0),Ft(this,s[4]),this.l=at(s[5]||"",!0),pi(this,s[6]||"",!0),this.m=at(s[7]||"")):(this.h=!1,this.i=new ut(null,this.h))}Re.prototype.toString=function(){var n=[],s=this.j;s&&n.push(ct(s,mi,!0),":");var a=this.g;return(a||s=="file")&&(n.push("//"),(s=this.o)&&n.push(ct(s,mi,!0),"@"),n.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.s,a!=null&&n.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&n.push("/"),n.push(ct(a,a.charAt(0)=="/"?ba:Aa,!0))),(a=this.i.toString())&&n.push("?",a),(a=this.m)&&n.push("#",ct(a,Ra)),n.join("")};function he(n){return new Re(n)}function Mt(n,s,a){n.j=a?at(s,!0):s,n.j&&(n.j=n.j.replace(/:$/,""))}function Ft(n,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);n.s=s}else n.s=null}function pi(n,s,a){s instanceof ut?(n.i=s,Pa(n.i,n.h)):(a||(s=ct(s,Sa)),n.i=new ut(s,n.h))}function k(n,s,a){n.i.set(s,a)}function Ut(n){return k(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function at(n,s){return n?s?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ct(n,s,a){return typeof n=="string"?(n=encodeURI(n).replace(s,Ta),a&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Ta(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var mi=/[#\/\?@]/g,Aa=/[#\?:]/g,ba=/[#\?]/g,Sa=/[#\?@]/g,Ra=/#/g;function ut(n,s){this.h=this.g=null,this.i=n||null,this.j=!!s}function _e(n){n.g||(n.g=new Map,n.h=0,n.i&&va(n.i,function(s,a){n.add(decodeURIComponent(s.replace(/\+/g," ")),a)}))}r=ut.prototype,r.add=function(n,s){_e(this),this.i=null,n=Me(this,n);var a=this.g.get(n);return a||this.g.set(n,a=[]),a.push(s),this.h+=1,this};function gi(n,s){_e(n),s=Me(n,s),n.g.has(s)&&(n.i=null,n.h-=n.g.get(s).length,n.g.delete(s))}function _i(n,s){return _e(n),s=Me(n,s),n.g.has(s)}r.forEach=function(n,s){_e(this),this.g.forEach(function(a,u){a.forEach(function(_){n.call(s,_,u,this)},this)},this)},r.na=function(){_e(this);let n=Array.from(this.g.values()),s=Array.from(this.g.keys()),a=[];for(let u=0;u<s.length;u++){let _=n[u];for(let E=0;E<_.length;E++)a.push(s[u])}return a},r.V=function(n){_e(this);let s=[];if(typeof n=="string")_i(this,n)&&(s=s.concat(this.g.get(Me(this,n))));else{n=Array.from(this.g.values());for(let a=0;a<n.length;a++)s=s.concat(n[a])}return s},r.set=function(n,s){return _e(this),this.i=null,n=Me(this,n),_i(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[s]),this.h+=1,this},r.get=function(n,s){return n?(n=this.V(n),0<n.length?String(n[0]):s):s};function yi(n,s,a){gi(n,s),0<a.length&&(n.i=null,n.g.set(Me(n,s),x(a)),n.h+=a.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";let n=[],s=Array.from(this.g.keys());for(var a=0;a<s.length;a++){var u=s[a];let E=encodeURIComponent(String(u)),T=this.V(u);for(u=0;u<T.length;u++){var _=E;T[u]!==""&&(_+="="+encodeURIComponent(String(T[u]))),n.push(_)}}return this.i=n.join("&")};function Me(n,s){return s=String(s),n.j&&(s=s.toLowerCase()),s}function Pa(n,s){s&&!n.j&&(_e(n),n.i=null,n.g.forEach(function(a,u){var _=u.toLowerCase();u!=_&&(gi(this,u),yi(this,_,a))},n)),n.j=s}function Ca(n,s){let a=new st;if(d.Image){let u=new Image;u.onload=D(ye,a,"TestLoadImage: loaded",!0,s,u),u.onerror=D(ye,a,"TestLoadImage: error",!1,s,u),u.onabort=D(ye,a,"TestLoadImage: abort",!1,s,u),u.ontimeout=D(ye,a,"TestLoadImage: timeout",!1,s,u),d.setTimeout(function(){u.ontimeout&&u.ontimeout()},1e4),u.src=n}else s(!1)}function ka(n,s){let a=new st,u=new AbortController,_=setTimeout(()=>{u.abort(),ye(a,"TestPingServer: timeout",!1,s)},1e4);fetch(n,{signal:u.signal}).then(E=>{clearTimeout(_),E.ok?ye(a,"TestPingServer: ok",!0,s):ye(a,"TestPingServer: server error",!1,s)}).catch(()=>{clearTimeout(_),ye(a,"TestPingServer: error",!1,s)})}function ye(n,s,a,u,_){try{_&&(_.onload=null,_.onerror=null,_.onabort=null,_.ontimeout=null),u(a)}catch{}}function Na(){this.g=new fa}function Da(n,s,a){let u=a||"";try{di(n,function(_,E){let T=_;v(_)&&(T=Vn(_)),s.push(u+E+"="+encodeURIComponent(T))})}catch(_){throw s.push(u+"type="+encodeURIComponent("_badmap")),_}}function lt(n){this.l=n.Ub||null,this.j=n.eb||!1}R(lt,xn),lt.prototype.g=function(){return new Bt(this.l,this.j)},lt.prototype.i=(function(n){return function(){return n}})({});function Bt(n,s){j.call(this),this.D=n,this.o=s,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Bt,j),r=Bt.prototype,r.open=function(n,s){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=n,this.A=s,this.readyState=1,dt(this)},r.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let s={headers:this.u,method:this.B,credentials:this.m,cache:void 0};n&&(s.body=n),(this.D||d).fetch(new Request(this.A,s)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ht(this)),this.readyState=0},r.Sa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,dt(this)),this.g&&(this.readyState=3,dt(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ii(this)}else n.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ii(n){n.j.read().then(n.Pa.bind(n)).catch(n.ga.bind(n))}r.Pa=function(n){if(this.g){if(this.o&&n.value)this.response.push(n.value);else if(!this.o){var s=n.value?n.value:new Uint8Array(0);(s=this.v.decode(s,{stream:!n.done}))&&(this.response=this.responseText+=s)}n.done?ht(this):dt(this),this.readyState==3&&Ii(this)}},r.Ra=function(n){this.g&&(this.response=this.responseText=n,ht(this))},r.Qa=function(n){this.g&&(this.response=n,ht(this))},r.ga=function(){this.g&&ht(this)};function ht(n){n.readyState=4,n.l=null,n.j=null,n.v=null,dt(n)}r.setRequestHeader=function(n,s){this.u.append(n,s)},r.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";let n=[],s=this.h.entries();for(var a=s.next();!a.done;)a=a.value,n.push(a[0]+": "+a[1]),a=s.next();return n.join(`\r
`)};function dt(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(Bt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});function wi(n){let s="";return re(n,function(a,u){s+=u,s+=":",s+=a,s+=`\r
`}),s}function Gn(n,s,a){e:{for(u in a){var u=!1;break e}u=!0}u||(a=wi(a),typeof n=="string"?a!=null&&encodeURIComponent(String(a)):k(n,s,a))}function V(n){j.call(this),this.headers=new Map,this.o=n||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(V,j);var Oa=/^https?$/i,Va=["POST","PUT"];r=V.prototype,r.Ha=function(n){this.J=n},r.ea=function(n,s,a,u){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+n);s=s?s.toUpperCase():"GET",this.D=n,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fn.g(),this.v=this.o?Qr(this.o):Qr(Fn),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(s,String(n),!0),this.B=!1}catch(E){Ei(this,E);return}if(n=a||"",a=new Map(this.headers),u)if(Object.getPrototypeOf(u)===Object.prototype)for(var _ in u)a.set(_,u[_]);else if(typeof u.keys=="function"&&typeof u.get=="function")for(let E of u.keys())a.set(E,u.get(E));else throw Error("Unknown input type for opt_headers: "+String(u));u=Array.from(a.keys()).find(E=>E.toLowerCase()=="content-type"),_=d.FormData&&n instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Va,s,void 0))||u||_||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[E,T]of a)this.g.setRequestHeader(E,T);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ai(this),this.u=!0,this.g.send(n),this.u=!1}catch(E){Ei(this,E)}};function Ei(n,s){n.h=!1,n.g&&(n.j=!0,n.g.abort(),n.j=!1),n.l=s,n.m=5,vi(n),qt(n)}function vi(n){n.A||(n.A=!0,Q(n,"complete"),Q(n,"error"))}r.abort=function(n){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=n||7,Q(this,"complete"),Q(this,"abort"),qt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qt(this,!0)),V.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ti(this):this.bb())},r.bb=function(){Ti(this)};function Ti(n){if(n.h&&typeof l<"u"&&(!n.v[1]||de(n)!=4||n.Z()!=2)){if(n.u&&de(n)==4)Gr(n.Ea,0,n);else if(Q(n,"readystatechange"),de(n)==4){n.h=!1;try{let T=n.Z();e:switch(T){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var a;if(!(a=s)){var u;if(u=T===0){var _=String(n.D).match(fi)[1]||null;!_&&d.self&&d.self.location&&(_=d.self.location.protocol.slice(0,-1)),u=!Oa.test(_?_.toLowerCase():"")}a=u}if(a)Q(n,"complete"),Q(n,"success");else{n.m=6;try{var E=2<de(n)?n.g.statusText:""}catch{E=""}n.l=E+" ["+n.Z()+"]",vi(n)}}finally{qt(n)}}}}function qt(n,s){if(n.g){Ai(n);let a=n.g,u=n.v[0]?()=>{}:null;n.g=null,n.v=null,s||Q(n,"ready");try{a.onreadystatechange=u}catch{}}}function Ai(n){n.I&&(d.clearTimeout(n.I),n.I=null)}r.isActive=function(){return!!this.g};function de(n){return n.g?n.g.readyState:0}r.Z=function(){try{return 2<de(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(n){if(this.g){var s=this.g.responseText;return n&&s.indexOf(n)==0&&(s=s.substring(n.length)),da(s)}};function bi(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.H){case"":case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function xa(n){let s={};n=(n.g&&2<=de(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let u=0;u<n.length;u++){if(H(n[u]))continue;var a=g(n[u]);let _=a[0];if(a=a[1],typeof a!="string")continue;a=a.trim();let E=s[_]||[];s[_]=E,E.push(a)}y(s,function(u){return u.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ft(n,s,a){return a&&a.internalChannelParams&&a.internalChannelParams[n]||s}function Si(n){this.Aa=0,this.i=[],this.j=new st,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ft("failFast",!1,n),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ft("baseRetryDelayMs",5e3,n),this.cb=ft("retryDelaySeedMs",1e4,n),this.Wa=ft("forwardChannelMaxRetries",2,n),this.wa=ft("forwardChannelRequestTimeoutMs",2e4,n),this.pa=n&&n.xmlHttpFactory||void 0,this.Xa=n&&n.Tb||void 0,this.Ca=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.h=new ai(n&&n.concurrentRequestLimit),this.Da=new Na,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=n&&n.Rb||!1,n&&n.xa&&this.j.xa(),n&&n.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&n&&n.detectBufferingProxy||!1,this.ja=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.ja=n.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Si.prototype,r.la=8,r.G=1,r.connect=function(n,s,a,u){J(0),this.W=n,this.H=s||{},a&&u!==void 0&&(this.H.OSID=a,this.H.OAID=u),this.F=this.X,this.I=xi(this,null,this.W),jt(this)};function Wn(n){if(Ri(n),n.G==3){var s=n.U++,a=he(n.I);if(k(a,"SID",n.K),k(a,"RID",s),k(a,"TYPE","terminate"),pt(n,a),s=new ge(n,n.j,s),s.L=2,s.v=Ut(he(a)),a=!1,d.navigator&&d.navigator.sendBeacon)try{a=d.navigator.sendBeacon(s.v.toString(),"")}catch{}!a&&d.Image&&(new Image().src=s.v,a=!0),a||(s.g=Li(s.j,null),s.g.ea(s.v)),s.F=Date.now(),Lt(s)}Vi(n)}function $t(n){n.g&&(Hn(n),n.g.cancel(),n.g=null)}function Ri(n){$t(n),n.u&&(d.clearTimeout(n.u),n.u=null),zt(n),n.h.cancel(),n.s&&(typeof n.s=="number"&&d.clearTimeout(n.s),n.s=null)}function jt(n){if(!ci(n.h)&&!n.s){n.s=!0;var s=n.Ga;Ye||Ur(),Xe||(Ye(),Xe=!0),bn.add(s,n),n.B=0}}function La(n,s){return ui(n.h)>=n.h.j-(n.s?1:0)?!1:n.s?(n.i=s.D.concat(n.i),!0):n.G==1||n.G==2||n.B>=(n.Va?0:n.Wa)?!1:(n.s=it(A(n.Ga,n,s),Oi(n,n.B)),n.B++,!0)}r.Ga=function(n){if(this.s)if(this.s=null,this.G==1){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;let _=new ge(this,this.j,n),E=this.o;if(this.S&&(E?(E=h(E),m(E,this.S)):E=this.S),this.m!==null||this.O||(_.H=E,E=null),this.P)e:{for(var s=0,a=0;a<this.i.length;a++){t:{var u=this.i[a];if("__data__"in u.map&&(u=u.map.__data__,typeof u=="string")){u=u.length;break t}u=void 0}if(u===void 0)break;if(s+=u,4096<s){s=a;break e}if(s===4096||a===this.i.length-1){s=a+1;break e}}s=1e3}else s=1e3;s=Ci(this,_,s),a=he(this.I),k(a,"RID",n),k(a,"CVER",22),this.D&&k(a,"X-HTTP-Session-Id",this.D),pt(this,a),E&&(this.O?s="headers="+encodeURIComponent(String(wi(E)))+"&"+s:this.m&&Gn(a,this.m,E)),zn(this.h,_),this.Ua&&k(a,"TYPE","init"),this.P?(k(a,"$req",s),k(a,"SID","null"),_.T=!0,Bn(_,a,null)):Bn(_,a,s),this.G=2}}else this.G==3&&(n?Pi(this,n):this.i.length==0||ci(this.h)||Pi(this))};function Pi(n,s){var a;s?a=s.l:a=n.U++;let u=he(n.I);k(u,"SID",n.K),k(u,"RID",a),k(u,"AID",n.T),pt(n,u),n.m&&n.o&&Gn(u,n.m,n.o),a=new ge(n,n.j,a,n.B+1),n.m===null&&(a.H=n.o),s&&(n.i=s.D.concat(n.i)),s=Ci(n,a,1e3),a.I=Math.round(.5*n.wa)+Math.round(.5*n.wa*Math.random()),zn(n.h,a),Bn(a,u,s)}function pt(n,s){n.H&&re(n.H,function(a,u){k(s,u,a)}),n.l&&di({},function(a,u){k(s,u,a)})}function Ci(n,s,a){a=Math.min(n.i.length,a);var u=n.l?A(n.l.Na,n.l,n):null;e:{var _=n.i;let E=-1;for(;;){let T=["count="+a];E==-1?0<a?(E=_[0].g,T.push("ofs="+E)):E=0:T.push("ofs="+E);let C=!0;for(let M=0;M<a;M++){let P=_[M].g,z=_[M].map;if(P-=E,0>P)E=Math.max(0,_[M].g-100),C=!1;else try{Da(z,T,"req"+P+"_")}catch{u&&u(z)}}if(C){u=T.join("&");break e}}}return n=n.i.splice(0,a),s.D=n,u}function ki(n){if(!n.g&&!n.u){n.Y=1;var s=n.Fa;Ye||Ur(),Xe||(Ye(),Xe=!0),bn.add(s,n),n.v=0}}function Kn(n){return n.g||n.u||3<=n.v?!1:(n.Y++,n.u=it(A(n.Fa,n),Oi(n,n.v)),n.v++,!0)}r.Fa=function(){if(this.u=null,Ni(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var n=2*this.R;this.j.info("BP detection timer enabled: "+n),this.A=it(A(this.ab,this),n)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,J(10),$t(this),Ni(this))};function Hn(n){n.A!=null&&(d.clearTimeout(n.A),n.A=null)}function Ni(n){n.g=new ge(n,n.j,"rpc",n.Y),n.m===null&&(n.g.H=n.o),n.g.O=0;var s=he(n.qa);k(s,"RID","rpc"),k(s,"SID",n.K),k(s,"AID",n.T),k(s,"CI",n.F?"0":"1"),!n.F&&n.ja&&k(s,"TO",n.ja),k(s,"TYPE","xmlhttp"),pt(n,s),n.m&&n.o&&Gn(s,n.m,n.o),n.L&&(n.g.I=n.L);var a=n.g;n=n.ia,a.L=1,a.v=Ut(he(s)),a.m=null,a.P=!0,ii(a,n)}r.Za=function(){this.C!=null&&(this.C=null,$t(this),Kn(this),J(19))};function zt(n){n.C!=null&&(d.clearTimeout(n.C),n.C=null)}function Di(n,s){var a=null;if(n.g==s){zt(n),Hn(n),n.g=null;var u=2}else if(jn(n.h,s))a=s.D,li(n.h,s),u=1;else return;if(n.G!=0){if(s.o)if(u==1){a=s.m?s.m.length:0,s=Date.now()-s.F;var _=n.B;u=Ot(),Q(u,new ei(u,a)),jt(n)}else ki(n);else if(_=s.s,_==3||_==0&&0<s.X||!(u==1&&La(n,s)||u==2&&Kn(n)))switch(a&&0<a.length&&(s=n.h,s.i=s.i.concat(a)),_){case 1:Pe(n,5);break;case 4:Pe(n,10);break;case 3:Pe(n,6);break;default:Pe(n,2)}}}function Oi(n,s){let a=n.Ta+Math.floor(Math.random()*n.cb);return n.isActive()||(a*=2),a*s}function Pe(n,s){if(n.j.info("Error code "+s),s==2){var a=A(n.fb,n),u=n.Xa;let _=!u;u=new Re(u||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Mt(u,"https"),Ut(u),_?Ca(u.toString(),a):ka(u.toString(),a)}else J(2);n.G=0,n.l&&n.l.sa(s),Vi(n),Ri(n)}r.fb=function(n){n?(this.j.info("Successfully pinged google.com"),J(2)):(this.j.info("Failed to ping google.com"),J(1))};function Vi(n){if(n.G=0,n.ka=[],n.l){let s=hi(n.h);(s.length!=0||n.i.length!=0)&&(N(n.ka,s),N(n.ka,n.i),n.h.i.length=0,x(n.i),n.i.length=0),n.l.ra()}}function xi(n,s,a){var u=a instanceof Re?he(a):new Re(a);if(u.g!="")s&&(u.g=s+"."+u.g),Ft(u,u.s);else{var _=d.location;u=_.protocol,s=s?s+"."+_.hostname:_.hostname,_=+_.port;var E=new Re(null);u&&Mt(E,u),s&&(E.g=s),_&&Ft(E,_),a&&(E.l=a),u=E}return a=n.D,s=n.ya,a&&s&&k(u,a,s),k(u,"VER",n.la),pt(n,u),u}function Li(n,s,a){if(s&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return s=n.Ca&&!n.pa?new V(new lt({eb:a})):new V(n.pa),s.Ha(n.J),s}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mi(){}r=Mi.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Gt(){}Gt.prototype.g=function(n,s){return new ne(n,s)};function ne(n,s){j.call(this),this.g=new Si(s),this.l=n,this.h=s&&s.messageUrlParams||null,n=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.o=n,n=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(n?n["X-WebChannel-Content-Type"]=s.messageContentType:n={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.va&&(n?n["X-WebChannel-Client-Profile"]=s.va:n={"X-WebChannel-Client-Profile":s.va}),this.g.S=n,(n=s&&s.Sb)&&!H(n)&&(this.g.m=n),this.v=s&&s.supportsCrossDomainXhr||!1,this.u=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!H(s)&&(this.g.D=s,n=this.h,n!==null&&s in n&&(n=this.h,s in n&&delete n[s])),this.j=new Fe(this)}R(ne,j),ne.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ne.prototype.close=function(){Wn(this.g)},ne.prototype.o=function(n){var s=this.g;if(typeof n=="string"){var a={};a.__data__=n,n=a}else this.u&&(a={},a.__data__=Vn(n),n=a);s.i.push(new Ia(s.Ya++,n)),s.G==3&&jt(s)},ne.prototype.N=function(){this.g.l=null,delete this.j,Wn(this.g),delete this.g,ne.aa.N.call(this)};function Fi(n){Ln.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var s=n.__sm__;if(s){e:{for(let a in s){n=a;break e}n=void 0}(this.i=n)&&(n=this.i,s=s!==null&&n in s?s[n]:void 0),this.data=s}else this.data=n}R(Fi,Ln);function Ui(){Mn.call(this),this.status=1}R(Ui,Mn);function Fe(n){this.g=n}R(Fe,Mi),Fe.prototype.ua=function(){Q(this.g,"a")},Fe.prototype.ta=function(n){Q(this.g,new Fi(n))},Fe.prototype.sa=function(n){Q(this.g,new Ui)},Fe.prototype.ra=function(){Q(this.g,"b")},Gt.prototype.createWebChannel=Gt.prototype.g,ne.prototype.send=ne.prototype.o,ne.prototype.open=ne.prototype.m,ne.prototype.close=ne.prototype.close,am=sn.createWebChannelTransport=function(){return new Gt},om=sn.getStatEventTarget=function(){return Ot()},sm=sn.Event=be,im=sn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vt.NO_ERROR=0,Vt.TIMEOUT=8,Vt.HTTP_ERROR=6,rm=sn.ErrorCode=Vt,ti.COMPLETE="complete",nm=sn.EventType=ti,Jr.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",j.prototype.listen=j.prototype.K,tm=sn.WebChannel=Jr,qA=sn.FetchXmlHttpFactory=lt,V.prototype.listenOnce=V.prototype.L,V.prototype.getLastError=V.prototype.Ka,V.prototype.getLastErrorCode=V.prototype.Ba,V.prototype.getStatus=V.prototype.Z,V.prototype.getResponseJson=V.prototype.Oa,V.prototype.getResponseText=V.prototype.oa,V.prototype.send=V.prototype.ea,V.prototype.setWithCredentials=V.prototype.Ha,em=sn.XhrIo=V}).apply(typeof Bo<"u"?Bo:typeof self<"u"?self:typeof window<"u"?window:{});var cm="@firebase/firestore",um="4.9.0";var Te=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Te.UNAUTHENTICATED=new Te(null),Te.GOOGLE_CREDENTIALS=new Te("google-credentials-uid"),Te.FIRST_PARTY=new Te("first-party-uid"),Te.MOCK_USER=new Te("mock-user");var As="12.0.0";var Mr=new St("@firebase/firestore");function wt(r,...e){if(Mr.logLevel<=Z.DEBUG){let t=e.map(Rl);Mr.debug(`Firestore (${As}): ${r}`,...t)}}function Em(r,...e){if(Mr.logLevel<=Z.ERROR){let t=e.map(Rl);Mr.error(`Firestore (${As}): ${r}`,...t)}}function $A(r,...e){if(Mr.logLevel<=Z.WARN){let t=e.map(Rl);Mr.warn(`Firestore (${As}): ${r}`,...t)}}function Rl(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Ve(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,vm(r,i,t)}function vm(r,e,t){let i=`FIRESTORE (${As}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Em(i),new Error(i)}function Ir(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||vm(e,o,i)}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends we{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var wr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var qo=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},cl=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Te.UNAUTHENTICATED))}shutdown(){}},ul=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ll=class{constructor(e){this.t=e,this.currentUser=Te.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ir(this.o===void 0,42304);let i=this.i,o=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve(),c=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new wr,e.enqueueRetryable(()=>o(this.currentUser))};let l=()=>{let I=c;e.enqueueRetryable(async()=>{await I.promise,await o(this.currentUser)})},d=I=>{wt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(I=>d(I)),setTimeout(()=>{if(!this.auth){let I=this.t.getImmediate({optional:!0});I?d(I):(wt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new wr)}},0),l()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(wt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ir(typeof i.accessToken=="string",31837,{l:i}),new qo(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ir(e===null||typeof e=="string",2055,{h:e}),new Te(e)}},hl=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Te.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},dl=class{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new hl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Te.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$o=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},fl=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qe(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ir(this.o===void 0,3512);let i=c=>{c.error!=null&&wt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);let l=c.token!==this.m;return this.m=c.token,wt("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};let o=c=>{wt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>o(c)),setTimeout(()=>{if(!this.appCheck){let c=this.V.getImmediate({optional:!0});c?o(c):wt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $o(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ir(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $o(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function jA(r){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}var pl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),i="";for(;i.length<20;){let o=jA(40);for(let c=0;c<o.length;++c)i.length<20&&o[c]<t&&(i+=e.charAt(o[c]%62))}return i}};function an(r,e){return r<e?-1:r>e?1:0}function zA(r,e){let t=Math.min(r.length,e.length);for(let i=0;i<t;i++){let o=r.charAt(i),c=e.charAt(i);if(o!==c)return ol(o)===ol(c)?an(o,c):ol(o)?1:-1}return an(r.length,e.length)}var GA=55296,WA=57343;function ol(r){let e=r.charCodeAt(0);return e>=GA&&e<=WA}var lm="__name__",jo=class r{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ve(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return r.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof r?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let o=0;o<i;o++){let c=r.compareSegments(e.get(o),t.get(o));if(c!==0)return c}return an(e.length,t.length)}static compareSegments(e,t){let i=r.isNumericId(e),o=r.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?r.extractNumericId(e).compare(r.extractNumericId(t)):zA(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Uo.fromString(e.substring(4,e.length-2))}},on=class r extends jo{construct(e,t,i){return new r(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new L(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new r(t)}static emptyPath(){return new r([])}},KA=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ml=class r extends jo{construct(e,t,i){return new r(e,t,i)}static isValidIdentifier(e){return KA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lm}static keyField(){return new r([lm])}static fromServerFormat(e){let t=[],i="",o=0,c=()=>{if(i.length===0)throw new L(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},l=!1;for(;o<e.length;){let d=e[o];if(d==="\\"){if(o+1===e.length)throw new L(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let I=e[o+1];if(I!=="\\"&&I!=="."&&I!=="`")throw new L(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=I,o+=2}else d==="`"?(l=!l,o++):d!=="."||l?(i+=d,o++):(c(),o++)}if(c(),l)throw new L(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new r(t)}static emptyPath(){return new r([])}};var cn=class r{constructor(e){this.path=e}static fromPath(e){return new r(on.fromString(e))}static fromName(e){return new r(on.fromString(e).popFirst(5))}static empty(){return new r(on.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&on.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return on.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new r(new on(e.slice()))}};function HA(r,e,t,i){if(e===!0&&i===!0)throw new L(B.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function QA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function JA(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{let e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ve(12329,{type:typeof r})}function YA(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new L(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=JA(r);throw new L(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function ue(r,e){let t={typeString:r};return e&&(t.value=e),t}function bs(r,e){if(!QA(r))throw new L(B.INVALID_ARGUMENT,"JSON must be an object");let t;for(let i in e)if(e[i]){let o=e[i].typeString,c="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}let l=r[i];if(o&&typeof l!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(c!==void 0&&l!==c.value){t=`Expected '${i}' field to equal '${c.value}'`;break}}if(t)throw new L(B.INVALID_ARGUMENT,t);return!0}var hm=-62135596800,dm=1e6,ys=class r{static now(){return r.fromMillis(Date.now())}static fromDate(e){return r.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*dm);return new r(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<hm)throw new L(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/dm}_compareTo(e){return this.seconds===e.seconds?an(this.nanoseconds,e.nanoseconds):an(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:r._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bs(e,r._jsonSchema))return new r(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-hm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};ys._jsonSchemaVersion="firestore/timestamp/1.0",ys._jsonSchema={type:ue("string",ys._jsonSchemaVersion),seconds:ue("number"),nanoseconds:ue("number")};var gl=class{constructor(e,t,i,o){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=o}};gl.UNKNOWN_ID=-1;function XA(r){return r.name==="IndexedDbTransactionError"}function ZA(r){return r===0&&1/r==-1/0}var eb="remoteDocuments",Tm="owner";var Am="mutationQueues";var bm="mutations";var Sm="documentMutations",tb="remoteDocumentsV14";var Rm="remoteDocumentGlobal";var Pm="targets";var Cm="targetDocuments";var km="targetGlobal",Nm="collectionParents";var Dm="clientMetadata";var Om="bundles";var Vm="namedQueries";var nb="indexConfiguration";var rb="indexState";var ib="indexEntries";var xm="documentOverlays";var sb="globals";var ob=[Am,bm,Sm,eb,Pm,Tm,km,Cm,Dm,Rm,Nm,Om,Vm],YD=[...ob,xm],ab=[Am,bm,Sm,tb,Pm,Tm,km,Cm,Dm,Rm,Nm,Om,Vm,xm],cb=ab,ub=[...cb,nb,rb,ib];var XD=[...ub,sb];var Fr=class r{constructor(e,t){this.comparator=e,this.root=t||Ct.EMPTY}insert(e,t){return new r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Or(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Or(this.root,e,this.comparator,!1)}getReverseIterator(){return new Or(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Or(this.root,e,this.comparator,!0)}},Or=class{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ct=class r{constructor(e,t,i,o,c){this.key=e,this.value=t,this.color=i??r.RED,this.left=o??r.EMPTY,this.right=c??r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,c){return new r(e??this.key,t??this.value,i??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this,c=i(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,t,i),null):c===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return r.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}};Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,i,o,c){return this}insert(e,t,i){return new Ct(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var zo=class r{constructor(e){this.comparator=e,this.data=new Fr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Go(this.data.getIterator())}getIteratorFrom(e){return new Go(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof r)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let o=t.getNext().key,c=i.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new r(this.comparator);return t.data=e,t}},Go=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var _l=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var An=class r{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new _l("Invalid base64 string: "+c):c}})(e);return new r(t)}static fromUint8Array(e){let t=(function(o){let c="";for(let l=0;l<o.length;++l)c+=String.fromCharCode(o[l]);return c})(e);return new r(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return an(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};An.EMPTY_BYTE_STRING=new An("");var lb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hb(r){if(Ir(!!r,39018),typeof r=="string"){let e=0,t=lb.exec(r);if(Ir(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}let i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Is(r.seconds),nanos:Is(r.nanos)}}function Is(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function db(r){return typeof r=="string"?An.fromBase64String(r):An.fromUint8Array(r)}var yl="(default)",Il=class r{constructor(e,t){this.projectId=e,this.database=t||yl}static empty(){return new r("","")}get isDefaultDatabase(){return this.database===yl}isEqual(e){return e instanceof r&&e.projectId===this.projectId&&e.database===this.database}};var Lm="__type__",fb="__max__";var Mm="__vector__",Fm="value";function pb(r){return(r?.mapValue?.fields||{})[Lm]?.stringValue===Mm}function mb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===fb}var e1={mapValue:{fields:{[Lm]:{stringValue:Mm},[Fm]:{arrayValue:{}}}}};var wl=class{constructor(e,t=null,i=[],o=[],c=null,l="F",d=null,I=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=c,this.limitType=l,this.startAt=d,this.endAt=I,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function gb(r){return new wl(r)}var t1=new Fr(cn.comparator);var n1=new Fr(cn.comparator);var r1=new Fr(cn.comparator),i1=new zo(cn.comparator);var s1=new zo(an);var fm,U;(U=fm||(fm={}))[U.OK=0]="OK",U[U.CANCELLED=1]="CANCELLED",U[U.UNKNOWN=2]="UNKNOWN",U[U.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",U[U.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",U[U.NOT_FOUND=5]="NOT_FOUND",U[U.ALREADY_EXISTS=6]="ALREADY_EXISTS",U[U.PERMISSION_DENIED=7]="PERMISSION_DENIED",U[U.UNAUTHENTICATED=16]="UNAUTHENTICATED",U[U.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",U[U.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",U[U.ABORTED=10]="ABORTED",U[U.OUT_OF_RANGE=11]="OUT_OF_RANGE",U[U.UNIMPLEMENTED=12]="UNIMPLEMENTED",U[U.INTERNAL=13]="INTERNAL",U[U.UNAVAILABLE=14]="UNAVAILABLE",U[U.DATA_LOSS=15]="DATA_LOSS";var o1=new Uo([4294967295,4294967295],0);var Wo=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Is(e.integerValue));else if("doubleValue"in e){let i=Is(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),ZA(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=hb(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(db(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?mb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):pb(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ve(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let i=e.fields||{};this.Ft(t,55);for(let o of Object.keys(i))this.Ot(o,t),this.Ct(i[o],t)}kt(e,t){let i=e.fields||{};this.Ft(t,53);let o=Fm,c=i[o].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Is(c)),this.Ot(o,t),this.Ct(i[o],t)}Qt(e,t){let i=e.values||[];this.Ft(t,50);for(let o of i)this.Ct(o,t)}Lt(e,t){this.Ft(t,37),cn.fromName(e).path.forEach(i=>{this.Ft(t,60),this.Ut(i,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Wo.Kt=new Wo;var a1=new Uint8Array(0);var Um=41943040,Pt=class r{static withCacheSize(e){return new r(e,r.DEFAULT_COLLECTION_PERCENTILE,r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}};Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(Um,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);var _b=1048576;function al(){return typeof document<"u"?document:null}var El=class{constructor(e,t,i=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&wt("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var vl=class r{constructor(e,t,i,o,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=c,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,c){let l=Date.now()+i,d=new r(e,t,l,o,c);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var pm,mm;(mm=pm||(pm={})).Ma="default",mm.Cache="cache";function yb(r){let e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}var gm=new Map;var Bm="firestore.googleapis.com",_m=!0,Ko=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new L(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Bm,this.ssl=_m}else this.host=e.host,this.ssl=e.ssl??_m;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Um;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<_b)throw new L(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yb(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new L(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new L(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new L(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ho=class{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ko({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ko(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new cl;switch(i.type){case"firstParty":return new dl(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new L(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let i=gm.get(t);i&&(wt("ComponentProvider","Removing Datastore"),gm.delete(t),i.terminate())})(this),Promise.resolve()}};function Ib(r,e,t,i={}){r=YA(r,Ho);let o=dr(e),c=r._getSettings(),l=fe(W({},c),{emulatorOptions:r._getEmulatorOptions()}),d=`${e}:${t}`;o&&(mo(`https://${d}`),go("Firestore",!0)),c.host!==Bm&&c.host!==d&&$A("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let I=fe(W({},c),{host:d,ssl:o,emulatorOptions:i});if(!He(I,l)&&(r._setSettings(I),i.mockUserToken)){let v,b;if(typeof i.mockUserToken=="string")v=i.mockUserToken,b=Te.MOCK_USER;else{v=jf(i.mockUserToken,r._app?.options.projectId);let S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new L(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Te(S)}r._authCredentials=new ul(new qo(v,b))}}var Tl=class r{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new r(this.firestore,e,this._query)}},Er=class r{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Al(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new r(this.firestore,e,this._key)}toJSON(){return{type:r._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(bs(t,r._jsonSchema))return new r(e,i||null,new cn(on.fromString(t.referencePath)))}};Er._jsonSchemaVersion="firestore/documentReference/1.0",Er._jsonSchema={type:ue("string",Er._jsonSchemaVersion),referencePath:ue("string")};var Al=class r extends Tl{constructor(e,t,i){super(e,t,gb(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new cn(e))}withConverter(e){return new r(this.firestore,e,this._path)}};var ym="AsyncQueue",Qo=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new El(this,"async_queue_retry"),this._c=()=>{let i=al();i&&wt(ym,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;let t=al();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=al();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new wr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!XA(e))throw e;wt(ym,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Em("INTERNAL UNHANDLED ERROR: ",Im(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let o=vl.createAndSchedule(this,e,t,i,c=>this.hc(c));return this.tc.push(o),o}uc(){this.nc&&Ve(47125,{Pc:Im(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function Im(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}var bl=class extends Ho{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Qo,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qo(e),this._firestoreClient=void 0,await e}}};function qm(r,e){let t=typeof r=="object"?r:pr(),i=typeof r=="string"?r:e||yl,o=It(t,"firestore").getImmediate({identifier:i});if(!o._initialized){let c=$f("firestore");c&&Ib(o,...c)}return o}var ws=class r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new r(An.fromBase64String(e))}catch(t){throw new L(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new r(An.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bs(e,r._jsonSchema))return r.fromBase64String(e.bytes)}};ws._jsonSchemaVersion="firestore/bytes/1.0",ws._jsonSchema={type:ue("string",ws._jsonSchemaVersion),bytes:ue("string")};var Jo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new L(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ml(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Es=class r{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return an(this._lat,e._lat)||an(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:r._jsonSchemaVersion}}static fromJSON(e){if(bs(e,r._jsonSchema))return new r(e.latitude,e.longitude)}};Es._jsonSchemaVersion="firestore/geoPoint/1.0",Es._jsonSchema={type:ue("string",Es._jsonSchemaVersion),latitude:ue("number"),longitude:ue("number")};var vs=class r{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let c=0;c<i.length;++c)if(i[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:r._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bs(e,r._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new r(e.vectorValues);throw new L(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};vs._jsonSchemaVersion="firestore/vectorValue/1.0",vs._jsonSchema={type:ue("string",vs._jsonSchemaVersion),vectorValues:ue("object")};var wb=new RegExp("[~\\*/\\[\\]]");function Eb(r,e,t){if(e.search(wb)>=0)throw wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Jo(...e.split("."))._internalPath}catch{throw wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function wm(r,e,t,i,o){let c=i&&!i.isEmpty(),l=o!==void 0,d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let I="";return(c||l)&&(I+=" (found",c&&(I+=` in field ${i}`),l&&(I+=` in document ${o}`),I+=")"),new L(B.INVALID_ARGUMENT,d+r+I)}var Yo=class{constructor(e,t,i,o,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Sl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($m("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Sl=class extends Yo{data(){return super.data()}};function $m(r,e){return typeof e=="string"?Eb(r,e):e instanceof Jo?e._internalPath:e._delegate._internalPath}var Vr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xr=class r extends Yo{constructor(e,t,i,o,c,l){super(e,t,i,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Lr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field($m("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=r._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};xr._jsonSchemaVersion="firestore/documentSnapshot/1.0",xr._jsonSchema={type:ue("string",xr._jsonSchemaVersion),bundleSource:ue("string","DocumentSnapshot"),bundleName:ue("string"),bundle:ue("string")};var Lr=class extends xr{data(e={}){return super.data(e)}},Ts=class r{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Vr(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Lr(this._firestore,this._userDataWriter,i.key,i,new Vr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new L(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let l=0;return o._snapshot.docChanges.map(d=>{let I=new Lr(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Vr(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:I,oldIndex:-1,newIndex:l++}})}{let l=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>c||d.type!==3).map(d=>{let I=new Lr(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Vr(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter),v=-1,b=-1;return d.type!==0&&(v=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),b=l.indexOf(d.doc.key)),{type:vb(d.type),doc:I,oldIndex:v,newIndex:b}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=r._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=pl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],i=[],o=[];return this.docs.forEach(c=>{c._document!==null&&(t.push(c._document),i.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function vb(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:r})}}Ts._jsonSchemaVersion="firestore/querySnapshot/1.0",Ts._jsonSchema={type:ue("string",Ts._jsonSchemaVersion),bundleSource:ue("string","QuerySnapshot"),bundleName:ue("string"),bundle:ue("string")};(function(e,t=!0){(function(o){As=o})(In),Oe(new pe("firestore",(i,{instanceIdentifier:o,options:c})=>{let l=i.getProvider("app").getImmediate(),d=new bl(new ll(i.getProvider("auth-internal")),new fl(l,i.getProvider("app-check-internal")),(function(v,b){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new L(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(v.options.projectId,b)})(l,o),l);return c=W({useFetchStreams:t},c),d._setSettings(c),d},"PUBLIC").setMultipleInstances(!0)),ve(cm,um,e),ve(cm,um,"esm2020")})();var Gm="@firebase/installations",Nl="0.6.19";var Wm=1e4,Km=`w:${Nl}`,Hm="FIS_v2",Tb="https://firebaseinstallations.googleapis.com/v1",Ab=3600*1e3,bb="installations",Sb="Installations";var Rb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Tr=new qe(bb,Sb,Rb);function Qm(r){return r instanceof we&&r.code.includes("request-failed")}function Jm({projectId:r}){return`${Tb}/projects/${r}/installations`}function Ym(r){return{token:r.token,requestStatus:2,expiresIn:Cb(r.expiresIn),creationTime:Date.now()}}async function Xm(r,e){let i=(await e.json()).error;return Tr.create("request-failed",{requestName:r,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Zm({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function Pb(r,{refreshToken:e}){let t=Zm(r);return t.append("Authorization",kb(e)),t}async function eg(r){let e=await r();return e.status>=500&&e.status<600?r():e}function Cb(r){return Number(r.replace("s","000"))}function kb(r){return`${Hm} ${r}`}async function Nb({appConfig:r,heartbeatServiceProvider:e},{fid:t}){let i=Jm(r),o=Zm(r),c=e.getImmediate({optional:!0});if(c){let v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}let l={fid:t,authVersion:Hm,appId:r.appId,sdkVersion:Km},d={method:"POST",headers:o,body:JSON.stringify(l)},I=await eg(()=>fetch(i,d));if(I.ok){let v=await I.json();return{fid:v.fid||t,registrationStatus:2,refreshToken:v.refreshToken,authToken:Ym(v.authToken)}}else throw await Xm("Create Installation",I)}function tg(r){return new Promise(e=>{setTimeout(e,r)})}function Db(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}var Ob=/^[cdef][\w-]{21}$/,kl="";function Vb(){try{let r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;let t=xb(r);return Ob.test(t)?t:kl}catch{return kl}}function xb(r){return Db(r).substr(0,22)}function Zo(r){return`${r.appName}!${r.appId}`}var ng=new Map;function rg(r,e){let t=Zo(r);ig(t,e),Lb(t,e)}function ig(r,e){let t=ng.get(r);if(t)for(let i of t)i(e)}function Lb(r,e){let t=Mb();t&&t.postMessage({key:r,fid:e}),Fb()}var vr=null;function Mb(){return!vr&&"BroadcastChannel"in self&&(vr=new BroadcastChannel("[Firebase] FID Change"),vr.onmessage=r=>{ig(r.data.key,r.data.fid)}),vr}function Fb(){ng.size===0&&vr&&(vr.close(),vr=null)}var Ub="firebase-installations-database",Bb=1,Ar="firebase-installations-store",Pl=null;function Dl(){return Pl||(Pl=dn(Ub,Bb,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Ar)}}})),Pl}async function Xo(r,e){let t=Zo(r),o=(await Dl()).transaction(Ar,"readwrite"),c=o.objectStore(Ar),l=await c.get(t);return await c.put(e,t),await o.done,(!l||l.fid!==e.fid)&&rg(r,e.fid),e}async function sg(r){let e=Zo(r),i=(await Dl()).transaction(Ar,"readwrite");await i.objectStore(Ar).delete(e),await i.done}async function ea(r,e){let t=Zo(r),o=(await Dl()).transaction(Ar,"readwrite"),c=o.objectStore(Ar),l=await c.get(t),d=e(l);return d===void 0?await c.delete(t):await c.put(d,t),await o.done,d&&(!l||l.fid!==d.fid)&&rg(r,d.fid),d}async function Ol(r){let e,t=await ea(r.appConfig,i=>{let o=qb(i),c=$b(r,o);return e=c.registrationPromise,c.installationEntry});return t.fid===kl?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function qb(r){let e=r||{fid:Vb(),registrationStatus:0};return og(e)}function $b(r,e){if(e.registrationStatus===0){if(!navigator.onLine){let o=Promise.reject(Tr.create("app-offline"));return{installationEntry:e,registrationPromise:o}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=jb(r,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zb(r)}:{installationEntry:e}}async function jb(r,e){try{let t=await Nb(r,e);return Xo(r.appConfig,t)}catch(t){throw Qm(t)&&t.customData.serverCode===409?await sg(r.appConfig):await Xo(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function zb(r){let e=await jm(r.appConfig);for(;e.registrationStatus===1;)await tg(100),e=await jm(r.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:i}=await Ol(r);return i||t}return e}function jm(r){return ea(r,e=>{if(!e)throw Tr.create("installation-not-found");return og(e)})}function og(r){return Gb(r)?{fid:r.fid,registrationStatus:0}:r}function Gb(r){return r.registrationStatus===1&&r.registrationTime+Wm<Date.now()}async function Wb({appConfig:r,heartbeatServiceProvider:e},t){let i=Kb(r,t),o=Pb(r,t),c=e.getImmediate({optional:!0});if(c){let v=await c.getHeartbeatsHeader();v&&o.append("x-firebase-client",v)}let l={installation:{sdkVersion:Km,appId:r.appId}},d={method:"POST",headers:o,body:JSON.stringify(l)},I=await eg(()=>fetch(i,d));if(I.ok){let v=await I.json();return Ym(v)}else throw await Xm("Generate Auth Token",I)}function Kb(r,{fid:e}){return`${Jm(r)}/${e}/authTokens:generate`}async function Vl(r,e=!1){let t,i=await ea(r.appConfig,c=>{if(!ag(c))throw Tr.create("not-registered");let l=c.authToken;if(!e&&Jb(l))return c;if(l.requestStatus===1)return t=Hb(r,e),c;{if(!navigator.onLine)throw Tr.create("app-offline");let d=Xb(c);return t=Qb(r,d),d}});return t?await t:i.authToken}async function Hb(r,e){let t=await zm(r.appConfig);for(;t.authToken.requestStatus===1;)await tg(100),t=await zm(r.appConfig);let i=t.authToken;return i.requestStatus===0?Vl(r,e):i}function zm(r){return ea(r,e=>{if(!ag(e))throw Tr.create("not-registered");let t=e.authToken;return Zb(t)?fe(W({},e),{authToken:{requestStatus:0}}):e})}async function Qb(r,e){try{let t=await Wb(r,e),i=fe(W({},e),{authToken:t});return await Xo(r.appConfig,i),t}catch(t){if(Qm(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await sg(r.appConfig);else{let i=fe(W({},e),{authToken:{requestStatus:0}});await Xo(r.appConfig,i)}throw t}}function ag(r){return r!==void 0&&r.registrationStatus===2}function Jb(r){return r.requestStatus===2&&!Yb(r)}function Yb(r){let e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+Ab}function Xb(r){let e={requestStatus:1,requestTime:Date.now()};return fe(W({},r),{authToken:e})}function Zb(r){return r.requestStatus===1&&r.requestTime+Wm<Date.now()}async function eS(r){let e=r,{installationEntry:t,registrationPromise:i}=await Ol(e);return i?i.catch(console.error):Vl(e).catch(console.error),t.fid}async function tS(r,e=!1){let t=r;return await nS(t),(await Vl(t,e)).token}async function nS(r){let{registrationPromise:e}=await Ol(r);e&&await e}function rS(r){if(!r||!r.options)throw Cl("App Configuration");if(!r.name)throw Cl("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!r.options[t])throw Cl(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Cl(r){return Tr.create("missing-app-config-values",{valueName:r})}var cg="installations",iS="installations-internal",sS=r=>{let e=r.getProvider("app").getImmediate(),t=rS(e),i=It(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},oS=r=>{let e=r.getProvider("app").getImmediate(),t=It(e,cg).getImmediate();return{getId:()=>eS(t),getToken:o=>tS(t,o)}};function aS(){Oe(new pe(cg,sS,"PUBLIC")),Oe(new pe(iS,oS,"PRIVATE"))}aS();ve(Gm,Nl);ve(Gm,Nl,"esm2020");var ta="analytics",cS="firebase_id",uS="origin",lS=60*1e3,hS="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ql="https://www.googletagmanager.com/gtag/js";var xe=new St("@firebase/analytics");var dS={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$e=new qe("analytics","Analytics",dS);function fS(r){if(!r.startsWith(ql)){let e=$e.create("invalid-gtag-resource",{gtagURL:r});return xe.warn(e.message),""}return r}function mg(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function pS(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function mS(r,e){let t=pS("firebase-js-sdk-policy",{createScriptURL:fS}),i=document.createElement("script"),o=`${ql}?l=${r}&id=${e}`;i.src=t?t?.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function gS(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function _S(r,e,t,i,o,c){let l=i[o];try{if(l)await e[l];else{let I=(await mg(t)).find(v=>v.measurementId===o);I&&await e[I.appId]}}catch(d){xe.error(d)}r("config",o,c)}async function yS(r,e,t,i,o){try{let c=[];if(o&&o.send_to){let l=o.send_to;Array.isArray(l)||(l=[l]);let d=await mg(t);for(let I of l){let v=d.find(S=>S.measurementId===I),b=v&&e[v.appId];if(b)c.push(b);else{c=[];break}}}c.length===0&&(c=Object.values(e)),await Promise.all(c),r("event",i,o||{})}catch(c){xe.error(c)}}function IS(r,e,t,i){async function o(c,...l){try{if(c==="event"){let[d,I]=l;await yS(r,e,t,d,I)}else if(c==="config"){let[d,I]=l;await _S(r,e,t,i,d,I)}else if(c==="consent"){let[d,I]=l;r("consent",d,I)}else if(c==="get"){let[d,I,v]=l;r("get",d,I,v)}else if(c==="set"){let[d]=l;r("set",d)}else r(c,...l)}catch(d){xe.error(d)}}return o}function wS(r,e,t,i,o){let c=function(...l){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(c=window[o]),window[o]=IS(c,r,e,t),{gtagCore:c,wrappedGtag:window[o]}}function ES(r){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(ql)&&t.src.includes(r))return t;return null}var vS=30,TS=1e3,Ll=class{constructor(e={},t=TS){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},gg=new Ll;function AS(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function bS(r){let{appId:e,apiKey:t}=r,i={method:"GET",headers:AS(t)},o=hS.replace("{app-id}",e),c=await fetch(o,i);if(c.status!==200&&c.status!==304){let l="";try{let d=await c.json();d.error?.message&&(l=d.error.message)}catch{}throw $e.create("config-fetch-failed",{httpStatus:c.status,responseMessage:l})}return c.json()}async function SS(r,e=gg,t){let{appId:i,apiKey:o,measurementId:c}=r.options;if(!i)throw $e.create("no-app-id");if(!o){if(c)return{measurementId:c,appId:i};throw $e.create("no-api-key")}let l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new Ml;return setTimeout(async()=>{d.abort()},t!==void 0?t:lS),_g({appId:i,apiKey:o,measurementId:c},l,d,e)}async function _g(r,{throttleEndTimeMillis:e,backoffCount:t},i,o=gg){let{appId:c,measurementId:l}=r;try{await RS(i,e)}catch(d){if(l)return xe.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:l};throw d}try{let d=await bS(r);return o.deleteThrottleMetadata(c),d}catch(d){let I=d;if(!PS(I)){if(o.deleteThrottleMetadata(c),l)return xe.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${I?.message}]`),{appId:c,measurementId:l};throw d}let v=Number(I?.customData?.httpStatus)===503?Eu(t,o.intervalMillis,vS):Eu(t,o.intervalMillis),b={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(c,b),xe.debug(`Calling attemptFetch again in ${v} millis`),_g(r,b,i,o)}}function RS(r,e){return new Promise((t,i)=>{let o=Math.max(e-Date.now(),0),c=setTimeout(t,o);r.addEventListener(()=>{clearTimeout(c),i($e.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function PS(r){if(!(r instanceof we)||!r.customData)return!1;let e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}var Ml=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Fl;async function CS(r,e,t,i,o){if(o&&o.global){r("event",t,i);return}else{let c=await e,l=fe(W({},i),{send_to:c});r("event",t,l)}}var Ul;function kS(r){Ul=r}function NS(r){Fl=r}async function DS(){if(us())try{await yo()}catch(r){return xe.warn($e.create("indexeddb-unavailable",{errorInfo:r?.toString()}).message),!1}else return xe.warn($e.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function OS(r,e,t,i,o,c,l){let d=SS(r);d.then(A=>{t[A.measurementId]=A.appId,r.options.measurementId&&A.measurementId!==r.options.measurementId&&xe.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${A.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(A=>xe.error(A)),e.push(d);let I=DS().then(A=>{if(A)return i.getId()}),[v,b]=await Promise.all([d,I]);ES(c)||mS(c,v.measurementId),Ul&&(o("consent","default",Ul),kS(void 0)),o("js",new Date);let S=l?.config??{};return S[uS]="firebase",S.update=!0,b!=null&&(S[cS]=b),o("config",v.measurementId,S),Fl&&(o("set",Fl),NS(void 0)),v.measurementId}var Bl=class{constructor(e){this.app=e}_delete(){return delete Ss[this.app.options.appId],Promise.resolve()}},Ss={},ug=[],lg={},xl="dataLayer",VS="gtag",hg,yg,dg=!1;function xS(){let r=[];if(_o()&&r.push("This is a browser extension environment."),Hf()||r.push("Cookies are not available."),r.length>0){let e=r.map((i,o)=>`(${o+1}) ${i}`).join(" "),t=$e.create("invalid-analytics-context",{errorInfo:e});xe.warn(t.message)}}function LS(r,e,t){xS();let i=r.options.appId;if(!i)throw $e.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)xe.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $e.create("no-api-key");if(Ss[i]!=null)throw $e.create("already-exists",{id:i});if(!dg){gS(xl);let{wrappedGtag:c,gtagCore:l}=wS(Ss,ug,lg,xl,VS);yg=c,hg=l,dg=!0}return Ss[i]=OS(r,ug,lg,e,hg,xl,t),new Bl(r)}function Ig(r=pr()){r=yt(r);let e=It(r,ta);return e.isInitialized()?e.getImmediate():MS(r)}function MS(r,e={}){let t=It(r,ta);if(t.isInitialized()){let o=t.getImmediate();if(He(e,t.getOptions()))return o;throw $e.create("already-initialized")}return t.initialize({options:e})}function FS(r,e,t,i){r=yt(r),CS(yg,Ss[r.app.options.appId],e,t,i).catch(o=>xe.error(o))}var fg="@firebase/analytics",pg="0.10.18";function US(){Oe(new pe(ta,(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return LS(i,o,t)},"PUBLIC")),Oe(new pe("analytics-internal",r,"PRIVATE")),ve(fg,pg),ve(fg,pg,"esm2020");function r(e){try{let t=e.getProvider(ta).getImmediate();return{logEvent:(i,o,c)=>FS(t,i,o,c)}}catch(t){throw $e.create("interop-component-reg-failed",{reason:t})}}}US();var wg={production:!1,firebaseConfig:{apiKey:"AIzaSyDwIcr47aUDCJnbWvBbUuyHf5SwGc3XIQU",authDomain:"cuac-design.firebaseapp.com",projectId:"cuac-design",storageBucket:"cuac-design.firebasestorage.app",messagingSenderId:"121482677688",appId:"1:121482677688:web:93831d6940daae2ddf534d",measurementId:"G-JT5JB6WHC1"}};var Eg={providers:[Wl(),Jl(),ih(sh),nh(th()),kh(()=>Nu(wg.firebaseConfig)),sd(()=>sl()),ef(()=>qm()),xf(()=>Ig())]};var na=class r{title=Kl("cuac-design");static \u0275fac=function(t){return new(t||r)};static \u0275cmp=Hl({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){t&1&&Ql(0,"router-outlet")},dependencies:[rh],encapsulation:2})};eh(na,Eg).catch(r=>console.error(r));
