import './polyfills.server.mjs';
import{A as Nu,a as cu,b as uu,c as du,d as hu,e as ri,f as fu,g as pu,h as mu,i as gu,j as yu,k as pr,l as vu,m as Tu,n as Su,o as Eu,p as _u,q as bu,r as wu,s as Cu,t as Iu,u as Ru,y as Au,z as Du}from"./chunk-VSSFB3YC.mjs";import{a as su,d as ou}from"./chunk-IEZMWWIV.mjs";import{Eb as tu,Fa as Jc,Fb as nu,I as Wc,Kb as ru,L as fr,Mb as iu,N as Hc,Nb as au,Q as Qc,Sb as lu,Va as Zc,Y as Yc,mb as eu,ta as Xc}from"./chunk-2HMMCHMF.mjs";import{c as X,f as C,h as $c,i as W}from"./chunk-3CVZQN5Z.mjs";var Y=C(Ge=>{"use strict";Object.defineProperty(Ge,"__esModule",{value:!0});Ge.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=Ge.DEFAULT_MAX_SEND_MESSAGE_LENGTH=Ge.Propagate=Ge.LogVerbosity=Ge.Status=void 0;var Lu=function(n){return n[n.OK=0]="OK",n[n.CANCELLED=1]="CANCELLED",n[n.UNKNOWN=2]="UNKNOWN",n[n.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",n[n.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",n[n.NOT_FOUND=5]="NOT_FOUND",n[n.ALREADY_EXISTS=6]="ALREADY_EXISTS",n[n.PERMISSION_DENIED=7]="PERMISSION_DENIED",n[n.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",n[n.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",n[n.ABORTED=10]="ABORTED",n[n.OUT_OF_RANGE=11]="OUT_OF_RANGE",n[n.UNIMPLEMENTED=12]="UNIMPLEMENTED",n[n.INTERNAL=13]="INTERNAL",n[n.UNAVAILABLE=14]="UNAVAILABLE",n[n.DATA_LOSS=15]="DATA_LOSS",n[n.UNAUTHENTICATED=16]="UNAUTHENTICATED",n}(Lu||(Ge.Status=Lu={})),Fu=function(n){return n[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.ERROR=2]="ERROR",n[n.NONE=3]="NONE",n}(Fu||(Ge.LogVerbosity=Fu={})),Bu=function(n){return n[n.DEADLINE=1]="DEADLINE",n[n.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",n[n.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",n[n.CANCELLATION=8]="CANCELLATION",n[n.DEFAULTS=65535]="DEFAULTS",n}(Bu||(Ge.Propagate=Bu={}));Ge.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;Ge.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024});var ao=C((OC,Gm)=>{Gm.exports={name:"@grpc/grpc-js",version:"1.9.15",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:"^8.13.0 || >=10.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@types/gulp":"^4.0.6","@types/gulp-mocha":"0.0.32","@types/lodash":"^4.14.186","@types/mocha":"^5.2.6","@types/ncp":"^2.0.1","@types/pify":"^3.0.2","@types/semver":"^7.3.9","@typescript-eslint/eslint-plugin":"^5.59.11","@typescript-eslint/parser":"^5.59.11","@typescript-eslint/typescript-estree":"^5.59.11","clang-format":"^1.0.55",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.4",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.3.5","ts-node":"^10.9.1",typescript:"^5.1.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run generate-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs test/fixtures/ -O src/generated/ --grpcLib ../index channelz.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto"},dependencies:{"@grpc/proto-loader":"^0.7.8","@types/node":">=12.12.47"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/*.proto","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var oe=C(Oe=>{"use strict";var lo,co,uo,ho;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.isTracerEnabled=Oe.trace=Oe.log=Oe.setLoggerVerbosity=Oe.setLogger=Oe.getLogger=void 0;var Pt=Y(),jm=X("process"),Km=ao().version,$m={error:(n,...e)=>{console.error("E "+n,...e)},info:(n,...e)=>{console.error("I "+n,...e)},debug:(n,...e)=>{console.error("D "+n,...e)}},cn=$m,wn=Pt.LogVerbosity.ERROR,Wm=(co=(lo=process.env.GRPC_NODE_VERBOSITY)!==null&&lo!==void 0?lo:process.env.GRPC_VERBOSITY)!==null&&co!==void 0?co:"";switch(Wm.toUpperCase()){case"DEBUG":wn=Pt.LogVerbosity.DEBUG;break;case"INFO":wn=Pt.LogVerbosity.INFO;break;case"ERROR":wn=Pt.LogVerbosity.ERROR;break;case"NONE":wn=Pt.LogVerbosity.NONE;break;default:}var Hm=()=>cn;Oe.getLogger=Hm;var Qm=n=>{cn=n};Oe.setLogger=Qm;var Ym=n=>{wn=n};Oe.setLoggerVerbosity=Ym;var Xm=(n,...e)=>{let t;if(n>=wn){switch(n){case Pt.LogVerbosity.DEBUG:t=cn.debug;break;case Pt.LogVerbosity.INFO:t=cn.info;break;case Pt.LogVerbosity.ERROR:t=cn.error;break}t||(t=cn.error),t&&t.bind(cn)(...e)}};Oe.log=Xm;var Jm=(ho=(uo=process.env.GRPC_NODE_TRACE)!==null&&uo!==void 0?uo:process.env.GRPC_TRACE)!==null&&ho!==void 0?ho:"",fo=new Set,qu=new Set;for(let n of Jm.split(","))n.startsWith("-")?qu.add(n.substring(1)):fo.add(n);var Zm=fo.has("all");function eg(n,e,t){Uu(e)&&(0,Oe.log)(n,new Date().toISOString()+" | v"+Km+" "+jm.pid+" | "+e+" | "+t)}Oe.trace=eg;function Uu(n){return!qu.has(n)&&(Zm||fo.has(n))}Oe.isTracerEnabled=Uu});var ii=C(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.getErrorCode=Cn.getErrorMessage=void 0;function tg(n){return n instanceof Error?n.message:String(n)}Cn.getErrorMessage=tg;function ng(n){return typeof n=="object"&&n!==null&&"code"in n&&typeof n.code=="number"?n.code:null}Cn.getErrorCode=ng});var xe=C(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.Metadata=void 0;var rg=oe(),ig=Y(),sg=ii(),og=/^[0-9a-z_.-]+$/,ag=/^[ -~]*$/;function lg(n){return og.test(n)}function cg(n){return ag.test(n)}function zu(n){return n.endsWith("-bin")}function ug(n){return!n.startsWith("grpc-")}function si(n){return n.toLowerCase()}function Vu(n,e){if(!lg(n))throw new Error('Metadata key "'+n+'" contains illegal characters');if(e!=null)if(zu(n)){if(!Buffer.isBuffer(e))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(e))throw new Error("keys that don't end with '-bin' must have String values");if(!cg(e))throw new Error('Metadata string value "'+e+'" contains illegal characters')}}var po=class n{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){e=si(e),Vu(e,t),this.internalRepr.set(e,[t])}add(e,t){e=si(e),Vu(e,t);let r=this.internalRepr.get(e);r===void 0?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=si(e),this.internalRepr.delete(e)}get(e){return e=si(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let i=r[0];e[t]=Buffer.isBuffer(i)?Buffer.from(i):i}return e}clone(){let e=new n(this.options),t=e.internalRepr;for(let[r,i]of this.internalRepr){let s=i.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);t.set(r,s)}return e}merge(e){for(let[t,r]of e.internalRepr){let i=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,i)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(dg);return e}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new n;for(let r of Object.keys(e)){if(r.charAt(0)===":")continue;let i=e[r];try{zu(r)?Array.isArray(i)?i.forEach(s=>{t.add(r,Buffer.from(s,"base64"))}):i!==void 0&&(ug(r)?i.split(",").forEach(s=>{t.add(r,Buffer.from(s.trim(),"base64"))}):t.add(r,Buffer.from(i,"base64"))):Array.isArray(i)?i.forEach(s=>{t.add(r,s)}):i!==void 0&&t.add(r,i)}catch(s){let o=`Failed to add metadata entry ${r}: ${i}. ${(0,sg.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,rg.log)(ig.LogVerbosity.ERROR,o)}}return t}};oi.Metadata=po;var dg=n=>Buffer.isBuffer(n)?n.toString("base64"):n});var To=C(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.CallCredentials=void 0;var vo=xe();function hg(n){return"getRequestHeaders"in n&&typeof n.getRequestHeaders=="function"}var In=class n{static createFromMetadataGenerator(e){return new go(e)}static createFromGoogleCredential(e){return n.createFromMetadataGenerator((t,r)=>{let i;hg(e)?i=e.getRequestHeaders(t.service_url):i=new Promise((s,o)=>{e.getRequestMetadata(t.service_url,(a,l)=>{if(a){o(a);return}if(!l){o(new Error("Headers not set by metadata plugin"));return}s(l)})}),i.then(s=>{let o=new vo.Metadata;for(let a of Object.keys(s))o.add(a,s[a]);r(null,o)},s=>{r(s)})})}static createEmpty(){return new yo}};ai.CallCredentials=In;var mo=class n extends In{constructor(e){super(),this.creds=e}generateMetadata(e){return W(this,null,function*(){let t=new vo.Metadata,r=yield Promise.all(this.creds.map(i=>i.generateMetadata(e)));for(let i of r)t.merge(i);return t})}compose(e){return new n(this.creds.concat([e]))}_equals(e){return this===e?!0:e instanceof n?this.creds.every((t,r)=>t._equals(e.creds[r])):!1}},go=class n extends In{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(i,s)=>{s!==void 0?t(s):r(i)})})}compose(e){return new mo([this,e])}_equals(e){return this===e?!0:e instanceof n?this.metadataGenerator===e.metadataGenerator:!1}},yo=class n extends In{generateMetadata(e){return Promise.resolve(new vo.Metadata)}compose(e){return e}_equals(e){return e instanceof n}}});var Eo=C(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.getDefaultRootsData=Rn.CIPHER_SUITES=void 0;var fg=X("fs");Rn.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var Gu=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,So=null;function pg(){return Gu?(So===null&&(So=fg.readFileSync(Gu)),So):null}Rn.getDefaultRootsData=pg});var ui=C(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.ChannelCredentials=void 0;var mg=X("tls"),gg=To(),ju=Eo();function _o(n,e){if(n&&!(n instanceof Buffer))throw new TypeError(`${e}, if provided, must be a Buffer.`)}var An=class{constructor(e){this.callCredentials=e||gg.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var s;if(_o(e,"Root certificate"),_o(t,"Private key"),_o(r,"Certificate chain"),t&&!r)throw new Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw new Error("Certificate chain must be given with accompanying private key");let o=(0,mg.createSecureContext)({ca:(s=e??(0,ju.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,key:t??void 0,cert:r??void 0,ciphers:ju.CIPHER_SUITES});return new li(o,i??{})}static createFromSecureContext(e,t){return new li(e,t??{})}static createInsecure(){return new bo}};ci.ChannelCredentials=An;var bo=class n extends An{constructor(e){super(e)}compose(e){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof n}},li=class n extends An{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},t?.checkServerIdentity&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){let t=this.callCredentials.compose(e);return new wo(this,t)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof n?this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity:!1}},wo=class n extends An{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new n(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e?!0:e instanceof n?this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials):!1}}});var Ft=C(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.validateLoadBalancingConfig=be.getFirstUsableConfig=be.isLoadBalancerNameRegistered=be.createLoadBalancer=be.registerDefaultLoadBalancerType=be.registerLoadBalancerType=be.createChildChannelControlHelper=void 0;function yg(n,e){var t,r,i,s,o,a,l,c,m,v;return{createSubchannel:(r=(t=e.createSubchannel)===null||t===void 0?void 0:t.bind(e))!==null&&r!==void 0?r:n.createSubchannel.bind(n),updateState:(s=(i=e.updateState)===null||i===void 0?void 0:i.bind(e))!==null&&s!==void 0?s:n.updateState.bind(n),requestReresolution:(a=(o=e.requestReresolution)===null||o===void 0?void 0:o.bind(e))!==null&&a!==void 0?a:n.requestReresolution.bind(n),addChannelzChild:(c=(l=e.addChannelzChild)===null||l===void 0?void 0:l.bind(e))!==null&&c!==void 0?c:n.addChannelzChild.bind(n),removeChannelzChild:(v=(m=e.removeChannelzChild)===null||m===void 0?void 0:m.bind(e))!==null&&v!==void 0?v:n.removeChannelzChild.bind(n)}}be.createChildChannelControlHelper=yg;var Lt={},Co=null;function vg(n,e,t){Lt[n]={LoadBalancer:e,LoadBalancingConfig:t}}be.registerLoadBalancerType=vg;function Tg(n){Co=n}be.registerDefaultLoadBalancerType=Tg;function Sg(n,e){let t=n.getLoadBalancerName();return t in Lt?new Lt[t].LoadBalancer(e):null}be.createLoadBalancer=Sg;function Eg(n){return n in Lt}be.isLoadBalancerNameRegistered=Eg;function _g(n,e=!1){for(let t of n)if(t.getLoadBalancerName()in Lt)return t;return e&&Co?new Lt[Co].LoadBalancingConfig:null}be.getFirstUsableConfig=_g;function bg(n){if(!(n!==null&&typeof n=="object"))throw new Error("Load balancing config must be an object");let e=Object.keys(n);if(e.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let t=e[0];if(t in Lt)return Lt[t].LoadBalancingConfig.createFromJson(n[t]);throw new Error(`Unrecognized load balancing config name ${t}`)}be.validateLoadBalancingConfig=bg});var Io=C(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.extractAndSelectServiceConfig=Bt.validateServiceConfig=Bt.validateRetryThrottling=void 0;var wg=X("os"),di=Y(),Cg=Ft(),hi=/^\d+(\.\d{1,9})?s$/,Ig="node";function Rg(n){if("service"in n&&n.service!==""){if(typeof n.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof n.service}`);if("method"in n&&n.method!==""){if(typeof n.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof n.service}`);return{service:n.service,method:n.method}}else return{service:n.service}}else{if("method"in n&&n.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return{}}}function Ag(n){if(!("maxAttempts"in n)||!Number.isInteger(n.maxAttempts)||n.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in n)||typeof n.initialBackoff!="string"||!hi.test(n.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in n)||typeof n.maxBackoff!="string"||!hi.test(n.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in n)||typeof n.backoffMultiplier!="number"||n.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in n&&Array.isArray(n.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(n.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let e of n.retryableStatusCodes)if(typeof e=="number"){if(!Object.values(di.Status).includes(e))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(di.Status).includes(e.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:n.maxAttempts,initialBackoff:n.initialBackoff,maxBackoff:n.maxBackoff,backoffMultiplier:n.backoffMultiplier,retryableStatusCodes:n.retryableStatusCodes}}function Dg(n){if(!("maxAttempts"in n)||!Number.isInteger(n.maxAttempts)||n.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in n&&(typeof n.hedgingDelay!="string"||!hi.test(n.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in n&&Array.isArray(n.nonFatalStatusCodes))for(let t of n.nonFatalStatusCodes)if(typeof t=="number"){if(!Object.values(di.Status).includes(t))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof t=="string"){if(!Object.values(di.Status).includes(t.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let e={maxAttempts:n.maxAttempts};return n.hedgingDelay&&(e.hedgingDelay=n.hedgingDelay),n.nonFatalStatusCodes&&(e.nonFatalStatusCodes=n.nonFatalStatusCodes),e}function Ng(n){var e;let t={name:[]};if(!("name"in n)||!Array.isArray(n.name))throw new Error("Invalid method config: invalid name array");for(let r of n.name)t.name.push(Rg(r));if("waitForReady"in n){if(typeof n.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");t.waitForReady=n.waitForReady}if("timeout"in n)if(typeof n.timeout=="object"){if(!("seconds"in n.timeout)||typeof n.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in n.timeout)||typeof n.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");t.timeout=n.timeout}else if(typeof n.timeout=="string"&&hi.test(n.timeout)){let r=n.timeout.substring(0,n.timeout.length-1).split(".");t.timeout={seconds:r[0]|0,nanos:((e=r[1])!==null&&e!==void 0?e:0)|0}}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in n){if(typeof n.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");t.maxRequestBytes=n.maxRequestBytes}if("maxResponseBytes"in n){if(typeof n.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");t.maxResponseBytes=n.maxResponseBytes}if("retryPolicy"in n){if("hedgingPolicy"in n)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");t.retryPolicy=Ag(n.retryPolicy)}else"hedgingPolicy"in n&&(t.hedgingPolicy=Dg(n.hedgingPolicy));return t}function Ku(n){if(!("maxTokens"in n)||typeof n.maxTokens!="number"||n.maxTokens<=0||n.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in n)||typeof n.tokenRatio!="number"||n.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+n.maxTokens.toFixed(3),tokenRatio:+n.tokenRatio.toFixed(3)}}Bt.validateRetryThrottling=Ku;function $u(n){let e={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in n)if(typeof n.loadBalancingPolicy=="string")e.loadBalancingPolicy=n.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in n)if(Array.isArray(n.loadBalancingConfig))for(let r of n.loadBalancingConfig)e.loadBalancingConfig.push((0,Cg.validateLoadBalancingConfig)(r));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in n&&Array.isArray(n.methodConfig))for(let r of n.methodConfig)e.methodConfig.push(Ng(r));"retryThrottling"in n&&(e.retryThrottling=Ku(n.retryThrottling));let t=[];for(let r of e.methodConfig)for(let i of r.name){for(let s of t)if(i.service===s.service&&i.method===s.method)throw new Error(`Invalid service config: duplicate name ${i.service}/${i.method}`);t.push(i)}return e}Bt.validateServiceConfig=$u;function Og(n){if(!("serviceConfig"in n))throw new Error("Invalid service config choice: missing service config");let e={serviceConfig:$u(n.serviceConfig)};if("clientLanguage"in n)if(Array.isArray(n.clientLanguage)){e.clientLanguage=[];for(let r of n.clientLanguage)if(typeof r=="string")e.clientLanguage.push(r);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in n)if(Array.isArray(n.clientHostname)){e.clientHostname=[];for(let r of n.clientHostname)if(typeof r=="string")e.clientHostname.push(r);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in n)if(typeof n.percentage=="number"&&0<=n.percentage&&n.percentage<=100)e.percentage=n.percentage;else throw new Error("Invalid service config choice: invalid percentage");let t=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let r in n)if(!t.includes(r))throw new Error(`Invalid service config choice: unexpected field ${r}`);return e}function kg(n,e){if(!Array.isArray(n))throw new Error("Invalid service config list");for(let t of n){let r=Og(t);if(!(typeof r.percentage=="number"&&e>r.percentage)){if(Array.isArray(r.clientHostname)){let i=!1;for(let s of r.clientHostname)s===wg.hostname()&&(i=!0);if(!i)continue}if(Array.isArray(r.clientLanguage)){let i=!1;for(let s of r.clientLanguage)s===Ig&&(i=!0);if(!i)continue}return r.serviceConfig}}throw new Error("No matching service config found")}function xg(n,e){for(let t of n)if(t.length>0&&t[0].startsWith("grpc_config=")){let r=t.join("").substring(12),i=JSON.parse(r);return kg(i,e)}return null}Bt.extractAndSelectServiceConfig=xg});var je=C(fi=>{"use strict";Object.defineProperty(fi,"__esModule",{value:!0});fi.ConnectivityState=void 0;var Wu=function(n){return n[n.IDLE=0]="IDLE",n[n.CONNECTING=1]="CONNECTING",n[n.READY=2]="READY",n[n.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",n[n.SHUTDOWN=4]="SHUTDOWN",n}(Wu||(fi.ConnectivityState=Wu={}))});var Be=C(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.uriToString=qt.splitHostPort=qt.parseUri=void 0;var Mg=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function Pg(n){let e=Mg.exec(n);return e===null?null:{scheme:e[1],authority:e[2],path:e[3]}}qt.parseUri=Pg;var Hu=/^\d+$/;function Lg(n){if(n.startsWith("[")){let e=n.indexOf("]");if(e===-1)return null;let t=n.substring(1,e);if(t.indexOf(":")===-1)return null;if(n.length>e+1)if(n[e+1]===":"){let r=n.substring(e+2);return Hu.test(r)?{host:t,port:+r}:null}else return null;else return{host:t}}else{let e=n.split(":");return e.length===2?Hu.test(e[1])?{host:e[0],port:+e[1]}:null:{host:n}}}qt.splitHostPort=Lg;function Fg(n){let e="";return n.scheme!==void 0&&(e+=n.scheme+":"),n.authority!==void 0&&(e+="//"+n.authority+"/"),e+=n.path,e}qt.uriToString=Fg});var ot=C(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.mapUriDefaultScheme=Ke.getDefaultAuthority=Ke.createResolver=Ke.registerDefaultScheme=Ke.registerResolver=void 0;var Ao=Be(),Dn={},Ro=null;function Bg(n,e){Dn[n]=e}Ke.registerResolver=Bg;function qg(n){Ro=n}Ke.registerDefaultScheme=qg;function Ug(n,e,t){if(n.scheme!==void 0&&n.scheme in Dn)return new Dn[n.scheme](n,e,t);throw new Error(`No resolver could be created for target ${(0,Ao.uriToString)(n)}`)}Ke.createResolver=Ug;function Vg(n){if(n.scheme!==void 0&&n.scheme in Dn)return Dn[n.scheme].getDefaultAuthority(n);throw new Error(`Invalid target ${(0,Ao.uriToString)(n)}`)}Ke.getDefaultAuthority=Vg;function zg(n){return n.scheme===void 0||!(n.scheme in Dn)?Ro!==null?{scheme:Ro,authority:void 0,path:(0,Ao.uriToString)(n)}:null:n}Ke.mapUriDefaultScheme=zg});var Vt=C(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.QueuePicker=Ut.UnavailablePicker=Ut.PickResultType=void 0;var Gg=xe(),jg=Y(),pi=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.QUEUE=1]="QUEUE",n[n.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",n[n.DROP=3]="DROP",n}(pi||(Ut.PickResultType=pi={})),Do=class{constructor(e){this.status=Object.assign({code:jg.Status.UNAVAILABLE,details:"No connection established",metadata:new Gg.Metadata},e)}pick(e){return{pickResultType:pi.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};Ut.UnavailablePicker=Do;var No=class{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:pi.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};Ut.QueuePicker=No});var mr=C(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.BackoffTimeout=void 0;var Kg=1e3,$g=1.6,Wg=12e4,Hg=.2;function Qg(n,e){return Math.random()*(e-n)+n}var Oo=class{constructor(e,t){this.callback=e,this.initialDelay=Kg,this.multiplier=$g,this.maxDelay=Wg,this.jitter=Hg,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||(r=(t=this.timerId).unref)===null||r===void 0||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+Qg(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,(t=(e=this.timerId).ref)===null||t===void 0||t.call(e)}unref(){var e,t;this.hasRef=!1,(t=(e=this.timerId).unref)===null||t===void 0||t.call(e)}getEndTime(){return this.endTime}};mi.BackoffTimeout=Oo});var yi=C(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});gi.ChildLoadBalancerHandler=void 0;var Yg=Ft(),Xg=je(),Jg="child_load_balancer_helper",ko=class{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(t){this.parent=t,this.child=null}createSubchannel(t,r){return this.parent.channelControlHelper.createSubchannel(t,r)}updateState(t,r){var i;if(this.calledByPendingChild()){if(t===Xg.ConnectivityState.CONNECTING)return;(i=this.parent.currentChild)===null||i===void 0||i.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(t,r)}requestReresolution(){var t;let r=(t=this.parent.pendingChild)!==null&&t!==void 0?t:this.parent.currentChild;this.child===r&&this.parent.channelControlHelper.requestReresolution()}setChild(t){this.child=t}addChannelzChild(t){this.parent.channelControlHelper.addChannelzChild(t)}removeChannelzChild(t){this.parent.channelControlHelper.removeChannelzChild(t)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let i;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){let s=new this.ChildPolicyHelper(this),o=(0,Yg.createLoadBalancer)(t,s);s.setChild(o),this.currentChild===null?(this.currentChild=o,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=o,i=this.pendingChild)}else this.pendingChild===null?i=this.currentChild:i=this.pendingChild;this.latestConfig=t,i.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return Jg}};gi.ChildLoadBalancerHandler=ko});var Yu=C(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.ResolvingLoadBalancer=void 0;var Zg=Ft(),ey=Io(),Me=je(),ty=ot(),Nn=Vt(),ny=mr(),xo=Y(),ry=xe(),iy=oe(),sy=Y(),oy=Be(),ay=yi(),ly="resolving_load_balancer";function Qu(n){iy.trace(sy.LogVerbosity.DEBUG,ly,n)}var cy=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function uy(n,e,t,r){for(let i of t.name)switch(r){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===n&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===n&&i.method===e)return!0}return!1}function dy(n,e,t,r){for(let i of t)if(uy(n,e,i,r))return i;return null}function hy(n){return function(t,r){var i,s;let o=t.split("/").filter(c=>c.length>0),a=(i=o[0])!==null&&i!==void 0?i:"",l=(s=o[1])!==null&&s!==void 0?s:"";if(n&&n.methodConfig)for(let c of cy){let m=dy(a,l,n.methodConfig,c);if(m)return{methodConfig:m,pickInformation:{},status:xo.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:xo.Status.OK,dynamicFilterFactories:[]}}}var Mo=class{constructor(e,t,r,i,s){this.target=e,this.channelControlHelper=t,this.onSuccessfulResolution=i,this.onFailedResolution=s,this.latestChildState=Me.ConnectivityState.IDLE,this.latestChildPicker=new Nn.QueuePicker(this),this.currentState=Me.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,ey.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(Me.ConnectivityState.IDLE,new Nn.QueuePicker(this)),this.childLoadBalancer=new ay.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(Qu("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(a,l)=>{this.latestChildState=a,this.latestChildPicker=l,this.updateState(a,l)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,ty.createResolver)(e,{onSuccessfulResolution:(a,l,c,m,v)=>{var S;this.backoffTimeout.stop(),this.backoffTimeout.reset();let E=null;l===null?c===null?(this.previousServiceConfig=null,E=this.defaultServiceConfig):this.previousServiceConfig===null?this.handleResolutionFailure(c):E=this.previousServiceConfig:(E=l,this.previousServiceConfig=l);let _=(S=E?.loadBalancingConfig)!==null&&S!==void 0?S:[],I=(0,Zg.getFirstUsableConfig)(_,!0);if(I===null){this.handleResolutionFailure({code:xo.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new ry.Metadata});return}this.childLoadBalancer.updateAddressList(a,I,v);let w=E??this.defaultServiceConfig;this.onSuccessfulResolution(w,m??hy(w))},onError:a=>{this.handleResolutionFailure(a)}},r);let o={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new ny.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},o),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===Me.ConnectivityState.IDLE&&this.updateState(Me.ConnectivityState.CONNECTING,new Nn.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){Qu((0,oy.uriToString)(this.target)+" "+Me.ConnectivityState[this.currentState]+" -> "+Me.ConnectivityState[e]),e===Me.ConnectivityState.IDLE&&(t=new Nn.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===Me.ConnectivityState.IDLE&&(this.updateState(Me.ConnectivityState.TRANSIENT_FAILURE,new Nn.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===Me.ConnectivityState.IDLE||this.currentState===Me.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=Me.ConnectivityState.IDLE,this.latestChildPicker=new Nn.QueuePicker(this),this.currentState=Me.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}};vi.ResolvingLoadBalancer=Mo});var Xu=C(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.channelOptionsEqual=On.recognizedOptions=void 0;On.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0};function fy(n,e){let t=Object.keys(n).sort(),r=Object.keys(e).sort();if(t.length!==r.length)return!1;for(let i=0;i<t.length;i+=1)if(t[i]!==r[i]||n[t[i]]!==e[r[i]])return!1;return!0}On.channelOptionsEqual=fy});var lt=C(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0});at.stringToSubchannelAddress=at.subchannelAddressToString=at.subchannelAddressEqual=at.isTcpSubchannelAddress=void 0;var py=X("net");function gr(n){return"port"in n}at.isTcpSubchannelAddress=gr;function my(n,e){return!n&&!e?!0:!n||!e?!1:gr(n)?gr(e)&&n.host===e.host&&n.port===e.port:!gr(e)&&n.path===e.path}at.subchannelAddressEqual=my;function gy(n){return gr(n)?n.host+":"+n.port:n.path}at.subchannelAddressToString=gy;var yy=443;function vy(n,e){return(0,py.isIP)(n)?{host:n,port:e??yy}:{path:n}}at.stringToSubchannelAddress=vy});var Ti=C(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.addAdminServicesToServer=kn.registerAdminService=void 0;var Ju=[];function Ty(n,e){Ju.push({getServiceDefinition:n,getHandlers:e})}kn.registerAdminService=Ty;function Sy(n){for(let{getServiceDefinition:e,getHandlers:t}of Ju)n.addService(e(),t())}kn.addAdminServicesToServer=Sy});var Zu=C($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.ClientDuplexStreamImpl=$e.ClientWritableStreamImpl=$e.ClientReadableStreamImpl=$e.ClientUnaryCallImpl=$e.callErrorFromStatus=void 0;var Ey=X("events"),qo=X("stream"),yr=Y();function _y(n,e){let t=`${n.code} ${yr.Status[n.code]}: ${n.details}`,i=`${new Error(t).stack}
for call at
${e}`;return Object.assign(new Error(t),n,{stack:i})}$e.callErrorFromStatus=_y;var Po=class extends Ey.EventEmitter{constructor(){super()}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(yr.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}};$e.ClientUnaryCallImpl=Po;var Lo=class extends qo.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(yr.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0||t.startRead()}};$e.ClientReadableStreamImpl=Lo;var Fo=class extends qo.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(yr.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_write(e,t,r){var i;let s={callback:r},o=Number(t);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var t;(t=this.call)===null||t===void 0||t.halfClose(),e()}};$e.ClientWritableStreamImpl=Fo;var Bo=class extends qo.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;(e=this.call)===null||e===void 0||e.cancelWithStatus(yr.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return(t=(e=this.call)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:"unknown"}_read(e){var t;(t=this.call)===null||t===void 0||t.startRead()}_write(e,t,r){var i;let s={callback:r},o=Number(t);Number.isNaN(o)||(s.flags=o),(i=this.call)===null||i===void 0||i.sendMessageWithContext(s,e)}_final(e){var t;(t=this.call)===null||t===void 0||t.halfClose(),e()}};$e.ClientDuplexStreamImpl=Bo});var ed=C(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});xn.InterceptingListenerImpl=xn.isInterceptingListener=void 0;function by(n){return n.onReceiveMetadata!==void 0&&n.onReceiveMetadata.length===1}xn.isInterceptingListener=by;var Uo=class{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,t=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(t),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,t=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=t,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(t),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,t=>{this.processingMetadata||this.processingMessage?this.pendingStatus=t:this.nextListener.onReceiveStatus(t)})}};xn.InterceptingListenerImpl=Uo});var Wo=C(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.getInterceptingCall=We.InterceptingCall=We.RequesterBuilder=We.ListenerBuilder=We.InterceptorConfigurationError=void 0;var wy=xe(),td=ed(),nd=Y(),rd=ii(),Tr=class n extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,n)}};We.InterceptorConfigurationError=Tr;var zo=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};We.ListenerBuilder=zo;var Go=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};We.RequesterBuilder=Go;var Vo={onReceiveMetadata:(n,e)=>{e(n)},onReceiveMessage:(n,e)=>{e(n)},onReceiveStatus:(n,e)=>{e(n)}},vr={start:(n,e,t)=>{t(n,e)},sendMessage:(n,e)=>{e(n)},halfClose:n=>{n()},cancel:n=>{n()}},jo=class{constructor(e,t){var r,i,s,o;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:(r=t.start)!==null&&r!==void 0?r:vr.start,sendMessage:(i=t.sendMessage)!==null&&i!==void 0?i:vr.sendMessage,halfClose:(s=t.halfClose)!==null&&s!==void 0?s:vr.halfClose,cancel:(o=t.cancel)!==null&&o!==void 0?o:vr.cancel}:this.requester=vr}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,i,s,o,a,l;let c={onReceiveMetadata:(i=(r=t?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&i!==void 0?i:m=>{},onReceiveMessage:(o=(s=t?.onReceiveMessage)===null||s===void 0?void 0:s.bind(t))!==null&&o!==void 0?o:m=>{},onReceiveStatus:(l=(a=t?.onReceiveStatus)===null||a===void 0?void 0:a.bind(t))!==null&&l!==void 0?l:m=>{}};this.processingMetadata=!0,this.requester.start(e,c,(m,v)=>{var S,E,_;this.processingMetadata=!1;let I;if((0,td.isInterceptingListener)(v))I=v;else{let w={onReceiveMetadata:(S=v.onReceiveMetadata)!==null&&S!==void 0?S:Vo.onReceiveMetadata,onReceiveMessage:(E=v.onReceiveMessage)!==null&&E!==void 0?E:Vo.onReceiveMessage,onReceiveStatus:(_=v.onReceiveStatus)!==null&&_!==void 0?_:Vo.onReceiveStatus};I=new td.InterceptingListenerImpl(w,c)}this.nextCall.start(m,I),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}};We.InterceptingCall=jo;function Cy(n,e,t){var r,i;let s=(r=t.deadline)!==null&&r!==void 0?r:1/0,o=t.host,a=(i=t.parent)!==null&&i!==void 0?i:null,l=t.propagate_flags,c=t.credentials,m=n.createCall(e,s,o,a,l);return c&&m.setCredentials(c),m}var Si=class{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(i){this.call.cancelWithStatus(nd.Status.INTERNAL,`Request message serialization failure: ${(0,rd.getErrorMessage)(i)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:i=>{var s;(s=t?.onReceiveMetadata)===null||s===void 0||s.call(t,i)},onReceiveMessage:i=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(i)}catch(a){r={code:nd.Status.INTERNAL,details:`Response message parsing error: ${(0,rd.getErrorMessage)(a)}`,metadata:new wy.Metadata},this.call.cancelWithStatus(r.code,r.details);return}(s=t?.onReceiveMessage)===null||s===void 0||s.call(t,o)},onReceiveStatus:i=>{var s,o;r?(s=t?.onReceiveStatus)===null||s===void 0||s.call(t,r):(o=t?.onReceiveStatus)===null||o===void 0||o.call(t,i)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}},Ko=class extends Si{constructor(e,t){super(e,t)}start(e,t){var r,i;let s=!1,o={onReceiveMetadata:(i=(r=t?.onReceiveMetadata)===null||r===void 0?void 0:r.bind(t))!==null&&i!==void 0?i:a=>{},onReceiveMessage:a=>{var l;s=!0,(l=t?.onReceiveMessage)===null||l===void 0||l.call(t,a)},onReceiveStatus:a=>{var l,c;s||(l=t?.onReceiveMessage)===null||l===void 0||l.call(t,null),(c=t?.onReceiveStatus)===null||c===void 0||c.call(t,a)}};super.start(e,o),this.call.startRead()}},$o=class extends Si{};function Iy(n,e,t){let r=Cy(n,t.path,e);return t.responseStream?new $o(r,t):new Ko(r,t)}function Ry(n,e,t,r){if(n.clientInterceptors.length>0&&n.clientInterceptorProviders.length>0)throw new Tr("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(n.callInterceptors.length>0&&n.callInterceptorProviders.length>0)throw new Tr("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];n.callInterceptors.length>0||n.callInterceptorProviders.length>0?i=[].concat(n.callInterceptors,n.callInterceptorProviders.map(a=>a(e))).filter(a=>a):i=[].concat(n.clientInterceptors,n.clientInterceptorProviders.map(a=>a(e))).filter(a=>a);let s=Object.assign({},t,{method_definition:e});return i.reduceRight((a,l)=>c=>l(c,a),a=>Iy(r,a,e))(s)}We.getInterceptingCall=Ry});var Yo=C(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.Client=void 0;var ct=Zu(),Ay=Xo(),Dy=je(),zt=Y(),Mn=xe(),Ei=Wo(),Je=Symbol(),Pn=Symbol(),Ln=Symbol(),Ct=Symbol();function Ho(n){return typeof n=="function"}function Fn(n){return n.stack.split(`
`).slice(1).join(`
`)}var Qo=class{constructor(e,t,r={}){var i,s;if(r=Object.assign({},r),this[Pn]=(i=r.interceptors)!==null&&i!==void 0?i:[],delete r.interceptors,this[Ln]=(s=r.interceptor_providers)!==null&&s!==void 0?s:[],delete r.interceptor_providers,this[Pn].length>0&&this[Ln].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[Ct]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[Je]=r.channelOverride;else if(r.channelFactoryOverride){let o=r.channelFactoryOverride;delete r.channelFactoryOverride,this[Je]=o(e,t,r)}else this[Je]=new Ay.ChannelImplementation(e,t,r)}close(){this[Je].close()}getChannel(){return this[Je]}waitForReady(e,t){let r=i=>{if(i){t(new Error("Failed to connect before the deadline"));return}let s;try{s=this[Je].getConnectivityState(!0)}catch{t(new Error("The channel has been closed"));return}if(s===Dy.ConnectivityState.READY)t();else try{this[Je].watchConnectivityState(s,e,r)}catch{t(new Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(Ho(e))return{metadata:new Mn.Metadata,options:{},callback:e};if(Ho(t))return e instanceof Mn.Metadata?{metadata:e,options:{},callback:t}:{metadata:new Mn.Metadata,options:e,callback:t};if(!(e instanceof Mn.Metadata&&t instanceof Object&&Ho(r)))throw new Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,i,s,o,a){var l,c;let m=this.checkOptionalUnaryResponseArguments(s,o,a),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},S={argument:i,metadata:m.metadata,call:new ct.ClientUnaryCallImpl,channel:this[Je],methodDefinition:v,callOptions:m.options,callback:m.callback};this[Ct]&&(S=this[Ct](S));let E=S.call,_={clientInterceptors:this[Pn],clientInterceptorProviders:this[Ln],callInterceptors:(l=S.callOptions.interceptors)!==null&&l!==void 0?l:[],callInterceptorProviders:(c=S.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},I=(0,Ei.getInterceptingCall)(_,S.methodDefinition,S.callOptions,S.channel);E.call=I;let w=null,O=!1,k=new Error;return I.start(S.metadata,{onReceiveMetadata:x=>{E.emit("metadata",x)},onReceiveMessage(x){w!==null&&I.cancelWithStatus(zt.Status.INTERNAL,"Too many responses received"),w=x},onReceiveStatus(x){if(!O){if(O=!0,x.code===zt.Status.OK)if(w===null){let b=Fn(k);S.callback((0,ct.callErrorFromStatus)({code:zt.Status.INTERNAL,details:"No message received",metadata:x.metadata},b))}else S.callback(null,w);else{let b=Fn(k);S.callback((0,ct.callErrorFromStatus)(x,b))}k=null,E.emit("status",x)}}}),I.sendMessage(i),I.halfClose(),E}makeClientStreamRequest(e,t,r,i,s,o){var a,l;let c=this.checkOptionalUnaryResponseArguments(i,s,o),m={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},v={metadata:c.metadata,call:new ct.ClientWritableStreamImpl(t),channel:this[Je],methodDefinition:m,callOptions:c.options,callback:c.callback};this[Ct]&&(v=this[Ct](v));let S=v.call,E={clientInterceptors:this[Pn],clientInterceptorProviders:this[Ln],callInterceptors:(a=v.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=v.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},_=(0,Ei.getInterceptingCall)(E,v.methodDefinition,v.callOptions,v.channel);S.call=_;let I=null,w=!1,O=new Error;return _.start(v.metadata,{onReceiveMetadata:k=>{S.emit("metadata",k)},onReceiveMessage(k){I!==null&&_.cancelWithStatus(zt.Status.INTERNAL,"Too many responses received"),I=k},onReceiveStatus(k){if(!w){if(w=!0,k.code===zt.Status.OK)if(I===null){let x=Fn(O);v.callback((0,ct.callErrorFromStatus)({code:zt.Status.INTERNAL,details:"No message received",metadata:k.metadata},x))}else v.callback(null,I);else{let x=Fn(O);v.callback((0,ct.callErrorFromStatus)(k,x))}O=null,S.emit("status",k)}}}),S}checkMetadataAndOptions(e,t){let r,i;return e instanceof Mn.Metadata?(r=e,t?i=t:i={}):(e?i=e:i={},r=new Mn.Metadata),{metadata:r,options:i}}makeServerStreamRequest(e,t,r,i,s,o){var a,l;let c=this.checkMetadataAndOptions(s,o),m={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},v={argument:i,metadata:c.metadata,call:new ct.ClientReadableStreamImpl(r),channel:this[Je],methodDefinition:m,callOptions:c.options};this[Ct]&&(v=this[Ct](v));let S=v.call,E={clientInterceptors:this[Pn],clientInterceptorProviders:this[Ln],callInterceptors:(a=v.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=v.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},_=(0,Ei.getInterceptingCall)(E,v.methodDefinition,v.callOptions,v.channel);S.call=_;let I=!1,w=new Error;return _.start(v.metadata,{onReceiveMetadata(O){S.emit("metadata",O)},onReceiveMessage(O){S.push(O)},onReceiveStatus(O){if(!I){if(I=!0,S.push(null),O.code!==zt.Status.OK){let k=Fn(w);S.emit("error",(0,ct.callErrorFromStatus)(O,k))}w=null,S.emit("status",O)}}}),_.sendMessage(i),_.halfClose(),S}makeBidiStreamRequest(e,t,r,i,s){var o,a;let l=this.checkMetadataAndOptions(i,s),c={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},m={metadata:l.metadata,call:new ct.ClientDuplexStreamImpl(t,r),channel:this[Je],methodDefinition:c,callOptions:l.options};this[Ct]&&(m=this[Ct](m));let v=m.call,S={clientInterceptors:this[Pn],clientInterceptorProviders:this[Ln],callInterceptors:(o=m.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(a=m.callOptions.interceptor_providers)!==null&&a!==void 0?a:[]},E=(0,Ei.getInterceptingCall)(S,m.methodDefinition,m.callOptions,m.channel);v.call=E;let _=!1,I=new Error;return E.start(m.metadata,{onReceiveMetadata(w){v.emit("metadata",w)},onReceiveMessage(w){v.push(w)},onReceiveStatus(w){if(!_){if(_=!0,v.push(null),w.code!==zt.Status.OK){let O=Fn(I);v.emit("error",(0,ct.callErrorFromStatus)(w,O))}I=null,v.emit("status",w)}}}),v}};_i.Client=Qo});var Zo=C(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.loadPackageDefinition=Bn.makeClientConstructor=void 0;var Sr=Yo(),Ny={unary:Sr.Client.prototype.makeUnaryRequest,server_stream:Sr.Client.prototype.makeServerStreamRequest,client_stream:Sr.Client.prototype.makeClientStreamRequest,bidi:Sr.Client.prototype.makeBidiStreamRequest};function Jo(n){return["__proto__","prototype","constructor"].includes(n)}function id(n,e,t){t||(t={});class r extends Sr.Client{}return Object.keys(n).forEach(i=>{if(Jo(i))return;let s=n[i],o;if(typeof i=="string"&&i.charAt(0)==="$")throw new Error("Method names cannot start with $");s.requestStream?s.responseStream?o="bidi":o="client_stream":s.responseStream?o="server_stream":o="unary";let a=s.requestSerialize,l=s.responseDeserialize,c=Oy(Ny[o],s.path,a,l);r.prototype[i]=c,Object.assign(r.prototype[i],s),s.originalName&&!Jo(s.originalName)&&(r.prototype[s.originalName]=r.prototype[i])}),r.service=n,r.serviceName=e,r}Bn.makeClientConstructor=id;function Oy(n,e,t,r){return function(...i){return n.call(this,e,t,r,...i)}}function ky(n){return"format"in n}function xy(n){let e={};for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let r=n[t],i=t.split(".");if(i.some(a=>Jo(a)))continue;let s=i[i.length-1],o=e;for(let a of i.slice(0,-1))o[a]||(o[a]={}),o=o[a];ky(r)?o[s]=r:o[s]=id(r,s,{})}return e}Bn.loadPackageDefinition=xy});var Dd=C((r0,Ad)=>{"use strict";var My=1/0,Py="[object Symbol]",Ly=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fy=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wi="\\ud800-\\udfff",hd="\\u0300-\\u036f\\ufe20-\\ufe23",fd="\\u20d0-\\u20f0",pd="\\u2700-\\u27bf",md="a-z\\xdf-\\xf6\\xf8-\\xff",By="\\xac\\xb1\\xd7\\xf7",qy="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Uy="\\u2000-\\u206f",Vy=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gd="A-Z\\xc0-\\xd6\\xd8-\\xde",yd="\\ufe0e\\ufe0f",vd=By+qy+Uy+Vy,ta="['\u2019]",zy="["+wi+"]",sd="["+vd+"]",bi="["+hd+fd+"]",Td="\\d+",Gy="["+pd+"]",Sd="["+md+"]",Ed="[^"+wi+vd+Td+pd+md+gd+"]",ea="\\ud83c[\\udffb-\\udfff]",jy="(?:"+bi+"|"+ea+")",_d="[^"+wi+"]",na="(?:\\ud83c[\\udde6-\\uddff]){2}",ra="[\\ud800-\\udbff][\\udc00-\\udfff]",qn="["+gd+"]",bd="\\u200d",od="(?:"+Sd+"|"+Ed+")",Ky="(?:"+qn+"|"+Ed+")",ad="(?:"+ta+"(?:d|ll|m|re|s|t|ve))?",ld="(?:"+ta+"(?:D|LL|M|RE|S|T|VE))?",wd=jy+"?",Cd="["+yd+"]?",$y="(?:"+bd+"(?:"+[_d,na,ra].join("|")+")"+Cd+wd+")*",Id=Cd+wd+$y,Wy="(?:"+[Gy,na,ra].join("|")+")"+Id,Hy="(?:"+[_d+bi+"?",bi,na,ra,zy].join("|")+")",Qy=RegExp(ta,"g"),Yy=RegExp(bi,"g"),Xy=RegExp(ea+"(?="+ea+")|"+Hy+Id,"g"),Jy=RegExp([qn+"?"+Sd+"+"+ad+"(?="+[sd,qn,"$"].join("|")+")",Ky+"+"+ld+"(?="+[sd,qn+od,"$"].join("|")+")",qn+"?"+od+"+"+ad,qn+"+"+ld,Td,Wy].join("|"),"g"),Zy=RegExp("["+bd+wi+hd+fd+yd+"]"),ev=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,tv={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},nv=typeof global=="object"&&global&&global.Object===Object&&global,rv=typeof self=="object"&&self&&self.Object===Object&&self,iv=nv||rv||Function("return this")();function sv(n,e,t,r){var i=-1,s=n?n.length:0;for(r&&s&&(t=n[++i]);++i<s;)t=e(t,n[i],i,n);return t}function ov(n){return n.split("")}function av(n){return n.match(Ly)||[]}function lv(n){return function(e){return n?.[e]}}var cv=lv(tv);function Rd(n){return Zy.test(n)}function uv(n){return ev.test(n)}function dv(n){return Rd(n)?hv(n):ov(n)}function hv(n){return n.match(Xy)||[]}function fv(n){return n.match(Jy)||[]}var pv=Object.prototype,mv=pv.toString,cd=iv.Symbol,ud=cd?cd.prototype:void 0,dd=ud?ud.toString:void 0;function gv(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=n[r+e];return s}function yv(n){if(typeof n=="string")return n;if(_v(n))return dd?dd.call(n):"";var e=n+"";return e=="0"&&1/n==-My?"-0":e}function vv(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:gv(n,e,t)}function Tv(n){return function(e){e=Ci(e);var t=Rd(e)?dv(e):void 0,r=t?t[0]:e.charAt(0),i=t?vv(t,1).join(""):e.slice(1);return r[n]()+i}}function Sv(n){return function(e){return sv(Rv(Cv(e).replace(Qy,"")),n,"")}}function Ev(n){return!!n&&typeof n=="object"}function _v(n){return typeof n=="symbol"||Ev(n)&&mv.call(n)==Py}function Ci(n){return n==null?"":yv(n)}var bv=Sv(function(n,e,t){return e=e.toLowerCase(),n+(t?wv(e):e)});function wv(n){return Iv(Ci(n).toLowerCase())}function Cv(n){return n=Ci(n),n&&n.replace(Fy,cv).replace(Yy,"")}var Iv=Tv("toUpperCase");function Rv(n,e,t){return n=Ci(n),e=t?void 0:e,e===void 0?uv(n)?fv(n):av(n):n.match(e)||[]}Ad.exports=bv});var ia=C((i0,Nd)=>{"use strict";Nd.exports=Av;function Av(n,e){for(var t=new Array(arguments.length-1),r=0,i=2,s=!0;i<arguments.length;)t[r++]=arguments[i++];return new Promise(function(a,l){t[r]=function(m){if(s)if(s=!1,m)l(m);else{for(var v=new Array(arguments.length-1),S=0;S<v.length;)v[S++]=arguments[S];a.apply(null,v)}};try{n.apply(e||null,t)}catch(c){s&&(s=!1,l(c))}})}});var Md=C(xd=>{"use strict";var Ii=xd;Ii.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&e.charAt(t)==="=";)++r;return Math.ceil(e.length*3)/4-r};var Un=new Array(64),kd=new Array(123);for(Ze=0;Ze<64;)kd[Un[Ze]=Ze<26?Ze+65:Ze<52?Ze+71:Ze<62?Ze-4:Ze-59|43]=Ze++;var Ze;Ii.encode=function(e,t,r){for(var i=null,s=[],o=0,a=0,l;t<r;){var c=e[t++];switch(a){case 0:s[o++]=Un[c>>2],l=(c&3)<<4,a=1;break;case 1:s[o++]=Un[l|c>>4],l=(c&15)<<2,a=2;break;case 2:s[o++]=Un[l|c>>6],s[o++]=Un[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Un[l],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var Od="invalid encoding";Ii.decode=function(e,t,r){for(var i=r,s=0,o,a=0;a<e.length;){var l=e.charCodeAt(a++);if(l===61&&s>1)break;if((l=kd[l])===void 0)throw Error(Od);switch(s){case 0:o=l,s=1;break;case 1:t[r++]=o<<2|(l&48)>>4,o=l,s=2;break;case 2:t[r++]=(o&15)<<4|(l&60)>>2,o=l,s=3;break;case 3:t[r++]=(o&3)<<6|l,s=0;break}}if(s===1)throw Error(Od);return r-i};Ii.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var Ld=C((o0,Pd)=>{"use strict";Pd.exports=Ri;function Ri(){this._listeners={}}Ri.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this};Ri.prototype.off=function(e,t){if(e===void 0)this._listeners={};else if(t===void 0)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===t?r.splice(i,1):++i;return this};Ri.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,r)}return this}});var Gd=C((a0,zd)=>{"use strict";zd.exports=Fd(Fd);function Fd(n){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),r=t[3]===128;function i(l,c,m){e[0]=l,c[m]=t[0],c[m+1]=t[1],c[m+2]=t[2],c[m+3]=t[3]}function s(l,c,m){e[0]=l,c[m]=t[3],c[m+1]=t[2],c[m+2]=t[1],c[m+3]=t[0]}n.writeFloatLE=r?i:s,n.writeFloatBE=r?s:i;function o(l,c){return t[0]=l[c],t[1]=l[c+1],t[2]=l[c+2],t[3]=l[c+3],e[0]}function a(l,c){return t[3]=l[c],t[2]=l[c+1],t[1]=l[c+2],t[0]=l[c+3],e[0]}n.readFloatLE=r?o:a,n.readFloatBE=r?a:o}():function(){function e(r,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)r(1/i>0?0:2147483648,s,o);else if(isNaN(i))r(2143289344,s,o);else if(i>34028234663852886e22)r((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)r((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var l=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-l)*8388608)&8388607;r((a<<31|l+127<<23|c)>>>0,s,o)}}n.writeFloatLE=e.bind(null,Bd),n.writeFloatBE=e.bind(null,qd);function t(r,i,s){var o=r(i,s),a=(o>>31)*2+1,l=o>>>23&255,c=o&8388607;return l===255?c?NaN:a*(1/0):l===0?a*1401298464324817e-60*c:a*Math.pow(2,l-150)*(c+8388608)}n.readFloatLE=t.bind(null,Ud),n.readFloatBE=t.bind(null,Vd)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),r=t[7]===128;function i(l,c,m){e[0]=l,c[m]=t[0],c[m+1]=t[1],c[m+2]=t[2],c[m+3]=t[3],c[m+4]=t[4],c[m+5]=t[5],c[m+6]=t[6],c[m+7]=t[7]}function s(l,c,m){e[0]=l,c[m]=t[7],c[m+1]=t[6],c[m+2]=t[5],c[m+3]=t[4],c[m+4]=t[3],c[m+5]=t[2],c[m+6]=t[1],c[m+7]=t[0]}n.writeDoubleLE=r?i:s,n.writeDoubleBE=r?s:i;function o(l,c){return t[0]=l[c],t[1]=l[c+1],t[2]=l[c+2],t[3]=l[c+3],t[4]=l[c+4],t[5]=l[c+5],t[6]=l[c+6],t[7]=l[c+7],e[0]}function a(l,c){return t[7]=l[c],t[6]=l[c+1],t[5]=l[c+2],t[4]=l[c+3],t[3]=l[c+4],t[2]=l[c+5],t[1]=l[c+6],t[0]=l[c+7],e[0]}n.readDoubleLE=r?o:a,n.readDoubleBE=r?a:o}():function(){function e(r,i,s,o,a,l){var c=o<0?1:0;if(c&&(o=-o),o===0)r(0,a,l+i),r(1/o>0?0:2147483648,a,l+s);else if(isNaN(o))r(0,a,l+i),r(2146959360,a,l+s);else if(o>17976931348623157e292)r(0,a,l+i),r((c<<31|2146435072)>>>0,a,l+s);else{var m;if(o<22250738585072014e-324)m=o/5e-324,r(m>>>0,a,l+i),r((c<<31|m/4294967296)>>>0,a,l+s);else{var v=Math.floor(Math.log(o)/Math.LN2);v===1024&&(v=1023),m=o*Math.pow(2,-v),r(m*4503599627370496>>>0,a,l+i),r((c<<31|v+1023<<20|m*1048576&1048575)>>>0,a,l+s)}}}n.writeDoubleLE=e.bind(null,Bd,0,4),n.writeDoubleBE=e.bind(null,qd,4,0);function t(r,i,s,o,a){var l=r(o,a+i),c=r(o,a+s),m=(c>>31)*2+1,v=c>>>20&2047,S=4294967296*(c&1048575)+l;return v===2047?S?NaN:m*(1/0):v===0?m*5e-324*S:m*Math.pow(2,v-1075)*(S+4503599627370496)}n.readDoubleLE=t.bind(null,Ud,0,4),n.readDoubleBE=t.bind(null,Vd,4,0)}(),n}function Bd(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}function qd(n,e,t){e[t]=n>>>24,e[t+1]=n>>>16&255,e[t+2]=n>>>8&255,e[t+3]=n&255}function Ud(n,e){return(n[e]|n[e+1]<<8|n[e+2]<<16|n[e+3]<<24)>>>0}function Vd(n,e){return(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}});var sa=C((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}});var Kd=C(jd=>{"use strict";var oa=jd;oa.length=function(e){for(var t=0,r=0,i=0;i<e.length;++i)r=e.charCodeAt(i),r<128?t+=1:r<2048?t+=2:(r&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,t+=4):t+=3;return t};oa.read=function(e,t,r){var i=r-t;if(i<1)return"";for(var s=null,o=[],a=0,l;t<r;)l=e[t++],l<128?o[a++]=l:l>191&&l<224?o[a++]=(l&31)<<6|e[t++]&63:l>239&&l<365?(l=((l&7)<<18|(e[t++]&63)<<12|(e[t++]&63)<<6|e[t++]&63)-65536,o[a++]=55296+(l>>10),o[a++]=56320+(l&1023)):o[a++]=(l&15)<<12|(e[t++]&63)<<6|e[t++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};oa.write=function(e,t,r){for(var i=r,s,o,a=0;a<e.length;++a)s=e.charCodeAt(a),s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&((o=e.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128);return r-i}});var Wd=C((c0,$d)=>{"use strict";$d.exports=Dv;function Dv(n,e,t){var r=t||8192,i=r>>>1,s=null,o=r;return function(l){if(l<1||l>i)return n(l);o+l>r&&(s=n(r),o=0);var c=e.call(s,o,o+=l);return o&7&&(o=(o|7)+1),c}}});var Qd=C((u0,Hd)=>{"use strict";Hd.exports=fe;var Er=ut();function fe(n,e){this.lo=n>>>0,this.hi=e>>>0}var un=fe.zero=new fe(0,0);un.toNumber=function(){return 0};un.zzEncode=un.zzDecode=function(){return this};un.length=function(){return 1};var Nv=fe.zeroHash="\0\0\0\0\0\0\0\0";fe.fromNumber=function(e){if(e===0)return un;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new fe(r,i)};fe.from=function(e){if(typeof e=="number")return fe.fromNumber(e);if(Er.isString(e))if(Er.Long)e=Er.Long.fromString(e);else return fe.fromNumber(parseInt(e,10));return e.low||e.high?new fe(e.low>>>0,e.high>>>0):un};fe.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+r*4294967296)}return this.lo+this.hi*4294967296};fe.prototype.toLong=function(e){return Er.Long?new Er.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var Gt=String.prototype.charCodeAt;fe.fromHash=function(e){return e===Nv?un:new fe((Gt.call(e,0)|Gt.call(e,1)<<8|Gt.call(e,2)<<16|Gt.call(e,3)<<24)>>>0,(Gt.call(e,4)|Gt.call(e,5)<<8|Gt.call(e,6)<<16|Gt.call(e,7)<<24)>>>0)};fe.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};fe.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};fe.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};fe.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return r===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}});var ut=C(aa=>{"use strict";var F=aa;F.asPromise=ia();F.base64=Md();F.EventEmitter=Ld();F.float=Gd();F.inquire=sa();F.utf8=Kd();F.pool=Wd();F.LongBits=Qd();F.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);F.global=F.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||aa;F.emptyArray=Object.freeze?Object.freeze([]):[];F.emptyObject=Object.freeze?Object.freeze({}):{};F.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};F.isString=function(e){return typeof e=="string"||e instanceof String};F.isObject=function(e){return e&&typeof e=="object"};F.isset=F.isSet=function(e,t){var r=e[t];return r!=null&&e.hasOwnProperty(t)?typeof r!="object"||(Array.isArray(r)?r.length:Object.keys(r).length)>0:!1};F.Buffer=function(){try{var n=F.inquire("buffer").Buffer;return n.prototype.utf8Write?n:null}catch{return null}}();F._Buffer_from=null;F._Buffer_allocUnsafe=null;F.newBuffer=function(e){return typeof e=="number"?F.Buffer?F._Buffer_allocUnsafe(e):new F.Array(e):F.Buffer?F._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};F.Array=typeof Uint8Array<"u"?Uint8Array:Array;F.Long=F.global.dcodeIO&&F.global.dcodeIO.Long||F.global.Long||F.inquire("long");F.key2Re=/^true|false|0|1$/;F.key32Re=/^-?(?:0|[1-9][0-9]*)$/;F.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;F.longToHash=function(e){return e?F.LongBits.from(e).toHash():F.LongBits.zeroHash};F.longFromHash=function(e,t){var r=F.LongBits.fromHash(e);return F.Long?F.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)};function Yd(n,e,t){for(var r=Object.keys(e),i=0;i<r.length;++i)(n[r[i]]===void 0||!t)&&(n[r[i]]=e[r[i]]);return n}F.merge=Yd;F.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Xd(n){function e(t,r){if(!(this instanceof e))return new e(t,r);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),r&&Yd(this,r)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return n},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}F.newError=Xd;F.ProtocolError=Xd("ProtocolError");F.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(t[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};F.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}};F.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};F._configure=function(){var n=F.Buffer;if(!n){F._Buffer_from=F._Buffer_allocUnsafe=null;return}F._Buffer_from=n.from!==Uint8Array.from&&n.from||function(t,r){return new n(t,r)},F._Buffer_allocUnsafe=n.allocUnsafe||function(t){return new n(t)}}});var Di=C((h0,th)=>{"use strict";th.exports=H;var He=ut(),la,Ai=He.LongBits,Jd=He.base64,Zd=He.utf8;function _r(n,e,t){this.fn=n,this.len=e,this.next=void 0,this.val=t}function ua(){}function Ov(n){this.head=n.head,this.tail=n.tail,this.len=n.len,this.next=n.states}function H(){this.len=0,this.head=new _r(ua,0,0),this.tail=this.head,this.states=null}var eh=function(){return He.Buffer?function(){return(H.create=function(){return new la})()}:function(){return new H}};H.create=eh();H.alloc=function(e){return new He.Array(e)};He.Array!==Array&&(H.alloc=He.pool(H.alloc,He.Array.prototype.subarray));H.prototype._push=function(e,t,r){return this.tail=this.tail.next=new _r(e,t,r),this.len+=t,this};function da(n,e,t){e[t]=n&255}function kv(n,e,t){for(;n>127;)e[t++]=n&127|128,n>>>=7;e[t]=n}function ha(n,e){this.len=n,this.next=void 0,this.val=e}ha.prototype=Object.create(_r.prototype);ha.prototype.fn=kv;H.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new ha((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};H.prototype.int32=function(e){return e<0?this._push(fa,10,Ai.fromNumber(e)):this.uint32(e)};H.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function fa(n,e,t){for(;n.hi;)e[t++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)e[t++]=n.lo&127|128,n.lo=n.lo>>>7;e[t++]=n.lo}H.prototype.uint64=function(e){var t=Ai.from(e);return this._push(fa,t.length(),t)};H.prototype.int64=H.prototype.uint64;H.prototype.sint64=function(e){var t=Ai.from(e).zzEncode();return this._push(fa,t.length(),t)};H.prototype.bool=function(e){return this._push(da,1,e?1:0)};function ca(n,e,t){e[t]=n&255,e[t+1]=n>>>8&255,e[t+2]=n>>>16&255,e[t+3]=n>>>24}H.prototype.fixed32=function(e){return this._push(ca,4,e>>>0)};H.prototype.sfixed32=H.prototype.fixed32;H.prototype.fixed64=function(e){var t=Ai.from(e);return this._push(ca,4,t.lo)._push(ca,4,t.hi)};H.prototype.sfixed64=H.prototype.fixed64;H.prototype.float=function(e){return this._push(He.float.writeFloatLE,4,e)};H.prototype.double=function(e){return this._push(He.float.writeDoubleLE,8,e)};var xv=He.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var i=0;i<e.length;++i)t[r+i]=e[i]};H.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(da,1,0);if(He.isString(e)){var r=H.alloc(t=Jd.length(e));Jd.decode(e,r,0),e=r}return this.uint32(t)._push(xv,t,e)};H.prototype.string=function(e){var t=Zd.length(e);return t?this.uint32(t)._push(Zd.write,t,e):this._push(da,1,0)};H.prototype.fork=function(){return this.states=new Ov(this),this.head=this.tail=new _r(ua,0,0),this.len=0,this};H.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new _r(ua,0,0),this.len=0),this};H.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this};H.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t};H._configure=function(n){la=n,H.create=eh(),la._configure()}});var ih=C((f0,rh)=>{"use strict";rh.exports=dt;var nh=Di();(dt.prototype=Object.create(nh.prototype)).constructor=dt;var jt=ut();function dt(){nh.call(this)}dt._configure=function(){dt.alloc=jt._Buffer_allocUnsafe,dt.writeBytesBuffer=jt.Buffer&&jt.Buffer.prototype instanceof Uint8Array&&jt.Buffer.prototype.set.name==="set"?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var i=0;i<e.length;)t[r++]=e[i++]}};dt.prototype.bytes=function(e){jt.isString(e)&&(e=jt._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(dt.writeBytesBuffer,t,e),this};function Mv(n,e,t){n.length<40?jt.utf8.write(n,e,t):e.utf8Write?e.utf8Write(n,t):e.write(n,t)}dt.prototype.string=function(e){var t=jt.Buffer.byteLength(e);return this.uint32(t),t&&this._push(Mv,t,e),this};dt._configure()});var Oi=C((p0,ch)=>{"use strict";ch.exports=le;var et=ut(),ma,ah=et.LongBits,Pv=et.utf8;function tt(n,e){return RangeError("index out of range: "+n.pos+" + "+(e||1)+" > "+n.len)}function le(n){this.buf=n,this.pos=0,this.len=n.length}var sh=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new le(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new le(e);throw Error("illegal buffer")},lh=function(){return et.Buffer?function(t){return(le.create=function(i){return et.Buffer.isBuffer(i)?new ma(i):sh(i)})(t)}:sh};le.create=lh();le.prototype._slice=et.Array.prototype.subarray||et.Array.prototype.slice;le.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,tt(this,10);return e}}();le.prototype.int32=function(){return this.uint32()|0};le.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function pa(){var n=new ah(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n;if(n.lo=(n.lo|(this.buf[this.pos]&127)<<28)>>>0,n.hi=(n.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return n;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw tt(this);if(n.lo=(n.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return n}return n.lo=(n.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,n}if(this.len-this.pos>4){for(;e<5;++e)if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}else for(;e<5;++e){if(this.pos>=this.len)throw tt(this);if(n.hi=(n.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return n}throw Error("invalid varint encoding")}le.prototype.bool=function(){return this.uint32()!==0};function Ni(n,e){return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0}le.prototype.fixed32=function(){if(this.pos+4>this.len)throw tt(this,4);return Ni(this.buf,this.pos+=4)};le.prototype.sfixed32=function(){if(this.pos+4>this.len)throw tt(this,4);return Ni(this.buf,this.pos+=4)|0};function oh(){if(this.pos+8>this.len)throw tt(this,8);return new ah(Ni(this.buf,this.pos+=4),Ni(this.buf,this.pos+=4))}le.prototype.float=function(){if(this.pos+4>this.len)throw tt(this,4);var e=et.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};le.prototype.double=function(){if(this.pos+8>this.len)throw tt(this,4);var e=et.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};le.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw tt(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var i=et.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)};le.prototype.string=function(){var e=this.bytes();return Pv.read(e,0,e.length)};le.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw tt(this,e);this.pos+=e}else do if(this.pos>=this.len)throw tt(this);while(this.buf[this.pos++]&128);return this};le.prototype.skipType=function(n){switch(n){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(n=this.uint32()&7)!==4;)this.skipType(n);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+n+" at offset "+this.pos)}return this};le._configure=function(n){ma=n,le.create=lh(),ma._configure();var e=et.Long?"toLong":"toNumber";et.merge(le.prototype,{int64:function(){return pa.call(this)[e](!1)},uint64:function(){return pa.call(this)[e](!0)},sint64:function(){return pa.call(this).zzDecode()[e](!1)},fixed64:function(){return oh.call(this)[e](!0)},sfixed64:function(){return oh.call(this)[e](!1)}})}});var fh=C((m0,hh)=>{"use strict";hh.exports=dn;var dh=Oi();(dn.prototype=Object.create(dh.prototype)).constructor=dn;var uh=ut();function dn(n){dh.call(this,n)}dn._configure=function(){uh.Buffer&&(dn.prototype._slice=uh.Buffer.prototype.slice)};dn.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};dn._configure()});var mh=C((g0,ph)=>{"use strict";ph.exports=br;var ga=ut();(br.prototype=Object.create(ga.EventEmitter.prototype)).constructor=br;function br(n,e,t){if(typeof n!="function")throw TypeError("rpcImpl must be a function");ga.EventEmitter.call(this),this.rpcImpl=n,this.requestDelimited=!!e,this.responseDelimited=!!t}br.prototype.rpcCall=function n(e,t,r,i,s){if(!i)throw TypeError("request must be specified");var o=this;if(!s)return ga.asPromise(n,o,e,t,r,i);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(e,t[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(l,c){if(l)return o.emit("error",l,e),s(l);if(c===null){o.end(!0);return}if(!(c instanceof r))try{c=r[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(m){return o.emit("error",m,e),s(m)}return o.emit("data",c,e),s(null,c)})}catch(a){o.emit("error",a,e),setTimeout(function(){s(a)},0);return}};br.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var ya=C(gh=>{"use strict";var Lv=gh;Lv.Service=mh()});var va=C((v0,yh)=>{"use strict";yh.exports={}});var Sh=C(Th=>{"use strict";var Pe=Th;Pe.build="minimal";Pe.Writer=Di();Pe.BufferWriter=ih();Pe.Reader=Oi();Pe.BufferReader=fh();Pe.util=ut();Pe.rpc=ya();Pe.roots=va();Pe.configure=vh;function vh(){Pe.util._configure(),Pe.Writer._configure(Pe.BufferWriter),Pe.Reader._configure(Pe.BufferReader)}vh()});var _h=C((S0,Eh)=>{"use strict";Eh.exports=Ta;function Ta(n,e){typeof n=="string"&&(e=n,n=void 0);var t=[];function r(s){if(typeof s!="string"){var o=i();if(Ta.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),l=new Array(a.length+1),c=new Array(a.length),m=0;m<a.length;)l[m]=a[m],c[m]=s[a[m++]];return l[m]=o,Function.apply(null,l).apply(null,c)}return Function(o)()}for(var v=new Array(arguments.length-1),S=0;S<v.length;)v[S]=arguments[++S];if(S=0,s=s.replace(/%([%dfijs])/g,function(_,I){var w=v[S++];switch(I){case"d":case"f":return String(Number(w));case"i":return String(Math.floor(w));case"j":return JSON.stringify(w);case"s":return String(w)}return"%"}),S!==v.length)throw Error("parameter count mismatch");return t.push(s),r}function i(s){return"function "+(s||e||"")+"("+(n&&n.join(",")||"")+`){
  `+t.join(`
  `)+`
}`}return r.toString=i,r}Ta.verbose=!1});var wh=C((E0,bh)=>{"use strict";bh.exports=wr;var Fv=ia(),Bv=sa(),Sa=Bv("fs");function wr(n,e,t){return typeof e=="function"?(t=e,e={}):e||(e={}),t?!e.xhr&&Sa&&Sa.readFile?Sa.readFile(n,function(i,s){return i&&typeof XMLHttpRequest<"u"?wr.xhr(n,e,t):i?t(i):t(null,e.binary?s:s.toString("utf8"))}):wr.xhr(n,e,t):Fv(wr,this,n,e)}wr.xhr=function(e,t,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4){if(i.status!==0&&i.status!==200)return r(Error("status "+i.status));if(t.binary){var o=i.response;if(!o){o=[];for(var a=0;a<i.responseText.length;++a)o.push(i.responseText.charCodeAt(a)&255)}return r(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return r(null,i.responseText)}},t.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}});var Rh=C(Ih=>{"use strict";var _a=Ih,Ch=_a.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},Ea=_a.normalize=function(e){e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var t=e.split("/"),r=Ch(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)t[s]===".."?s>0&&t[s-1]!==".."?t.splice(--s,2):r?t.splice(s,1):++s:t[s]==="."?t.splice(s,1):++s;return i+t.join("/")};_a.resolve=function(e,t,r){return r||(t=Ea(t)),Ch(t)?t:(r||(e=Ea(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?Ea(e+"/"+t):t)}});var zn=C((b0,Nh)=>{"use strict";Nh.exports=K;var ki=$t();((K.prototype=Object.create(ki.prototype)).constructor=K).className="Namespace";var ba=Kt(),xi=pe(),qv=pn(),hn,Vn,fn;K.fromJSON=function(e,t){return new K(e,t.options).addJSON(t.nested)};function Ah(n,e){if(n&&n.length){for(var t={},r=0;r<n.length;++r)t[n[r].name]=n[r].toJSON(e);return t}}K.arrayToJSON=Ah;K.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if(typeof e[r]!="string"&&e[r][0]<=t&&e[r][1]>t)return!0}return!1};K.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1};function K(n,e){ki.call(this,n,e),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function Dh(n){n._nestedArray=null,n._lookupCache={};for(var e=n;e=e.parent;)e._lookupCache={};return n}Object.defineProperty(K.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=xi.toArray(this.nested))}});K.prototype.toJSON=function(e){return xi.toObject(["options",this.options,"nested",Ah(this.nestedArray,e)])};K.prototype.addJSON=function(e){var t=this;if(e)for(var r=Object.keys(e),i=0,s;i<r.length;++i)s=e[r[i]],t.add((s.fields!==void 0?hn.fromJSON:s.values!==void 0?fn.fromJSON:s.methods!==void 0?Vn.fromJSON:s.id!==void 0?ba.fromJSON:K.fromJSON)(r[i],s));return this};K.prototype.get=function(e){return this.nested&&this.nested[e]||null};K.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof fn)return this.nested[e].values;throw Error("no such enum: "+e)};K.prototype.add=function(e){if(!(e instanceof ba&&e.extend!==void 0||e instanceof hn||e instanceof qv||e instanceof fn||e instanceof Vn||e instanceof K))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var t=this.get(e.name);if(t)if(t instanceof K&&e instanceof K&&!(t instanceof hn||t instanceof Vn)){for(var r=t.nestedArray,i=0;i<r.length;++i)e.add(r[i]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}this.nested[e.name]=e,this instanceof hn||this instanceof Vn||this instanceof fn||this instanceof ba||e._edition||(e._edition=e._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var s=this;s=s.parent;)s._needsRecursiveFeatureResolution=!0,s._needsRecursiveResolve=!0;return e.onAdd(this),Dh(this)};K.prototype.remove=function(e){if(!(e instanceof ki))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),Dh(this)};K.prototype.define=function(e,t){if(xi.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&e[0]==="")throw Error("path must be relative");for(var r=this;e.length>0;){var i=e.shift();if(r.nested&&r.nested[i]){if(r=r.nested[i],!(r instanceof K))throw Error("path conflicts with non-namespace objects")}else r.add(r=new K(i))}return t&&r.addJSON(t),r};K.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var e=this.nestedArray,t=0;for(this.resolve();t<e.length;)e[t]instanceof K?e[t++].resolveAll():e[t++].resolve();return this._needsRecursiveResolve=!1,this};K.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(this._needsRecursiveFeatureResolution=!1,e=this._edition||e,ki.prototype._resolveFeaturesRecursive.call(this,e),this.nestedArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this};K.prototype.lookup=function(e,t,r){if(typeof t=="boolean"?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),xi.isString(e)&&e.length){if(e===".")return this.root;e=e.split(".")}else if(!e.length)return this;var i=e.join(".");if(e[0]==="")return this.root.lookup(e.slice(1),t);var s=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+i];if(s&&(!t||t.indexOf(s.constructor)>-1)||(s=this._lookupImpl(e,i),s&&(!t||t.indexOf(s.constructor)>-1)))return s;if(r)return null;for(var o=this;o.parent;){if(s=o.parent._lookupImpl(e,i),s&&(!t||t.indexOf(s.constructor)>-1))return s;o=o.parent}return null};K.prototype._lookupImpl=function(e,t){if(Object.prototype.hasOwnProperty.call(this._lookupCache,t))return this._lookupCache[t];var r=this.get(e[0]),i=null;if(r)e.length===1?i=r:r instanceof K&&(e=e.slice(1),i=r._lookupImpl(e,e.join(".")));else for(var s=0;s<this.nestedArray.length;++s)this._nestedArray[s]instanceof K&&(r=this._nestedArray[s]._lookupImpl(e,t))&&(i=r);return this._lookupCache[t]=i,i};K.prototype.lookupType=function(e){var t=this.lookup(e,[hn]);if(!t)throw Error("no such type: "+e);return t};K.prototype.lookupEnum=function(e){var t=this.lookup(e,[fn]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t};K.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[hn,fn]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t};K.prototype.lookupService=function(e){var t=this.lookup(e,[Vn]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t};K._configure=function(n,e,t){hn=n,Vn=e,fn=t}});var Mi=C((w0,Oh)=>{"use strict";Oh.exports=It;var wa=Kt();((It.prototype=Object.create(wa.prototype)).constructor=It).className="MapField";var Uv=mn(),Cr=pe();function It(n,e,t,r,i,s){if(wa.call(this,n,e,r,void 0,void 0,i,s),!Cr.isString(t))throw TypeError("keyType must be a string");this.keyType=t,this.resolvedKeyType=null,this.map=!0}It.fromJSON=function(e,t){return new It(e,t.id,t.keyType,t.type,t.options,t.comment)};It.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Cr.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])};It.prototype.resolve=function(){if(this.resolved)return this;if(Uv.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return wa.prototype.resolve.call(this)};It.d=function(e,t,r){return typeof r=="function"?r=Cr.decorateType(r).name:r&&typeof r=="object"&&(r=Cr.decorateEnum(r).name),function(s,o){Cr.decorateType(s.constructor).add(new It(o,e,t,r))}}});var Pi=C((C0,kh)=>{"use strict";kh.exports=gn;var Ca=$t();((gn.prototype=Object.create(Ca.prototype)).constructor=gn).className="Method";var Gn=pe();function gn(n,e,t,r,i,s,o,a,l){if(Gn.isObject(i)?(o=i,i=s=void 0):Gn.isObject(s)&&(o=s,s=void 0),!(e===void 0||Gn.isString(e)))throw TypeError("type must be a string");if(!Gn.isString(t))throw TypeError("requestType must be a string");if(!Gn.isString(r))throw TypeError("responseType must be a string");Ca.call(this,n,o),this.type=e||"rpc",this.requestType=t,this.requestStream=i?!0:void 0,this.responseType=r,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=l}gn.fromJSON=function(e,t){return new gn(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)};gn.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Gn.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])};gn.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Ca.prototype.resolve.call(this))}});var Li=C((I0,Mh)=>{"use strict";Mh.exports=qe;var Rt=zn();((qe.prototype=Object.create(Rt.prototype)).constructor=qe).className="Service";var Ia=Pi(),Ir=pe(),Vv=ya();function qe(n,e){Rt.call(this,n,e),this.methods={},this._methodsArray=null}qe.fromJSON=function(e,t){var r=new qe(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),s=0;s<i.length;++s)r.add(Ia.fromJSON(i[s],t.methods[i[s]]));return t.nested&&r.addJSON(t.nested),t.edition&&(r._edition=t.edition),r.comment=t.comment,r._defaultEdition="proto3",r};qe.prototype.toJSON=function(e){var t=Rt.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return Ir.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"methods",Rt.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])};Object.defineProperty(qe.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=Ir.toArray(this.methods))}});function xh(n){return n._methodsArray=null,n}qe.prototype.get=function(e){return this.methods[e]||Rt.prototype.get.call(this,e)};qe.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;Rt.prototype.resolve.call(this);for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return this};qe.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,Rt.prototype._resolveFeaturesRecursive.call(this,e),this.methodsArray.forEach(t=>{t._resolveFeaturesRecursive(e)}),this):this};qe.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof Ia?(this.methods[e.name]=e,e.parent=this,xh(this)):Rt.prototype.add.call(this,e)};qe.prototype.remove=function(e){if(e instanceof Ia){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,xh(this)}return Rt.prototype.remove.call(this,e)};qe.prototype.create=function(e,t,r){for(var i=new Vv.Service(e,t,r),s=0,o;s<this.methodsArray.length;++s){var a=Ir.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");i[a]=Ir.codegen(["r","c"],Ir.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return i}});var Fi=C((R0,Ph)=>{"use strict";Ph.exports=ht;var zv=ut();function ht(n){if(n)for(var e=Object.keys(n),t=0;t<e.length;++t)this[e[t]]=n[e[t]]}ht.create=function(e){return this.$type.create(e)};ht.encode=function(e,t){return this.$type.encode(e,t)};ht.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)};ht.decode=function(e){return this.$type.decode(e)};ht.decodeDelimited=function(e){return this.$type.decodeDelimited(e)};ht.verify=function(e){return this.$type.verify(e)};ht.fromObject=function(e){return this.$type.fromObject(e)};ht.toObject=function(e,t){return this.$type.toObject(e,t)};ht.prototype.toJSON=function(){return this.$type.toObject(this,zv.toJSONOptions)}});var Ra=C((A0,Fh)=>{"use strict";Fh.exports=Kv;var Gv=nt(),At=mn(),Lh=pe();function jv(n){return"missing required '"+n.name+"'"}function Kv(n){for(var e=Lh.codegen(["r","l","e"],n.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(n.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),t=0;t<n.fieldsArray.length;++t){var r=n._fieldsArray[t].resolve(),i=r.resolvedType instanceof Gv?"int32":r.type,s="m"+Lh.safeProp(r.name);e("case %i: {",r.id),r.map?(e("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),At.defaults[r.keyType]!==void 0?e("k=%j",At.defaults[r.keyType]):e("k=null"),At.defaults[i]!==void 0?e("value=%j",At.defaults[i]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",r.keyType)("case 2:"),At.basic[i]===void 0?e("value=types[%i].decode(r,r.uint32())",t):e("value=r.%s()",i),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),At.long[r.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',s):e("%s[k]=value",s)):r.repeated?(e("if(!(%s&&%s.length))",s,s)("%s=[]",s),At.packed[i]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,i)("}else"),At.basic[i]===void 0?e(r.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",s,t):e("%s.push(r.%s())",s,i)):At.basic[i]===void 0?e(r.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",s,t):e("%s=r.%s()",s,i),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),t=0;t<n._fieldsArray.length;++t){var o=n._fieldsArray[t];o.required&&e("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",jv(o))}return e("return m")}});var Na=C((D0,Bh)=>{"use strict";Bh.exports=Hv;var $v=nt(),Aa=pe();function Qe(n,e){return n.name+": "+e+(n.repeated&&e!=="array"?"[]":n.map&&e!=="object"?"{k:"+n.keyType+"}":"")+" expected"}function Da(n,e,t,r){if(e.resolvedType)if(e.resolvedType instanceof $v){n("switch(%s){",r)("default:")("return%j",Qe(e,"enum value"));for(var i=Object.keys(e.resolvedType.values),s=0;s<i.length;++s)n("case %i:",e.resolvedType.values[i[s]]);n("break")("}")}else n("{")("var e=types[%i].verify(%s);",t,r)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":n("if(!util.isInteger(%s))",r)("return%j",Qe(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":n("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",r,r,r,r)("return%j",Qe(e,"integer|Long"));break;case"float":case"double":n('if(typeof %s!=="number")',r)("return%j",Qe(e,"number"));break;case"bool":n('if(typeof %s!=="boolean")',r)("return%j",Qe(e,"boolean"));break;case"string":n("if(!util.isString(%s))",r)("return%j",Qe(e,"string"));break;case"bytes":n('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',r,r,r)("return%j",Qe(e,"buffer"));break}return n}function Wv(n,e,t){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":n("if(!util.key32Re.test(%s))",t)("return%j",Qe(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":n("if(!util.key64Re.test(%s))",t)("return%j",Qe(e,"integer|Long key"));break;case"bool":n("if(!util.key2Re.test(%s))",t)("return%j",Qe(e,"boolean key"));break}return n}function Hv(n){var e=Aa.codegen(["m"],n.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),t=n.oneofsArray,r={};t.length&&e("var p={}");for(var i=0;i<n.fieldsArray.length;++i){var s=n._fieldsArray[i].resolve(),o="m"+Aa.safeProp(s.name);if(s.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)e("if(!util.isObject(%s))",o)("return%j",Qe(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),Wv(e,s,"k[i]"),Da(e,s,i,o+"[k[i]]")("}");else if(s.repeated)e("if(!Array.isArray(%s))",o)("return%j",Qe(s,"array"))("for(var i=0;i<%s.length;++i){",o),Da(e,s,i,o+"[i]")("}");else{if(s.partOf){var a=Aa.safeProp(s.partOf.name);r[s.partOf.name]===1&&e("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),r[s.partOf.name]=1,e("p%s=1",a)}Da(e,s,i,o)}s.optional&&e("}")}return e("return null")}});var xa=C(Uh=>{"use strict";var qh=Uh,Rr=nt(),ft=pe();function Oa(n,e,t,r){var i=!1;if(e.resolvedType)if(e.resolvedType instanceof Rr){n("switch(d%s){",r);for(var s=e.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===e.typeDefault&&!i&&(n("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',r,r,r),e.repeated||n("break"),i=!0),n("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",r,s[o[a]])("break");n("}")}else n('if(typeof d%s!=="object")',r)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,t,r);else{var l=!1;switch(e.type){case"double":case"float":n("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":n("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":n("m%s=d%s|0",r,r);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":n("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,l)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,l?"true":"");break;case"bytes":n('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length >= 0)",r)("m%s=d%s",r,r);break;case"string":n("m%s=String(d%s)",r,r);break;case"bool":n("m%s=Boolean(d%s)",r,r);break}}return n}qh.fromObject=function(e){var t=e.fieldsArray,r=ft.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<t.length;++i){var s=t[i].resolve(),o=ft.safeProp(s.name);s.map?(r("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),Oa(r,s,i,o+"[ks[i]]")("}")("}")):s.repeated?(r("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),Oa(r,s,i,o+"[i]")("}")("}")):(s.resolvedType instanceof Rr||r("if(d%s!=null){",o),Oa(r,s,i,o),s.resolvedType instanceof Rr||r("}"))}return r("return m")};function ka(n,e,t,r){if(e.resolvedType)e.resolvedType instanceof Rr?n("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",r,t,r,r,t,r,r):n("d%s=types[%i].toObject(m%s,o)",r,t,r);else{var i=!1;switch(e.type){case"double":case"float":n("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":n('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":n("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:n("d%s=m%s",r,r);break}}return n}qh.toObject=function(e){var t=e.fieldsArray.slice().sort(ft.compareFieldsById);if(!t.length)return ft.codegen()("return {}");for(var r=ft.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],s=[],o=[],a=0;a<t.length;++a)t[a].partOf||(t[a].resolve().repeated?i:t[a].map?s:o).push(t[a]);if(i.length){for(r("if(o.arrays||o.defaults){"),a=0;a<i.length;++a)r("d%s=[]",ft.safeProp(i[a].name));r("}")}if(s.length){for(r("if(o.objects||o.defaults){"),a=0;a<s.length;++a)r("d%s={}",ft.safeProp(s[a].name));r("}")}if(o.length){for(r("if(o.defaults){"),a=0;a<o.length;++a){var l=o[a],c=ft.safeProp(l.name);if(l.resolvedType instanceof Rr)r("d%s=o.enums===String?%j:%j",c,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var m="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",c,m)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")}else r("d%s=%j",c,l.typeDefault)}r("}")}var v=!1;for(a=0;a<t.length;++a){var l=t[a],S=e._fieldsArray.indexOf(l),c=ft.safeProp(l.name);l.map?(v||(v=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),ka(r,l,S,c+"[ks2[j]]")("}")):l.repeated?(r("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),ka(r,l,S,c+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",c,l.name),ka(r,l,S,c),l.partOf&&r("if(o.oneofs)")("d%s=%j",ft.safeProp(l.partOf.name),l.name)),r("}")}return r("return d")}});var Ma=C(Vh=>{"use strict";var Qv=Vh,Yv=Fi();Qv[".google.protobuf.Any"]={fromObject:function(n){if(n&&n["@type"]){var e=n["@type"].substring(n["@type"].lastIndexOf("/")+1),t=this.lookup(e);if(t){var r=n["@type"].charAt(0)==="."?n["@type"].slice(1):n["@type"];return r.indexOf("/")===-1&&(r="/"+r),this.create({type_url:r,value:t.encode(t.fromObject(n)).finish()})}}return this.fromObject(n)},toObject:function(n,e){var t="type.googleapis.com/",r="",i="";if(e&&e.json&&n.type_url&&n.value){i=n.type_url.substring(n.type_url.lastIndexOf("/")+1),r=n.type_url.substring(0,n.type_url.lastIndexOf("/")+1);var s=this.lookup(i);s&&(n=s.decode(n.value))}if(!(n instanceof this.ctor)&&n instanceof Yv){var o=n.$type.toObject(n,e),a=n.$type.fullName[0]==="."?n.$type.fullName.slice(1):n.$type.fullName;return r===""&&(r=t),i=r+a,o["@type"]=i,o}return this.toObject(n,e)}}});var Ui=C((k0,Gh)=>{"use strict";Gh.exports=ee;var Ye=zn();((ee.prototype=Object.create(Ye.prototype)).constructor=ee).className="Type";var Xv=nt(),Fa=pn(),Bi=Kt(),Jv=Mi(),Zv=Li(),Pa=Fi(),La=Oi(),eT=Di(),we=pe(),tT=Ba(),nT=Ra(),rT=Na(),zh=xa(),iT=Ma();function ee(n,e){Ye.call(this,n,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(ee.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var n=Object.keys(this.fields),e=0;e<n.length;++e){var t=this.fields[n[e]],r=t.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=t}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=we.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=we.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=ee.generateConstructor(this)())},set:function(n){var e=n.prototype;e instanceof Pa||((n.prototype=new Pa).constructor=n,we.merge(n.prototype,e)),n.$type=n.prototype.$type=this,we.merge(n,Pa,!0),this._ctor=n;for(var t=0;t<this.fieldsArray.length;++t)this._fieldsArray[t].resolve();var r={};for(t=0;t<this.oneofsArray.length;++t)r[this._oneofsArray[t].resolve().name]={get:we.oneOfGetter(this._oneofsArray[t].oneof),set:we.oneOfSetter(this._oneofsArray[t].oneof)};t&&Object.defineProperties(n.prototype,r)}}});ee.generateConstructor=function(e){for(var t=we.codegen(["p"],e.name),r=0,i;r<e.fieldsArray.length;++r)(i=e._fieldsArray[r]).map?t("this%s={}",we.safeProp(i.name)):i.repeated&&t("this%s=[]",we.safeProp(i.name));return t("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function qi(n){return n._fieldsById=n._fieldsArray=n._oneofsArray=null,delete n.encode,delete n.decode,delete n.verify,n}ee.fromJSON=function(e,t){var r=new ee(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var i=Object.keys(t.fields),s=0;s<i.length;++s)r.add((typeof t.fields[i[s]].keyType<"u"?Jv.fromJSON:Bi.fromJSON)(i[s],t.fields[i[s]]));if(t.oneofs)for(i=Object.keys(t.oneofs),s=0;s<i.length;++s)r.add(Fa.fromJSON(i[s],t.oneofs[i[s]]));if(t.nested)for(i=Object.keys(t.nested),s=0;s<i.length;++s){var o=t.nested[i[s]];r.add((o.id!==void 0?Bi.fromJSON:o.fields!==void 0?ee.fromJSON:o.values!==void 0?Xv.fromJSON:o.methods!==void 0?Zv.fromJSON:Ye.fromJSON)(i[s],o))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r};ee.prototype.toJSON=function(e){var t=Ye.prototype.toJSON.call(this,e),r=e?!!e.keepComments:!1;return we.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"oneofs",Ye.arrayToJSON(this.oneofsArray,e),"fields",Ye.arrayToJSON(this.fieldsArray.filter(function(i){return!i.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])};ee.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;Ye.prototype.resolveAll.call(this);var e=this.oneofsArray;for(r=0;r<e.length;)e[r++].resolve();for(var t=this.fieldsArray,r=0;r<t.length;)t[r++].resolve();return this};ee.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution?(e=this._edition||e,Ye.prototype._resolveFeaturesRecursive.call(this,e),this.oneofsArray.forEach(t=>{t._resolveFeatures(e)}),this.fieldsArray.forEach(t=>{t._resolveFeatures(e)}),this):this};ee.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null};ee.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof Bi&&e.extend===void 0){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),qi(this)}return e instanceof Fa?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),qi(this)):Ye.prototype.add.call(this,e)};ee.prototype.remove=function(e){if(e instanceof Bi&&e.extend===void 0){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),qi(this)}if(e instanceof Fa){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),qi(this)}return Ye.prototype.remove.call(this,e)};ee.prototype.isReservedId=function(e){return Ye.isReservedId(this.reserved,e)};ee.prototype.isReservedName=function(e){return Ye.isReservedName(this.reserved,e)};ee.prototype.create=function(e){return new this.ctor(e)};ee.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=tT(this)({Writer:eT,types:t,util:we}),this.decode=nT(this)({Reader:La,types:t,util:we}),this.verify=rT(this)({types:t,util:we}),this.fromObject=zh.fromObject(this)({types:t,util:we}),this.toObject=zh.toObject(this)({types:t,util:we});var i=iT[e];if(i){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(s),s.toObject=this.toObject,this.toObject=i.toObject.bind(s)}return this};ee.prototype.encode=function(e,t){return this.setup().encode(e,t)};ee.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()};ee.prototype.decode=function(e,t){return this.setup().decode(e,t)};ee.prototype.decodeDelimited=function(e){return e instanceof La||(e=La.create(e)),this.decode(e,e.uint32())};ee.prototype.verify=function(e){return this.setup().verify(e)};ee.prototype.fromObject=function(e){return this.setup().fromObject(e)};ee.prototype.toObject=function(e,t){return this.setup().toObject(e,t)};ee.d=function(e){return function(r){we.decorateType(r,e)}}});var ji=C((x0,$h)=>{"use strict";$h.exports=Ue;var Gi=zn();((Ue.prototype=Object.create(Gi.prototype)).constructor=Ue).className="Root";var Vi=Kt(),qa=nt(),sT=pn(),Wt=pe(),Ua,Va,Ar;function Ue(n){Gi.call(this,"",n),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}Ue.fromJSON=function(e,t){return t||(t=new Ue),e.options&&t.setOptions(e.options),t.addJSON(e.nested).resolveAll()};Ue.prototype.resolvePath=Wt.path.resolve;Ue.prototype.fetch=Wt.fetch;function Kh(){}Ue.prototype.load=function n(e,t,r){typeof t=="function"&&(r=t,t=void 0);var i=this;if(!r)return Wt.asPromise(n,i,e,t);var s=r===Kh;function o(E,_){if(r){if(s)throw E;_&&_.resolveAll();var I=r;r=null,I(E,_)}}function a(E){var _=E.lastIndexOf("google/protobuf/");if(_>-1){var I=E.substring(_);if(I in Ar)return I}return null}function l(E,_){try{if(Wt.isString(_)&&_.charAt(0)==="{"&&(_=JSON.parse(_)),!Wt.isString(_))i.setOptions(_.options).addJSON(_.nested);else{Va.filename=E;var I=Va(_,i,t),w,O=0;if(I.imports)for(;O<I.imports.length;++O)(w=a(I.imports[O])||i.resolvePath(E,I.imports[O]))&&c(w);if(I.weakImports)for(O=0;O<I.weakImports.length;++O)(w=a(I.weakImports[O])||i.resolvePath(E,I.weakImports[O]))&&c(w,!0)}}catch(k){o(k)}!s&&!m&&o(null,i)}function c(E,_){if(E=a(E)||E,!(i.files.indexOf(E)>-1)){if(i.files.push(E),E in Ar){s?l(E,Ar[E]):(++m,setTimeout(function(){--m,l(E,Ar[E])}));return}if(s){var I;try{I=Wt.fs.readFileSync(E).toString("utf8")}catch(w){_||o(w);return}l(E,I)}else++m,i.fetch(E,function(w,O){if(--m,!!r){if(w){_?m||o(null,i):o(w);return}l(E,O)}})}}var m=0;Wt.isString(e)&&(e=[e]);for(var v=0,S;v<e.length;++v)(S=i.resolvePath("",e[v]))&&c(S);return s?(i.resolveAll(),i):(m||o(null,i),i)};Ue.prototype.loadSync=function(e,t){if(!Wt.isNode)throw Error("not supported");return this.load(e,t,Kh)};Ue.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return Gi.prototype.resolveAll.call(this)};var zi=/^[A-Z]/;function jh(n,e){var t=e.parent.lookup(e.extend);if(t){var r=new Vi(e.fullName,e.id,e.type,e.rule,void 0,e.options);return t.get(r.name)||(r.declaringField=e,e.extensionField=r,t.add(r)),!0}return!1}Ue.prototype._handleAdd=function(e){if(e instanceof Vi)e.extend!==void 0&&!e.extensionField&&(jh(this,e)||this.deferred.push(e));else if(e instanceof qa)zi.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof sT)){if(e instanceof Ua)for(var t=0;t<this.deferred.length;)jh(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);zi.test(e.name)&&(e.parent[e.name]=e)}(e instanceof Ua||e instanceof qa||e instanceof Vi)&&(this._fullyQualifiedObjects[e.fullName]=e)};Ue.prototype._handleRemove=function(e){if(e instanceof Vi){if(e.extend!==void 0)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof qa)zi.test(e.name)&&delete e.parent[e.name];else if(e instanceof Gi){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);zi.test(e.name)&&delete e.parent[e.name]}delete this._fullyQualifiedObjects[e.fullName]};Ue._configure=function(n,e,t){Ua=n,Va=e,Ar=t}});var pe=C((M0,Hh)=>{"use strict";var ce=Hh.exports=ut(),Wh=va(),za,Ga;ce.codegen=_h();ce.fetch=wh();ce.path=Rh();ce.fs=ce.inquire("fs");ce.toArray=function(e){if(e){for(var t=Object.keys(e),r=new Array(t.length),i=0;i<t.length;)r[i]=e[t[i++]];return r}return[]};ce.toObject=function(e){for(var t={},r=0;r<e.length;){var i=e[r++],s=e[r++];s!==void 0&&(t[i]=s)}return t};var oT=/\\/g,aT=/"/g;ce.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)};ce.safeProp=function(e){return!/^[$\w_]+$/.test(e)||ce.isReserved(e)?'["'+e.replace(oT,"\\\\").replace(aT,'\\"')+'"]':"."+e};ce.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var lT=/_([a-z])/g;ce.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(lT,function(t,r){return r.toUpperCase()})};ce.compareFieldsById=function(e,t){return e.id-t.id};ce.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(ce.decorateRoot.remove(e.$type),e.$type.name=t,ce.decorateRoot.add(e.$type)),e.$type;za||(za=Ui());var r=new za(t||e.name);return ce.decorateRoot.add(r),r.ctor=e,Object.defineProperty(e,"$type",{value:r,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:r,enumerable:!1}),r};var cT=0;ce.decorateEnum=function(e){if(e.$type)return e.$type;Ga||(Ga=nt());var t=new Ga("Enum"+cT++,e);return ce.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t};ce.setProperty=function(e,t,r,i){function s(o,a,l){var c=a.shift();if(c==="__proto__"||c==="prototype")return o;if(a.length>0)o[c]=s(o[c]||{},a,l);else{var m=o[c];if(m&&i)return o;m&&(l=[].concat(m).concat(l)),o[c]=l}return o}if(typeof e!="object")throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return t=t.split("."),s(e,t,r)};Object.defineProperty(ce,"decorateRoot",{get:function(){return Wh.decorated||(Wh.decorated=new(ji()))}})});var mn=C(Qh=>{"use strict";var Dr=Qh,uT=pe(),dT=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Nr(n,e){var t=0,r={};for(e|=0;t<n.length;)r[dT[t+e]]=n[t++];return r}Dr.basic=Nr([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);Dr.defaults=Nr([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",uT.emptyArray,null]);Dr.long=Nr([0,0,0,1,1],7);Dr.mapKey=Nr([0,0,0,5,5,0,0,0,1,1,0,2],2);Dr.packed=Nr([1,5,0,0,0,5,5,0,0,0,1,1,0])});var Kt=C((L0,Xh)=>{"use strict";Xh.exports=me;var kr=$t();((me.prototype=Object.create(kr.prototype)).constructor=me).className="Field";var Yh=nt(),ja=mn(),ue=pe(),Or,hT=/^required|optional|repeated$/;me.fromJSON=function(e,t){var r=new me(e,t.id,t.type,t.rule,t.extend,t.options,t.comment);return t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r};function me(n,e,t,r,i,s,o){if(ue.isObject(r)?(o=i,s=r,r=i=void 0):ue.isObject(i)&&(o=s,s=i,i=void 0),kr.call(this,n,s),!ue.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!ue.isString(t))throw TypeError("type must be a string");if(r!==void 0&&!hT.test(r=r.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(i!==void 0&&!ue.isString(i))throw TypeError("extend must be a string");r==="proto3_optional"&&(r="optional"),this.rule=r&&r!=="optional"?r:void 0,this.type=t,this.id=e,this.extend=i||void 0,this.repeated=r==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=ue.Long?ja.long[t]!==void 0:!1,this.bytes=t==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=o}Object.defineProperty(me.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}});Object.defineProperty(me.prototype,"optional",{get:function(){return!this.required}});Object.defineProperty(me.prototype,"delimited",{get:function(){return this.resolvedType instanceof Or&&this._features.message_encoding==="DELIMITED"}});Object.defineProperty(me.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}});Object.defineProperty(me.prototype,"hasPresence",{get:function(){return this.repeated||this.map?!1:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}});me.prototype.setOption=function(e,t,r){return kr.prototype.setOption.call(this,e,t,r)};me.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return ue.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])};me.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=ja.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Or?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof Yh&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof Yh)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=ue.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var e;ue.base64.test(this.typeDefault)?ue.base64.decode(this.typeDefault,e=ue.newBuffer(ue.base64.length(this.typeDefault)),0):ue.utf8.write(this.typeDefault,e=ue.newBuffer(ue.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=ue.emptyObject:this.repeated?this.defaultValue=ue.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Or&&(this.parent.ctor.prototype[this.name]=this.defaultValue),kr.prototype.resolve.call(this)};me.prototype._inferLegacyProtoFeatures=function(e){if(e!=="proto2"&&e!=="proto3")return{};var t={};if(this.rule==="required"&&(t.field_presence="LEGACY_REQUIRED"),this.parent&&ja.defaults[this.type]===void 0){var r=this.parent.get(this.type.split(".").pop());r&&r instanceof Or&&r.group&&(t.message_encoding="DELIMITED")}return this.getOption("packed")===!0?t.repeated_field_encoding="PACKED":this.getOption("packed")===!1&&(t.repeated_field_encoding="EXPANDED"),t};me.prototype._resolveFeatures=function(e){return kr.prototype._resolveFeatures.call(this,this._edition||e)};me.d=function(e,t,r,i){return typeof t=="function"?t=ue.decorateType(t).name:t&&typeof t=="object"&&(t=ue.decorateEnum(t).name),function(o,a){ue.decorateType(o.constructor).add(new me(a,e,t,r,{default:i}))}};me._configure=function(e){Or=e}});var pn=C((F0,ef)=>{"use strict";ef.exports=Ve;var $i=$t();((Ve.prototype=Object.create($i.prototype)).constructor=Ve).className="OneOf";var Jh=Kt(),Ki=pe();function Ve(n,e,t,r){if(Array.isArray(e)||(t=e,e=void 0),$i.call(this,n,t),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=r}Ve.fromJSON=function(e,t){return new Ve(e,t.oneof,t.options,t.comment)};Ve.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Ki.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])};function Zh(n){if(n.parent)for(var e=0;e<n.fieldsArray.length;++e)n.fieldsArray[e].parent||n.parent.add(n.fieldsArray[e])}Ve.prototype.add=function(e){if(!(e instanceof Jh))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,Zh(this),this};Ve.prototype.remove=function(e){if(!(e instanceof Jh))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),t=this.oneof.indexOf(e.name),t>-1&&this.oneof.splice(t,1),e.partOf=null,this};Ve.prototype.onAdd=function(e){$i.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}Zh(this)};Ve.prototype.onRemove=function(e){for(var t=0,r;t<this.fieldsArray.length;++t)(r=this.fieldsArray[t]).parent&&r.parent.remove(r);$i.prototype.onRemove.call(this,e)};Object.defineProperty(Ve.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return!1;var n=this.fieldsArray[0];return n.options!=null&&n.options.proto3_optional===!0}});Ve.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(i,s){Ki.decorateType(i.constructor).add(new Ve(s,e)),Object.defineProperty(i,s,{get:Ki.oneOfGetter(e),set:Ki.oneOfSetter(e)})}}});var $t=C((B0,tf)=>{"use strict";tf.exports=ve;ve.className="ReflectionObject";var fT=pn(),xr=pe(),Wi,pT={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},mT={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},gT={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function ve(n,e){if(!xr.isString(n))throw TypeError("name must be a string");if(e&&!xr.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=n,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(ve.prototype,{root:{get:function(){for(var n=this;n.parent!==null;)n=n.parent;return n}},fullName:{get:function(){for(var n=[this.name],e=this.parent;e;)n.unshift(e.name),e=e.parent;return n.join(".")}}});ve.prototype.toJSON=function(){throw Error()};ve.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof Wi&&t._handleAdd(this)};ve.prototype.onRemove=function(e){var t=e.root;t instanceof Wi&&t._handleRemove(this),this.parent=null,this.resolved=!1};ve.prototype.resolve=function(){return this.resolved?this:(this.root instanceof Wi&&(this.resolved=!0),this)};ve.prototype._resolveFeaturesRecursive=function(e){return this._resolveFeatures(this._edition||e)};ve.prototype._resolveFeatures=function(e){if(!this._featuresResolved){var t={};if(!e)throw new Error("Unknown edition for "+this.fullName);var r=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if(e==="proto2")t=Object.assign({},mT);else if(e==="proto3")t=Object.assign({},gT);else if(e==="2023")t=Object.assign({},pT);else throw new Error("Unknown edition: "+e);this._features=Object.assign(t,r||{}),this._featuresResolved=!0;return}if(this.partOf instanceof fT){var i=Object.assign({},this.partOf._features);this._features=Object.assign(i,r||{})}else if(!this.declaringField)if(this.parent){var s=Object.assign({},this.parent._features);this._features=Object.assign(s,r||{})}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}};ve.prototype._inferLegacyProtoFeatures=function(){return{}};ve.prototype.getOption=function(e){if(this.options)return this.options[e]};ve.prototype.setOption=function(e,t,r){return this.options||(this.options={}),/^features\./.test(e)?xr.setProperty(this.options,e,t,r):(!r||this.options[e]===void 0)&&(this.getOption(e)!==t&&(this.resolved=!1),this.options[e]=t),this};ve.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(r){var s=i.find(function(l){return Object.prototype.hasOwnProperty.call(l,e)});if(s){var o=s[e];xr.setProperty(o,r,t)}else s={},s[e]=xr.setProperty({},r,t),i.push(s)}else{var a={};a[e]=t,i.push(a)}return this};ve.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)this.setOption(r[i],e[r[i]],t);return this};ve.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e};ve.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition};ve._configure=function(n){Wi=n}});var nt=C((q0,rf)=>{"use strict";rf.exports=rt;var Ka=$t();((rt.prototype=Object.create(Ka.prototype)).constructor=rt).className="Enum";var nf=zn(),Hi=pe();function rt(n,e,t,r,i,s){if(Ka.call(this,n,t),e&&typeof e!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=r,this.comments=i||{},this.valuesOptions=s,this._valuesFeatures={},this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)typeof e[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}rt.prototype._resolveFeatures=function(e){return e=this._edition||e,Ka.prototype._resolveFeatures.call(this,e),Object.keys(this.values).forEach(t=>{var r=Object.assign({},this._features);this._valuesFeatures[t]=Object.assign(r,this.valuesOptions&&this.valuesOptions[t]&&this.valuesOptions[t].features)}),this};rt.fromJSON=function(e,t){var r=new rt(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r};rt.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return Hi.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])};rt.prototype.add=function(e,t,r,i){if(!Hi.isString(e))throw TypeError("name must be a string");if(!Hi.isInteger(t))throw TypeError("id must be an integer");if(this.values[e]!==void 0)throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(this.valuesById[t]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return i&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=r||null,this};rt.prototype.remove=function(e){if(!Hi.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(t==null)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this};rt.prototype.isReservedId=function(e){return nf.isReservedId(this.reserved,e)};rt.prototype.isReservedName=function(e){return nf.isReservedName(this.reserved,e)}});var Ba=C((U0,of)=>{"use strict";of.exports=vT;var yT=nt(),$a=mn(),Wa=pe();function sf(n,e,t,r){return e.delimited?n("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",t,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):n("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",t,r,(e.id<<3|2)>>>0)}function vT(n){for(var e=Wa.codegen(["m","w"],n.name+"$encode")("if(!w)")("w=Writer.create()"),t,r,i=n.fieldsArray.slice().sort(Wa.compareFieldsById),t=0;t<i.length;++t){var s=i[t].resolve(),o=n._fieldsArray.indexOf(s),a=s.resolvedType instanceof yT?"int32":s.type,l=$a.basic[a];r="m"+Wa.safeProp(s.name),s.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|$a.mapKey[s.keyType],s.keyType),l===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,r):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,a,r),e("}")("}")):s.repeated?(e("if(%s!=null&&%s.length){",r,r),s.packed&&$a.packed[a]!==void 0?e("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",a,r)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",r),l===void 0?sf(e,s,o,r+"[i]"):e("w.uint32(%i).%s(%s[i])",(s.id<<3|l)>>>0,a,r)),e("}")):(s.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,s.name),l===void 0?sf(e,s,o,r):e("w.uint32(%i).%s(%s)",(s.id<<3|l)>>>0,a,r))}return e("return w")}});var lf=C((V0,af)=>{"use strict";var $=af.exports=Sh();$.build="light";function TT(n,e,t){return typeof e=="function"?(t=e,e=new $.Root):e||(e=new $.Root),e.load(n,t)}$.load=TT;function ST(n,e){return e||(e=new $.Root),e.loadSync(n)}$.loadSync=ST;$.encoder=Ba();$.decoder=Ra();$.verifier=Na();$.converter=xa();$.ReflectionObject=$t();$.Namespace=zn();$.Root=ji();$.Enum=nt();$.Type=Ui();$.Field=Kt();$.OneOf=pn();$.MapField=Mi();$.Service=Li();$.Method=Pi();$.Message=Fi();$.wrappers=Ma();$.types=mn();$.util=pe();$.ReflectionObject._configure($.Root);$.Namespace._configure($.Type,$.Service,$.Enum);$.Root._configure($.Type);$.Field._configure($.Type)});var Qa=C((z0,df)=>{"use strict";df.exports=uf;var Ha=/[\s{}=;:[\],'"()<>]/g,ET=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,_T=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,bT=/^ *[*/]+ */,wT=/^\s*\*?\/*/,CT=/\n/g,IT=/\s/,RT=/\\(.?)/g,AT={0:"\0",r:"\r",n:`
`,t:"	"};function cf(n){return n.replace(RT,function(e,t){switch(t){case"\\":case"":return t;default:return AT[t]||""}})}uf.unescape=cf;function uf(n,e){n=n.toString();var t=0,r=n.length,i=1,s=0,o={},a=[],l=null;function c(b){return Error("illegal "+b+" (line "+i+")")}function m(){var b=l==="'"?_T:ET;b.lastIndex=t-1;var q=b.exec(n);if(!q)throw c("string");return t=b.lastIndex,w(l),l=null,cf(q[1])}function v(b){return n.charAt(b)}function S(b,q,B){var y={type:n.charAt(b++),lineEmpty:!1,leading:B},f;e?f=2:f=3;var p=b-f,g;do if(--p<0||(g=n.charAt(p))===`
`){y.lineEmpty=!0;break}while(g===" "||g==="	");for(var d=n.substring(b,q).split(CT),T=0;T<d.length;++T)d[T]=d[T].replace(e?wT:bT,"").trim();y.text=d.join(`
`).trim(),o[i]=y,s=i}function E(b){var q=_(b),B=n.substring(b,q),y=/^\s*\/\//.test(B);return y}function _(b){for(var q=b;q<r&&v(q)!==`
`;)q++;return q}function I(){if(a.length>0)return a.shift();if(l)return m();var b,q,B,y,f,p=t===0;do{if(t===r)return null;for(b=!1;IT.test(B=v(t));)if(B===`
`&&(p=!0,++i),++t===r)return null;if(v(t)==="/"){if(++t===r)throw c("comment");if(v(t)==="/")if(e){if(y=t,f=!1,E(t-1)){f=!0;do if(t=_(t),t===r||(t++,!p))break;while(E(t))}else t=Math.min(r,_(t)+1);f&&(S(y,t,p),p=!0),i++,b=!0}else{for(f=v(y=t+1)==="/";v(++t)!==`
`;)if(t===r)return null;++t,f&&(S(y,t-1,p),p=!0),++i,b=!0}else if((B=v(t))==="*"){y=t+1,f=e||v(y)==="*";do{if(B===`
`&&++i,++t===r)throw c("comment");q=B,B=v(t)}while(q!=="*"||B!=="/");++t,f&&(S(y,t-2,p),p=!0),b=!0}else return"/"}}while(b);var g=t;Ha.lastIndex=0;var d=Ha.test(v(g++));if(!d)for(;g<r&&!Ha.test(v(g));)++g;var T=n.substring(t,t=g);return(T==='"'||T==="'")&&(l=T),T}function w(b){a.push(b)}function O(){if(!a.length){var b=I();if(b===null)return null;w(b)}return a[0]}function k(b,q){var B=O(),y=B===b;if(y)return I(),!0;if(!q)throw c("token '"+B+"', '"+b+"' expected");return!1}function x(b){var q=null,B;return b===void 0?(B=o[i-1],delete o[i-1],B&&(e||B.type==="*"||B.lineEmpty)&&(q=B.leading?B.text:null)):(s<b&&O(),B=o[b],delete o[b],B&&!B.lineEmpty&&(e||B.type==="/")&&(q=B.leading?null:B.text)),q}return Object.defineProperty({next:I,peek:O,push:w,skip:k,cmnt:x},"line",{get:function(){return i}})}});var yf=C((G0,gf)=>{"use strict";gf.exports=Dt;Dt.filename=null;Dt.defaults={keepCase:!1};var DT=Qa(),hf=ji(),ff=Ui(),pf=Kt(),NT=Mi(),mf=pn(),OT=nt(),kT=Li(),xT=Pi(),MT=$t(),PT=mn(),Ya=pe(),LT=/^[1-9][0-9]*$/,FT=/^-?[1-9][0-9]*$/,BT=/^0[x][0-9a-fA-F]+$/,qT=/^-?0[x][0-9a-fA-F]+$/,UT=/^0[0-7]+$/,VT=/^-?0[0-7]+$/,zT=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,pt=/^[a-zA-Z_][a-zA-Z_0-9]*$/,mt=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function Dt(n,e,t){e instanceof hf||(t=e,e=new hf),t||(t=Dt.defaults);var r=t.preferTrailingComment||!1,i=DT(n,t.alternateCommentMode||!1),s=i.next,o=i.push,a=i.peek,l=i.skip,c=i.cmnt,m=!0,v,S,E,_="proto2",I=e,w=[],O={},k=t.keepCase?function(A){return A}:Ya.camelCase;function x(){w.forEach(A=>{A._edition=_,Object.keys(O).forEach(R=>{A.getOption(R)===void 0&&A.setOption(R,O[R],!0)})})}function b(A,R,D){var L=Dt.filename;return D||(Dt.filename=null),Error("illegal "+(R||"token")+" '"+A+"' ("+(L?L+", ":"")+"line "+i.line+")")}function q(){var A=[],R;do{if((R=s())!=='"'&&R!=="'")throw b(R);A.push(s()),l(R),R=a()}while(R==='"'||R==="'");return A.join("")}function B(A){var R=s();switch(R){case"'":case'"':return o(R),q();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return f(R,!0)}catch{if(A&&mt.test(R))return R;throw b(R,"value")}}function y(A,R){var D,L;do if(R&&((D=a())==='"'||D==="'")){var P=q();if(A.push(P),_>=2023)throw b(P,"id")}else try{A.push([L=p(s()),l("to",!0)?p(s()):L])}catch(re){if(R&&mt.test(D)&&_>=2023)A.push(D);else throw re}while(l(",",!0));var V={options:void 0};V.setOption=function(re,_e){this.options===void 0&&(this.options={}),this.options[re]=_e},N(V,function(_e){if(_e==="option")Q(V,_e),l(";");else throw b(_e)},function(){wt(V)})}function f(A,R){var D=1;switch(A.charAt(0)==="-"&&(D=-1,A=A.substring(1)),A){case"inf":case"INF":case"Inf":return D*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(LT.test(A))return D*parseInt(A,10);if(BT.test(A))return D*parseInt(A,16);if(UT.test(A))return D*parseInt(A,8);if(zT.test(A))return D*parseFloat(A);throw b(A,"number",R)}function p(A,R){switch(A){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!R&&A.charAt(0)==="-")throw b(A,"id");if(FT.test(A))return parseInt(A,10);if(qT.test(A))return parseInt(A,16);if(VT.test(A))return parseInt(A,8);throw b(A,"id")}function g(){if(v!==void 0)throw b("package");if(v=s(),!mt.test(v))throw b(v,"name");I=I.define(v),l(";")}function d(){var A=a(),R;switch(A){case"weak":R=E||(E=[]),s();break;case"public":s();default:R=S||(S=[]);break}A=q(),l(";"),R.push(A)}function T(){if(l("="),_=q(),_<2023)throw b(_,"syntax");l(";")}function u(){if(l("="),_=q(),!["2023"].includes(_))throw b(_,"edition");l(";")}function h(A,R){switch(R){case"option":return Q(A,R),l(";"),!0;case"message":return j(A,R),!0;case"enum":return Re(A,R),!0;case"service":return Um(A,R),!0;case"extend":return zm(A,R),!0}return!1}function N(A,R,D){var L=i.line;if(A&&(typeof A.comment!="string"&&(A.comment=c()),A.filename=Dt.filename),l("{",!0)){for(var P;(P=s())!=="}";)R(P);l(";",!0)}else D&&D(),l(";"),A&&(typeof A.comment!="string"||r)&&(A.comment=c(L)||A.comment)}function j(A,R){if(!pt.test(R=s()))throw b(R,"type name");var D=new ff(R);N(D,function(P){if(!h(D,P))switch(P){case"map":ae(D,P);break;case"required":if(_!=="proto2")throw b(P);case"repeated":G(D,P);break;case"optional":if(_==="proto3")G(D,"proto3_optional");else{if(_!=="proto2")throw b(P);G(D,"optional")}break;case"oneof":Ee(D,P);break;case"extensions":y(D.extensions||(D.extensions=[]));break;case"reserved":y(D.reserved||(D.reserved=[]),!0);break;default:if(_==="proto2"||!mt.test(P))throw b(P);o(P),G(D,"optional");break}}),A.add(D),A===I&&w.push(D)}function G(A,R,D){var L=s();if(L==="group"){Z(A,R);return}for(;L.endsWith(".")||a().startsWith(".");)L+=s();if(!mt.test(L))throw b(L,"type");var P=s();if(!pt.test(P))throw b(P,"name");P=k(P),l("=");var V=new pf(P,p(s()),L,R,D);if(N(V,function(Ne){if(Ne==="option")Q(V,Ne),l(";");else throw b(Ne)},function(){wt(V)}),R==="proto3_optional"){var re=new mf("_"+P);V.setOption("proto3_optional",!0),re.add(V),A.add(re)}else A.add(V);A===I&&w.push(V)}function Z(A,R){if(_>=2023)throw b("group");var D=s();if(!pt.test(D))throw b(D,"name");var L=Ya.lcFirst(D);D===L&&(D=Ya.ucFirst(D)),l("=");var P=p(s()),V=new ff(D);V.group=!0;var re=new pf(L,P,D,R);re.filename=Dt.filename,N(V,function(Ne){switch(Ne){case"option":Q(V,Ne),l(";");break;case"required":case"repeated":G(V,Ne);break;case"optional":_==="proto3"?G(V,"proto3_optional"):G(V,"optional");break;case"message":j(V,Ne);break;case"enum":Re(V,Ne);break;case"reserved":y(V.reserved||(V.reserved=[]),!0);break;default:throw b(Ne)}}),A.add(V).add(re)}function ae(A){l("<");var R=s();if(PT.mapKey[R]===void 0)throw b(R,"type");l(",");var D=s();if(!mt.test(D))throw b(D,"type");l(">");var L=s();if(!pt.test(L))throw b(L,"name");l("=");var P=new NT(k(L),p(s()),R,D);N(P,function(re){if(re==="option")Q(P,re),l(";");else throw b(re)},function(){wt(P)}),A.add(P)}function Ee(A,R){if(!pt.test(R=s()))throw b(R,"name");var D=new mf(k(R));N(D,function(P){P==="option"?(Q(D,P),l(";")):(o(P),G(D,"optional"))}),A.add(D)}function Re(A,R){if(!pt.test(R=s()))throw b(R,"name");var D=new OT(R);N(D,function(P){switch(P){case"option":Q(D,P),l(";");break;case"reserved":y(D.reserved||(D.reserved=[]),!0),D.reserved===void 0&&(D.reserved=[]);break;default:he(D,P)}}),A.add(D),A===I&&w.push(D)}function he(A,R){if(!pt.test(R))throw b(R,"name");l("=");var D=p(s(),!0),L={options:void 0};L.getOption=function(P){return this.options[P]},L.setOption=function(P,V){MT.prototype.setOption.call(L,P,V)},L.setParsedOption=function(){},N(L,function(V){if(V==="option")Q(L,V),l(";");else throw b(V)},function(){wt(L)}),A.add(R,D,L.comment,L.parsedOptions||L.options)}function Q(A,R){var D,L,P=!0;for(R==="option"&&(R=s());R!=="=";){if(R==="("){var V=s();l(")"),R="("+V+")"}if(P){if(P=!1,R.includes(".")&&!R.includes("(")){var re=R.split(".");D=re[0]+".",R=re[1];continue}D=R}else L=L?L+=R:R;R=s()}var _e=L?D.concat(L):D,Ne=Ae(A,_e);L=L&&L[0]==="."?L.slice(1):L,D=D&&D[D.length-1]==="."?D.slice(0,-1):D,De(A,D,Ne,L)}function Ae(A,R){if(l("{",!0)){for(var D={};!l("}",!0);){if(!pt.test(ye=s()))throw b(ye,"name");if(ye===null)throw b(ye,"end of input");var L,P=ye;if(l(":",!0),a()==="{")L=Ae(A,R+"."+ye);else if(a()==="["){L=[];var V;if(l("[",!0)){do V=B(!0),L.push(V);while(l(",",!0));l("]"),typeof V<"u"&&se(A,R+"."+ye,V)}}else L=B(!0),se(A,R+"."+ye,L);var re=D[P];re&&(L=[].concat(re).concat(L)),D[P]=L,l(",",!0),l(";",!0)}return D}var _e=B(!0);return se(A,R,_e),_e}function se(A,R,D){if(I===A&&/^features\./.test(R)){O[R]=D;return}A.setOption&&A.setOption(R,D)}function De(A,R,D,L){A.setParsedOption&&A.setParsedOption(R,D,L)}function wt(A){if(l("[",!0)){do Q(A,"option");while(l(",",!0));l("]")}return A}function Um(A,R){if(!pt.test(R=s()))throw b(R,"service name");var D=new kT(R);N(D,function(P){if(!h(D,P))if(P==="rpc")Vm(D,P);else throw b(P)}),A.add(D),A===I&&w.push(D)}function Vm(A,R){var D=c(),L=R;if(!pt.test(R=s()))throw b(R,"name");var P=R,V,re,_e,Ne;if(l("("),l("stream",!0)&&(re=!0),!mt.test(R=s())||(V=R,l(")"),l("returns"),l("("),l("stream",!0)&&(Ne=!0),!mt.test(R=s())))throw b(R);_e=R,l(")");var ni=new xT(P,L,V,_e,re,Ne);ni.comment=D,N(ni,function(so){if(so==="option")Q(ni,so),l(";");else throw b(so)}),A.add(ni)}function zm(A,R){if(!mt.test(R=s()))throw b(R,"reference");var D=R;N(null,function(P){switch(P){case"required":case"repeated":G(A,P,D);break;case"optional":_==="proto3"?G(A,"proto3_optional",D):G(A,"optional",D);break;default:if(_==="proto2"||!mt.test(P))throw b(P);o(P),G(A,"optional",D);break}})}for(var ye;(ye=s())!==null;)switch(ye){case"package":if(!m)throw b(ye);g();break;case"import":if(!m)throw b(ye);d();break;case"syntax":if(!m)throw b(ye);T();break;case"edition":if(!m)throw b(ye);u();break;case"option":Q(I,ye),l(";",!0);break;default:if(h(I,ye)){m=!1;continue}throw b(ye)}return x(),Dt.filename=null,{package:v,imports:S,weakImports:E,root:e}}});var Sf=C((j0,Tf)=>{"use strict";Tf.exports=it;var GT=/\/|\./;function it(n,e){GT.test(n)||(n="google/protobuf/"+n+".proto",e={nested:{google:{nested:{protobuf:{nested:e}}}}}),it[n]=e}it("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var vf;it("duration",{Duration:vf={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});it("timestamp",{Timestamp:vf});it("empty",{Empty:{fields:{}}});it("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});it("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});it("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});it.get=function(e){return it[e]||null}});var _f=C((K0,Ef)=>{"use strict";var Ht=Ef.exports=lf();Ht.build="full";Ht.tokenize=Qa();Ht.parse=yf();Ht.common=Sf();Ht.Root._configure(Ht.Type,Ht.parse,Ht.common)});var Qi=C(($0,bf)=>{"use strict";bf.exports=_f()});var Xa=C((W0,jT)=>{jT.exports={nested:{google:{nested:{protobuf:{options:{go_package:"google.golang.org/protobuf/types/descriptorpb",java_package:"com.google.protobuf",java_outer_classname:"DescriptorProtos",csharp_namespace:"Google.Protobuf.Reflection",objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{FileDescriptorSet:{edition:"proto2",fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}},extensions:[[536e6,536e6]]},Edition:{edition:"proto2",values:{EDITION_UNKNOWN:0,EDITION_LEGACY:900,EDITION_PROTO2:998,EDITION_PROTO3:999,EDITION_2023:1e3,EDITION_2024:1001,EDITION_1_TEST_ONLY:1,EDITION_2_TEST_ONLY:2,EDITION_99997_TEST_ONLY:99997,EDITION_99998_TEST_ONLY:99998,EDITION_99999_TEST_ONLY:99999,EDITION_MAX:2147483647}},FileDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10},weakDependency:{rule:"repeated",type:"int32",id:11},optionDependency:{rule:"repeated",type:"string",id:15},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12},edition:{type:"Edition",id:14}}},DescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10},visibility:{type:"SymbolVisibility",id:11}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2},options:{type:"ExtensionRangeOptions",id:3}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},ExtensionRangeOptions:{edition:"proto2",fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999},declaration:{rule:"repeated",type:"Declaration",id:2,options:{retention:"RETENTION_SOURCE"}},features:{type:"FeatureSet",id:50},verification:{type:"VerificationState",id:3,options:{default:"UNVERIFIED",retention:"RETENTION_SOURCE"}}},extensions:[[1e3,536870911]],nested:{Declaration:{fields:{number:{type:"int32",id:1},fullName:{type:"string",id:2},type:{type:"string",id:3},reserved:{type:"bool",id:5},repeated:{type:"bool",id:6}},reserved:[[4,4]]},VerificationState:{values:{DECLARATION:0,UNVERIFIED:1}}}},FieldDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8},proto3Optional:{type:"bool",id:17}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REPEATED:3,LABEL_REQUIRED:2}}}},OneofDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3},reservedRange:{rule:"repeated",type:"EnumReservedRange",id:4},reservedName:{rule:"repeated",type:"string",id:5},visibility:{type:"SymbolVisibility",id:6}},nested:{EnumReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},EnumValueDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{edition:"proto2",fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{edition:"proto2",fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31,options:{default:!0}},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},swiftPrefix:{type:"string",id:39},phpClassPrefix:{type:"string",id:40},phpNamespace:{type:"string",id:41},phpMetadataNamespace:{type:"string",id:44},rubyPackage:{type:"string",id:45},features:{type:"FeatureSet",id:50},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[42,42],[38,38],"php_generic_services"],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{edition:"proto2",fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},deprecatedLegacyJsonFieldConflicts:{type:"bool",id:11,options:{deprecated:!0}},features:{type:"FeatureSet",id:12},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4],[5,5],[6,6],[8,8],[9,9]]},FieldOptions:{edition:"proto2",fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},unverifiedLazy:{type:"bool",id:15},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10,options:{deprecated:!0}},debugRedact:{type:"bool",id:16},retention:{type:"OptionRetention",id:17},targets:{rule:"repeated",type:"OptionTargetType",id:19},editionDefaults:{rule:"repeated",type:"EditionDefault",id:20},features:{type:"FeatureSet",id:21},featureSupport:{type:"FeatureSupport",id:22},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4],[18,18]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}},OptionRetention:{values:{RETENTION_UNKNOWN:0,RETENTION_RUNTIME:1,RETENTION_SOURCE:2}},OptionTargetType:{values:{TARGET_TYPE_UNKNOWN:0,TARGET_TYPE_FILE:1,TARGET_TYPE_EXTENSION_RANGE:2,TARGET_TYPE_MESSAGE:3,TARGET_TYPE_FIELD:4,TARGET_TYPE_ONEOF:5,TARGET_TYPE_ENUM:6,TARGET_TYPE_ENUM_ENTRY:7,TARGET_TYPE_SERVICE:8,TARGET_TYPE_METHOD:9}},EditionDefault:{fields:{edition:{type:"Edition",id:3},value:{type:"string",id:2}}},FeatureSupport:{fields:{editionIntroduced:{type:"Edition",id:1},editionDeprecated:{type:"Edition",id:2},deprecationWarning:{type:"string",id:3},editionRemoved:{type:"Edition",id:4}}}}},OneofOptions:{edition:"proto2",fields:{features:{type:"FeatureSet",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{edition:"proto2",fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},deprecatedLegacyJsonFieldConflicts:{type:"bool",id:6,options:{deprecated:!0}},features:{type:"FeatureSet",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[5,5]]},EnumValueOptions:{edition:"proto2",fields:{deprecated:{type:"bool",id:1},features:{type:"FeatureSet",id:2},debugRedact:{type:"bool",id:3},featureSupport:{type:"FieldOptions.FeatureSupport",id:4},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{edition:"proto2",fields:{features:{type:"FeatureSet",id:34},deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{edition:"proto2",fields:{deprecated:{type:"bool",id:33},idempotencyLevel:{type:"IdempotencyLevel",id:34,options:{default:"IDEMPOTENCY_UNKNOWN"}},features:{type:"FeatureSet",id:35},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],nested:{IdempotencyLevel:{values:{IDEMPOTENCY_UNKNOWN:0,NO_SIDE_EFFECTS:1,IDEMPOTENT:2}}}},UninterpretedOption:{edition:"proto2",fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},FeatureSet:{edition:"proto2",fields:{fieldPresence:{type:"FieldPresence",id:1,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},enumType:{type:"EnumType",id:2,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},repeatedFieldEncoding:{type:"RepeatedFieldEncoding",id:3,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},utf8Validation:{type:"Utf8Validation",id:4,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},messageEncoding:{type:"MessageEncoding",id:5,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},jsonFormat:{type:"JsonFormat",id:6,options:{retention:"RETENTION_RUNTIME",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},enforceNamingStyle:{type:"EnforceNamingStyle",id:7,options:{retention:"RETENTION_SOURCE",targets:"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},defaultSymbolVisibility:{type:"VisibilityFeature.DefaultSymbolVisibility",id:8,options:{retention:"RETENTION_SOURCE",targets:"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},extensions:[[1e3,9994],[9995,9999],[1e4,1e4]],reserved:[[999,999]],nested:{FieldPresence:{values:{FIELD_PRESENCE_UNKNOWN:0,EXPLICIT:1,IMPLICIT:2,LEGACY_REQUIRED:3}},EnumType:{values:{ENUM_TYPE_UNKNOWN:0,OPEN:1,CLOSED:2}},RepeatedFieldEncoding:{values:{REPEATED_FIELD_ENCODING_UNKNOWN:0,PACKED:1,EXPANDED:2}},Utf8Validation:{values:{UTF8_VALIDATION_UNKNOWN:0,VERIFY:2,NONE:3}},MessageEncoding:{values:{MESSAGE_ENCODING_UNKNOWN:0,LENGTH_PREFIXED:1,DELIMITED:2}},JsonFormat:{values:{JSON_FORMAT_UNKNOWN:0,ALLOW:1,LEGACY_BEST_EFFORT:2}},EnforceNamingStyle:{values:{ENFORCE_NAMING_STYLE_UNKNOWN:0,STYLE2024:1,STYLE_LEGACY:2}},VisibilityFeature:{fields:{},reserved:[[1,536870911]],nested:{DefaultSymbolVisibility:{values:{DEFAULT_SYMBOL_VISIBILITY_UNKNOWN:0,EXPORT_ALL:1,EXPORT_TOP_LEVEL:2,LOCAL_ALL:3,STRICT:4}}}}}},FeatureSetDefaults:{edition:"proto2",fields:{defaults:{rule:"repeated",type:"FeatureSetEditionDefault",id:1},minimumEdition:{type:"Edition",id:4},maximumEdition:{type:"Edition",id:5}},nested:{FeatureSetEditionDefault:{fields:{edition:{type:"Edition",id:3},overridableFeatures:{type:"FeatureSet",id:4},fixedFeatures:{type:"FeatureSet",id:5}},reserved:[[1,1],[2,2],"features"]}}},SourceCodeInfo:{edition:"proto2",fields:{location:{rule:"repeated",type:"Location",id:1}},extensions:[[536e6,536e6]],nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1,options:{packed:!0}},span:{rule:"repeated",type:"int32",id:2,options:{packed:!0}},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{edition:"proto2",fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1,options:{packed:!0}},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4},semantic:{type:"Semantic",id:5}},nested:{Semantic:{values:{NONE:0,SET:1,ALIAS:2}}}}}},SymbolVisibility:{edition:"proto2",values:{VISIBILITY_UNSET:0,VISIBILITY_LOCAL:1,VISIBILITY_EXPORT:2}}}}}}}}});var Nf=C((z,Df)=>{"use strict";var ze=Qi();Df.exports=z=ze.descriptor=ze.Root.fromJSON(Xa()).lookup(".google.protobuf");var wf=ze.Namespace,Mr=ze.Root,Nt=ze.Enum,gt=ze.Type,Qt=ze.Field,KT=ze.MapField,Yi=ze.OneOf,Pr=ze.Service,Xi=ze.Method;Mr.fromDescriptor=function(e){typeof e.length=="number"&&(e=z.FileDescriptorSet.decode(e));var t=new Mr;if(e.file)for(var r,i,s=0,o;s<e.file.length;++s){i=t,(r=e.file[s]).package&&r.package.length&&(i=t.define(r.package));var a=tS(r);if(r.name&&r.name.length&&t.files.push(i.filename=r.name),r.messageType)for(o=0;o<r.messageType.length;++o)i.add(gt.fromDescriptor(r.messageType[o],a));if(r.enumType)for(o=0;o<r.enumType.length;++o)i.add(Nt.fromDescriptor(r.enumType[o],a));if(r.extension)for(o=0;o<r.extension.length;++o)i.add(Qt.fromDescriptor(r.extension[o],a));if(r.service)for(o=0;o<r.service.length;++o)i.add(Pr.fromDescriptor(r.service[o],a));var l=jn(r.options,z.FileOptions);if(l){var c=Object.keys(l);for(o=0;o<c.length;++o)i.setOption(c[o],l[c[o]])}}return t.resolveAll()};Mr.prototype.toDescriptor=function(e){var t=z.FileDescriptorSet.create();return Cf(this,t.file,e),t};function Cf(n,e,t){var r=z.FileDescriptorProto.create({name:n.filename||(n.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});nS(t,r),n instanceof Mr||(r.package=n.fullName.substring(1));for(var i=0,s;i<n.nestedArray.length;++i)(s=n._nestedArray[i])instanceof gt?r.messageType.push(s.toDescriptor(t)):s instanceof Nt?r.enumType.push(s.toDescriptor()):s instanceof Qt?r.extension.push(s.toDescriptor(t)):s instanceof Pr?r.service.push(s.toDescriptor()):s instanceof wf&&Cf(s,e,t);r.options=Kn(n.options,z.FileOptions),r.messageType.length+r.enumType.length+r.extension.length+r.service.length&&e.push(r)}var $T=0;gt.fromDescriptor=function(e,t,r){typeof e.length=="number"&&(e=z.DescriptorProto.decode(e));var i=new gt(e.name.length?e.name:"Type"+$T++,jn(e.options,z.MessageOptions)),s;if(r||(i._edition=t),e.oneofDecl)for(s=0;s<e.oneofDecl.length;++s)i.add(Yi.fromDescriptor(e.oneofDecl[s]));if(e.field)for(s=0;s<e.field.length;++s){var o=Qt.fromDescriptor(e.field[s],t,!0);i.add(o),e.field[s].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[s].oneofIndex].add(o)}if(e.extension)for(s=0;s<e.extension.length;++s)i.add(Qt.fromDescriptor(e.extension[s],t,!0));if(e.nestedType)for(s=0;s<e.nestedType.length;++s)i.add(gt.fromDescriptor(e.nestedType[s],t,!0)),e.nestedType[s].options&&e.nestedType[s].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(s=0;s<e.enumType.length;++s)i.add(Nt.fromDescriptor(e.enumType[s],t,!0));if(e.extensionRange&&e.extensionRange.length)for(i.extensions=[],s=0;s<e.extensionRange.length;++s)i.extensions.push([e.extensionRange[s].start,e.extensionRange[s].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(s=0;s<e.reservedRange.length;++s)i.reserved.push([e.reservedRange[s].start,e.reservedRange[s].end]);if(e.reservedName)for(s=0;s<e.reservedName.length;++s)i.reserved.push(e.reservedName[s])}return i};gt.prototype.toDescriptor=function(e){var t=z.DescriptorProto.create({name:this.name}),r;for(r=0;r<this.fieldsArray.length;++r){var i;if(t.field.push(i=this._fieldsArray[r].toDescriptor(e)),this._fieldsArray[r]instanceof KT){var s=Ja(this._fieldsArray[r].keyType,this._fieldsArray[r].resolvedKeyType,!1),o=Ja(this._fieldsArray[r].type,this._fieldsArray[r].resolvedType,!1),a=o===11||o===14?this._fieldsArray[r].resolvedType&&Af(this.parent,this._fieldsArray[r].resolvedType)||this._fieldsArray[r].type:void 0;t.nestedType.push(z.DescriptorProto.create({name:i.typeName,field:[z.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),z.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:a})],options:z.MessageOptions.create({mapEntry:!0})}))}}for(r=0;r<this.oneofsArray.length;++r)t.oneofDecl.push(this._oneofsArray[r].toDescriptor());for(r=0;r<this.nestedArray.length;++r)this._nestedArray[r]instanceof Qt?t.field.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof gt?t.nestedType.push(this._nestedArray[r].toDescriptor(e)):this._nestedArray[r]instanceof Nt&&t.enumType.push(this._nestedArray[r].toDescriptor());if(this.extensions)for(r=0;r<this.extensions.length;++r)t.extensionRange.push(z.DescriptorProto.ExtensionRange.create({start:this.extensions[r][0],end:this.extensions[r][1]}));if(this.reserved)for(r=0;r<this.reserved.length;++r)typeof this.reserved[r]=="string"?t.reservedName.push(this.reserved[r]):t.reservedRange.push(z.DescriptorProto.ReservedRange.create({start:this.reserved[r][0],end:this.reserved[r][1]}));return t.options=Kn(this.options,z.MessageOptions),t};var WT=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;Qt.fromDescriptor=function(e,t,r){if(typeof e.length=="number"&&(e=z.DescriptorProto.decode(e)),typeof e.number!="number")throw Error("missing field id");var i;e.typeName&&e.typeName.length?i=e.typeName:i=JT(e.type);var s;switch(e.label){case 1:s=void 0;break;case 2:s="required";break;case 3:s="repeated";break;default:throw Error("illegal label: "+e.label)}var o=e.extendee;e.extendee!==void 0&&(o=o.length?o:void 0);var a=new Qt(e.name.length?e.name:"field"+e.number,e.number,i,s,o);if(r||(a._edition=t),a.options=jn(e.options,z.FieldOptions),e.proto3_optional&&(a.options.proto3_optional=!0),e.defaultValue&&e.defaultValue.length){var l=e.defaultValue;switch(l){case"true":case"TRUE":l=!0;break;case"false":case"FALSE":l=!1;break;default:var c=WT.exec(l);c&&(l=parseInt(l));break}a.setOption("default",l)}return ZT(e.type)&&(t==="proto3"?e.options&&!e.options.packed&&a.setOption("packed",!1):(!t||t==="proto2")&&e.options&&e.options.packed&&a.setOption("packed",!0)),a};Qt.prototype.toDescriptor=function(e){var t=z.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)t.type=11,t.typeName=ze.util.ucFirst(this.name),t.label=3;else{switch(t.type=Ja(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:t.typeName=this.resolvedType?Af(this.parent,this.resolvedType):this.type;break}this.rule==="repeated"?t.label=3:this.required&&e==="proto2"?t.label=2:t.label=1}if(t.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(t.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(t.options=Kn(this.options,z.FieldOptions),this.options.default!=null&&(t.defaultValue=String(this.options.default)),this.options.proto3_optional&&(t.proto3_optional=!0)),e==="proto3"?this.packed||((t.options||(t.options=z.FieldOptions.create())).packed=!1):(!e||e==="proto2")&&this.packed&&((t.options||(t.options=z.FieldOptions.create())).packed=!0),t};var HT=0;Nt.fromDescriptor=function(e,t,r){typeof e.length=="number"&&(e=z.EnumDescriptorProto.decode(e));var i={};if(e.value)for(var s=0;s<e.value.length;++s){var o=e.value[s].name,a=e.value[s].number||0;i[o&&o.length?o:"NAME"+a]=a}var l=new Nt(e.name&&e.name.length?e.name:"Enum"+HT++,i,jn(e.options,z.EnumOptions));return r||(l._edition=t),l};Nt.prototype.toDescriptor=function(){for(var e=[],t=0,r=Object.keys(this.values);t<r.length;++t)e.push(z.EnumValueDescriptorProto.create({name:r[t],number:this.values[r[t]]}));return z.EnumDescriptorProto.create({name:this.name,value:e,options:Kn(this.options,z.EnumOptions)})};var QT=0;Yi.fromDescriptor=function(e){return typeof e.length=="number"&&(e=z.OneofDescriptorProto.decode(e)),new Yi(e.name&&e.name.length?e.name:"oneof"+QT++)};Yi.prototype.toDescriptor=function(){return z.OneofDescriptorProto.create({name:this.name})};var YT=0;Pr.fromDescriptor=function(e,t,r){typeof e.length=="number"&&(e=z.ServiceDescriptorProto.decode(e));var i=new Pr(e.name&&e.name.length?e.name:"Service"+YT++,jn(e.options,z.ServiceOptions));if(r||(i._edition=t),e.method)for(var s=0;s<e.method.length;++s)i.add(Xi.fromDescriptor(e.method[s]));return i};Pr.prototype.toDescriptor=function(){for(var e=[],t=0;t<this.methodsArray.length;++t)e.push(this._methodsArray[t].toDescriptor());return z.ServiceDescriptorProto.create({name:this.name,method:e,options:Kn(this.options,z.ServiceOptions)})};var XT=0;Xi.fromDescriptor=function(e){return typeof e.length=="number"&&(e=z.MethodDescriptorProto.decode(e)),new Xi(e.name&&e.name.length?e.name:"Method"+XT++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,jn(e.options,z.MethodOptions))};Xi.prototype.toDescriptor=function(){return z.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:Kn(this.options,z.MethodOptions)})};function JT(n){switch(n){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+n)}function ZT(n){switch(n){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function Ja(n,e,t){switch(n){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(e instanceof Nt)return 14;if(e instanceof gt)return t?10:11;throw Error("illegal type: "+n)}function If(n,e){for(var t={},r=0,i,s;r<e.fieldsArray.length;++r)if((s=(i=e._fieldsArray[r]).name)!=="uninterpretedOption"&&Object.prototype.hasOwnProperty.call(n,s)){var o=eS(s);i.resolvedType instanceof gt?t[o]=If(n[s],i.resolvedType):i.resolvedType instanceof Nt?t[o]=i.resolvedType.valuesById[n[s]]:t[o]=n[s]}return t}function jn(n,e){if(n)return If(e.toObject(n),e)}function Rf(n,e){for(var t={},r=Object.keys(n),i=0;i<r.length;++i){var s=r[i],o=ze.util.camelCase(s);if(Object.prototype.hasOwnProperty.call(e.fields,o)){var a=e.fields[o];a.resolvedType instanceof gt?t[o]=Rf(n[s],a.resolvedType):t[o]=n[s],a.repeated&&!Array.isArray(t[o])&&(t[o]=[t[o]])}}return t}function Kn(n,e){if(n)return e.fromObject(Rf(n,e))}function Af(n,e){var t=n.fullName.split("."),r=e.fullName.split("."),i=0,s=0,o=r.length-1;if(!(n instanceof Mr)&&e instanceof wf)for(;i<t.length&&s<o&&t[i]===r[s];){var a=e.lookup(t[i++],!0);if(a!==null&&a!==e)break;++s}else for(;i<t.length&&s<o&&t[i]===r[s];++i,++s);return r.slice(s).join(".")}function eS(n){return n.substring(0,1)+n.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}function tS(n){if(n.syntax==="editions")switch(n.edition){case z.Edition.EDITION_2023:return"2023";default:throw new Error("Unsupported edition "+n.edition)}return n.syntax==="proto3"?"proto3":"proto2"}function nS(n,e){if(n)if(n==="proto2"||n==="proto3")e.syntax=n;else switch(e.syntax="editions",n){case"2023":e.edition=z.Edition.EDITION_2023;break;default:throw new Error("Unsupported edition "+n)}}});var Of=C((H0,rS)=>{rS.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}}});var kf=C((Q0,iS)=>{iS.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var xf=C((Y0,sS)=>{sS.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var Ff=C(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.addCommonProtos=Yt.loadProtosWithOptionsSync=Yt.loadProtosWithOptions=void 0;var Mf=X("fs"),Pf=X("path"),$n=Qi();function Lf(n,e){let t=n.resolvePath;n.resolvePath=(r,i)=>{if(Pf.isAbsolute(i))return i;for(let s of e){let o=Pf.join(s,i);try{return Mf.accessSync(o,Mf.constants.R_OK),o}catch{continue}}return process.emitWarning(`${i} not found in any of the include paths ${e}`),t(r,i)}}function oS(n,e){return W(this,null,function*(){let t=new $n.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));Lf(t,e.includeDirs)}let r=yield t.load(n,e);return r.resolveAll(),r})}Yt.loadProtosWithOptions=oS;function aS(n,e){let t=new $n.Root;if(e=e||{},e.includeDirs){if(!Array.isArray(e.includeDirs))throw new Error("The includeDirs option must be an array");Lf(t,e.includeDirs)}let r=t.loadSync(n,e);return r.resolveAll(),r}Yt.loadProtosWithOptionsSync=aS;function lS(){let n=Of(),e=Xa(),t=kf(),r=xf();$n.common("api",n.nested.google.nested.protobuf.nested),$n.common("descriptor",e.nested.google.nested.protobuf.nested),$n.common("source_context",t.nested.google.nested.protobuf.nested),$n.common("type",r.nested.google.nested.protobuf.nested)}Yt.addCommonProtos=lS});var Bf=C((Lr,Za)=>{"use strict";(function(n,e){function t(r){return r.default||r}typeof define=="function"&&define.amd?define([],function(){var r={};return e(r),t(r)}):typeof Lr=="object"?(e(Lr),typeof Za=="object"&&(Za.exports=t(Lr))):function(){var r={};e(r),n.Long=t(r)}()})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Lr,function(n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(u,h,N){this.low=u|0,this.high=h|0,this.unsigned=!!N}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0});function r(u){return(u&&u.__isLong__)===!0}function i(u){var h=Math.clz32(u&-u);return u?31-h:h}t.isLong=r;var s={},o={};function a(u,h){var N,j,G;return h?(u>>>=0,(G=0<=u&&u<256)&&(j=o[u],j)?j:(N=c(u,0,!0),G&&(o[u]=N),N)):(u|=0,(G=-128<=u&&u<128)&&(j=s[u],j)?j:(N=c(u,u<0?-1:0,!1),G&&(s[u]=N),N))}t.fromInt=a;function l(u,h){if(isNaN(u))return h?b:x;if(h){if(u<0)return b;if(u>=w)return p}else{if(u<=-O)return g;if(u+1>=O)return f}return u<0?l(-u,h).neg():c(u%I|0,u/I|0,h)}t.fromNumber=l;function c(u,h,N){return new t(u,h,N)}t.fromBits=c;var m=Math.pow;function v(u,h,N){if(u.length===0)throw Error("empty string");if(typeof h=="number"?(N=h,h=!1):h=!!h,u==="NaN"||u==="Infinity"||u==="+Infinity"||u==="-Infinity")return h?b:x;if(N=N||10,N<2||36<N)throw RangeError("radix");var j;if((j=u.indexOf("-"))>0)throw Error("interior hyphen");if(j===0)return v(u.substring(1),h,N).neg();for(var G=l(m(N,8)),Z=x,ae=0;ae<u.length;ae+=8){var Ee=Math.min(8,u.length-ae),Re=parseInt(u.substring(ae,ae+Ee),N);if(Ee<8){var he=l(m(N,Ee));Z=Z.mul(he).add(l(Re))}else Z=Z.mul(G),Z=Z.add(l(Re))}return Z.unsigned=h,Z}t.fromString=v;function S(u,h){return typeof u=="number"?l(u,h):typeof u=="string"?v(u,h):c(u.low,u.high,typeof h=="boolean"?h:u.unsigned)}t.fromValue=S;var E=65536,_=1<<24,I=E*E,w=I*I,O=w/2,k=a(_),x=a(0);t.ZERO=x;var b=a(0,!0);t.UZERO=b;var q=a(1);t.ONE=q;var B=a(1,!0);t.UONE=B;var y=a(-1);t.NEG_ONE=y;var f=c(-1,2147483647,!1);t.MAX_VALUE=f;var p=c(-1,-1,!0);t.MAX_UNSIGNED_VALUE=p;var g=c(0,-2147483648,!1);t.MIN_VALUE=g;var d=t.prototype;d.toInt=function(){return this.unsigned?this.low>>>0:this.low},d.toNumber=function(){return this.unsigned?(this.high>>>0)*I+(this.low>>>0):this.high*I+(this.low>>>0)},d.toString=function(h){if(h=h||10,h<2||36<h)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(g)){var N=l(h),j=this.div(N),G=j.mul(N).sub(this);return j.toString(h)+G.toInt().toString(h)}else return"-"+this.neg().toString(h);for(var Z=l(m(h,6),this.unsigned),ae=this,Ee="";;){var Re=ae.div(Z),he=ae.sub(Re.mul(Z)).toInt()>>>0,Q=he.toString(h);if(ae=Re,ae.isZero())return Q+Ee;for(;Q.length<6;)Q="0"+Q;Ee=""+Q+Ee}},d.getHighBits=function(){return this.high},d.getHighBitsUnsigned=function(){return this.high>>>0},d.getLowBits=function(){return this.low},d.getLowBitsUnsigned=function(){return this.low>>>0},d.getNumBitsAbs=function(){if(this.isNegative())return this.eq(g)?64:this.neg().getNumBitsAbs();for(var h=this.high!=0?this.high:this.low,N=31;N>0&&!(h&1<<N);N--);return this.high!=0?N+33:N+1},d.isSafeInteger=function(){var h=this.high>>21;return h?this.unsigned?!1:h===-1&&!(this.low===0&&this.high===-2097152):!0},d.isZero=function(){return this.high===0&&this.low===0},d.eqz=d.isZero,d.isNegative=function(){return!this.unsigned&&this.high<0},d.isPositive=function(){return this.unsigned||this.high>=0},d.isOdd=function(){return(this.low&1)===1},d.isEven=function(){return(this.low&1)===0},d.equals=function(h){return r(h)||(h=S(h)),this.unsigned!==h.unsigned&&this.high>>>31===1&&h.high>>>31===1?!1:this.high===h.high&&this.low===h.low},d.eq=d.equals,d.notEquals=function(h){return!this.eq(h)},d.neq=d.notEquals,d.ne=d.notEquals,d.lessThan=function(h){return this.comp(h)<0},d.lt=d.lessThan,d.lessThanOrEqual=function(h){return this.comp(h)<=0},d.lte=d.lessThanOrEqual,d.le=d.lessThanOrEqual,d.greaterThan=function(h){return this.comp(h)>0},d.gt=d.greaterThan,d.greaterThanOrEqual=function(h){return this.comp(h)>=0},d.gte=d.greaterThanOrEqual,d.ge=d.greaterThanOrEqual,d.compare=function(h){if(r(h)||(h=S(h)),this.eq(h))return 0;var N=this.isNegative(),j=h.isNegative();return N&&!j?-1:!N&&j?1:this.unsigned?h.high>>>0>this.high>>>0||h.high===this.high&&h.low>>>0>this.low>>>0?-1:1:this.sub(h).isNegative()?-1:1},d.comp=d.compare,d.negate=function(){return!this.unsigned&&this.eq(g)?g:this.not().add(q)},d.neg=d.negate,d.add=function(h){r(h)||(h=S(h));var N=this.high>>>16,j=this.high&65535,G=this.low>>>16,Z=this.low&65535,ae=h.high>>>16,Ee=h.high&65535,Re=h.low>>>16,he=h.low&65535,Q=0,Ae=0,se=0,De=0;return De+=Z+he,se+=De>>>16,De&=65535,se+=G+Re,Ae+=se>>>16,se&=65535,Ae+=j+Ee,Q+=Ae>>>16,Ae&=65535,Q+=N+ae,Q&=65535,c(se<<16|De,Q<<16|Ae,this.unsigned)},d.subtract=function(h){return r(h)||(h=S(h)),this.add(h.neg())},d.sub=d.subtract,d.multiply=function(h){if(this.isZero())return this;if(r(h)||(h=S(h)),e){var N=e.mul(this.low,this.high,h.low,h.high);return c(N,e.get_high(),this.unsigned)}if(h.isZero())return this.unsigned?b:x;if(this.eq(g))return h.isOdd()?g:x;if(h.eq(g))return this.isOdd()?g:x;if(this.isNegative())return h.isNegative()?this.neg().mul(h.neg()):this.neg().mul(h).neg();if(h.isNegative())return this.mul(h.neg()).neg();if(this.lt(k)&&h.lt(k))return l(this.toNumber()*h.toNumber(),this.unsigned);var j=this.high>>>16,G=this.high&65535,Z=this.low>>>16,ae=this.low&65535,Ee=h.high>>>16,Re=h.high&65535,he=h.low>>>16,Q=h.low&65535,Ae=0,se=0,De=0,wt=0;return wt+=ae*Q,De+=wt>>>16,wt&=65535,De+=Z*Q,se+=De>>>16,De&=65535,De+=ae*he,se+=De>>>16,De&=65535,se+=G*Q,Ae+=se>>>16,se&=65535,se+=Z*he,Ae+=se>>>16,se&=65535,se+=ae*Re,Ae+=se>>>16,se&=65535,Ae+=j*Q+G*he+Z*Re+ae*Ee,Ae&=65535,c(De<<16|wt,Ae<<16|se,this.unsigned)},d.mul=d.multiply,d.divide=function(h){if(r(h)||(h=S(h)),h.isZero())throw Error("division by zero");if(e){if(!this.unsigned&&this.high===-2147483648&&h.low===-1&&h.high===-1)return this;var N=(this.unsigned?e.div_u:e.div_s)(this.low,this.high,h.low,h.high);return c(N,e.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?b:x;var j,G,Z;if(this.unsigned){if(h.unsigned||(h=h.toUnsigned()),h.gt(this))return b;if(h.gt(this.shru(1)))return B;Z=b}else{if(this.eq(g)){if(h.eq(q)||h.eq(y))return g;if(h.eq(g))return q;var ae=this.shr(1);return j=ae.div(h).shl(1),j.eq(x)?h.isNegative()?q:y:(G=this.sub(h.mul(j)),Z=j.add(G.div(h)),Z)}else if(h.eq(g))return this.unsigned?b:x;if(this.isNegative())return h.isNegative()?this.neg().div(h.neg()):this.neg().div(h).neg();if(h.isNegative())return this.div(h.neg()).neg();Z=x}for(G=this;G.gte(h);){j=Math.max(1,Math.floor(G.toNumber()/h.toNumber()));for(var Ee=Math.ceil(Math.log(j)/Math.LN2),Re=Ee<=48?1:m(2,Ee-48),he=l(j),Q=he.mul(h);Q.isNegative()||Q.gt(G);)j-=Re,he=l(j,this.unsigned),Q=he.mul(h);he.isZero()&&(he=q),Z=Z.add(he),G=G.sub(Q)}return Z},d.div=d.divide,d.modulo=function(h){if(r(h)||(h=S(h)),e){var N=(this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,h.low,h.high);return c(N,e.get_high(),this.unsigned)}return this.sub(this.div(h).mul(h))},d.mod=d.modulo,d.rem=d.modulo,d.not=function(){return c(~this.low,~this.high,this.unsigned)},d.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},d.clz=d.countLeadingZeros,d.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},d.ctz=d.countTrailingZeros,d.and=function(h){return r(h)||(h=S(h)),c(this.low&h.low,this.high&h.high,this.unsigned)},d.or=function(h){return r(h)||(h=S(h)),c(this.low|h.low,this.high|h.high,this.unsigned)},d.xor=function(h){return r(h)||(h=S(h)),c(this.low^h.low,this.high^h.high,this.unsigned)},d.shiftLeft=function(h){return r(h)&&(h=h.toInt()),(h&=63)===0?this:h<32?c(this.low<<h,this.high<<h|this.low>>>32-h,this.unsigned):c(0,this.low<<h-32,this.unsigned)},d.shl=d.shiftLeft,d.shiftRight=function(h){return r(h)&&(h=h.toInt()),(h&=63)===0?this:h<32?c(this.low>>>h|this.high<<32-h,this.high>>h,this.unsigned):c(this.high>>h-32,this.high>=0?0:-1,this.unsigned)},d.shr=d.shiftRight,d.shiftRightUnsigned=function(h){return r(h)&&(h=h.toInt()),(h&=63)===0?this:h<32?c(this.low>>>h|this.high<<32-h,this.high>>>h,this.unsigned):h===32?c(this.high,0,this.unsigned):c(this.high>>>h-32,0,this.unsigned)},d.shru=d.shiftRightUnsigned,d.shr_u=d.shiftRightUnsigned,d.rotateLeft=function(h){var N;return r(h)&&(h=h.toInt()),(h&=63)===0?this:h===32?c(this.high,this.low,this.unsigned):h<32?(N=32-h,c(this.low<<h|this.high>>>N,this.high<<h|this.low>>>N,this.unsigned)):(h-=32,N=32-h,c(this.high<<h|this.low>>>N,this.low<<h|this.high>>>N,this.unsigned))},d.rotl=d.rotateLeft,d.rotateRight=function(h){var N;return r(h)&&(h=h.toInt()),(h&=63)===0?this:h===32?c(this.high,this.low,this.unsigned):h<32?(N=32-h,c(this.high<<N|this.low>>>h,this.low<<N|this.high>>>h,this.unsigned)):(h-=32,N=32-h,c(this.low<<N|this.high>>>h,this.high<<N|this.low>>>h,this.unsigned))},d.rotr=d.rotateRight,d.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},d.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},d.toBytes=function(h){return h?this.toBytesLE():this.toBytesBE()},d.toBytesLE=function(){var h=this.high,N=this.low;return[N&255,N>>>8&255,N>>>16&255,N>>>24,h&255,h>>>8&255,h>>>16&255,h>>>24]},d.toBytesBE=function(){var h=this.high,N=this.low;return[h>>>24,h>>>16&255,h>>>8&255,h&255,N>>>24,N>>>16&255,N>>>8&255,N&255]},t.fromBytes=function(h,N,j){return j?t.fromBytesLE(h,N):t.fromBytesBE(h,N)},t.fromBytesLE=function(h,N){return new t(h[0]|h[1]<<8|h[2]<<16|h[3]<<24,h[4]|h[5]<<8|h[6]<<16|h[7]<<24,N)},t.fromBytesBE=function(h,N){return new t(h[4]<<24|h[5]<<16|h[6]<<8|h[7],h[0]<<24|h[1]<<16|h[2]<<8|h[3],N)},typeof BigInt=="function"&&(t.fromBigInt=function(h,N){var j=Number(BigInt.asIntN(32,h)),G=Number(BigInt.asIntN(32,h>>BigInt(32)));return c(j,G,N)},t.fromValue=function(h,N){return typeof h=="bigint"?t.fromBigInt(h,N):S(h,N)},d.toBigInt=function(){var h=BigInt(this.low>>>0),N=BigInt(this.unsigned?this.high>>>0:this.high);return N<<BigInt(32)|h});var T=n.default=t})});var rl=C(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.loadFileDescriptorSetFromObject=de.loadFileDescriptorSetFromBuffer=de.fromJSON=de.loadSync=de.load=de.IdempotencyLevel=de.isAnyExtension=de.Long=void 0;var cS=Dd(),yt=Qi(),tl=Nf(),nl=Ff(),uS=Bf();de.Long=uS;function dS(n){return"@type"in n&&typeof n["@type"]=="string"}de.isAnyExtension=dS;var Vf;(function(n){n.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",n.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",n.IDEMPOTENT="IDEMPOTENT"})(Vf=de.IdempotencyLevel||(de.IdempotencyLevel={}));var zf={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function hS(n,e){return n===""?e:n+"."+e}function fS(n){return n instanceof yt.Service||n instanceof yt.Type||n instanceof yt.Enum}function pS(n){return n instanceof yt.Namespace||n instanceof yt.Root}function Gf(n,e){let t=hS(e,n.name);return fS(n)?[[t,n]]:pS(n)&&typeof n.nested<"u"?Object.keys(n.nested).map(r=>Gf(n.nested[r],t)).reduce((r,i)=>r.concat(i),[]):[]}function qf(n,e){return function(r){return n.toObject(n.decode(r),e)}}function Uf(n){return function(t){if(Array.isArray(t))throw new Error(`Failed to serialize message: expected object with ${n.name} structure, got array instead`);let r=n.fromObject(t);return n.encode(r).finish()}}function mS(n){return(n||[]).reduce((e,t)=>{for(let[r,i]of Object.entries(t))switch(r){case"uninterpreted_option":e.uninterpreted_option.push(t.uninterpreted_option);break;default:e[r]=i}return e},{deprecated:!1,idempotency_level:Vf.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function gS(n,e,t,r){let i=n.resolvedRequestType,s=n.resolvedResponseType;return{path:"/"+e+"/"+n.name,requestStream:!!n.requestStream,responseStream:!!n.responseStream,requestSerialize:Uf(i),requestDeserialize:qf(i,t),responseSerialize:Uf(s),responseDeserialize:qf(s,t),originalName:cS(n.name),requestType:el(i,r),responseType:el(s,r),options:mS(n.parsedOptions)}}function yS(n,e,t,r){let i={};for(let s of n.methodsArray)i[s.name]=gS(s,e,t,r);return i}function el(n,e){let t=n.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:t.$type.toObject(t,zf),fileDescriptorProtos:e}}function vS(n,e){let t=n.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:t.$type.toObject(t,zf),fileDescriptorProtos:e}}function TS(n,e,t,r){if(n instanceof yt.Service)return yS(n,e,t,r);if(n instanceof yt.Type)return el(n,r);if(n instanceof yt.Enum)return vS(n,r);throw new Error("Type mismatch in reflection object handling")}function Ji(n,e){let t={};n.resolveAll();let i=n.toDescriptor("proto3").file.map(s=>Buffer.from(tl.FileDescriptorProto.encode(s).finish()));for(let[s,o]of Gf(n,""))t[s]=TS(o,s,e,i);return t}function jf(n,e){e=e||{};let t=yt.Root.fromDescriptor(n);return t.resolveAll(),Ji(t,e)}function SS(n,e){return(0,nl.loadProtosWithOptions)(n,e).then(t=>Ji(t,e))}de.load=SS;function ES(n,e){let t=(0,nl.loadProtosWithOptionsSync)(n,e);return Ji(t,e)}de.loadSync=ES;function _S(n,e){e=e||{};let t=yt.Root.fromJSON(n);return t.resolveAll(),Ji(t,e)}de.fromJSON=_S;function bS(n,e){let t=tl.FileDescriptorSet.decode(n);return jf(t,e)}de.loadFileDescriptorSetFromBuffer=bS;function wS(n,e){let t=tl.FileDescriptorSet.fromObject(n);return jf(t,e)}de.loadFileDescriptorSetFromObject=wS;(0,nl.addCommonProtos)()});var yn=C(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.setup=ie.getChannelzServiceDefinition=ie.getChannelzHandlers=ie.unregisterChannelzRef=ie.registerChannelzSocket=ie.registerChannelzServer=ie.registerChannelzSubchannel=ie.registerChannelzChannel=ie.ChannelzCallTracker=ie.ChannelzChildrenTracker=ie.ChannelzTrace=void 0;var Kf=X("net"),Fr=je(),qr=Y(),CS=lt(),IS=Ti(),RS=Zo();function il(n){return{channel_id:n.id,name:n.name}}function ll(n){return{subchannel_id:n.id,name:n.name}}function AS(n){return{server_id:n.id}}function es(n){return{socket_id:n.id,name:n.name}}var $f=32,sl=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let i=new Date;this.events.push({description:t,severity:e,timestamp:i,childChannel:r?.kind==="channel"?r:void 0,childSubchannel:r?.kind==="subchannel"?r:void 0}),this.events.length>=$f*2&&(this.events=this.events.slice($f)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:Ot(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:Ot(e.timestamp),channel_ref:e.childChannel?il(e.childChannel):null,subchannel_ref:e.childSubchannel?ll(e.childSubchannel):null}))}}};ie.ChannelzTrace=sl;var ol=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,i;switch(e.kind){case"channel":{let s=(t=this.channelChildren.get(e.id))!==null&&t!==void 0?t:{ref:e,count:0};s.count+=1,this.channelChildren.set(e.id,s);break}case"subchannel":{let s=(r=this.subchannelChildren.get(e.id))!==null&&r!==void 0?r:{ref:e,count:0};s.count+=1,this.subchannelChildren.set(e.id,s);break}case"socket":{let s=(i=this.socketChildren.get(e.id))!==null&&i!==void 0?i:{ref:e,count:0};s.count+=1,this.socketChildren.set(e.id,s);break}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);t!==void 0&&(t.count-=1,t.count===0?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t));break}}}getChildLists(){let e=[];for(let{ref:i}of this.channelChildren.values())e.push(i);let t=[];for(let{ref:i}of this.subchannelChildren.values())t.push(i);let r=[];for(let{ref:i}of this.socketChildren.values())r.push(i);return{channels:e,subchannels:t,sockets:r}}};ie.ChannelzChildrenTracker=ol;var al=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};ie.ChannelzCallTracker=al;var DS=1;function ts(){return DS++}var Br=[],cl=[],Xt=[],ul=[];function NS(n,e,t){let r=ts(),i={id:r,name:n,kind:"channel"};return t&&(Br[r]={ref:i,getInfo:e}),i}ie.registerChannelzChannel=NS;function OS(n,e,t){let r=ts(),i={id:r,name:n,kind:"subchannel"};return t&&(cl[r]={ref:i,getInfo:e}),i}ie.registerChannelzSubchannel=OS;function kS(n,e){let t=ts(),r={id:t,kind:"server"};return e&&(Xt[t]={ref:r,getInfo:n}),r}ie.registerChannelzServer=kS;function xS(n,e,t){let r=ts(),i={id:r,name:n,kind:"socket"};return t&&(ul[r]={ref:i,getInfo:e}),i}ie.registerChannelzSocket=xS;function MS(n){switch(n.kind){case"channel":delete Br[n.id];return;case"subchannel":delete cl[n.id];return;case"server":delete Xt[n.id];return;case"socket":delete ul[n.id];return}}ie.unregisterChannelzRef=MS;function PS(n){let e=Number.parseInt(n,16);return[e/256|0,e%256]}function Wf(n){if(n==="")return[];let e=n.split(":").map(r=>PS(r));return[].concat(...e)}function LS(n){if((0,Kf.isIPv4)(n))return Buffer.from(Uint8Array.from(n.split(".").map(e=>Number.parseInt(e))));if((0,Kf.isIPv6)(n)){let e,t,r=n.indexOf("::");r===-1?(e=n,t=""):(e=n.substring(0,r),t=n.substring(r+2));let i=Buffer.from(Wf(e)),s=Buffer.from(Wf(t)),o=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,o,s])}else return null}function Qf(n){switch(n){case Fr.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case Fr.ConnectivityState.IDLE:return{state:"IDLE"};case Fr.ConnectivityState.READY:return{state:"READY"};case Fr.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case Fr.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function Ot(n){if(!n)return null;let e=n.getTime();return{seconds:e/1e3|0,nanos:e%1e3*1e6}}function Yf(n){let e=n.getInfo();return{ref:il(n.ref),data:{target:e.target,state:Qf(e.state),calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:Ot(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},channel_ref:e.children.channels.map(t=>il(t)),subchannel_ref:e.children.subchannels.map(t=>ll(t))}}function FS(n,e){let t=Number.parseInt(n.request.channel_id),r=Br[t];if(r===void 0){e({code:qr.Status.NOT_FOUND,details:"No channel data found for id "+t});return}e(null,{channel:Yf(r)})}function BS(n,e){let t=Number.parseInt(n.request.max_results),r=[],i=Number.parseInt(n.request.start_channel_id);for(;i<Br.length;i++){let s=Br[i];if(s!==void 0&&(r.push(Yf(s)),r.length>=t))break}e(null,{channel:r,end:i>=Xt.length})}function Xf(n){let e=n.getInfo();return{ref:AS(n.ref),data:{calls_started:e.callTracker.callsStarted,calls_succeeded:e.callTracker.callsSucceeded,calls_failed:e.callTracker.callsFailed,last_call_started_timestamp:Ot(e.callTracker.lastCallStartedTimestamp),trace:e.trace.getTraceMessage()},listen_socket:e.listenerChildren.sockets.map(t=>es(t))}}function qS(n,e){let t=Number.parseInt(n.request.server_id),r=Xt[t];if(r===void 0){e({code:qr.Status.NOT_FOUND,details:"No server data found for id "+t});return}e(null,{server:Xf(r)})}function US(n,e){let t=Number.parseInt(n.request.max_results),r=[],i=Number.parseInt(n.request.start_server_id);for(;i<Xt.length;i++){let s=Xt[i];if(s!==void 0&&(r.push(Xf(s)),r.length>=t))break}e(null,{server:r,end:i>=Xt.length})}function VS(n,e){let t=Number.parseInt(n.request.subchannel_id),r=cl[t];if(r===void 0){e({code:qr.Status.NOT_FOUND,details:"No subchannel data found for id "+t});return}let i=r.getInfo(),s={ref:ll(r.ref),data:{target:i.target,state:Qf(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:Ot(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(o=>es(o))};e(null,{subchannel:s})}function Hf(n){var e;return(0,CS.isTcpSubchannelAddress)(n)?{address:"tcpip_address",tcpip_address:{ip_address:(e=LS(n.host))!==null&&e!==void 0?e:void 0,port:n.port}}:{address:"uds_address",uds_address:{filename:n.path}}}function zS(n,e){var t,r,i,s,o;let a=Number.parseInt(n.request.socket_id),l=ul[a];if(l===void 0){e({code:qr.Status.NOT_FOUND,details:"No socket data found for id "+a});return}let c=l.getInfo(),m=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(t=c.security.cipherSuiteStandardName)!==null&&t!==void 0?t:void 0,other_name:(r=c.security.cipherSuiteOtherName)!==null&&r!==void 0?r:void 0,local_certificate:(i=c.security.localCertificate)!==null&&i!==void 0?i:void 0,remote_certificate:(s=c.security.remoteCertificate)!==null&&s!==void 0?s:void 0}}:null,v={ref:es(l.ref),local:c.localAddress?Hf(c.localAddress):null,remote:c.remoteAddress?Hf(c.remoteAddress):null,remote_name:(o=c.remoteName)!==null&&o!==void 0?o:void 0,security:m,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:Ot(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:Ot(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:Ot(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:Ot(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}};e(null,{socket:v})}function GS(n,e){let t=Number.parseInt(n.request.server_id),r=Xt[t];if(r===void 0){e({code:qr.Status.NOT_FOUND,details:"No server data found for id "+t});return}let i=Number.parseInt(n.request.start_socket_id),s=Number.parseInt(n.request.max_results),a=r.getInfo().sessionChildren.sockets.sort((m,v)=>m.id-v.id),l=[],c=0;for(;c<a.length&&!(a[c].id>=i&&(l.push(es(a[c])),l.length>=s));c++);e(null,{socket_ref:l,end:c>=a.length})}function Jf(){return{GetChannel:FS,GetTopChannels:BS,GetServer:qS,GetServers:US,GetSubchannel:VS,GetSocket:zS,GetServerSockets:GS}}ie.getChannelzHandlers=Jf;var Zi=null;function Zf(){if(Zi)return Zi;let n=rl().loadSync,e=n("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return Zi=(0,RS.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service,Zi}ie.getChannelzServiceDefinition=Zf;function jS(){(0,IS.registerAdminService)(Zf,Jf)}ie.setup=jS});var ep=C(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});rs.Subchannel=void 0;var te=je(),KS=mr(),dl=oe(),ns=Y(),$S=Be(),WS=lt(),Wn=yn(),HS="subchannel",QS=~(1<<31),hl=class{constructor(e,t,r,i,s){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=i,this.connector=s,this.connectivityState=te.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new Wn.ChannelzCallTracker,this.childrenTracker=new Wn.ChannelzChildrenTracker,this.streamTracker=new Wn.ChannelzCallTracker;let a={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new KS.BackoffTimeout(()=>{this.handleBackoffTimer()},a),this.backoffTimeout.unref(),this.subchannelAddressString=(0,WS.subchannelAddressToString)(t),this.keepaliveTime=(o=r["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new Wn.ChannelzTrace,this.channelzRef=(0,Wn.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){dl.trace(ns.LogVerbosity.DEBUG,HS,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){dl.trace(ns.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([te.ConnectivityState.TRANSIENT_FAILURE],te.ConnectivityState.CONNECTING):this.transitionToState([te.ConnectivityState.TRANSIENT_FAILURE],te.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let t=Math.min(this.keepaliveTime,QS);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(t=>{this.transitionToState([te.ConnectivityState.CONNECTING],te.ConnectivityState.READY)?(this.transport=t,this.channelzEnabled&&this.childrenTracker.refChild(t.getChannelzRef()),t.addDisconnectListener(r=>{this.transitionToState([te.ConnectivityState.READY],te.ConnectivityState.IDLE),r&&this.keepaliveTime>0&&(this.keepaliveTime*=2,dl.log(ns.LogVerbosity.ERROR,`Connection to ${(0,$S.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):t.shutdown()},t=>{this.transitionToState([te.ConnectivityState.CONNECTING],te.ConnectivityState.TRANSIENT_FAILURE,`${t}`)})}transitionToState(e,t,r){var i,s;if(e.indexOf(this.connectivityState)===-1)return!1;this.trace(te.ConnectivityState[this.connectivityState]+" -> "+te.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+te.ConnectivityState[t]);let o=this.connectivityState;switch(this.connectivityState=t,t){case te.ConnectivityState.READY:this.stopBackoff();break;case te.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case te.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(i=this.transport)===null||i===void 0||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case te.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let a of this.stateListeners)a(this,o,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,Wn.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([te.ConnectivityState.CONNECTING,te.ConnectivityState.READY],te.ConnectivityState.IDLE)}))}unrefIfOneRef(){return this.refcount===1?(this.unref(),!0):!1}createCall(e,t,r,i){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:o=>{o.code===ns.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(e,t,r,i,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([te.ConnectivityState.IDLE],te.ConnectivityState.CONNECTING)||this.connectivityState===te.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([te.ConnectivityState.TRANSIENT_FAILURE],te.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}};rs.Subchannel=hl});var gl=C(en=>{"use strict";Object.defineProperty(en,"__esModule",{value:!0});en.setup=en.DEFAULT_PORT=void 0;var tp=ot(),rp=X("dns"),ip=X("util"),YS=Io(),fl=Y(),pl=xe(),XS=oe(),JS=Y(),Jt=Be(),np=X("net"),ZS=mr(),eE="dns_resolver";function Zt(n){XS.trace(JS.LogVerbosity.DEBUG,eE,n)}en.DEFAULT_PORT=443;var tE=3e4,nE=ip.promisify(rp.resolveTxt),rE=ip.promisify(rp.lookup);function iE(...n){let e=[];for(let t=0;t<Math.max.apply(null,n.map(r=>r.length));t++)for(let r of n)t<r.length&&e.push(r[t]);return e}var ml=class{constructor(e,t,r){var i,s,o;this.target=e,this.listener=t,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,Zt("Resolver constructed for target "+(0,Jt.uriToString)(e));let a=(0,Jt.splitHostPort)(e.path);a===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,np.isIPv4)(a.host)||(0,np.isIPv6)(a.host)?(this.ipResult=[{host:a.host,port:(i=a.port)!==null&&i!==void 0?i:en.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=a.host,this.port=(s=a.port)!==null&&s!==void 0?s:en.DEFAULT_PORT),this.percentage=Math.random()*100,r["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:fl.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,Jt.uriToString)(this.target)}`,metadata:new pl.Metadata};let l={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoff=new ZS.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},l),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=r["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:tE,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(Zt("Returning IP address for target "+(0,Jt.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)Zt("Failed to parse DNS address "+(0,Jt.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:fl.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,Jt.uriToString)(this.target)}`,metadata:new pl.Metadata})}),this.stopNextResolutionTimer();else{if(this.pendingLookupPromise!==null)return;Zt("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=rE(e,{all:!0}),this.pendingLookupPromise.then(t=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let r=t.filter(o=>o.family===4),i=t.filter(o=>o.family===6);this.latestLookupResult=iE(i,r).map(o=>({host:o.address,port:+this.port}));let s="["+this.latestLookupResult.map(o=>o.host+":"+o.port).join(",")+"]";if(Zt("Resolved addresses for target "+(0,Jt.uriToString)(this.target)+": "+s),this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},t=>{this.pendingLookupPromise!==null&&(Zt("Resolution error for target "+(0,Jt.uriToString)(this.target)+": "+t.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=nE(e),this.pendingTxtPromise.then(t=>{if(this.pendingTxtPromise!==null){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,YS.extractAndSelectServiceConfig)(t,this.percentage)}catch(r){this.latestServiceConfigError={code:fl.Status.UNAVAILABLE,details:`Parsing service config failed with error ${r.message}`,metadata:new pl.Metadata}}this.latestLookupResult!==null&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},t=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)===null||t===void 0?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?Zt('resolution update delayed by "min time between resolutions" rate limit'):Zt("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}};function sE(){(0,tp.registerResolver)("dns",ml),(0,tp.registerDefaultScheme)("dns")}en.setup=sE});var yl=C(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});Yn.getProxiedConnection=Yn.mapProxyName=void 0;var Ur=oe(),Hn=Y(),oE=ot(),aE=X("http"),lE=X("tls"),cE=oe(),sp=lt(),Qn=Be(),uE=X("url"),dE=gl(),hE="proxy";function tn(n){cE.trace(Hn.LogVerbosity.DEBUG,hE,n)}function fE(){let n="",e="";if(process.env.grpc_proxy)e="grpc_proxy",n=process.env.grpc_proxy;else if(process.env.https_proxy)e="https_proxy",n=process.env.https_proxy;else if(process.env.http_proxy)e="http_proxy",n=process.env.http_proxy;else return{};let t;try{t=new uE.URL(n)}catch{return(0,Ur.log)(Hn.LogVerbosity.ERROR,`cannot parse value of "${e}" env var`),{}}if(t.protocol!=="http:")return(0,Ur.log)(Hn.LogVerbosity.ERROR,`"${t.protocol}" scheme not supported in proxy URI`),{};let r=null;t.username&&(t.password?((0,Ur.log)(Hn.LogVerbosity.INFO,"userinfo found in proxy URI"),r=`${t.username}:${t.password}`):r=t.username);let i=t.hostname,s=t.port;s===""&&(s="80");let o={address:`${i}:${s}`};return r&&(o.creds=r),tn("Proxy server "+o.address+" set by environment variable "+e),o}function pE(){let n=process.env.no_grpc_proxy,e="no_grpc_proxy";return n||(n=process.env.no_proxy,e="no_proxy"),n?(tn("No proxy server list set by environment variable "+e),n.split(",")):[]}function mE(n,e){var t;let r={target:n,extraOptions:{}};if(((t=e["grpc.enable_http_proxy"])!==null&&t!==void 0?t:1)===0||n.scheme==="unix")return r;let i=fE();if(!i.address)return r;let s=(0,Qn.splitHostPort)(n.path);if(!s)return r;let o=s.host;for(let l of pE())if(l===o)return tn("Not using proxy for target in no_proxy list: "+(0,Qn.uriToString)(n)),r;let a={"grpc.http_connect_target":(0,Qn.uriToString)(n)};return i.creds&&(a["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:a}}Yn.mapProxyName=mE;function gE(n,e,t){var r;if(!("grpc.http_connect_target"in e))return Promise.resolve({});let i=e["grpc.http_connect_target"],s=(0,Qn.parseUri)(i);if(s===null)return Promise.resolve({});let o=(0,Qn.splitHostPort)(s.path);if(o===null)return Promise.resolve({});let a=`${o.host}:${(r=o.port)!==null&&r!==void 0?r:dE.DEFAULT_PORT}`,l={method:"CONNECT",path:a},c={Host:a};(0,sp.isTcpSubchannelAddress)(n)?(l.host=n.host,l.port=n.port):l.socketPath=n.path,"grpc.http_connect_creds"in e&&(c["Proxy-Authorization"]="Basic "+Buffer.from(e["grpc.http_connect_creds"]).toString("base64")),l.headers=c;let m=(0,sp.subchannelAddressToString)(n);return tn("Using proxy "+m+" to connect to "+l.path),new Promise((v,S)=>{let E=aE.request(l);E.once("connect",(_,I,w)=>{var O;if(E.removeAllListeners(),I.removeAllListeners(),_.statusCode===200)if(tn("Successfully connected to "+l.path+" through proxy "+m),"secureContext"in t){let k=(0,oE.getDefaultAuthority)(s),x=(0,Qn.splitHostPort)(k),b=(O=x?.host)!==null&&O!==void 0?O:k,q=lE.connect(Object.assign({host:b,servername:b,socket:I},t),()=>{tn("Successfully established a TLS connection to "+l.path+" through proxy "+m),v({socket:q,realTarget:s})});q.on("error",B=>{tn("Failed to establish a TLS connection to "+l.path+" through proxy "+m+" with error "+B.message),S()})}else tn("Successfully established a plaintext connection to "+l.path+" through proxy "+m),v({socket:I,realTarget:s});else(0,Ur.log)(Hn.LogVerbosity.ERROR,"Failed to connect to "+l.path+" through proxy "+m+" with status "+_.statusCode),S()}),E.once("error",_=>{E.removeAllListeners(),(0,Ur.log)(Hn.LogVerbosity.ERROR,"Failed to connect to proxy "+m+" with error "+_.message),S()}),E.end()})}Yn.getProxiedConnection=gE});var Tl=C(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.StreamDecoder=void 0;var kt=function(n){return n[n.NO_DATA=0]="NO_DATA",n[n.READING_SIZE=1]="READING_SIZE",n[n.READING_MESSAGE=2]="READING_MESSAGE",n}(kt||{}),vl=class{constructor(e){this.maxReadMessageLength=e,this.readState=kt.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t=0,r,i=[];for(;t<e.length;)switch(this.readState){case kt.NO_DATA:this.readCompressFlag=e.slice(t,t+1),t+=1,this.readState=kt.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case kt.READING_SIZE:if(r=Math.min(e.length-t,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,t,t+r),this.readSizeRemaining-=r,t+=r,this.readSizeRemaining===0){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.maxReadMessageLength!==-1&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=kt.READING_MESSAGE;else{let s=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=kt.NO_DATA,i.push(s)}}break;case kt.READING_MESSAGE:if(r=Math.min(e.length-t,this.readMessageRemaining),this.readPartialMessage.push(e.slice(t,t+r)),this.readMessageRemaining-=r,t+=r,this.readMessageRemaining===0){let s=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(s,this.readMessageSize+5);this.readState=kt.NO_DATA,i.push(o)}break;default:throw new Error("Unexpected read state")}return i}};is.StreamDecoder=vl});var op=C(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.Http2SubchannelCall=void 0;var xt=X("http2"),yE=X("os"),J=Y(),nn=xe(),vE=Tl(),TE=oe(),SE=Y(),EE="subchannel_call";function _E(n){for(let[e,t]of Object.entries(yE.constants.errno))if(t===n)return e;return"Unknown system error "+n}var Sl=class{constructor(e,t,r,i,s){var o;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=i,this.callId=s,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=J.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let a=(o=i.getOptions()["grpc.max_receive_message_length"])!==null&&o!==void 0?o:J.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new vE.StreamDecoder(a),e.on("response",(l,c)=>{let m="";for(let v of Object.keys(l))m+="		"+v+": "+l[v]+`
`;switch(this.trace(`Received server headers:
`+m),l[":status"]){case 400:this.mappedStatusCode=J.Status.INTERNAL;break;case 401:this.mappedStatusCode=J.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=J.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=J.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=J.Status.UNAVAILABLE;break;default:this.mappedStatusCode=J.Status.UNKNOWN}if(c&xt.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(l);else{let v;try{v=nn.Metadata.fromHttp2Headers(l)}catch(S){this.endCall({code:J.Status.UNKNOWN,details:S.message,metadata:new nn.Metadata});return}this.listener.onReceiveMetadata(v)}}),e.on("trailers",l=>{this.handleTrailers(l)}),e.on("data",l=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+l.length);let c;try{c=this.decoder.write(l)}catch(m){this.cancelWithStatus(J.Status.RESOURCE_EXHAUSTED,m.message);return}for(let m of c)this.trace("parsed message of length "+m.length),this.callEventTracker.addMessageReceived(),this.tryPush(m)}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var l;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),((l=this.finalStatus)===null||l===void 0?void 0:l.code)===J.Status.OK)return;let c,m="";switch(e.rstCode){case xt.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;c=J.Status.INTERNAL,m=`Received RST_STREAM with code ${e.rstCode}`;break;case xt.constants.NGHTTP2_REFUSED_STREAM:c=J.Status.UNAVAILABLE,m="Stream refused by server";break;case xt.constants.NGHTTP2_CANCEL:c=J.Status.CANCELLED,m="Call cancelled";break;case xt.constants.NGHTTP2_ENHANCE_YOUR_CALM:c=J.Status.RESOURCE_EXHAUSTED,m="Bandwidth exhausted or memory limit exceeded";break;case xt.constants.NGHTTP2_INADEQUATE_SECURITY:c=J.Status.PERMISSION_DENIED,m="Protocol not secure enough";break;case xt.constants.NGHTTP2_INTERNAL_ERROR:c=J.Status.INTERNAL,this.internalError===null?m=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(c=J.Status.UNAVAILABLE,m=this.internalError.message):m=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:c=J.Status.INTERNAL,m=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:c,details:m,metadata:new nn.Metadata,rstCode:e.rstCode})})}),e.on("error",l=>{l.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+l.message+" code="+l.code+" errno="+_E(l.errno)+" syscall="+l.syscall),this.internalError=l),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:J.Status.UNAVAILABLE,details:"Connection dropped",metadata:new nn.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){TE.trace(SE.LogVerbosity.DEBUG,EE,"["+this.callId+"] "+e)}endCall(e){(this.finalStatus===null||this.finalStatus.code===J.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==J.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,!this.statusOutput&&(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){this.callEventTracker.onStreamEnd(!0);let t="";for(let l of Object.keys(e))t+="		"+l+": "+e[l]+`
`;this.trace(`Received server trailers:
`+t);let r;try{r=nn.Metadata.fromHttp2Headers(e)}catch{r=new nn.Metadata}let i=r.getMap(),s=this.mappedStatusCode;if(s===J.Status.UNKNOWN&&typeof i["grpc-status"]=="string"){let l=Number(i["grpc-status"]);l in J.Status&&(s=l,this.trace("received status code "+l+" from server")),r.remove("grpc-status")}let o="";if(typeof i["grpc-message"]=="string"){try{o=decodeURI(i["grpc-message"])}catch{o=i["grpc-message"]}r.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let a={code:s,details:o,metadata:r};this.endCall(a)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;((e=this.finalStatus)===null||e===void 0?void 0:e.code)===J.Status.OK?t=xt.constants.NGHTTP2_NO_ERROR:t=xt.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new nn.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==J.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r=i=>{process.nextTick(()=>{var s;let o=J.Status.UNAVAILABLE;i?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=J.Status.INTERNAL),i&&this.cancelWithStatus(o,`Write error: ${i.message}`),(s=e.callback)===null||s===void 0||s.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(i){this.endCall({code:J.Status.UNAVAILABLE,details:`Write failed with error ${i.message}`,metadata:new nn.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}};ss.Http2SubchannelCall=Sl});var El=C(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.getNextCallNumber=void 0;var bE=0;function wE(){return bE++}os.getNextCallNumber=wE});var cp=C(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.Http2SubchannelConnector=void 0;var Il=X("http2"),ap=X("tls"),_l=yn(),Vr=Y(),CE=yl(),Jn=oe(),lp=ot(),as=lt(),Xn=Be(),IE=X("net"),RE=op(),AE=El(),bl="transport",DE="transport_flowctrl",NE=ao().version,{HTTP2_HEADER_AUTHORITY:OE,HTTP2_HEADER_CONTENT_TYPE:kE,HTTP2_HEADER_METHOD:xE,HTTP2_HEADER_PATH:ME,HTTP2_HEADER_TE:PE,HTTP2_HEADER_USER_AGENT:LE}=Il.constants,FE=2e4,BE=Buffer.from("too_many_pings","ascii"),wl=class{constructor(e,t,r,i){this.session=e,this.options=r,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=FE,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new _l.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,as.subchannelAddressToString)(t),r["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,_l.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${NE}`,r["grpc.secondary_user_agent"]].filter(s=>s).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=r["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(s,o,a)=>{let l=!1;s===Il.constants.NGHTTP2_ENHANCE_YOUR_CALM&&a&&a.equals(BE)&&(l=!0),this.trace("connection closed by GOAWAY with code "+s+" and data "+a?.toString()),this.reportDisconnectToOwner(l)}),e.once("error",s=>{this.trace("connection closed with error "+s.message)}),Jn.isTracerEnabled(bl)&&(e.on("remoteSettings",s=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))}),e.on("localSettings",s=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(s))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;let i=this.session.socket,s=i.remoteAddress?(0,as.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,o=i.localAddress?(0,as.stringToSubchannelAddress)(i.localAddress,i.localPort):null,a;if(this.session.encrypted){let c=i,m=c.getCipher(),v=c.getCertificate(),S=c.getPeerCertificate();a={cipherSuiteStandardName:(e=m.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:m.standardName?null:m.name,localCertificate:v&&"raw"in v?v.raw:null,remoteCertificate:S&&"raw"in S?S.raw:null}}else a=null;return{remoteAddress:s,localAddress:o,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(t=this.session.state.localWindowSize)!==null&&t!==void 0?t:null,remoteFlowControlWindow:(r=this.session.state.remoteWindowSize)!==null&&r!==void 0?r:null}}trace(e){Jn.trace(Vr.LogVerbosity.DEBUG,bl,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){Jn.trace(Vr.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){Jn.trace(Vr.LogVerbosity.DEBUG,DE,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){Jn.trace(Vr.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),(t=(e=this.keepaliveTimeoutId).unref)===null||t===void 0||t.call(e));try{this.session.ping((r,i,s)=>{r&&(this.keepaliveTrace("Ping failed with error "+r.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch{this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):!this.keepaliveTimerId&&!this.keepaliveTimeoutId&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=(t=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)===null||t===void 0?void 0:t.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),this.activeCalls.size===0&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,i,s){let o=e.toHttp2Headers();o[OE]=t,o[LE]=this.userAgent,o[kE]="application/grpc",o[xE]="POST",o[ME]=r,o[PE]="trailers";let a;try{a=this.session.request(o)}catch(m){throw this.handleDisconnect(),m}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let l,c;return this.channelzEnabled?(this.streamTracker.addCallStarted(),l={addMessageSent:()=>{var m;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(m=s.addMessageSent)===null||m===void 0||m.call(s)},addMessageReceived:()=>{var m;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(m=s.addMessageReceived)===null||m===void 0||m.call(s)},onCallEnd:m=>{var v;(v=s.onCallEnd)===null||v===void 0||v.call(s,m),this.removeActiveCall(c)},onStreamEnd:m=>{var v;m?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(v=s.onStreamEnd)===null||v===void 0||v.call(s,m)}}):l={addMessageSent:()=>{var m;(m=s.addMessageSent)===null||m===void 0||m.call(s)},addMessageReceived:()=>{var m;(m=s.addMessageReceived)===null||m===void 0||m.call(s)},onCallEnd:m=>{var v;(v=s.onCallEnd)===null||v===void 0||v.call(s,m),this.removeActiveCall(c)},onStreamEnd:m=>{var v;(v=s.onStreamEnd)===null||v===void 0||v.call(s,m)}},c=new RE.Http2SubchannelCall(a,l,i,this,(0,AE.getNextCallNumber)()),this.addActiveCall(c),c}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,_l.unregisterChannelzRef)(this.channelzRef)}},Cl=class{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){Jn.trace(Vr.LogVerbosity.DEBUG,bl,(0,Xn.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r,i){return this.isShutdown?Promise.reject():new Promise((s,o)=>{var a,l,c;let m;i.realTarget?(m=(0,Xn.uriToString)(i.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,Xn.uriToString)(i.realTarget))):(m=null,this.trace("creating HTTP/2 session to "+(0,as.subchannelAddressToString)(e)));let v=(0,lp.getDefaultAuthority)((a=i.realTarget)!==null&&a!==void 0?a:this.channelTarget),S=t._getConnectionOptions()||{};S.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?S.maxSessionMemory=r["grpc-node.max_session_memory"]:S.maxSessionMemory=Number.MAX_SAFE_INTEGER;let E="http://";if("secureContext"in S){if(E="https://",r["grpc.ssl_target_name_override"]){let w=r["grpc.ssl_target_name_override"];S.checkServerIdentity=(O,k)=>(0,ap.checkServerIdentity)(w,k),S.servername=w}else{let w=(c=(l=(0,Xn.splitHostPort)(v))===null||l===void 0?void 0:l.host)!==null&&c!==void 0?c:"localhost";S.servername=w}i.socket&&(S.createConnection=(w,O)=>i.socket)}else S.createConnection=(w,O)=>i.socket?i.socket:IE.connect(e);S=Object.assign(Object.assign(Object.assign({},S),e),{enableTrace:r["grpc-node.tls_enable_trace"]===1});let _=Il.connect(E+v,S);this.session=_;let I="Failed to connect";_.unref(),_.once("connect",()=>{_.removeAllListeners(),s(new wl(_,e,r,m)),this.session=null}),_.once("close",()=>{this.session=null,setImmediate(()=>{o(`${I} (${new Date().toISOString()})`)})}),_.once("error",w=>{I=w.message,this.trace("connection failed with error "+I)})})}connect(e,t,r){var i,s;if(this.isShutdown)return Promise.reject();let o=t._getConnectionOptions()||{};if("secureContext"in o){if(o.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let a=r["grpc.ssl_target_name_override"];o.checkServerIdentity=(l,c)=>(0,ap.checkServerIdentity)(a,c),o.servername=a}else if("grpc.http_connect_target"in r){let a=(0,lp.getDefaultAuthority)((i=(0,Xn.parseUri)(r["grpc.http_connect_target"]))!==null&&i!==void 0?i:{path:"localhost"}),l=(0,Xn.splitHostPort)(a);o.servername=(s=l?.host)!==null&&s!==void 0?s:a}r["grpc-node.tls_enable_trace"]&&(o.enableTrace=!0)}return(0,CE.getProxiedConnection)(e,r,o).then(a=>this.createSession(e,t,r,a))}shutdown(){var e;this.isShutdown=!0,(e=this.session)===null||e===void 0||e.close(),this.session=null}};ls.Http2SubchannelConnector=Cl});var up=C(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.getSubchannelPool=Zn.SubchannelPool=void 0;var qE=Xu(),UE=ep(),VE=lt(),zE=Be(),GE=cp(),jE=1e4,zr=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let i=this.pool[t].filter(s=>!s.subchannel.unrefIfOneRef());i.length>0&&(e=!1),this.pool[t]=i}e&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},jE),(t=(e=this.cleanupTimer).unref)===null||t===void 0||t.call(e))}getOrCreateSubchannel(e,t,r,i){this.ensureCleanupTask();let s=(0,zE.uriToString)(e);if(s in this.pool){let a=this.pool[s];for(let l of a)if((0,VE.subchannelAddressEqual)(t,l.subchannelAddress)&&(0,qE.channelOptionsEqual)(r,l.channelArguments)&&i._equals(l.channelCredentials))return l.subchannel}let o=new UE.Subchannel(e,t,r,i,new GE.Http2SubchannelConnector(e));return s in this.pool||(this.pool[s]=[]),this.pool[s].push({subchannelAddress:t,channelArguments:r,channelCredentials:i,subchannel:o}),o.ref(),o}};Zn.SubchannelPool=zr;var KE=new zr;function $E(n){return n?KE:new zr}Zn.getSubchannelPool=$E});var Al=C(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.FilterStackFactory=er.FilterStack=void 0;var cs=class{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let r=0;r<this.filters.length;r++)t=this.filters[r].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let r=0;r<this.filters.length;r++)t=this.filters[r].sendMessage(t);return t}receiveMessage(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let r=this.filters.length-1;r>=0;r--)t=this.filters[r].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}};er.FilterStack=cs;var Rl=class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new cs(this.factories.map(e=>e.createFilter()))}};er.FilterStackFactory=Rl});var Dl=C(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.CompressionAlgorithms=void 0;var dp=function(n){return n[n.identity=0]="identity",n[n.deflate=1]="deflate",n[n.gzip=2]="gzip",n}(dp||(us.CompressionAlgorithms=dp={}))});var Ol=C(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.BaseFilter=void 0;var Nl=class{sendMetadata(e){return W(this,null,function*(){return e})}receiveMetadata(e){return e}sendMessage(e){return W(this,null,function*(){return e})}receiveMessage(e){return W(this,null,function*(){return e})}receiveTrailers(e){return e}};ds.BaseFilter=Nl});var pp=C(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.CompressionFilterFactory=nr.CompressionFilter=void 0;var hs=X("zlib"),fp=Dl(),fs=Y(),WE=Ol(),HE=oe(),QE=n=>typeof n=="number"&&typeof fp.CompressionAlgorithms[n]=="string",tr=class{writeMessage(e,t){return W(this,null,function*(){let r=e;t&&(r=yield this.compressMessage(r));let i=Buffer.allocUnsafe(r.length+5);return i.writeUInt8(t?1:0,0),i.writeUInt32BE(r.length,1),r.copy(i,5),i})}readMessage(e){return W(this,null,function*(){let t=e.readUInt8(0)===1,r=e.slice(5);return t&&(r=yield this.decompressMessage(r)),r})}},vn=class extends tr{compressMessage(e){return W(this,null,function*(){return e})}writeMessage(e,t){return W(this,null,function*(){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r})}decompressMessage(e){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},kl=class extends tr{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{hs.deflate(e,(i,s)=>{i?r(i):t(s)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,s=[],o=hs.createInflate();o.on("data",a=>{s.push(a),i+=a.byteLength,this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:fs.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(s))}),o.write(e),o.end()})}},xl=class extends tr{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{hs.gzip(e,(i,s)=>{i?r(i):t(s)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,s=[],o=hs.createGunzip();o.on("data",a=>{s.push(a),i+=a.byteLength,this.maxRecvMessageLength!==-1&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:fs.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(s))}),o.write(e),o.end()})}},Ml=class extends tr{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function hp(n,e){switch(n){case"identity":return new vn;case"deflate":return new kl(e);case"gzip":return new xl(e);default:return new Ml(n)}}var ps=class extends WE.BaseFilter{constructor(e,t){var r,i;super(),this.sharedFilterConfig=t,this.sendCompression=new vn,this.receiveCompression=new vn,this.currentCompressionAlgorithm="identity";let s=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=(r=e["grpc.max_receive_message_length"])!==null&&r!==void 0?r:fs.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,s!==void 0)if(QE(s)){let o=fp.CompressionAlgorithms[s],a=(i=t.serverSupportedEncodingHeader)===null||i===void 0?void 0:i.split(",");(!a||a.includes(o))&&(this.currentCompressionAlgorithm=o,this.sendCompression=hp(this.currentCompressionAlgorithm,-1))}else HE.log(fs.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${s}`)}sendMetadata(e){return W(this,null,function*(){let t=yield e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t})}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let i=t[0];typeof i=="string"&&(this.receiveCompression=hp(i,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new vn,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}sendMessage(e){return W(this,null,function*(){var t;let r=yield e,i;return this.sendCompression instanceof vn?i=!1:i=(((t=r.flags)!==null&&t!==void 0?t:0)&2)===0,{message:yield this.sendCompression.writeMessage(r.message,i),flags:r.flags}})}receiveMessage(e){return W(this,null,function*(){return this.receiveCompression.readMessage(yield e)})}};nr.CompressionFilter=ps;var Pl=class{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new ps(this.options,this.sharedFilterConfig)}};nr.CompressionFilterFactory=Pl});var ms=C(vt=>{"use strict";Object.defineProperty(vt,"__esModule",{value:!0});vt.deadlineToString=vt.getRelativeTimeout=vt.getDeadlineTimeoutString=vt.minDeadline=void 0;function YE(...n){let e=1/0;for(let t of n){let r=t instanceof Date?t.getTime():t;r<e&&(e=r)}return e}vt.minDeadline=YE;var XE=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function JE(n){let e=new Date().getTime();n instanceof Date&&(n=n.getTime());let t=Math.max(n-e,0);for(let[r,i]of XE){let s=t/i;if(s<1e8)return String(Math.ceil(s))+r}throw new Error("Deadline is too far in the future")}vt.getDeadlineTimeoutString=JE;var ZE=2147483647;function e_(n){let e=n instanceof Date?n.getTime():n,t=new Date().getTime(),r=e-t;return r<0?0:r>ZE?1/0:r}vt.getRelativeTimeout=e_;function t_(n){if(n instanceof Date)return n.toISOString();{let e=new Date(n);return Number.isNaN(e.getTime())?""+n:e.toISOString()}}vt.deadlineToString=t_});var ys=C(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.restrictControlPlaneStatusCode=void 0;var Tt=Y(),n_=[Tt.Status.OK,Tt.Status.INVALID_ARGUMENT,Tt.Status.NOT_FOUND,Tt.Status.ALREADY_EXISTS,Tt.Status.FAILED_PRECONDITION,Tt.Status.ABORTED,Tt.Status.OUT_OF_RANGE,Tt.Status.DATA_LOSS];function r_(n,e){return n_.includes(n)?{code:Tt.Status.INTERNAL,details:`Invalid status from control plane: ${n} ${Tt.Status[n]} ${e}`}:{code:n,details:e}}gs.restrictControlPlaneStatusCode=r_});var gp=C(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.LoadBalancingCall=void 0;var mp=je(),vs=Y(),i_=ms(),Ts=xe(),Gr=Vt(),s_=Be(),o_=oe(),Ll=ys(),a_=X("http2"),l_="load_balancing_call",Fl=class{constructor(e,t,r,i,s,o,a){var l,c;this.channel=e,this.callConfig=t,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let m=this.methodName.split("/"),v="";m.length>=2&&(v=m[1]);let S=(c=(l=(0,s_.splitHostPort)(this.host))===null||l===void 0?void 0:l.host)!==null&&c!==void 0?c:"localhost";this.serviceUrl=`https://${S}/${v}`}trace(e){o_.trace(vs.LogVerbosity.DEBUG,l_,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,i;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let s=Object.assign(Object.assign({},e),{progress:t});(r=this.listener)===null||r===void 0||r.onReceiveStatus(s),(i=this.onCallEnded)===null||i===void 0||i.call(this,s.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),i=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+Gr.PickResultType[r.pickResultType]+" subchannel: "+i+" status: "+((e=r.status)===null||e===void 0?void 0:e.code)+" "+((t=r.status)===null||t===void 0?void 0:t.details)),r.pickResultType){case Gr.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(a=>{var l,c,m;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let v=this.metadata.clone();if(v.merge(a),v.get("authorization").length>1&&this.outputStatus({code:vs.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new Ts.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==mp.ConnectivityState.READY){this.trace("Picked subchannel "+i+" has state "+mp.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&v.set("grpc-timeout",(0,i_.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(v,this.host,this.methodName,{onReceiveMetadata:S=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(S)},onReceiveMessage:S=>{this.trace("Received message"),this.listener.onReceiveMessage(S)},onReceiveStatus:S=>{this.trace("Received status"),S.rstCode===a_.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(S,"REFUSED"):this.outputStatus(S,"PROCESSED")}})}catch(S){this.trace("Failed to start call on picked subchannel "+i+" with error "+S.message),this.outputStatus({code:vs.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+S.message,metadata:new Ts.Metadata},"NOT_STARTED");return}(c=(l=this.callConfig).onCommitted)===null||c===void 0||c.call(l),(m=r.onCallStarted)===null||m===void 0||m.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},a=>{let{code:l,details:c}=(0,Ll.restrictControlPlaneStatusCode)(typeof a.code=="number"?a.code:vs.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${a.message}`);this.outputStatus({code:l,details:c,metadata:new Ts.Metadata},"PROCESSED")});break;case Gr.PickResultType.DROP:let{code:s,details:o}=(0,Ll.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:s,details:o,metadata:r.status.metadata},"DROP")});break;case Gr.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:a,details:l}=(0,Ll.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:a,details:l,metadata:r.status.metadata},"PROCESSED")})}break;case Gr.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new Ts.Metadata},"PROCESSED")}getPeer(){var e,t;return(t=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}};Ss.LoadBalancingCall=Fl});var vp=C(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.ResolvingCall=void 0;var rr=Y(),Es=ms(),yp=xe(),c_=oe(),u_=ys(),d_="resolving_call",Bl=class{constructor(e,t,r,i,s,o){this.channel=e,this.method=t,this.filterStackFactory=i,this.credentials=s,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&rr.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(rr.Status.CANCELLED,"Cancelled by parent call")}),r.flags&rr.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,Es.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){c_.trace(rr.LogVerbosity.DEBUG,d_,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,Es.deadlineToString)(this.deadline));let e=(0,Es.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let t=()=>{this.cancelWithStatus(rr.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(r=>r(t)),process.nextTick(()=>{var r;(r=this.listener)===null||r===void 0||r.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(i=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,i.message),this.pendingHalfClose&&r.halfClose()},i=>{this.cancelWithStatus(i.code,i.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if(e.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(e.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}let t=e.config;if(t.status!==rr.Status.OK){let{code:r,details:i}=(0,u_.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:r,details:i,metadata:new yp.Metadata});return}if(t.methodConfig.timeout){let r=new Date;r.setSeconds(r.getSeconds()+t.methodConfig.timeout.seconds),r.setMilliseconds(r.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,Es.minDeadline)(this.deadline,r),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(r=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(r,{onReceiveMetadata:i=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(i))},onReceiveMessage:i=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(i).then(s=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(s),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},s=>{this.cancelWithStatus(s.code,s.details)})},onReceiveStatus:i=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=i:this.outputStatus(i)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},r=>{this.outputStatus(r)})}reportResolverError(e){var t;!((t=this.metadata)===null||t===void 0)&&t.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),(r=this.child)===null||r===void 0||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new yp.Metadata})}getPeer(){var e,t;return(t=(e=this.child)===null||e===void 0?void 0:e.getPeer())!==null&&t!==void 0?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}};_s.ResolvingCall=Bl});var Tp=C(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.RetryingCall=rn.MessageBufferTracker=rn.RetryThrottler=void 0;var bs=Y(),h_=xe(),f_=oe(),p_="retrying_call",Ul=class{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}};rn.RetryThrottler=Ul;var Vl=class{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;let i=(r=this.allocatedPerCall.get(t))!==null&&r!==void 0?r:0;return this.limitPerCall-i<e||this.totalLimit-this.totalAllocated<e?!1:(this.allocatedPerCall.set(t,i+e),this.totalAllocated+=e,!0)}free(e,t){var r;if(this.totalAllocated<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let i=(r=this.allocatedPerCall.get(t))!==null&&r!==void 0?r:0;if(i<e)throw new Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${i}`);this.allocatedPerCall.set(t,i-e)}freeAll(e){var t;let r=(t=this.allocatedPerCall.get(e))!==null&&t!==void 0?t:0;if(this.totalAllocated<r)throw new Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}};rn.MessageBufferTracker=Vl;var ql="grpc-previous-rpc-attempts",zl=class{constructor(e,t,r,i,s,o,a,l,c){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=i,this.credentials=s,this.deadline=o,this.callNumber=a,this.bufferTracker=l,this.retryThrottler=c,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";let m=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(m.initialBackoff.substring(0,m.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){f_.trace(bs.LogVerbosity.DEBUG,p_,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;(t=this.listener)===null||t===void 0||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new h_.Metadata});for(let{call:r}of this.underlyingCalls)r.cancelWithStatus(e,t)}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return(t=this.writeBuffer[e-this.writeBufferOffset])!==null&&t!==void 0?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){let r=this.getBufferEntry(t);r.allocated&&this.bufferTracker.free(r.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if(this.state!=="COMMITTED"&&this.underlyingCalls[e].state!=="COMPLETED"){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&this.underlyingCalls[t].state!=="COMPLETED"&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(bs.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let e=-1,t=-1;for(let[r,i]of this.underlyingCalls.entries())i.state==="ACTIVE"&&i.nextMessageToSend>e&&(e=i.nextMessageToSend,t=r);t===-1?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(r=>r===t||r.toString().toLowerCase()===bs.Status[t].toLowerCase())}getNextRetryBackoffMs(){var e;let t=(e=this.callConfig)===null||e===void 0?void 0:e.methodConfig.retryPolicy;if(!t)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,i=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,i),r}maybeRetryCall(e,t){if(this.state!=="RETRY"){t(!1);return}let r=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(r.maxAttempts,5)){t(!1);return}let i;if(e===null)i=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",t(!1);return}else i=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var s,o;if(this.state!=="RETRY"){t(!1);return}(!((o=(s=this.retryThrottler)===null||s===void 0?void 0:s.canRetryCall())!==null&&o!==void 0)||o)&&(t(!0),this.attempts+=1,this.startNewAttempt())},i)}countActiveCalls(){let e=0;for(let t of this.underlyingCalls)t?.state==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,t,r){var i,s,o;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList((i=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&i!==void 0?i:[],e.code)){(s=this.retryThrottler)===null||s===void 0||s.addCallFailed();let a;if(r===null)a=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(t),this.reportStatus(e);return}else a=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(t),this.reportStatus(e))},a)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(r,a=>{a||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e));break}}getPushback(e){let t=e.get("grpc-retry-pushback-ms");if(t.length===0)return null;try{return parseInt(t[0])}catch{return-1}}handleChildStatus(e,t){var r;if(this.underlyingCalls[t].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===bs.Status.OK){(r=this.retryThrottler)===null||r===void 0||r.addCallSucceeded(),this.commitCall(t),this.reportStatus(e);return}if(this.state==="COMMITTED"){this.reportStatus(e);return}let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,i);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let i=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(i.maxAttempts,5))return;let s=(e=i.hedgingDelay)!==null&&e!==void 0?e:"0s",o=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},o*1e3),(r=(t=this.hedgingTimer).unref)===null||r===void 0||r.call(t)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,i=this.initialMetadata.clone();r>0&&i.set(ql,`${r}`);let s=!1;e.start(i,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),s=!0,r>0&&o.set(ql,`${r}`),this.underlyingCalls[t].state==="ACTIVE"&&this.listener.onReceiveMetadata(o)},onReceiveMessage:o=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),this.underlyingCalls[t].state==="ACTIVE"&&this.listener.onReceiveMessage(o)},onReceiveStatus:o=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!s&&r>0&&o.metadata.set(ql,`${r}`),this.handleChildStatus(o,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;let i=this.underlyingCalls[e],s=i.nextMessageToSend;(r=(t=this.getBufferEntry(s)).callback)===null||r===void 0||r.call(t),this.clearSentMessages(),i.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let t=this.underlyingCalls[e];if(t.state!=="COMPLETED"&&this.getBufferEntry(t.nextMessageToSend)){let r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:i=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);let i={message:t,flags:e.flags},s=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:i,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(r=e.callback)===null||r===void 0||r.call(e);for(let[a,l]of this.underlyingCalls.entries())l.state==="ACTIVE"&&l.nextMessageToSend===s&&l.call.sendMessageWithContext({callback:c=>{this.handleChildWriteCompleted(a)}},t)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let a=this.underlyingCalls[this.committedCallIndex];o.callback=e.callback,a.state==="ACTIVE"&&a.nextMessageToSend===s&&a.call.sendMessageWithContext({callback:l=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let t of this.underlyingCalls)t?.state==="ACTIVE"&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}};rn.RetryingCall=zl});var Cs=C(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.BaseSubchannelWrapper=void 0;var Gl=class{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}};ws.BaseSubchannelWrapper=Gl});var _p=C(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.InternalChannel=void 0;var m_=ui(),g_=Yu(),y_=up(),Sp=Vt(),jr=Y(),v_=Al(),T_=pp(),Ep=ot(),jl=oe(),S_=yl(),Is=Be(),St=je(),Kr=yn(),E_=gp(),__=ms(),b_=vp(),Kl=El(),w_=ys(),$l=Tp(),C_=Cs(),I_=2147483647,R_=1e3,A_=30*60*1e3,Rs=new Map,D_=1<<24,N_=1<<20,Wl=class extends C_.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(r,i,s,o)=>{t.throttleKeepalive(o)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}},Hl=class{constructor(e,t,r){var i,s,o,a,l,c,m,v;if(this.credentials=t,this.options=r,this.connectivityState=St.ConnectivityState.IDLE,this.currentPicker=new Sp.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new Kr.ChannelzCallTracker,this.childrenTracker=new Kr.ChannelzChildrenTracker,typeof e!="string")throw new TypeError("Channel target must be a string");if(!(t instanceof m_.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.originalTarget=e;let S=(0,Is.parseUri)(e);if(S===null)throw new Error(`Could not parse target name "${e}"`);let E=(0,Ep.mapUriDefaultScheme)(S);if(E===null)throw new Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},I_),(s=(i=this.callRefTimer).unref)===null||s===void 0||s.call(i),this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new Kr.ChannelzTrace,this.channelzRef=(0,Kr.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,Ep.getDefaultAuthority)(E);let _=(0,S_.mapProxyName)(E,r);this.target=_.target,this.options=Object.assign({},this.options,_.extraOptions),this.subchannelPool=(0,y_.getSubchannelPool)(((o=r["grpc.use_local_subchannel_pool"])!==null&&o!==void 0?o:0)===0),this.retryBufferTracker=new $l.MessageBufferTracker((a=r["grpc.retry_buffer_size"])!==null&&a!==void 0?a:D_,(l=r["grpc.per_rpc_retry_buffer_size"])!==null&&l!==void 0?l:N_),this.keepaliveTime=(c=r["grpc.keepalive_time_ms"])!==null&&c!==void 0?c:-1,this.idleTimeoutMs=Math.max((m=r["grpc.client_idle_timeout_ms"])!==null&&m!==void 0?m:A_,R_);let I={createSubchannel:(O,k)=>{let x=this.subchannelPool.getOrCreateSubchannel(this.target,O,Object.assign({},this.options,k),this.credentials);x.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",x.getChannelzRef());let b=new Wl(x,this);return this.wrappedSubchannels.add(b),b},updateState:(O,k)=>{this.currentPicker=k;let x=this.pickQueue.slice();this.pickQueue=[],x.length>0&&this.callRefTimerUnref();for(let b of x)b.doPick();this.updateState(O)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:O=>{this.channelzEnabled&&this.childrenTracker.refChild(O)},removeChannelzChild:O=>{this.channelzEnabled&&this.childrenTracker.unrefChild(O)}};this.resolvingLoadBalancer=new g_.ResolvingLoadBalancer(this.target,I,r,(O,k)=>{O.retryThrottling?Rs.set(this.getTarget(),new $l.RetryThrottler(O.retryThrottling.maxTokens,O.retryThrottling.tokenRatio,Rs.get(this.getTarget()))):Rs.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=k,this.currentResolutionError=null,process.nextTick(()=>{let x=this.configSelectionQueue;this.configSelectionQueue=[],x.length>0&&this.callRefTimerUnref();for(let b of x)b.getConfig()})},O=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+O.code+' and details "'+O.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0,w_.restrictControlPlaneStatusCode)(O.code,O.details)),{metadata:O.metadata}));let k=this.configSelectionQueue;this.configSelectionQueue=[],k.length>0&&this.callRefTimerUnref();for(let x of k)x.reportResolverError(O)}),this.filterStackFactory=new v_.FilterStackFactory([new T_.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let w=new Error;(0,jl.trace)(jr.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((v=w.stack)===null||v===void 0?void 0:v.substring(w.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,jl.trace)(t??jr.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,Is.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,i;!((t=(e=this.callRefTimer).hasRef)===null||t===void 0)&&t.call(e)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(i=(r=this.callRefTimer).ref)===null||i===void 0||i.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(t=(e=this.callRefTimer).unref)===null||t===void 0||t.call(e))}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(r=>r===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){(0,jl.trace)(jr.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,Is.uriToString)(this.target)+" "+St.ConnectivityState[this.connectivityState]+" -> "+St.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+St.ConnectivityState[e]),this.connectivityState=e;let t=this.connectivityStateWatchers.slice();for(let r of t)e!==r.currentState&&(r.timer&&clearTimeout(r.timer),this.removeConnectivityStateWatcher(r),r.callback());e!==St.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime){this.keepaliveTime=e;for(let t of this.wrappedSubchannels)t.throttleKeepalive(e)}}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(St.ConnectivityState.IDLE),this.currentPicker=new Sp.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let s=new Date().valueOf()-this.lastActivityTimestamp.valueOf();s>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-s)},e),(r=(t=this.idleTimer).unref)===null||r===void 0||r.call(t)}maybeStartIdleTimer(){this.connectivityState!==St.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===jr.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,i,s){let o=(0,Kl.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+t+'"'),new E_.LoadBalancingCall(this,e,t,r,i,s,o)}createRetryingCall(e,t,r,i,s){let o=(0,Kl.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+t+'"'),new $l.RetryingCall(this,e,t,r,i,s,o,this.retryBufferTracker,Rs.get(this.getTarget()))}createInnerCall(e,t,r,i,s){return this.options["grpc.enable_retries"]===0?this.createLoadBalancingCall(e,t,r,i,s):this.createRetryingCall(e,t,r,i,s)}createResolvingCall(e,t,r,i,s){let o=(0,Kl.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+e+'", deadline='+(0,__.deadlineToString)(t));let a={deadline:t,flags:s??jr.Propagate.DEFAULTS,host:r??this.defaultAuthority,parentCall:i},l=new b_.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),o);return this.onCallStart(),l.addStatusWatcher(c=>{this.onCallEnd(c)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState(St.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,Kr.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,Is.uriToString)(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===St.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let i=null;if(t!==1/0){let o=t instanceof Date?t:new Date(t),a=new Date;if(t===-1/0||o<=a){process.nextTick(r,new Error("Deadline passed without connectivity state change"));return}i=setTimeout(()=>{this.removeConnectivityStateWatcher(s),r(new Error("Deadline passed without connectivity state change"))},o.getTime()-a.getTime())}let s={currentState:e,callback:r,timer:i};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof t=="number"||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===St.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(e,t,r,i,s)}};As.InternalChannel=Hl});var Xo=C(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.ChannelImplementation=void 0;var O_=ui(),k_=_p(),Ql=class{constructor(e,t,r){if(typeof e!="string")throw new TypeError("Channel target must be a string");if(!(t instanceof O_.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(r&&typeof r!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new k_.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,i,s){if(typeof e!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof t=="number"||t instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,i,s)}};Ds.ChannelImplementation=Ql});var Op=C(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.Http2ServerCallStream=Xe.ServerDuplexStreamImpl=Xe.ServerWritableStreamImpl=Xe.ServerReadableStreamImpl=Xe.ServerUnaryCallImpl=void 0;var Ap=X("events"),ir=X("http2"),Jl=X("stream"),bp=X("zlib"),ne=Y(),Zl=xe(),x_=Tl(),Dp=oe(),Wr=ii(),Np="server_call";function $r(n){Dp.trace(ne.LogVerbosity.DEBUG,Np,n)}var M_="grpc-accept-encoding",P_="grpc-encoding",wp="grpc-message",Cp="grpc-status",Ip="grpc-timeout",L_=/(\d{1,8})\s*([HMSmun])/,F_={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},B_={[M_]:"identity,deflate,gzip",[P_]:"identity"},Rp={[ir.constants.HTTP2_HEADER_STATUS]:ir.constants.HTTP_STATUS_OK,[ir.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},q_={waitForTrailers:!0},Yl=class extends Ap.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};Xe.ServerUnaryCallImpl=Yl;var Ns=class extends Jl.Readable{constructor(e,t,r,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};Xe.ServerReadableStreamImpl=Ns;var Hr=class extends Jl.Writable{constructor(e,t,r,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=i,this.cancelled=!1,this.trailingMetadata=new Zl.Metadata,this.call.setupSurfaceCall(this),this.on("error",s=>{this.call.sendError(s),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let i=this.call.serializeMessage(e);if(!this.call.write(i)){this.call.once("drain",r);return}}catch(i){this.emit("error",{details:(0,Wr.getErrorMessage)(i),code:ne.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:ne.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}};Xe.ServerWritableStreamImpl=Hr;var sr=class extends Jl.Duplex{constructor(e,t,r,i,s){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=i,this.cancelled=!1,this.trailingMetadata=new Zl.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,s),this.on("error",o=>{this.call.sendError(o),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}};Xe.ServerDuplexStreamImpl=sr;sr.prototype._read=Ns.prototype._read;sr.prototype._write=Hr.prototype._write;sr.prototype._final=Hr.prototype._final;var Xl=class extends Ap.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=ne.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=ne.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",i=>{}),this.stream.once("close",()=>{var i;$r("Request to method "+((i=this.handler)===null||i===void 0?void 0:i.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:ne.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){let r=e.subarray(5);if(t==="identity")return r;if(t==="deflate"||t==="gzip"){let i;return t==="deflate"?i=bp.createInflate():i=bp.createGunzip(),new Promise((s,o)=>{let a=0,l=[];i.on("data",c=>{l.push(c),a+=c.byteLength,this.maxReceiveMessageSize!==-1&&a>this.maxReceiveMessageSize&&(i.destroy(),o({code:ne.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),i.on("end",()=>{s(Buffer.concat(l))}),i.write(r),i.end()})}else return Promise.reject({code:ne.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`})}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},Rp),B_),t);this.stream.respond(r,q_)}receiveMetadata(e){let t=Zl.Metadata.fromHttp2Headers(e);Dp.isTracerEnabled(Np)&&$r("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(Ip);if(r.length>0){let i=r[0].toString().match(L_);if(i===null){let a=new Error("Invalid deadline");return a.code=ne.Status.OUT_OF_RANGE,this.sendError(a),t}let s=+i[1]*F_[i[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+s),this.deadlineTimer=setTimeout(U_,s,this),t.remove(Ip)}return t.remove(ir.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(ir.constants.HTTP2_HEADER_TE),t.remove(ir.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e){return new Promise((t,r)=>{let{stream:i}=this,s=0,o=this,a=[],l=this.maxReceiveMessageSize;this.stream.on("data",c),this.stream.on("end",m),this.stream.on("error",m);function c(v){if(s+=v.byteLength,l!==-1&&s>l){i.removeListener("data",c),i.removeListener("end",m),i.removeListener("error",m),r({code:ne.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${s} vs. ${l})`});return}a.push(v)}function m(v){if(i.removeListener("data",c),i.removeListener("end",m),i.removeListener("error",m),v!==void 0){r({code:ne.Status.INTERNAL,details:v.message});return}if(s===0){r({code:ne.Status.INTERNAL,details:"received empty unary message"});return}o.emit("receiveMessage");let S=Buffer.concat(a,s),_=S.readUInt8(0)===1?e:"identity",I=o.getDecompressedMessage(S,_);if(Buffer.isBuffer(I)){t(o.deserializeMessageWithInternalError(I));return}I.then(w=>t(o.deserializeMessageWithInternalError(w)),w=>r(w.code?w:{code:ne.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}})}deserializeMessageWithInternalError(e){return W(this,null,function*(){try{return this.deserializeMessage(e)}catch(t){throw{details:(0,Wr.getErrorMessage)(t),code:ne.Status.INTERNAL}}})}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,i=Buffer.allocUnsafe(r+5);return i.writeUInt8(0,0),i.writeUInt32BE(r,1),t.copy(i,5),i}deserializeMessage(e){return this.handler.deserialize(e)}sendUnaryMessage(e,t,r,i){return W(this,null,function*(){if(!this.checkCancelled()){if(r===void 0&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let s=this.serializeMessage(t);this.write(s),this.sendStatus({code:ne.Status.OK,details:"OK",metadata:r})}catch(s){this.sendError({details:(0,Wr.getErrorMessage)(s),code:ne.Status.INTERNAL})}}})}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===ne.Status.OK),!this.checkCancelled())if($r("Request to method "+((t=this.handler)===null||t===void 0?void 0:t.path)+" ended with status code: "+ne.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var i;let s=Object.assign({[Cp]:e.code,[wp]:encodeURI(e.details)},(i=e.metadata)===null||i===void 0?void 0:i.toHttp2Headers());this.stream.sendTrailers(s),this.statusSent=!0}),this.stream.end());else{let i=Object.assign(Object.assign({[Cp]:e.code,[wp]:encodeURI(e.details)},Rp),(r=e.metadata)===null||r===void 0?void 0:r.toHttp2Headers());this.stream.respond(i,{endStream:!0}),this.statusSent=!0}}sendError(e){let t={code:ne.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&e.metadata!==void 0?e.metadata:null};"code"in e&&typeof e.code=="number"&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&typeof e.details=="string"&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled()){if(this.maxSendMessageSize!==-1&&e.length>this.maxSendMessageSize){this.sendError({code:ne.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new x_.StreamDecoder(this.maxReceiveMessageSize),i=!1,s=!1,o=!1,a=()=>W(this,null,function*(){!o&&i&&!s&&(o=!0,yield this.pushOrBufferMessage(e,null))});this.stream.on("data",l=>W(this,null,function*(){let c;try{c=r.write(l)}catch(m){this.sendError({code:ne.Status.RESOURCE_EXHAUSTED,details:m.message});return}s=!0,this.stream.pause();for(let m of c){this.emit("receiveMessage");let S=m.readUInt8(0)===1?t:"identity",E;try{E=yield this.getDecompressedMessage(m,S)}catch(_){this.sendError(_);return}if(!E)return;yield this.pushOrBufferMessage(e,E)}s=!1,this.stream.resume(),yield a()})),this.stream.once("end",()=>W(this,null,function*(){i=!0,yield a()}))}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(t===null||r===!1){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(e,t){return W(this,null,function*(){this.isPushPending?this.bufferedMessages.push(t):yield this.pushMessage(e,t)})}pushMessage(e,t){return W(this,null,function*(){if(t===null){$r("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}$r("Received message of length "+t.length),this.isPushPending=!0;try{let r=yield this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let i=(0,Wr.getErrorCode)(r);(i===null||i<ne.Status.OK||i>ne.Status.UNAUTHENTICATED)&&(i=ne.Status.INTERNAL),e.emit("error",{details:(0,Wr.getErrorMessage)(r),code:i})}this.isPushPending=!1,this.bufferedMessages.length>0&&(yield this.pushMessage(e,this.bufferedMessages.shift()))})}getPeer(){var e;let t=(e=this.stream.session)===null||e===void 0?void 0:e.socket;return t?.remoteAddress?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}};Xe.Http2ServerCallStream=Xl;function U_(n){let e=new Error("Deadline exceeded");e.code=ne.Status.DEADLINE_EXCEEDED,n.sendError(e),n.cancelled=!0,n.emit("cancelled","deadline")}});var nc=C(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.ServerCredentials=void 0;var kp=Eo(),Qr=class{static createInsecure(){return new ec}static createSsl(e,t,r=!1){if(e!==null&&!Buffer.isBuffer(e))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw new TypeError("keyCertPairs must be an array");if(typeof r!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let o=0;o<t.length;o++){let a=t[o];if(a===null||typeof a!="object")throw new TypeError(`keyCertPair[${o}] must be an object`);if(!Buffer.isBuffer(a.private_key))throw new TypeError(`keyCertPair[${o}].private_key must be a Buffer`);if(!Buffer.isBuffer(a.cert_chain))throw new TypeError(`keyCertPair[${o}].cert_chain must be a Buffer`);i.push(a.cert_chain),s.push(a.private_key)}return new tc({ca:e||(0,kp.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:kp.CIPHER_SUITES})}};Os.ServerCredentials=Qr;var ec=class extends Qr{_isSecure(){return!1}_getSettings(){return null}},tc=class extends Qr{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}});var Pp=C(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Server=void 0;var sn=X("http2"),Mt=Y(),Tn=Op(),V_=nc(),xp=ot(),ks=oe(),st=lt(),z_=Be(),Le=yn(),xs=~(1<<31),G_=~(1<<31),j_=2e4,{HTTP2_HEADER_PATH:Mp}=sn.constants,K_="server";function $_(){}function rc(n){return{code:Mt.Status.UNIMPLEMENTED,details:`The server does not implement the method ${n}`}}function W_(n,e){let t=rc(e);switch(n){case"unary":return(r,i)=>{i(t,null)};case"clientStream":return(r,i)=>{i(t,null)};case"serverStream":return r=>{r.emit("error",t)};case"bidi":return r=>{r.emit("error",t)};default:throw new Error(`Invalid handlerType ${n}`)}}var ic=class{constructor(e){var t,r,i,s;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new Le.ChannelzTrace,this.callTracker=new Le.ChannelzCallTracker,this.listenerChildrenTracker=new Le.ChannelzChildrenTracker,this.sessionChildrenTracker=new Le.ChannelzChildrenTracker,this.options=e??{},this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,Le.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(t=this.options["grpc.max_connection_age_ms"])!==null&&t!==void 0?t:xs,this.maxConnectionAgeGraceMs=(r=this.options["grpc.max_connection_age_grace_ms"])!==null&&r!==void 0?r:xs,this.keepaliveTimeMs=(i=this.options["grpc.keepalive_time_ms"])!==null&&i!==void 0?i:G_,this.keepaliveTimeoutMs=(s=this.options["grpc.keepalive_timeout_ms"])!==null&&s!==void 0?s:j_,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,i;let s=this.sessions.get(e),o=e.socket,a=o.remoteAddress?(0,st.stringToSubchannelAddress)(o.remoteAddress,o.remotePort):null,l=o.localAddress?(0,st.stringToSubchannelAddress)(o.localAddress,o.localPort):null,c;if(e.encrypted){let v=o,S=v.getCipher(),E=v.getCertificate(),_=v.getPeerCertificate();c={cipherSuiteStandardName:(t=S.standardName)!==null&&t!==void 0?t:null,cipherSuiteOtherName:S.standardName?null:S.name,localCertificate:E&&"raw"in E?E.raw:null,remoteCertificate:_&&"raw"in _?_.raw:null}}else c=null;return{remoteAddress:a,localAddress:l,security:c,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:(r=e.state.localWindowSize)!==null&&r!==void 0?r:null,remoteFlowControlWindow:(i=e.state.remoteWindowSize)!==null&&i!==void 0?i:null}}}trace(e){ks.trace(Mt.LogVerbosity.DEBUG,K_,"("+this.channelzRef.id+") "+e)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(e,t){if(e===null||typeof e!="object"||t===null||typeof t!="object")throw new Error("addService() requires two objects as arguments");let r=Object.keys(e);if(r.length===0)throw new Error("Cannot add an empty service to a server");r.forEach(i=>{let s=e[i],o;s.requestStream?s.responseStream?o="bidi":o="clientStream":s.responseStream?o="serverStream":o="unary";let a=t[i],l;if(a===void 0&&typeof s.originalName=="string"&&(a=t[s.originalName]),a!==void 0?l=a.bind(t):l=W_(o,i),this.register(s.path,l,s.responseSerialize,s.requestDeserialize,o)===!1)throw new Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(e===null||typeof e!="object")throw new Error("removeService() requires object as argument");Object.keys(e).forEach(r=>{let i=e[r];this.unregister(i.path)})}bind(e,t){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(this.started===!0)throw new Error("server is already started");if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof e!="string")throw new TypeError("port must be a string");if(t===null||!(t instanceof V_.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof r!="function")throw new TypeError("callback must be a function");let i=(0,z_.parseUri)(e);if(i===null)throw new Error(`Could not parse port "${e}"`);let s=(0,xp.mapUriDefaultScheme)(i);if(s===null)throw new Error(`Could not get a default scheme for port "${e}"`);let o={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?o.maxSessionMemory=this.options["grpc-node.max_session_memory"]:o.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(o.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let a=(E,_)=>{process.nextTick(()=>r(E,_))},l=()=>{let E;if(t._isSecure()){let _=Object.assign(o,t._getSettings());_.enableTrace=this.options["grpc-node.tls_enable_trace"]===1,E=sn.createSecureServer(_),E.on("secureConnection",I=>{I.on("error",w=>{this.trace("An incoming TLS connection closed with error: "+w.message)})})}else E=sn.createServer(o);return E.setTimeout(0,$_),this._setupHandlers(E),E},c=(E,_,I)=>E.length===0?Promise.resolve({port:_,count:I}):Promise.all(E.map(w=>{this.trace("Attempting to bind "+(0,st.subchannelAddressToString)(w));let O;(0,st.isTcpSubchannelAddress)(w)?O={host:w.host,port:_}:O=w;let k=l();return new Promise((x,b)=>{let q=B=>{this.trace("Failed to bind "+(0,st.subchannelAddressToString)(w)+" with error "+B.message),x(B)};k.once("error",q),k.listen(O,()=>{if(this.shutdown){k.close(),x(new Error("bindAsync failed because server is shutdown"));return}let B=k.address(),y;typeof B=="string"?y={path:B}:y={host:B.address,port:B.port};let f=(0,Le.registerChannelzSocket)((0,st.subchannelAddressToString)(y),()=>({localAddress:y,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(f),this.http2ServerList.push({server:k,channelzRef:f}),this.trace("Successfully bound "+(0,st.subchannelAddressToString)(y)),x("port"in y?y.port:_),k.removeListener("error",q)})})})).then(w=>{let O=0;for(let k of w)if(typeof k=="number"&&(O+=1,k!==_))throw new Error("Invalid state: multiple port numbers added from single address");return{port:_,count:O+I}}),m=E=>{if(E.length===0)return Promise.resolve({port:0,count:0});let _=E[0],I=l();return new Promise((w,O)=>{let k=x=>{this.trace("Failed to bind "+(0,st.subchannelAddressToString)(_)+" with error "+x.message),w(m(E.slice(1)))};I.once("error",k),I.listen(_,()=>{if(this.shutdown){I.close(),w({port:0,count:0});return}let x=I.address(),b={host:x.address,port:x.port},q=(0,Le.registerChannelzSocket)((0,st.subchannelAddressToString)(b),()=>({localAddress:b,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(q),this.http2ServerList.push({server:I,channelzRef:q}),this.trace("Successfully bound "+(0,st.subchannelAddressToString)(b)),w(c(E.slice(1),x.port,1)),I.removeListener("error",k)})})},v={onSuccessfulResolution:(E,_,I)=>{if(v.onSuccessfulResolution=()=>{},this.shutdown&&a(new Error("bindAsync failed because server is shutdown"),0),E.length===0){a(new Error(`No addresses resolved for port ${e}`),0);return}let w;(0,st.isTcpSubchannelAddress)(E[0])?E[0].port===0?w=m(E):w=c(E,E[0].port,0):w=c(E,1,0),w.then(O=>{if(O.count===0){let k=`No address added out of total ${E.length} resolved`;ks.log(Mt.LogVerbosity.ERROR,k),a(new Error(k),0)}else O.count<E.length&&ks.log(Mt.LogVerbosity.INFO,`WARNING Only ${O.count} addresses added out of total ${E.length} resolved`),a(null,O.port)},O=>{let k=`No address added out of total ${E.length} resolved`;ks.log(Mt.LogVerbosity.ERROR,k),a(new Error(k),0)})},onError:E=>{a(new Error(E.details),0)}};(0,xp.createResolver)(s,v,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,Le.unregisterChannelzRef)(t))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,t)=>{t.destroy(sn.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,Le.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,i,s){return this.handlers.has(e)?!1:(this.handlers.set(e,{func:t,serialize:r,deserialize:i,type:s,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(this.http2ServerList.length===0||this.http2ServerList.every(({server:e})=>e.listening!==!0))throw new Error("server must be bound in order to start");if(this.started===!0)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=s=>{this.channelzEnabled&&(0,Le.unregisterChannelzRef)(this.channelzRef),e(s)},r=0;function i(){r--,r===0&&t()}this.started=!1,this.shutdown=!0;for(let{server:s,channelzRef:o}of this.http2ServerList)s.listening&&(r++,s.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(o),(0,Le.unregisterChannelzRef)(o)),i()}));this.sessions.forEach((s,o)=>{o.closed||(r+=1,o.close(i))}),r===0&&t()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[sn.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof r!="string"||!r.startsWith("application/grpc")?(e.respond({[sn.constants.HTTP2_HEADER_STATUS]:sn.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1):!0}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let t=this.handlers.get(e);return t===void 0?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){let i=new Tn.Http2ServerCallStream(t,null,this.options);e.code===void 0&&(e.code=Mt.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed()),i.sendError(e)}_channelzHandler(e,t){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),r?.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed();return}let i=t[Mp],s=this._retrieveHandler(i);if(!s){this._respondWithError(rc(i),e,r);return}let o=new Tn.Http2ServerCallStream(e,s,this.options);o.once("callEnd",a=>{a===Mt.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",a=>{a?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,s,t)||(this.callTracker.addCallFailed(),r?.streamTracker.addCallFailed(),o.sendError({code:Mt.Status.INTERNAL,details:`Unknown handler type: ${s.type}`}))}_streamHandler(e,t){if(this._verifyContentType(e,t)!==!0)return;let r=t[Mp],i=this._retrieveHandler(r);if(!i){this._respondWithError(rc(r),e,null);return}let s=new Tn.Http2ServerCallStream(e,i,this.options);this._runHandlerForCall(s,i,t)||s.sendError({code:Mt.Status.INTERNAL,details:`Unknown handler type: ${i.type}`})}_runHandlerForCall(e,t,r){var i;let s=e.receiveMetadata(r),o=(i=s.get("grpc-encoding")[0])!==null&&i!==void 0?i:"identity";s.remove("grpc-encoding");let{type:a}=t;if(a==="unary")H_(e,t,s,o);else if(a==="clientStream")Q_(e,t,s,o);else if(a==="serverStream")Y_(e,t,s,o);else if(a==="bidi")X_(e,t,s,o);else return!1;return!0}_setupHandlers(e){if(e===null)return;let t=e.address(),r="null";t&&(typeof t=="string"?r=t:r=t.address+":"+t.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",s=>{var o,a,l,c,m;if(!this.started){s.destroy();return}let v=(0,Le.registerChannelzSocket)((o=s.socket.remoteAddress)!==null&&o!==void 0?o:"unknown",this.getChannelzSessionInfoGetter(s),this.channelzEnabled),S={ref:v,streamTracker:new Le.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(s,S);let E=s.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+E),this.sessionChildrenTracker.refChild(v));let _=null,I=null,w=!1;if(this.maxConnectionAgeMs!==xs){let k=this.maxConnectionAgeMs/10,x=Math.random()*k*2-k;_=(l=(a=setTimeout(()=>{var b,q;w=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+E);try{s.goaway(sn.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==xs&&(I=(q=(b=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs)).unref)===null||q===void 0?void 0:q.call(b))},this.maxConnectionAgeMs+x)).unref)===null||l===void 0?void 0:l.call(a)}let O=(m=(c=setInterval(()=>{var k,x;let b=(x=(k=setTimeout(()=>{w=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+E),s.close()},this.keepaliveTimeoutMs)).unref)===null||x===void 0?void 0:x.call(k);try{s.ping((q,B,y)=>{clearTimeout(b)})}catch{s.destroy()}},this.keepaliveTimeMs)).unref)===null||m===void 0?void 0:m.call(c);s.on("close",()=>{this.channelzEnabled&&(w||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+E),this.sessionChildrenTracker.unrefChild(v),(0,Le.unregisterChannelzRef)(v)),_&&clearTimeout(_),I&&clearTimeout(I),O&&clearTimeout(O),this.sessions.delete(s)})})}};Ms.Server=ic;function H_(n,e,t,r){return W(this,null,function*(){try{let i=yield n.receiveUnaryMessage(r);if(i===void 0||n.cancelled)return;let s=new Tn.ServerUnaryCallImpl(n,t,i);e.func(s,(o,a,l,c)=>{n.sendUnaryMessage(o,a,l,c)})}catch(i){n.sendError(i)}})}function Q_(n,e,t,r){let i=new Tn.ServerReadableStreamImpl(n,t,e.deserialize,r);function s(o,a,l,c){i.destroy(),n.sendUnaryMessage(o,a,l,c)}n.cancelled||(i.on("error",s),e.func(i,s))}function Y_(n,e,t,r){return W(this,null,function*(){try{let i=yield n.receiveUnaryMessage(r);if(i===void 0||n.cancelled)return;let s=new Tn.ServerWritableStreamImpl(n,t,e.serialize,i);e.func(s)}catch(i){n.sendError(i)}})}function X_(n,e,t,r){let i=new Tn.ServerDuplexStreamImpl(n,t,e.serialize,e.deserialize,r);n.cancelled||e.func(i)}});var Lp=C(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.StatusBuilder=void 0;var sc=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return this.code!==null&&(e.code=this.code),this.details!==null&&(e.details=this.details),this.metadata!==null&&(e.metadata=this.metadata),e}};Ps.StatusBuilder=sc});var oc=C(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.isDuration=on.durationToMs=on.msToDuration=void 0;function J_(n){return{seconds:n/1e3|0,nanos:n%1e3*1e6|0}}on.msToDuration=J_;function Z_(n){return n.seconds*1e3+n.nanos/1e6|0}on.durationToMs=Z_;function eb(n){return typeof n.seconds=="number"&&typeof n.nanos=="number"}on.isDuration=eb});var pc=C(an=>{"use strict";var ac;Object.defineProperty(an,"__esModule",{value:!0});an.setup=an.OutlierDetectionLoadBalancer=an.OutlierDetectionLoadBalancingConfig=void 0;var Fs=je(),Bp=Y(),Sn=oc(),qp=mc(),Up=Ft(),tb=yi(),nb=Vt(),Fp=lt(),rb=Cs(),ib=oe(),sb="outlier_detection";function ge(n){ib.trace(Bp.LogVerbosity.DEBUG,sb,n)}var fc="outlier_detection",ob=((ac=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&ac!==void 0?ac:"true")==="true",ab={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},lb={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function or(n,e,t,r){if(e in n&&typeof n[e]!==t){let i=r?`${r}.${e}`:e;throw new Error(`outlier detection config ${i} parse error: expected ${t}, got ${typeof n[e]}`)}}function lc(n,e,t){let r=t?`${t}.${e}`:e;if(e in n){if(!(0,Sn.isDuration)(n[e]))throw new Error(`outlier detection config ${r} parse error: expected Duration, got ${typeof n[e]}`);if(!(n[e].seconds>=0&&n[e].seconds<=315576e6&&n[e].nanos>=0&&n[e].nanos<=999999999))throw new Error(`outlier detection config ${r} parse error: values out of range for non-negative Duaration`)}}function Ls(n,e,t){let r=t?`${t}.${e}`:e;if(or(n,e,"number",t),e in n&&!(n[e]>=0&&n[e]<=100))throw new Error(`outlier detection config ${r} parse error: value out of range for percentage (0-100)`)}var Yr=class n{constructor(e,t,r,i,s,o,a){if(this.childPolicy=a,a.length>0&&a[0].getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=e??1e4,this.baseEjectionTimeMs=t??3e4,this.maxEjectionTimeMs=r??3e5,this.maxEjectionPercent=i??10,this.successRateEjection=s?Object.assign(Object.assign({},ab),s):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},lb),o):null}getLoadBalancerName(){return fc}toJsonObject(){return{interval:(0,Sn.msToDuration)(this.intervalMs),base_ejection_time:(0,Sn.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,Sn.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new n(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(lc(e,"interval"),lc(e,"base_ejection_time"),lc(e,"max_ejection_time"),Ls(e,"max_ejection_percent"),"success_rate_ejection"in e){if(typeof e.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");or(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),Ls(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),or(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),or(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if(typeof e.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");Ls(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),Ls(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),or(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),or(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new n(e.interval?(0,Sn.durationToMs)(e.interval):null,e.base_ejection_time?(0,Sn.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,Sn.durationToMs)(e.max_ejection_time):null,(t=e.max_ejection_percent)!==null&&t!==void 0?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(Up.validateLoadBalancingConfig))}};an.OutlierDetectionLoadBalancingConfig=Yr;var uc=class extends rb.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((r,i,s,o)=>{if(this.childSubchannelState=s,!this.ejected)for(let a of this.stateListeners)a(this,i,s,o)})}getConnectivityState(){return this.ejected?Fs.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){this.ejected=!0;for(let e of this.stateListeners)e(this,this.childSubchannelState,Fs.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(let e of this.stateListeners)e(this,Fs.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function cc(){return{success:0,failure:0}}var dc=class{constructor(){this.activeBucket=cc(),this.inactiveBucket=cc()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=cc()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},hc=class{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType===nb.PickResultType.COMPLETE){let r=t.subchannel,i=r.getMapEntry();if(i){let s=t.onCallEnded;return this.countCalls&&(s=o=>{var a;o===Bp.Status.OK?i.counter.addSuccess():i.counter.addFailure(),(a=t.onCallEnded)===null||a===void 0||a.call(t,o)}),Object.assign(Object.assign({},t),{subchannel:r.getWrappedSubchannel(),onCallEnded:s})}else return Object.assign(Object.assign({},t),{subchannel:r.getWrappedSubchannel()})}else return t}},Bs=class{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new tb.ChildLoadBalancerHandler((0,qp.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{let i=e.createSubchannel(t,r),s=this.addressMap.get((0,Fp.subchannelAddressToString)(t)),o=new uc(i,s);return s?.currentEjectionTimestamp!==null&&o.eject(),s?.subchannelWrappers.push(o),o},updateState:(t,r)=>{t===Fs.ConnectivityState.READY?e.updateState(t,new hc(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())t.currentEjectionTimestamp!==null&&(e+=1);return e*100/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;ge("Running success rate check");let r=t.request_volume,i=0,s=[];for(let[v,S]of this.addressMap){let E=S.counter.getLastSuccesses(),_=S.counter.getLastFailures();ge("Stats for "+v+": successes="+E+" failures="+_+" targetRequestVolume="+r),E+_>=r&&(i+=1,s.push(E/(E+_)))}if(ge("Found "+i+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),i<t.minimum_hosts)return;let o=s.reduce((v,S)=>v+S)/s.length,a=0;for(let v of s){let S=v-o;a+=S*S}let l=a/s.length,c=Math.sqrt(l),m=o-c*(t.stdev_factor/1e3);ge("stdev="+c+" ejectionThreshold="+m);for(let[v,S]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let E=S.counter.getLastSuccesses(),_=S.counter.getLastFailures();if(E+_<r)continue;let I=E/(E+_);if(ge("Checking candidate "+v+" successRate="+I),I<m){let w=Math.random()*100;ge("Candidate "+v+" randomNumber="+w+" enforcement_percentage="+t.enforcement_percentage),w<t.enforcement_percentage&&(ge("Ejecting candidate "+v),this.eject(S,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;ge("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let i of this.addressMap.values()){let s=i.counter.getLastSuccesses(),o=i.counter.getLastFailures();s+o>=t.request_volume&&(r+=1)}if(!(r<t.minimum_hosts))for(let[i,s]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(ge("Candidate successes="+o+" failures="+a),o+a<t.request_volume)continue;if(a*100/(a+o)>t.threshold){let c=Math.random()*100;ge("Candidate "+i+" randomNumber="+c+" enforcement_percentage="+t.enforcement_percentage),c<t.enforcement_percentage&&(ge("Ejecting candidate "+i),this.eject(s,e))}}}eject(e,t){e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1;for(let r of e.subchannelWrappers)r.eject()}uneject(e){e.currentEjectionTimestamp=null;for(let t of e.subchannelWrappers)t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),(r=(t=this.ejectionTimer).unref)===null||r===void 0||r.call(t)}runChecks(){let e=new Date;if(ge("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e);for(let[t,r]of this.addressMap.entries())if(r.currentEjectionTimestamp===null)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let i=this.latestConfig.getBaseEjectionTimeMs(),s=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(r.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(i*r.ejectionTimeMultiplier,Math.max(i,s))),o<new Date&&(ge("Unejecting "+t),this.uneject(r))}}}updateAddressList(e,t,r){if(!(t instanceof Yr))return;let i=new Set;for(let o of e)i.add((0,Fp.subchannelAddressToString)(o));for(let o of i)this.addressMap.has(o)||(ge("Adding map entry for "+o),this.addressMap.set(o,{counter:new dc,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let o of this.addressMap.keys())i.has(o)||(ge("Removing map entry for "+o),this.addressMap.delete(o));let s=(0,Up.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,s,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){ge("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let o=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(o)}else ge("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else{ge("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let o of this.addressMap.values())this.uneject(o),o.ejectionTimeMultiplier=0}this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return fc}};an.OutlierDetectionLoadBalancer=Bs;function cb(){ob&&(0,qp.registerLoadBalancerType)(fc,Bs,Yr)}an.setup=cb});var mc=C(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.OutlierDetectionLoadBalancingConfig=U.BaseSubchannelWrapper=U.registerAdminService=U.FilterStackFactory=U.BaseFilter=U.PickResultType=U.QueuePicker=U.UnavailablePicker=U.ChildLoadBalancerHandler=U.subchannelAddressToString=U.validateLoadBalancingConfig=U.getFirstUsableConfig=U.registerLoadBalancerType=U.createChildChannelControlHelper=U.BackoffTimeout=U.durationToMs=U.uriToString=U.createResolver=U.registerResolver=U.log=U.trace=void 0;var Vp=oe();Object.defineProperty(U,"trace",{enumerable:!0,get:function(){return Vp.trace}});Object.defineProperty(U,"log",{enumerable:!0,get:function(){return Vp.log}});var zp=ot();Object.defineProperty(U,"registerResolver",{enumerable:!0,get:function(){return zp.registerResolver}});Object.defineProperty(U,"createResolver",{enumerable:!0,get:function(){return zp.createResolver}});var ub=Be();Object.defineProperty(U,"uriToString",{enumerable:!0,get:function(){return ub.uriToString}});var db=oc();Object.defineProperty(U,"durationToMs",{enumerable:!0,get:function(){return db.durationToMs}});var hb=mr();Object.defineProperty(U,"BackoffTimeout",{enumerable:!0,get:function(){return hb.BackoffTimeout}});var qs=Ft();Object.defineProperty(U,"createChildChannelControlHelper",{enumerable:!0,get:function(){return qs.createChildChannelControlHelper}});Object.defineProperty(U,"registerLoadBalancerType",{enumerable:!0,get:function(){return qs.registerLoadBalancerType}});Object.defineProperty(U,"getFirstUsableConfig",{enumerable:!0,get:function(){return qs.getFirstUsableConfig}});Object.defineProperty(U,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return qs.validateLoadBalancingConfig}});var fb=lt();Object.defineProperty(U,"subchannelAddressToString",{enumerable:!0,get:function(){return fb.subchannelAddressToString}});var pb=yi();Object.defineProperty(U,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return pb.ChildLoadBalancerHandler}});var gc=Vt();Object.defineProperty(U,"UnavailablePicker",{enumerable:!0,get:function(){return gc.UnavailablePicker}});Object.defineProperty(U,"QueuePicker",{enumerable:!0,get:function(){return gc.QueuePicker}});Object.defineProperty(U,"PickResultType",{enumerable:!0,get:function(){return gc.PickResultType}});var mb=Ol();Object.defineProperty(U,"BaseFilter",{enumerable:!0,get:function(){return mb.BaseFilter}});var gb=Al();Object.defineProperty(U,"FilterStackFactory",{enumerable:!0,get:function(){return gb.FilterStackFactory}});var yb=Ti();Object.defineProperty(U,"registerAdminService",{enumerable:!0,get:function(){return yb.registerAdminService}});var vb=Cs();Object.defineProperty(U,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return vb.BaseSubchannelWrapper}});var Tb=pc();Object.defineProperty(U,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return Tb.OutlierDetectionLoadBalancingConfig}})});var Gp=C(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.setup=void 0;var Sb=ot(),yc=class{constructor(e,t,r){this.listener=t,this.addresses=[],this.hasReturnedResult=!1;let i;e.authority===""?i="/"+e.path:i=e.path,this.addresses=[{path:i}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}};function Eb(){(0,Sb.registerResolver)("unix",yc)}Us.setup=Eb});var Hp=C(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.setup=void 0;var jp=X("net"),Vs=Y(),vc=xe(),Kp=ot(),$p=Be(),_b=oe(),bb="ip_resolver";function Wp(n){_b.trace(Vs.LogVerbosity.DEBUG,bb,n)}var Tc="ipv4",Sc="ipv6",wb=443,zs=class{constructor(e,t,r){var i;this.listener=t,this.addresses=[],this.error=null,this.hasReturnedResult=!1,Wp("Resolver constructed for target "+(0,$p.uriToString)(e));let s=[];if(!(e.scheme===Tc||e.scheme===Sc)){this.error={code:Vs.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new vc.Metadata};return}let o=e.path.split(",");for(let a of o){let l=(0,$p.splitHostPort)(a);if(l===null){this.error={code:Vs.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new vc.Metadata};return}if(e.scheme===Tc&&!(0,jp.isIPv4)(l.host)||e.scheme===Sc&&!(0,jp.isIPv6)(l.host)){this.error={code:Vs.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${a}`,metadata:new vc.Metadata};return}s.push({host:l.host,port:(i=l.port)!==null&&i!==void 0?i:wb})}this.addresses=s,Wp("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}};function Cb(){(0,Kp.registerResolver)(Tc,zs),(0,Kp.registerResolver)(Sc,zs)}Gs.setup=Cb});var Xp=C(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});Et.setup=Et.PickFirstLoadBalancer=Et.shuffled=Et.PickFirstLoadBalancingConfig=void 0;var Qp=Ft(),Ce=je(),js=Vt(),Ib=oe(),Rb=Y(),Ab="pick_first";function Ec(n){Ib.trace(Rb.LogVerbosity.DEBUG,Ab,n)}var Xr="pick_first",Db=250,Jr=class n{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return Xr}toJsonObject(){return{[Xr]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&typeof e.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new n(e.shuffleAddressList===!0)}};Et.PickFirstLoadBalancingConfig=Jr;var _c=class{constructor(e){this.subchannel=e}pick(e){return{pickResultType:js.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function Yp(n){let e=n.slice();for(let t=e.length-1;t>1;t--){let r=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}Et.shuffled=Yp;var Ks=class{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=Ce.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(t,r,i,s,o)=>{this.onSubchannelStateUpdate(t,r,i,o)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(Ce.ConnectivityState.READY,new _c(this.currentPick)):this.children.length===0?this.updateState(Ce.ConnectivityState.IDLE,new js.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(Ce.ConnectivityState.TRANSIENT_FAILURE,new js.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Ce.ConnectivityState.CONNECTING,new js.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){this.stickyTransientFailureMode=!0;for(let{subchannel:e}of this.children)e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(this.currentPick!==null){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,t,r,i){var s;if(!((s=this.currentPick)===null||s===void 0)&&s.realSubchannelEquals(e)){r!==Ce.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[o,a]of this.children.entries())if(e.realSubchannelEquals(a.subchannel)){r===Ce.ConnectivityState.READY&&this.pickSubchannel(a.subchannel),r===Ce.ConnectivityState.TRANSIENT_FAILURE&&(a.hasReportedTransientFailure=!0,i&&(this.lastError=i),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),a.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[t,r]of this.children.entries())if(t>=e){let i=r.subchannel.getConnectivityState();if(i===Ce.ConnectivityState.IDLE||i===Ce.ConnectivityState.CONNECTING){this.startConnecting(t);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===Ce.ConnectivityState.IDLE&&(Ec("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var i;(i=this.children[e])===null||i===void 0||i.subchannel.startConnecting()})),this.connectionDelayTimeout=(r=(t=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},Db)).unref)===null||r===void 0?void 0:r.call(t)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(Ec("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,this.currentPick!==null&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,t){Ec(Ce.ConnectivityState[this.currentState]+" -> "+Ce.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let t=e.map(r=>({subchannel:this.channelControlHelper.createSubchannel(r,{}),hasReportedTransientFailure:!1}));for(let{subchannel:r}of t)r.ref(),this.channelControlHelper.addChannelzChild(r.getChannelzRef());this.resetSubchannelList(),this.children=t;for(let{subchannel:r}of this.children)if(r.addConnectivityStateListener(this.subchannelStateListener),r.getConnectivityState()===Ce.ConnectivityState.READY){this.pickSubchannel(r);return}for(let r of this.children)r.subchannel.getConnectivityState()===Ce.ConnectivityState.TRANSIENT_FAILURE&&(r.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t){t instanceof Jr&&(t.getShuffleAddressList()&&(e=Yp(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===Ce.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return Xr}};Et.PickFirstLoadBalancer=Ks;function Nb(){(0,Qp.registerLoadBalancerType)(Xr,Ks,Jr),(0,Qp.registerDefaultLoadBalancerType)(Xr)}Et.setup=Nb});var Zp=C(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.setup=ar.RoundRobinLoadBalancer=void 0;var Ob=Ft(),Ie=je(),$s=Vt(),kb=lt(),xb=oe(),Mb=Y(),Pb="round_robin";function Jp(n){xb.trace(Mb.LogVerbosity.DEBUG,Pb,n)}var Ws="round_robin",bc=class n{getLoadBalancerName(){return Ws}constructor(){}toJsonObject(){return{[Ws]:{}}}static createFromJson(e){return new n}},wc=class{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:$s.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}},Hs=class{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=Ie.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(t,r,i,s,o)=>{this.calculateAndUpdateState(),(i===Ie.ConnectivityState.TRANSIENT_FAILURE||i===Ie.ConnectivityState.IDLE)&&(o&&(this.lastError=o),this.channelControlHelper.requestReresolution(),t.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(Ie.ConnectivityState.READY)>0){let e=this.subchannels.filter(r=>r.getConnectivityState()===Ie.ConnectivityState.READY),t=0;this.currentReadyPicker!==null&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()),t<0&&(t=0)),this.updateState(Ie.ConnectivityState.READY,new wc(e,t))}else this.countSubchannelsWithState(Ie.ConnectivityState.CONNECTING)>0?this.updateState(Ie.ConnectivityState.CONNECTING,new $s.QueuePicker(this)):this.countSubchannelsWithState(Ie.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(Ie.ConnectivityState.TRANSIENT_FAILURE,new $s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Ie.ConnectivityState.IDLE,new $s.QueuePicker(this))}updateState(e,t){Jp(Ie.ConnectivityState[this.currentState]+" -> "+Ie.ConnectivityState[e]),e===Ie.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,t){this.resetSubchannelList(),Jp("Connect to address list "+e.map(r=>(0,kb.subchannelAddressToString)(r))),this.subchannels=e.map(r=>this.channelControlHelper.createSubchannel(r,{}));for(let r of this.subchannels){r.ref(),r.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(r.getChannelzRef());let i=r.getConnectivityState();(i===Ie.ConnectivityState.IDLE||i===Ie.ConnectivityState.TRANSIENT_FAILURE)&&r.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return Ws}};ar.RoundRobinLoadBalancer=Hs;function Lb(){(0,Ob.registerLoadBalancerType)(Ws,Hs,bc)}ar.setup=Lb});var rm=C(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.experimental=M.addAdminServicesToServer=M.getChannelzHandlers=M.getChannelzServiceDefinition=M.InterceptorConfigurationError=M.InterceptingCall=M.RequesterBuilder=M.ListenerBuilder=M.StatusBuilder=M.getClientChannel=M.ServerCredentials=M.Server=M.setLogVerbosity=M.setLogger=M.load=M.loadObject=M.CallCredentials=M.ChannelCredentials=M.waitForClientReady=M.closeClient=M.Channel=M.makeGenericClientConstructor=M.makeClientConstructor=M.loadPackageDefinition=M.Client=M.compressionAlgorithms=M.propagate=M.connectivityState=M.status=M.logVerbosity=M.Metadata=M.credentials=void 0;var Qs=To();Object.defineProperty(M,"CallCredentials",{enumerable:!0,get:function(){return Qs.CallCredentials}});var Fb=Xo();Object.defineProperty(M,"Channel",{enumerable:!0,get:function(){return Fb.ChannelImplementation}});var Bb=Dl();Object.defineProperty(M,"compressionAlgorithms",{enumerable:!0,get:function(){return Bb.CompressionAlgorithms}});var qb=je();Object.defineProperty(M,"connectivityState",{enumerable:!0,get:function(){return qb.ConnectivityState}});var Ys=ui();Object.defineProperty(M,"ChannelCredentials",{enumerable:!0,get:function(){return Ys.ChannelCredentials}});var em=Yo();Object.defineProperty(M,"Client",{enumerable:!0,get:function(){return em.Client}});var Cc=Y();Object.defineProperty(M,"logVerbosity",{enumerable:!0,get:function(){return Cc.LogVerbosity}});Object.defineProperty(M,"status",{enumerable:!0,get:function(){return Cc.Status}});Object.defineProperty(M,"propagate",{enumerable:!0,get:function(){return Cc.Propagate}});var tm=oe(),Ic=Zo();Object.defineProperty(M,"loadPackageDefinition",{enumerable:!0,get:function(){return Ic.loadPackageDefinition}});Object.defineProperty(M,"makeClientConstructor",{enumerable:!0,get:function(){return Ic.makeClientConstructor}});Object.defineProperty(M,"makeGenericClientConstructor",{enumerable:!0,get:function(){return Ic.makeClientConstructor}});var Ub=xe();Object.defineProperty(M,"Metadata",{enumerable:!0,get:function(){return Ub.Metadata}});var Vb=Pp();Object.defineProperty(M,"Server",{enumerable:!0,get:function(){return Vb.Server}});var zb=nc();Object.defineProperty(M,"ServerCredentials",{enumerable:!0,get:function(){return zb.ServerCredentials}});var Gb=Lp();Object.defineProperty(M,"StatusBuilder",{enumerable:!0,get:function(){return Gb.StatusBuilder}});M.credentials={combineChannelCredentials:(n,...e)=>e.reduce((t,r)=>t.compose(r),n),combineCallCredentials:(n,...e)=>e.reduce((t,r)=>t.compose(r),n),createInsecure:Ys.ChannelCredentials.createInsecure,createSsl:Ys.ChannelCredentials.createSsl,createFromSecureContext:Ys.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:Qs.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:Qs.CallCredentials.createFromGoogleCredential,createEmpty:Qs.CallCredentials.createEmpty};var jb=n=>n.close();M.closeClient=jb;var Kb=(n,e,t)=>n.waitForReady(e,t);M.waitForClientReady=Kb;var $b=(n,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};M.loadObject=$b;var Wb=(n,e,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};M.load=Wb;var Hb=n=>{tm.setLogger(n)};M.setLogger=Hb;var Qb=n=>{tm.setLoggerVerbosity(n)};M.setLogVerbosity=Qb;var Yb=n=>em.Client.prototype.getChannel.call(n);M.getClientChannel=Yb;var Xs=Wo();Object.defineProperty(M,"ListenerBuilder",{enumerable:!0,get:function(){return Xs.ListenerBuilder}});Object.defineProperty(M,"RequesterBuilder",{enumerable:!0,get:function(){return Xs.RequesterBuilder}});Object.defineProperty(M,"InterceptingCall",{enumerable:!0,get:function(){return Xs.InterceptingCall}});Object.defineProperty(M,"InterceptorConfigurationError",{enumerable:!0,get:function(){return Xs.InterceptorConfigurationError}});var nm=yn();Object.defineProperty(M,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return nm.getChannelzServiceDefinition}});Object.defineProperty(M,"getChannelzHandlers",{enumerable:!0,get:function(){return nm.getChannelzHandlers}});var Xb=Ti();Object.defineProperty(M,"addAdminServicesToServer",{enumerable:!0,get:function(){return Xb.addAdminServicesToServer}});var Jb=mc();M.experimental=Jb;var Zb=gl(),ew=Gp(),tw=Hp(),nw=Xp(),rw=Zp(),iw=pc(),sw=yn();Zb.setup(),ew.setup(),tw.setup(),nw.setup(),rw.setup(),iw.setup(),sw.setup()});var Ou=(()=>{class n{constructor(){this.title="cuac-design-3"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Hc({type:n,selectors:[["app-root"]],standalone:!0,features:[Zc],decls:1,vars:0,template:function(r,i){r&1&&Jc(0,"router-outlet")},dependencies:[au]})}}return n})();var ku=[{path:"",loadChildren:()=>import("./chunk-6OUSRJUP.mjs").then(n=>n.userRoutes),title:"Cuac Design"},{path:"admin",loadChildren:()=>import("./chunk-T7QHFBEB.mjs").then(n=>n.adminRoutes),data:{prerender:!1}},{path:"**",pathMatch:"full",redirectTo:""}];import{inspect as ow,TextEncoder as HI,TextDecoder as QI}from"util";var xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mu={};var oo,Pu;(function(){var n;function e(y,f){function p(){}p.prototype=f.prototype,y.D=f.prototype,y.prototype=new p,y.prototype.constructor=y,y.C=function(g,d,T){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return f.prototype[d].apply(g,u)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(y,f,p){p||(p=0);var g=Array(16);if(typeof f=="string")for(var d=0;16>d;++d)g[d]=f.charCodeAt(p++)|f.charCodeAt(p++)<<8|f.charCodeAt(p++)<<16|f.charCodeAt(p++)<<24;else for(d=0;16>d;++d)g[d]=f[p++]|f[p++]<<8|f[p++]<<16|f[p++]<<24;f=y.g[0],p=y.g[1],d=y.g[2];var T=y.g[3],u=f+(T^p&(d^T))+g[0]+3614090360&4294967295;f=p+(u<<7&4294967295|u>>>25),u=T+(d^f&(p^d))+g[1]+3905402710&4294967295,T=f+(u<<12&4294967295|u>>>20),u=d+(p^T&(f^p))+g[2]+606105819&4294967295,d=T+(u<<17&4294967295|u>>>15),u=p+(f^d&(T^f))+g[3]+3250441966&4294967295,p=d+(u<<22&4294967295|u>>>10),u=f+(T^p&(d^T))+g[4]+4118548399&4294967295,f=p+(u<<7&4294967295|u>>>25),u=T+(d^f&(p^d))+g[5]+1200080426&4294967295,T=f+(u<<12&4294967295|u>>>20),u=d+(p^T&(f^p))+g[6]+2821735955&4294967295,d=T+(u<<17&4294967295|u>>>15),u=p+(f^d&(T^f))+g[7]+4249261313&4294967295,p=d+(u<<22&4294967295|u>>>10),u=f+(T^p&(d^T))+g[8]+1770035416&4294967295,f=p+(u<<7&4294967295|u>>>25),u=T+(d^f&(p^d))+g[9]+2336552879&4294967295,T=f+(u<<12&4294967295|u>>>20),u=d+(p^T&(f^p))+g[10]+4294925233&4294967295,d=T+(u<<17&4294967295|u>>>15),u=p+(f^d&(T^f))+g[11]+2304563134&4294967295,p=d+(u<<22&4294967295|u>>>10),u=f+(T^p&(d^T))+g[12]+1804603682&4294967295,f=p+(u<<7&4294967295|u>>>25),u=T+(d^f&(p^d))+g[13]+4254626195&4294967295,T=f+(u<<12&4294967295|u>>>20),u=d+(p^T&(f^p))+g[14]+2792965006&4294967295,d=T+(u<<17&4294967295|u>>>15),u=p+(f^d&(T^f))+g[15]+1236535329&4294967295,p=d+(u<<22&4294967295|u>>>10),u=f+(d^T&(p^d))+g[1]+4129170786&4294967295,f=p+(u<<5&4294967295|u>>>27),u=T+(p^d&(f^p))+g[6]+3225465664&4294967295,T=f+(u<<9&4294967295|u>>>23),u=d+(f^p&(T^f))+g[11]+643717713&4294967295,d=T+(u<<14&4294967295|u>>>18),u=p+(T^f&(d^T))+g[0]+3921069994&4294967295,p=d+(u<<20&4294967295|u>>>12),u=f+(d^T&(p^d))+g[5]+3593408605&4294967295,f=p+(u<<5&4294967295|u>>>27),u=T+(p^d&(f^p))+g[10]+38016083&4294967295,T=f+(u<<9&4294967295|u>>>23),u=d+(f^p&(T^f))+g[15]+3634488961&4294967295,d=T+(u<<14&4294967295|u>>>18),u=p+(T^f&(d^T))+g[4]+3889429448&4294967295,p=d+(u<<20&4294967295|u>>>12),u=f+(d^T&(p^d))+g[9]+568446438&4294967295,f=p+(u<<5&4294967295|u>>>27),u=T+(p^d&(f^p))+g[14]+3275163606&4294967295,T=f+(u<<9&4294967295|u>>>23),u=d+(f^p&(T^f))+g[3]+4107603335&4294967295,d=T+(u<<14&4294967295|u>>>18),u=p+(T^f&(d^T))+g[8]+1163531501&4294967295,p=d+(u<<20&4294967295|u>>>12),u=f+(d^T&(p^d))+g[13]+2850285829&4294967295,f=p+(u<<5&4294967295|u>>>27),u=T+(p^d&(f^p))+g[2]+4243563512&4294967295,T=f+(u<<9&4294967295|u>>>23),u=d+(f^p&(T^f))+g[7]+1735328473&4294967295,d=T+(u<<14&4294967295|u>>>18),u=p+(T^f&(d^T))+g[12]+2368359562&4294967295,p=d+(u<<20&4294967295|u>>>12),u=f+(p^d^T)+g[5]+4294588738&4294967295,f=p+(u<<4&4294967295|u>>>28),u=T+(f^p^d)+g[8]+2272392833&4294967295,T=f+(u<<11&4294967295|u>>>21),u=d+(T^f^p)+g[11]+1839030562&4294967295,d=T+(u<<16&4294967295|u>>>16),u=p+(d^T^f)+g[14]+4259657740&4294967295,p=d+(u<<23&4294967295|u>>>9),u=f+(p^d^T)+g[1]+2763975236&4294967295,f=p+(u<<4&4294967295|u>>>28),u=T+(f^p^d)+g[4]+1272893353&4294967295,T=f+(u<<11&4294967295|u>>>21),u=d+(T^f^p)+g[7]+4139469664&4294967295,d=T+(u<<16&4294967295|u>>>16),u=p+(d^T^f)+g[10]+3200236656&4294967295,p=d+(u<<23&4294967295|u>>>9),u=f+(p^d^T)+g[13]+681279174&4294967295,f=p+(u<<4&4294967295|u>>>28),u=T+(f^p^d)+g[0]+3936430074&4294967295,T=f+(u<<11&4294967295|u>>>21),u=d+(T^f^p)+g[3]+3572445317&4294967295,d=T+(u<<16&4294967295|u>>>16),u=p+(d^T^f)+g[6]+76029189&4294967295,p=d+(u<<23&4294967295|u>>>9),u=f+(p^d^T)+g[9]+3654602809&4294967295,f=p+(u<<4&4294967295|u>>>28),u=T+(f^p^d)+g[12]+3873151461&4294967295,T=f+(u<<11&4294967295|u>>>21),u=d+(T^f^p)+g[15]+530742520&4294967295,d=T+(u<<16&4294967295|u>>>16),u=p+(d^T^f)+g[2]+3299628645&4294967295,p=d+(u<<23&4294967295|u>>>9),u=f+(d^(p|~T))+g[0]+4096336452&4294967295,f=p+(u<<6&4294967295|u>>>26),u=T+(p^(f|~d))+g[7]+1126891415&4294967295,T=f+(u<<10&4294967295|u>>>22),u=d+(f^(T|~p))+g[14]+2878612391&4294967295,d=T+(u<<15&4294967295|u>>>17),u=p+(T^(d|~f))+g[5]+4237533241&4294967295,p=d+(u<<21&4294967295|u>>>11),u=f+(d^(p|~T))+g[12]+1700485571&4294967295,f=p+(u<<6&4294967295|u>>>26),u=T+(p^(f|~d))+g[3]+2399980690&4294967295,T=f+(u<<10&4294967295|u>>>22),u=d+(f^(T|~p))+g[10]+4293915773&4294967295,d=T+(u<<15&4294967295|u>>>17),u=p+(T^(d|~f))+g[1]+2240044497&4294967295,p=d+(u<<21&4294967295|u>>>11),u=f+(d^(p|~T))+g[8]+1873313359&4294967295,f=p+(u<<6&4294967295|u>>>26),u=T+(p^(f|~d))+g[15]+4264355552&4294967295,T=f+(u<<10&4294967295|u>>>22),u=d+(f^(T|~p))+g[6]+2734768916&4294967295,d=T+(u<<15&4294967295|u>>>17),u=p+(T^(d|~f))+g[13]+1309151649&4294967295,p=d+(u<<21&4294967295|u>>>11),u=f+(d^(p|~T))+g[4]+4149444226&4294967295,f=p+(u<<6&4294967295|u>>>26),u=T+(p^(f|~d))+g[11]+3174756917&4294967295,T=f+(u<<10&4294967295|u>>>22),u=d+(f^(T|~p))+g[2]+718787259&4294967295,d=T+(u<<15&4294967295|u>>>17),u=p+(T^(d|~f))+g[9]+3951481745&4294967295,y.g[0]=y.g[0]+f&4294967295,y.g[1]=y.g[1]+(d+(u<<21&4294967295|u>>>11))&4294967295,y.g[2]=y.g[2]+d&4294967295,y.g[3]=y.g[3]+T&4294967295}r.prototype.u=function(y,f){f===void 0&&(f=y.length);for(var p=f-this.blockSize,g=this.B,d=this.h,T=0;T<f;){if(d==0)for(;T<=p;)i(this,y,T),T+=this.blockSize;if(typeof y=="string"){for(;T<f;)if(g[d++]=y.charCodeAt(T++),d==this.blockSize){i(this,g),d=0;break}}else for(;T<f;)if(g[d++]=y[T++],d==this.blockSize){i(this,g),d=0;break}}this.h=d,this.o+=f},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var f=1;f<y.length-8;++f)y[f]=0;var p=8*this.o;for(f=y.length-8;f<y.length;++f)y[f]=p&255,p/=256;for(this.u(y),y=Array(16),f=p=0;4>f;++f)for(var g=0;32>g;g+=8)y[p++]=this.g[f]>>>g&255;return y};function s(y,f){var p=a;return Object.prototype.hasOwnProperty.call(p,y)?p[y]:p[y]=f(y)}function o(y,f){this.h=f;for(var p=[],g=!0,d=y.length-1;0<=d;d--){var T=y[d]|0;g&&T==f||(p[d]=T,g=!1)}this.g=p}var a={};function l(y){return-128<=y&&128>y?s(y,function(f){return new o([f|0],0>f?-1:0)}):new o([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return v;if(0>y)return w(c(-y));for(var f=[],p=1,g=0;y>=p;g++)f[g]=y/p|0,p*=4294967296;return new o(f,0)}function m(y,f){if(y.length==0)throw Error("number format error: empty string");if(f=f||10,2>f||36<f)throw Error("radix out of range: "+f);if(y.charAt(0)=="-")return w(m(y.substring(1),f));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var p=c(Math.pow(f,8)),g=v,d=0;d<y.length;d+=8){var T=Math.min(8,y.length-d),u=parseInt(y.substring(d,d+T),f);8>T?(T=c(Math.pow(f,T)),g=g.j(T).add(c(u))):(g=g.j(p),g=g.add(c(u)))}return g}var v=l(0),S=l(1),E=l(16777216);n=o.prototype,n.m=function(){if(I(this))return-w(this).m();for(var y=0,f=1,p=0;p<this.g.length;p++){var g=this.i(p);y+=(0<=g?g:4294967296+g)*f,f*=4294967296}return y},n.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_(this))return"0";if(I(this))return"-"+w(this).toString(y);for(var f=c(Math.pow(y,6)),p=this,g="";;){var d=b(p,f).g;p=O(p,d.j(f));var T=((0<p.g.length?p.g[0]:p.h)>>>0).toString(y);if(p=d,_(p))return T+g;for(;6>T.length;)T="0"+T;g=T+g}},n.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function _(y){if(y.h!=0)return!1;for(var f=0;f<y.g.length;f++)if(y.g[f]!=0)return!1;return!0}function I(y){return y.h==-1}n.l=function(y){return y=O(this,y),I(y)?-1:_(y)?0:1};function w(y){for(var f=y.g.length,p=[],g=0;g<f;g++)p[g]=~y.g[g];return new o(p,~y.h).add(S)}n.abs=function(){return I(this)?w(this):this},n.add=function(y){for(var f=Math.max(this.g.length,y.g.length),p=[],g=0,d=0;d<=f;d++){var T=g+(this.i(d)&65535)+(y.i(d)&65535),u=(T>>>16)+(this.i(d)>>>16)+(y.i(d)>>>16);g=u>>>16,T&=65535,u&=65535,p[d]=u<<16|T}return new o(p,p[p.length-1]&-2147483648?-1:0)};function O(y,f){return y.add(w(f))}n.j=function(y){if(_(this)||_(y))return v;if(I(this))return I(y)?w(this).j(w(y)):w(w(this).j(y));if(I(y))return w(this.j(w(y)));if(0>this.l(E)&&0>y.l(E))return c(this.m()*y.m());for(var f=this.g.length+y.g.length,p=[],g=0;g<2*f;g++)p[g]=0;for(g=0;g<this.g.length;g++)for(var d=0;d<y.g.length;d++){var T=this.i(g)>>>16,u=this.i(g)&65535,h=y.i(d)>>>16,N=y.i(d)&65535;p[2*g+2*d]+=u*N,k(p,2*g+2*d),p[2*g+2*d+1]+=T*N,k(p,2*g+2*d+1),p[2*g+2*d+1]+=u*h,k(p,2*g+2*d+1),p[2*g+2*d+2]+=T*h,k(p,2*g+2*d+2)}for(g=0;g<f;g++)p[g]=p[2*g+1]<<16|p[2*g];for(g=f;g<2*f;g++)p[g]=0;return new o(p,0)};function k(y,f){for(;(y[f]&65535)!=y[f];)y[f+1]+=y[f]>>>16,y[f]&=65535,f++}function x(y,f){this.g=y,this.h=f}function b(y,f){if(_(f))throw Error("division by zero");if(_(y))return new x(v,v);if(I(y))return f=b(w(y),f),new x(w(f.g),w(f.h));if(I(f))return f=b(y,w(f)),new x(w(f.g),f.h);if(30<y.g.length){if(I(y)||I(f))throw Error("slowDivide_ only works with positive integers.");for(var p=S,g=f;0>=g.l(y);)p=q(p),g=q(g);var d=B(p,1),T=B(g,1);for(g=B(g,2),p=B(p,2);!_(g);){var u=T.add(g);0>=u.l(y)&&(d=d.add(p),T=u),g=B(g,1),p=B(p,1)}return f=O(y,d.j(f)),new x(d,f)}for(d=v;0<=y.l(f);){for(p=Math.max(1,Math.floor(y.m()/f.m())),g=Math.ceil(Math.log(p)/Math.LN2),g=48>=g?1:Math.pow(2,g-48),T=c(p),u=T.j(f);I(u)||0<u.l(y);)p-=g,T=c(p),u=T.j(f);_(T)&&(T=S),d=d.add(T),y=O(y,u)}return new x(d,y)}n.A=function(y){return b(this,y).h},n.and=function(y){for(var f=Math.max(this.g.length,y.g.length),p=[],g=0;g<f;g++)p[g]=this.i(g)&y.i(g);return new o(p,this.h&y.h)},n.or=function(y){for(var f=Math.max(this.g.length,y.g.length),p=[],g=0;g<f;g++)p[g]=this.i(g)|y.i(g);return new o(p,this.h|y.h)},n.xor=function(y){for(var f=Math.max(this.g.length,y.g.length),p=[],g=0;g<f;g++)p[g]=this.i(g)^y.i(g);return new o(p,this.h^y.h)};function q(y){for(var f=y.g.length+1,p=[],g=0;g<f;g++)p[g]=y.i(g)<<1|y.i(g-1)>>>31;return new o(p,y.h)}function B(y,f){var p=f>>5;f%=32;for(var g=y.g.length-p,d=[],T=0;T<g;T++)d[T]=0<f?y.i(T+p)>>>f|y.i(T+p+1)<<32-f:y.i(T+p);return new o(d,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Pu=Mu.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=m,oo=Mu.Integer=o}).apply(typeof xu<"u"?xu:typeof self<"u"?self:typeof window<"u"?window:{});var zc=$c(rm(),1),aw=$c(rl(),1);var im="@firebase/firestore",sm="4.7.3";var Se=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Se.UNAUTHENTICATED=new Se(null);Se.GOOGLE_CREDENTIALS=new Se("google-credentials-uid");Se.FIRST_PARTY=new Se("first-party-uid");Se.MOCK_USER=new Se("mock-user");var lw="10.14.0";var hr=lw;function cw(n){hr=n}function uw(n){return ow(n,{depth:100})}var cr=new fu("@firebase/firestore");function _t(n,...e){if(cr.logLevel<=ri.DEBUG){let t=e.map(Gc);cr.debug(`Firestore (${hr}): ${n}`,...t)}}function dm(n,...e){if(cr.logLevel<=ri.ERROR){let t=e.map(Gc);cr.error(`Firestore (${hr}): ${n}`,...t)}}function dw(n,...e){if(cr.logLevel<=ri.WARN){let t=e.map(Gc);cr.warn(`Firestore (${hr}): ${n}`,...t)}}function Gc(n){if(typeof n=="string")return n;try{return uw(n)}catch{return n}}function Fe(n="Unexpected state"){let e=`FIRESTORE (${hr}) INTERNAL ASSERTION FAILED: `+n;throw dm(e),new Error(e)}function En(n,e){n||Fe()}var ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Te=class extends du{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var _n=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Js=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ac=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Se.UNAUTHENTICATED))}shutdown(){}},Dc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Nc=class{constructor(e){this.authProvider=e,this.currentUser=Se.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){En(this.tokenListener===void 0);let r=this.tokenCounter,i=l=>this.tokenCounter!==r?(r=this.tokenCounter,t(l)):Promise.resolve(),s=new _n;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),s.resolve(),s=new _n,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>W(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),o())};this.authProvider.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.authProvider.getImmediate({optional:!0});l?a(l):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _n)}},0),o()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.tokenCounter!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(En(typeof r.accessToken=="string"),new Js(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let e=this.auth&&this.auth.getUid();return En(e===null||typeof e=="string"),new Se(e)}},Oc=class{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r,this.type="FirstParty",this.user=Se.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}},kc=class{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r}getToken(){return Promise.resolve(new Oc(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(Se.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mc=class{constructor(e){this.appCheckProvider=e,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(e,t){En(this.tokenListener===void 0);let r=s=>{s.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.latestAppCheckToken;return this.latestAppCheckToken=s.token,_t("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.tokenListener=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.appCheckProvider.getImmediate({optional:!0});s?i(s):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(En(typeof t.token=="string"),this.latestAppCheckToken=t.token,new xc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}};function hw(n){if(!n)return new Ac;switch(n.type){case"firstParty":return new kc(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Te(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function hm(n,e){return n<e?-1:n>e?1:0}var Pc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&Fe(),r===void 0?r=e.length-t:r>e.length-t&&Fe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ln=class n extends Pc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new Te(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}};var bn=class n{constructor(e){this.path=e}static fromPath(e){return new n(ln.fromString(e))}static fromName(e){return new n(ln.fromString(e).popFirst(5))}static empty(){return new n(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ln.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2===0}static fromSegments(e){return new n(new ln(e.slice()))}};function fw(n){return n.name==="IndexedDbTransactionError"}var JI=15*1e3,ZI=60*1e3;var pw="remoteDocuments";var fm="owner";var pm="mutationQueues";var mm="mutations";var gm="documentMutations",mw="remoteDocumentsV14";var ym="remoteDocumentGlobal";var vm="targets";var Tm="targetDocuments";var Sm="targetGlobal",Em="collectionParents";var _m="clientMetadata";var bm="bundles";var wm="namedQueries";var gw="indexConfiguration";var yw="indexState";var vw="indexEntries";var Cm="documentOverlays";var Tw="globals";var Sw=[pm,mm,gm,pw,vm,fm,Sm,Tm],Ew=Sw,_w=[...Ew,_m],bw=[..._w,ym],ww=[...bw,Em],Cw=[...ww,bm,wm],eR=[...Cw,Cm],Iw=[pm,mm,gm,mw,vm,fm,Sm,Tm,_m,ym,Em,bm,wm,Cm],Rw=Iw,Aw=[...Rw,gw,yw,vw];var tR=[...Aw,Tw];var ur=class n{constructor(e,t){this.comparator=e,this.root=t||Zr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lr(this.root,e,this.comparator,!1)}getReverseIterator(){return new lr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lr(this.root,e,this.comparator,!0)}},lr=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)this.isReverse?e=e.left:e=e.right;else if(s===0){this.nodeStack.push(e);break}else this.nodeStack.push(e),this.isReverse?e=e.right:e=e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zr=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return!t.left.isRed()&&!t.left.left.isRed()&&(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let i,s=this;if(r(t,s.key)<0)!s.left.isEmpty()&&!s.left.isRed()&&!s.left.left.isRed()&&(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),!s.right.isEmpty()&&!s.right.isRed()&&!s.right.left.isRed()&&(s=s.moveRedRight()),r(t,s.key)===0){if(s.right.isEmpty())return n.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();let t=this.left.check();if(t!==this.right.check())throw Fe();return t+(this.isRed()?0:1)}}return n.EMPTY=null,n.RED=!0,n.BLACK=!1,n})(),Lc=class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Zr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};Zr.EMPTY=new Lc;var Zs=class n{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(t!==void 0?r=this.data.getIteratorFrom(t):r=this.data.getIterator();r.hasNext();){let i=r.getNext();if(!e(i.key))return}}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eo(this.data.getIterator())}getIteratorFrom(e){return new eo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},eo=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Dw(n){return Buffer.from(n,"base64").toString("binary")}function Nw(n){return Buffer.from(n,"binary").toString("base64")}var dr=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=Dw(e);return new n(t)}static fromUint8Array(e){let t=Ow(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return Nw(this.binaryString)}toUint8Array(){return kw(this.binaryString)}approximateByteSize(){return this.binaryString.length*2}compareTo(e){return hm(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dr.EMPTY_BYTE_STRING=new dr("");function Ow(n){let e="";for(let t=0;t<n.length;++t)e+=String.fromCharCode(n[t]);return e}function kw(n){let e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}var xw=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mw(n){if(En(!!n),typeof n=="string"){let e=0,t=xw.exec(n);if(En(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}else{let e=ei(n.seconds),t=ei(n.nanos);return{seconds:e,nanos:t}}}function ei(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pw(n){return typeof n=="string"?dr.fromBase64String(n):dr.fromUint8Array(n)}var Fc="(default)",Bc=class n{constructor(e,t){this.projectId=e,this.database=t||Fc}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Fc}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};function Lw(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new Te(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bc(n.options.projectId,e)}function Fw(n){return n===0&&1/n===-1/0}var Im="__type__",Bw="__max__";var Rm="__vector__",Am="value";function qw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Im])===null||t===void 0?void 0:t.stringValue)===Rm}function Uw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Bw}var nR={mapValue:{fields:{[Im]:{stringValue:Rm},[Am]:{arrayValue:{}}}}};var rR=new ur(bn.comparator);var iR=new ur(bn.comparator);var sR=new ur(bn.comparator);var oR=new Zs(bn.comparator);var aR=new Zs(hm);var lR=new oo([4294967295,4294967295],0);var cR=(()=>{let n={};return n.asc="ASCENDING",n.desc="DESCENDING",n})(),uR=(()=>{let n={};return n["<"]="LESS_THAN",n["<="]="LESS_THAN_OR_EQUAL",n[">"]="GREATER_THAN",n[">="]="GREATER_THAN_OR_EQUAL",n["=="]="EQUAL",n["!="]="NOT_EQUAL",n["array-contains"]="ARRAY_CONTAINS",n.in="IN",n["not-in"]="NOT_IN",n["array-contains-any"]="ARRAY_CONTAINS_ANY",n})(),dR=(()=>{let n={};return n.and="AND",n.or="OR",n})();var Vw=5,zw=10,Gw=13,Rc=15,jw=20,Kw=25,$w=30,Ww=37,Hw=45,Qw=50,Yw=53,Xw=55,Jw=60,Zw=2,to=class{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,Vw);else if("booleanValue"in e)this.writeValueTypeLabel(t,zw),t.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(t,Rc),t.writeNumber(ei(e.integerValue));else if("doubleValue"in e){let r=ei(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,Gw):(this.writeValueTypeLabel(t,Rc),Fw(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,jw),typeof r=="string"&&(r=Mw(r)),t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0)}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,$w),t.writeBytes(Pw(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,Hw),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?Uw(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):qw(e)?this.writeIndexVector(e.mapValue,t):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):Fe()}writeIndexString(e,t){this.writeValueTypeLabel(t,Kw),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};this.writeValueTypeLabel(t,Xw);for(let i of Object.keys(r))this.writeIndexString(i,t),this.writeIndexValueAux(r[i],t)}writeIndexVector(e,t){var r,i;let s=e.fields||{};this.writeValueTypeLabel(t,Yw);let o=Am,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.writeValueTypeLabel(t,Rc),t.writeNumber(ei(a)),this.writeIndexString(o,t),this.writeIndexValueAux(s[o],t)}writeIndexArray(e,t){let r=e.values||[];this.writeValueTypeLabel(t,Qw);for(let i of r)this.writeIndexValueAux(i,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,Ww),bn.fromName(e).path.forEach(i=>{this.writeValueTypeLabel(t,Jw),this.writeUnlabeledIndexString(i,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(Zw)}};to.INSTANCE=new to;var hR=new Uint8Array(0);var Dm=-1,Nm=40*1024*1024,bt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};bt.DEFAULT_COLLECTION_PERCENTILE=10;bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3;bt.DEFAULT=new bt(Nm,bt.DEFAULT_COLLECTION_PERCENTILE,bt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);bt.DISABLED=new bt(Dm,0,0);var om=1*1024*1024,fR=1*60*1e3,pR=5*60*1e3;var mR=30*60*1e3;var gR=5*60*1e6;var eC="1.9.1";var yR=`gl-node/${process.versions.node} fire/${hr} grpc/${eC}`;var tC="ExponentialBackoff",nC=1e3,rC=1.5,iC=60*1e3,qc=class{constructor(e,t,r=nC,i=rC,s=iC){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=i,this.maxDelayMs=s,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,t-r);i>0&&_t(tC,`Backing off for ${i} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){this.timerPromise!==null&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){this.timerPromise!==null&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}};var vR=60*1e3,TR=10*1e3;var SR=10*1e3;var Uc=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function sC(n,e,t,r){if(e===!0&&r===!0)throw new Te(ke.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function oC(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=aC(n);return e?`a custom ${e} object`:"an object"}}else return typeof n=="function"?"a function":Fe()}function aC(n){return n.constructor?n.constructor.name:null}function lC(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Te(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=oC(n);throw new Te(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function cC(n,e){return n.timeoutSeconds===e.timeoutSeconds}function uC(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var dC="ComponentProvider",am=new Map;function hC(n){let e=am.get(n);e&&(_t(dC,"Removing Datastore"),am.delete(n),e.terminate())}var Om="firestore.googleapis.com",lm=!0,cm=5,um=30,fC=!0,no=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Om,this.ssl=lm}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:lm;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Nm;else{if(e.cacheSizeBytes!==Dm&&e.cacheSizeBytes<om)throw new Te(ke.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${om}`);this.cacheSizeBytes=e.cacheSizeBytes}sC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=fC:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),pC(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&cC(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}};function pC(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Te(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<cm)throw new Te(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is ${cm})`);if(n.timeoutSeconds>um)throw new Te(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is ${um})`)}}var ro=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new no({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new no(e),e.credentials!==void 0&&(this._authCredentials=hw(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return W(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return hC(this),Promise.resolve()}};function km(n,e,t,r={}){var i;n=lC(n,ro);let s=n._getSettings(),o=`${e}:${t}`;if(s.host!==Om&&s.host!==o&&dw("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Se.MOCK_USER;else{a=uu(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Te(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Se(c)}n._authCredentials=new Dc(new Js(a,l))}}var mC="AsyncQueue",io=class{constructor(e=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new qc(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=e}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new _n;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}retryNextOp(){return W(this,null,function*(){if(this.retryableOps.length!==0){try{yield this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(fw(e))_t(mC,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}})}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(r=>{this.failure=r,this.operationInProgress=!1;let i=gC(r);throw dm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.operationInProgress=!1,r))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let i=Uc.createAndSchedule(this,e,t,r,s=>this.removeDelayedOperation(s));return this.delayedOperations.push(i),i}verifyNotFailed(){this.failure&&Fe()}verifyOperationInProgress(){}drain(){return W(this,null,function*(){let e;do e=this.tail,yield e;while(e!==this.tail)})}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{this.delayedOperations.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.delayedOperations)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}};function gC(n){let e=n.message||"";return n.stack&&(n.stack.includes(n.message)?e=n.stack:e=n.message+`
`+n.stack),e}var Vc=class extends ro{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new io,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return W(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new io(e),this._firestoreClient=void 0,yield e}})}};function xm(n,e){let t=typeof n=="object"?n:yu(),r=typeof n=="string"?n:e||Fc,i=mu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=cu("firestore");s&&km(i,...s)}return i}function yC(n,e=!0){cw(gu),pu(new hu("firestore",(t,{instanceIdentifier:r,options:i})=>{let s=t.getProvider("app").getImmediate(),o=new Vc(new Nc(t.getProvider("auth-internal")),new Mc(t.getProvider("app-check-internal")),Lw(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),pr(im,sm,n),pr(im,sm,"esm2017")}var ER=new RegExp("[~\\*/\\[\\]]");yC("node");var ti=class{constructor(e){return e}},Mm="firestore",jc=class{constructor(){return Su(Mm)}};var Kc=new Wc("angularfire2.firestore-instances");function vC(n,e){let t=Tu(Mm,n,e);return t&&new ti(t)}function TC(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ti(r)}}var SC={provide:jc,deps:[[new fr,Kc]]},EC={provide:ti,useFactory:vC,deps:[[new fr,Kc],wu]};function Pm(n,...e){return pr("angularfire",vu.full,"fst"),Qc([EC,SC,{provide:Kc,useFactory:TC(n),multi:!0,deps:[Xc,Yc,_u,Cu,[new fr,Au],[new fr,Eu],...e]}])}var Lm=bu(xm,!0);var Fm={production:!1,firebase:{apiKey:"AIzaSyAriGd7FFltGfulGN9lKte7qNLXQIWs7HQ",authDomain:"cuac-design-3.firebaseapp.com",projectId:"cuac-design-3",storageBucket:"cuac-design-3.firebasestorage.app",messagingSenderId:"832788965739",appId:"1:832788965739:web:75bf12ccd8fac40c8d842e",measurementId:"G-WMX7W0G7B4"}};var Bm={providers:[lu(ku),su(),iu(),tu(nu()),Iu(()=>Ru(Fm.firebase)),Du(()=>Nu()),Pm(()=>Lm())]};var _C={providers:[ou()]},qm=eu(Bm,_C);var bC=()=>ru(Ou,qm),dD=bC;export{dD as a};
